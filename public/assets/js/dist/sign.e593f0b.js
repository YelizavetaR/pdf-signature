!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=356)}([function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"e",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return l});var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function a(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function l(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e}},function(e,t,n){(function(t){e.exports=t.jQuery=n(88)}).call(this,n(31))},function(e,t,n){"use strict";(function(e,i,r){n.d(t,"i",function(){return a}),n.d(t,"f",function(){return l}),n.d(t,"m",function(){return c}),n.d(t,"k",function(){return u}),n.d(t,"d",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"b",function(){return f}),n.d(t,"a",function(){return h}),n.d(t,"g",function(){return g}),n.d(t,"h",function(){return v}),n.d(t,"l",function(){return S}),n.d(t,"j",function(){return x}),n.d(t,"e",function(){return C});var o=n(3);n(22);function a(){return"[object process]"===Object.prototype.toString.call(void 0!==e?e:0)}var s={};function l(){return a()?i:"undefined"!=typeof window?window:"undefined"!=typeof self?self:s}function c(){var e=l(),t=e.crypto||e.msCrypto;if(void 0!==t&&t.getRandomValues){var n=new Uint16Array(8);t.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var i=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return i(n[0])+i(n[1])+i(n[2])+i(n[3])+i(n[4])+i(n[5])+i(n[6])+i(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function u(e){if(!e)return{};var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"",i=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+i}}function d(e){if(e.message)return e.message;if(e.exception&&e.exception.values&&e.exception.values[0]){var t=e.exception.values[0];return t.type&&t.value?t.type+": "+t.value:t.type||t.value||e.event_id||"<unknown>"}return e.event_id||"<unknown>"}function p(e){var t=l();if(!("console"in t))return e();var n=t.console,i={};["debug","info","warn","error","log","assert"].forEach(function(e){e in t.console&&n[e].__sentry_original__&&(i[e]=n[e],n[e]=n[e].__sentry_original__)});var r=e();return Object.keys(i).forEach(function(e){n[e]=i[e]}),r}function f(e,t,n){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].value=e.exception.values[0].value||t||"",e.exception.values[0].type=e.exception.values[0].type||n||"Error"}function h(e,t){void 0===t&&(t={});try{e.exception.values[0].mechanism=e.exception.values[0].mechanism||{},Object.keys(t).forEach(function(n){e.exception.values[0].mechanism[n]=t[n]})}catch(e){}}function g(){try{return document.location.href}catch(e){return""}}function v(e){try{for(var t=e,n=[],i=0,r=0,o=" > ".length,a=void 0;t&&i++<5&&!("html"===(a=m(t))||i>1&&r+n.length*o+a.length>=80);)n.push(a),r+=a.length,t=t.parentNode;return n.reverse().join(" > ")}catch(e){return"<unknown>"}}function m(e){var t,n,i,r,a,s=e,l=[];if(!s||!s.tagName)return"";if(l.push(s.tagName.toLowerCase()),s.id&&l.push("#"+s.id),(t=s.className)&&Object(o.k)(t))for(n=t.split(/\s+/),a=0;a<n.length;a++)l.push("."+n[a]);var c=["type","name","title","alt"];for(a=0;a<c.length;a++)i=c[a],(r=s.getAttribute(i))&&l.push("["+i+'="'+r+'"]');return l.join("")}var y=Date.now(),_=0,b={now:function(){var e=Date.now()-y;return e<_&&(e=_),_=e,e},timeOrigin:y},w=function(){if(a())try{return(e="perf_hooks",r.require(e)).performance}catch(e){return b}var e;return l().performance&&void 0===performance.timeOrigin&&(performance.timeOrigin=performance.timing&&performance.timing.navigationStart||y),l().performance||b}();function S(){return(w.timeOrigin+w.now())/1e3}var E=6e4;function x(e,t){if(!t)return E;var n=parseInt(""+t,10);if(!isNaN(n))return 1e3*n;var i=Date.parse(""+t);return isNaN(i)?E:i-e}var k="<anonymous>";function C(e){try{return e&&"function"==typeof e&&e.name||k}catch(e){return k}}}).call(this,n(97),n(31),n(98)(e))},function(e,t,n){"use strict";function i(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return g(e,Error)}}function r(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)}function o(e){return"[object DOMError]"===Object.prototype.toString.call(e)}function a(e){return"[object DOMException]"===Object.prototype.toString.call(e)}function s(e){return"[object String]"===Object.prototype.toString.call(e)}function l(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function c(e){return"[object Object]"===Object.prototype.toString.call(e)}function u(e){return"undefined"!=typeof Event&&g(e,Event)}function d(e){return"undefined"!=typeof Element&&g(e,Element)}function p(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function f(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function h(e){return c(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function g(e,t){try{return e instanceof t}catch(e){return!1}}n.d(t,"d",function(){return i}),n.d(t,"e",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a}),n.d(t,"k",function(){return s}),n.d(t,"i",function(){return l}),n.d(t,"h",function(){return c}),n.d(t,"f",function(){return u}),n.d(t,"c",function(){return d}),n.d(t,"j",function(){return p}),n.d(t,"m",function(){return f}),n.d(t,"l",function(){return h}),n.d(t,"g",function(){return g})},function(e,t,n){"use strict";var i={};n.r(i),n.d(i,"FunctionToString",function(){return s}),n.d(i,"InboundFilters",function(){return g});var r,o=n(8),a=n(13),s=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){r=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.__sentry_original__||this;return r.apply(n,e)}},e.id="FunctionToString",e}(),l=n(0),c=n(21),u=n(5),d=n(11),p=n(2),f=n(22),h=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],g=function(){function e(t){void 0===t&&(t={}),this._options=t,this.name=e.id}return e.prototype.setupOnce=function(){Object(c.b)(function(t){var n=Object(u.b)();if(!n)return t;var i=n.getIntegration(e);if(i){var r=n.getClient(),o=r?r.getOptions():{},a=i._mergeOptions(o);if(i._shouldDropEvent(t,a))return null}return t})},e.prototype._shouldDropEvent=function(e,t){return this._isSentryError(e,t)?(d.a.warn("Event dropped due to being internal Sentry Error.\nEvent: "+Object(p.d)(e)),!0):this._isIgnoredError(e,t)?(d.a.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+Object(p.d)(e)),!0):this._isBlacklistedUrl(e,t)?(d.a.warn("Event dropped due to being matched by `blacklistUrls` option.\nEvent: "+Object(p.d)(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0):!this._isWhitelistedUrl(e,t)&&(d.a.warn("Event dropped due to not being matched by `whitelistUrls` option.\nEvent: "+Object(p.d)(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0)},e.prototype._isSentryError=function(e,t){if(void 0===t&&(t={}),!t.ignoreInternal)return!1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&"SentryError"===e.exception.values[0].type||!1}catch(e){return!1}},e.prototype._isIgnoredError=function(e,t){return void 0===t&&(t={}),!(!t.ignoreErrors||!t.ignoreErrors.length)&&this._getPossibleEventMessages(e).some(function(e){return t.ignoreErrors.some(function(t){return Object(f.a)(e,t)})})},e.prototype._isBlacklistedUrl=function(e,t){if(void 0===t&&(t={}),!t.blacklistUrls||!t.blacklistUrls.length)return!1;var n=this._getEventFilterUrl(e);return!!n&&t.blacklistUrls.some(function(e){return Object(f.a)(n,e)})},e.prototype._isWhitelistedUrl=function(e,t){if(void 0===t&&(t={}),!t.whitelistUrls||!t.whitelistUrls.length)return!0;var n=this._getEventFilterUrl(e);return!n||t.whitelistUrls.some(function(e){return Object(f.a)(n,e)})},e.prototype._mergeOptions=function(e){return void 0===e&&(e={}),{blacklistUrls:l.d(this._options.blacklistUrls||[],e.blacklistUrls||[]),ignoreErrors:l.d(this._options.ignoreErrors||[],e.ignoreErrors||[],h),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal,whitelistUrls:l.d(this._options.whitelistUrls||[],e.whitelistUrls||[])}},e.prototype._getPossibleEventMessages=function(e){if(e.message)return[e.message];if(e.exception)try{var t=e.exception.values&&e.exception.values[0]||{},n=t.type,i=void 0===n?"":n,r=t.value,o=void 0===r?"":r;return[""+o,i+": "+o]}catch(t){return d.a.error("Cannot extract message for event "+Object(p.d)(e)),[]}return[]},e.prototype._getEventFilterUrl=function(e){try{if(e.stacktrace){var t=e.stacktrace.frames;return t&&t[t.length-1].filename||null}if(e.exception){var n=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return n&&n[n.length-1].filename||null}return null}catch(t){return d.a.error("Cannot extract url for event "+Object(p.d)(e)),null}},e.id="InboundFilters",e}();n.d(t,"d",function(){return o.a}),n.d(t,"g",function(){return o.c}),n.d(t,"f",function(){return o.b}),n.d(t,"h",function(){return o.d}),n.d(t,"i",function(){return o.e}),n.d(t,"r",function(){return o.l}),n.d(t,"l",function(){return o.f}),n.d(t,"m",function(){return o.g}),n.d(t,"n",function(){return o.h}),n.d(t,"o",function(){return o.i}),n.d(t,"p",function(){return o.j}),n.d(t,"q",function(){return o.k}),n.d(t,"s",function(){return o.m}),n.d(t,"e",function(){return a.c}),n.d(t,"j",function(){return a.d}),n.d(t,"k",function(){return a.e}),n.d(t,"a",function(){return a.a}),n.d(t,"c",function(){return a.b}),n.d(t,"b",function(){return i})},function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return f});var i=n(0),r=n(2),o=n(11),a=n(21),s=3,l=function(){function e(e,t,n){void 0===t&&(t=new a.a),void 0===n&&(n=s),this._version=n,this._stack=[],this._stack.push({client:e,scope:t})}return e.prototype._invokeClient=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.getStackTop();o&&o.client&&o.client[e]&&(t=o.client)[e].apply(t,i.d(n,[o.scope]))},e.prototype.isOlderThan=function(e){return this._version<e},e.prototype.bindClient=function(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()},e.prototype.pushScope=function(){var e=this.getStack(),t=e.length>0?e[e.length-1].scope:void 0,n=a.a.clone(t);return this.getStack().push({client:this.getClient(),scope:n}),n},e.prototype.popScope=function(){return void 0!==this.getStack().pop()},e.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},e.prototype.getClient=function(){return this.getStackTop().client},e.prototype.getScope=function(){return this.getStackTop().scope},e.prototype.getStack=function(){return this._stack},e.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},e.prototype.captureException=function(e,t){var n=this._lastEventId=Object(r.m)(),o=t;if(!t){var a=void 0;try{throw new Error("Sentry syntheticException")}catch(e){a=e}o={originalException:e,syntheticException:a}}return this._invokeClient("captureException",e,i.a({},o,{event_id:n})),n},e.prototype.captureMessage=function(e,t,n){var o=this._lastEventId=Object(r.m)(),a=n;if(!n){var s=void 0;try{throw new Error(e)}catch(e){s=e}a={originalException:e,syntheticException:s}}return this._invokeClient("captureMessage",e,t,i.a({},a,{event_id:o})),o},e.prototype.captureEvent=function(e,t){var n=this._lastEventId=Object(r.m)();return this._invokeClient("captureEvent",e,i.a({},t,{event_id:n})),n},e.prototype.lastEventId=function(){return this._lastEventId},e.prototype.addBreadcrumb=function(e,t){var n=this.getStackTop();if(n.scope&&n.client){var o=n.client.getOptions&&n.client.getOptions()||{},a=o.beforeBreadcrumb,s=void 0===a?null:a,l=o.maxBreadcrumbs,c=void 0===l?100:l;if(!(c<=0)){var u=Object(r.l)(),d=i.a({timestamp:u},e),p=s?Object(r.c)(function(){return s(d,t)}):d;null!==p&&n.scope.addBreadcrumb(p,Math.min(c,100))}}},e.prototype.setUser=function(e){var t=this.getStackTop();t.scope&&t.scope.setUser(e)},e.prototype.setTags=function(e){var t=this.getStackTop();t.scope&&t.scope.setTags(e)},e.prototype.setExtras=function(e){var t=this.getStackTop();t.scope&&t.scope.setExtras(e)},e.prototype.setTag=function(e,t){var n=this.getStackTop();n.scope&&n.scope.setTag(e,t)},e.prototype.setExtra=function(e,t){var n=this.getStackTop();n.scope&&n.scope.setExtra(e,t)},e.prototype.setContext=function(e,t){var n=this.getStackTop();n.scope&&n.scope.setContext(e,t)},e.prototype.configureScope=function(e){var t=this.getStackTop();t.scope&&t.client&&e(t.scope)},e.prototype.run=function(e){var t=u(this);try{e(this)}finally{u(t)}},e.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return o.a.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},e.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},e.prototype.startTransaction=function(e){return this._callExtensionMethod("startTransaction",e)},e.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},e.prototype._callExtensionMethod=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=c().__SENTRY__;if(i&&i.extensions&&"function"==typeof i.extensions[e])return i.extensions[e].apply(this,t);o.a.warn("Extension method "+e+" couldn't be found, doing nothing.")},e}();function c(){var e=Object(r.f)();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function u(e){var t=c(),n=f(t);return h(t,e),n}function d(){var e=c();return p(e)&&!f(e).isOlderThan(s)||h(e,new l),Object(r.i)()?function(e){try{var t=c(),n=t.__SENTRY__;if(!n||!n.extensions||!n.extensions.domain)return f(e);var i=n.extensions.domain,r=i.active;if(!r)return f(e);if(!p(r)||f(r).isOlderThan(s)){var o=f(e).getStackTop();h(r,new l(o.client,a.a.clone(o.scope)))}return f(r)}catch(t){return f(e)}}(e):f(e)}function p(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function f(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub?e.__SENTRY__.hub:(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=new l,e.__SENTRY__.hub)}function h(e,t){return!!e&&(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=t,!0)}},,function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return s}),n.d(t,"e",function(){return l}),n.d(t,"d",function(){return d}),n.d(t,"c",function(){return h}),n.d(t,"a",function(){return g});n(0);var i=n(3),r=n(66),o=n(2),a=n(22);function s(e,t,n){if(t in e){var i=e[t],r=n(i);if("function"==typeof r)try{r.prototype=r.prototype||{},Object.defineProperties(r,{__sentry_original__:{enumerable:!1,value:i}})}catch(e){}e[t]=r}}function l(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}function c(e){if(Object(i.d)(e)){var t=e,n={message:t.message,name:t.name,stack:t.stack};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}if(Object(i.f)(e)){var a=e,s={};s.type=a.type;try{s.target=Object(i.c)(a.target)?Object(o.h)(a.target):Object.prototype.toString.call(a.target)}catch(e){s.target="<unknown>"}try{s.currentTarget=Object(i.c)(a.currentTarget)?Object(o.h)(a.currentTarget):Object.prototype.toString.call(a.currentTarget)}catch(e){s.currentTarget="<unknown>"}for(var r in"undefined"!=typeof CustomEvent&&Object(i.g)(e,CustomEvent)&&(s.detail=a.detail),a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a);return s}return e}function u(e){return function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(e))}function d(e,t,n){void 0===t&&(t=3),void 0===n&&(n=102400);var i=h(e,t);return u(i)>n?d(e,t-1,n):i}function p(t,n){return"domain"===n&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===n?"[DomainEmitter]":void 0!==e&&t===e?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":Object(i.l)(t)?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?"[Function: "+Object(o.e)(t)+"]":t}function f(e,t,n,o){if(void 0===n&&(n=1/0),void 0===o&&(o=new r.a),0===n)return function(e){var t=Object.prototype.toString.call(e);if("string"==typeof e)return e;if("[object Object]"===t)return"[Object]";if("[object Array]"===t)return"[Array]";var n=p(e);return Object(i.i)(n)?n:t}(t);if(null!==t&&void 0!==t&&"function"==typeof t.toJSON)return t.toJSON();var a=p(t,e);if(Object(i.i)(a))return a;var s=c(t),l=Array.isArray(t)?[]:{};if(o.memoize(t))return"[Circular ~]";for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(l[u]=f(u,s[u],n-1,o));return o.unmemoize(t),l}function h(e,t){try{return JSON.parse(JSON.stringify(e,function(e,n){return f(e,n,t)}))}catch(e){return"**non-serializable**"}}function g(e,t){void 0===t&&(t=40);var n=Object.keys(c(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Object(a.d)(n[0],t);for(var i=n.length;i>0;i--){var r=n.slice(0,i).join(", ");if(!(r.length>t))return i===n.length?r:Object(a.d)(r,t)}return""}}).call(this,n(31))},function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"e",function(){return c}),n.d(t,"a",function(){return u}),n.d(t,"f",function(){return d}),n.d(t,"h",function(){return p}),n.d(t,"j",function(){return f}),n.d(t,"g",function(){return h}),n.d(t,"i",function(){return g}),n.d(t,"k",function(){return v}),n.d(t,"m",function(){return m}),n.d(t,"l",function(){return y});var i=n(0),r=n(5);function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=Object(r.b)();if(o&&o[e])return o[e].apply(o,i.d(t));throw new Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}function a(e,t){var n;try{throw new Error("Sentry syntheticException")}catch(e){n=e}return o("captureException",e,{captureContext:t,originalException:e,syntheticException:n})}function s(e,t){var n;try{throw new Error(e)}catch(e){n=e}var r="string"!=typeof t?{captureContext:t}:void 0;return o("captureMessage",e,"string"==typeof t?t:void 0,i.a({originalException:e,syntheticException:n},r))}function l(e){return o("captureEvent",e)}function c(e){o("configureScope",e)}function u(e){o("addBreadcrumb",e)}function d(e,t){o("setContext",e,t)}function p(e){o("setExtras",e)}function f(e){o("setTags",e)}function h(e,t){o("setExtra",e,t)}function g(e,t){o("setTag",e,t)}function v(e){o("setUser",e)}function m(e){o("withScope",e)}function y(e){return o("startTransaction",i.a({},e))}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(77),r=function(){function t(){}return t.t=function(e,t){var n="iloveLang";return t&&t.source&&(n=t.source),window[n]&&window[n][e]&&(e=window[n][e]),e=this.tr(e,t)},t.tr=function(t,n){return null!=n&&e.each(n,function(e,n){t=(t=t.replace("${"+e+"}",n)).replace("{"+e+"}",n)}),t},t.w=function(n,i){void 0===n&&(n="translate"),e("."+n).each(function(){var n=e(this).html();e(this).html(t.t(n,i))}),e("#"+n).each(function(){var n=e(this).html();e(this).html(t.t(n,i))})},t.fontsForWritingSystem=function(e){switch(e){case"latin":return["arial","verdana","courier","comic","times-new-roman","impact","arial-unicode-ms"];case"indic":return["lohit-marathi","lohit-devanagari","arial-unicode-ms"];case"unknown":default:return["arial-unicode-ms"]}},t.getFontsInfo=function(){var e=window.fonts;if(!e)throw"[Lang Service] You have to load the fonts information from the backend to use this method";return e},t.loadAllFonts=function(){for(var e in window.fonts)window.fonts.hasOwnProperty(e)&&"arial"!=e&&this.loadFont(e)},t.loadFont=function(e){e in this.loadedFonts||(i.lazyloadCss("/font/"+e+".css"),this.loadedFonts[e]=!0)},t.hasHindiCharacters=function(e){return e.split("").filter(function(e){var t=e.charCodeAt();return t>=2309&&t<=2361}).length>0},t.hasJapanCharacters=function(e){return/[\u3000-\u303f]|[\u3040-\u309f]|[\u30a0-\u30ff]|[\uff00-\uff9f]|[\u4e00-\u9faf]|[\u3400-\u4dbf]/.test(e)},t.hasChineseCharacters=function(e){return/[\u4e00-\u9fff]|[\u3400-\u4dbf]|[\uf900-\ufaff]|[\u3300-\u33ff]|[\ufe30-\ufe4f]|[\uf900-\ufaff]/.test(e)},t.hasKoreanCharacters=function(e){return/[\uac00-\uafff]|[\ub000-\ubfff]/.test(e)},t.hasArabicCharacters=function(e){return/[\u0600-\u06FF]|[\u0750-\u077F]/.test(e)},t.hasGreekCharacters=function(e){return/[\u0370-\u03FF]|[\u1F00-\u1FFF]/.test(e)},t.hasCyrillicCharacters=function(e){return/[\u0400-\u04FF]|[\u0500-\u052F]/.test(e)},t.hasCommonLatinCharacters=function(e){return!1},t.keyCodeToWritingSystem=function(e){for(var t in this.writingSystemCharacterRanges)for(var n=this.writingSystemCharacterRanges[t],i=0;i<n.length;i++){var r=n[i],o=r[0],a=r[1];if(e>=o&&e<=a)return t}return"unknown"},t.detectWritingSystems=function(e){if(0===e.length)return[];for(var t={},n=0;n<e.length;n++){t[this.keyCodeToWritingSystem(e.charCodeAt(n))]=!0}return Object.keys(t)},t.loadedFonts={},t.writingSystemCharacterRanges={latin:[[0,127],[128,255],[256,383],[384,591],[7680,7935],[9312,9471],[11360,11391],[42784,43007],[64256,64335],[65104,65135]],indic:[[2304,2431],[43232,43263]]},t}();t.Lang=r}).call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e,t){void 0===t&&(t=null),this.name=e,this.detail=t}}();t.IloveEvent=i},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(2),r=Object(i.f)(),o="Sentry Logger ",a=function(){function e(){this._enabled=!1}return e.prototype.disable=function(){this._enabled=!1},e.prototype.enable=function(){this._enabled=!0},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&Object(i.c)(function(){r.console.log(o+"[Log]: "+e.join(" "))})},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&Object(i.c)(function(){r.console.warn(o+"[Warn]: "+e.join(" "))})},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&Object(i.c)(function(){r.console.error(o+"[Error]: "+e.join(" "))})},e}();r.__SENTRY__=r.__SENTRY__||{};var s=r.__SENTRY__.logger||(r.__SENTRY__.logger=new a)},function(e,t,n){"use strict";var i;n.r(t),function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Debug=2]="Debug",e[e.Verbose=3]="Verbose"}(i||(i={}));var r=n(37),o=n(24);n.d(t,"LogLevel",function(){return i}),n.d(t,"Severity",function(){return r.a}),n.d(t,"Status",function(){return o.a})},function(e,t,n){"use strict";var i=n(21);n.d(t,"c",function(){return i.b}),n.d(t,"b",function(){return i.a});var r=n(5);n.d(t,"d",function(){return r.b}),n.d(t,"e",function(){return r.c}),n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l});var i=n(0),r=n(8),o=n(2),a=0;function s(){return a>0}function l(e,t,n){if(void 0===t&&(t={}),"function"!=typeof e)return e;try{if(e.__sentry__)return e;if(e.__sentry_wrapped__)return e.__sentry_wrapped__}catch(t){return e}var s=function(){var s=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var c=s.map(function(e){return l(e,t)});return e.handleEvent?e.handleEvent.apply(this,c):e.apply(this,c)}catch(e){throw a+=1,setTimeout(function(){a-=1}),Object(r.m)(function(n){n.addEventProcessor(function(e){var n=i.a({},e);return t.mechanism&&(Object(o.b)(n,void 0,void 0),Object(o.a)(n,t.mechanism)),n.extra=i.a({},n.extra,{arguments:s}),n}),Object(r.c)(e)}),e}};try{for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&(s[c]=e[c])}catch(e){}e.prototype=e.prototype||{},s.prototype=e.prototype,Object.defineProperty(e,"__sentry_wrapped__",{enumerable:!1,value:s}),Object.defineProperties(s,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:e}});try{Object.getOwnPropertyDescriptor(s,"name").configurable&&Object.defineProperty(s,"name",{get:function(){return e.name}})}catch(e){}return s}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i,r=n(3);!function(e){e.PENDING="PENDING",e.RESOLVED="RESOLVED",e.REJECTED="REJECTED"}(i||(i={}));var o=function(){function e(e){var t=this;this._state=i.PENDING,this._handlers=[],this._resolve=function(e){t._setResult(i.RESOLVED,e)},this._reject=function(e){t._setResult(i.REJECTED,e)},this._setResult=function(e,n){t._state===i.PENDING&&(Object(r.m)(n)?n.then(t._resolve,t._reject):(t._state=e,t._value=n,t._executeHandlers()))},this._attachHandler=function(e){t._handlers=t._handlers.concat(e),t._executeHandlers()},this._executeHandlers=function(){if(t._state!==i.PENDING){var e=t._handlers.slice();t._handlers=[],e.forEach(function(e){e.done||(t._state===i.RESOLVED&&e.onfulfilled&&e.onfulfilled(t._value),t._state===i.REJECTED&&e.onrejected&&e.onrejected(t._value),e.done=!0)})}};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}return e.prototype.toString=function(){return"[object SyncPromise]"},e.resolve=function(t){return new e(function(e){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.all=function(t){return new e(function(n,i){if(Array.isArray(t))if(0!==t.length){var r=t.length,o=[];t.forEach(function(t,a){e.resolve(t).then(function(e){o[a]=e,0===(r-=1)&&n(o)}).then(null,i)})}else n([]);else i(new TypeError("Promise.all requires an array as input."))})},e.prototype.then=function(t,n){var i=this;return new e(function(e,r){i._attachHandler({done:!1,onfulfilled:function(n){if(t)try{return void e(t(n))}catch(e){return void r(e)}else e(n)},onrejected:function(t){if(n)try{return void e(n(t))}catch(e){return void r(e)}else r(t)}})})},e.prototype.catch=function(e){return this.then(function(e){return e},e)},e.prototype.finally=function(t){var n=this;return new e(function(e,i){var r,o;return n.then(function(e){o=!1,r=e,t&&t()},function(e){o=!0,r=e,t&&t()}).then(function(){o?i(r):e(r)})})},e}()},function(e,t,n){"use strict";(function(e){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function t(e){void 0===e&&(e={}),this.loginUrl="auth",this.registerUrl="signup",this.sendResetPasswordEmailUrl="login/forgetpassword",Object.assign(this,e);var t="en-US"==window.lang?"":"/"+window.lang;this.domain=window.location.hostname+t}return Object.defineProperty(t,"userType",{get:function(){return t.isPremium()?"premium":t.isUser()?"user":"guest"},enumerable:!0,configurable:!0}),t.hasSubscription=function(){var e=window.userModel;return"object"==typeof e&&null!=e&&null!=e.current_subscription},t.prototype.login=function(t){var n="//"+this.domain+"/"+this.loginUrl;return new Promise(function(i,r){e.post(n,t,function(e){window.ilovepdfConfig&&(window.ilovepdfConfig.fileLimits=e.user.limits,window.ilovepdfConfig.userToken=e.token),i(e)}).fail(r)})},t.prototype.register=function(t){var n="//"+this.domain+"/"+this.registerUrl;return new Promise(function(i,r){e.post(n,t,function(e){i(e)}).fail(r)})},t.prototype.sendResetPasswordEmail=function(t){var n="//"+this.domain+"/"+this.sendResetPasswordEmailUrl;return new Promise(function(i,r){e.post(n,t,function(e){i(e)}).fail(r)})},t.isLoggedIn=function(){return!!window.userModel},t.get=function(){return window.userModel},t.set=function(e){window.userModel=e},t.logout=function(){document.location.href=e(".logout").attr("href")},t.isUser=function(){var e=t.get();return"object"==typeof e&&null!=e},t.isPremium=function(){var e=window.userModel;return"object"==typeof e&&null!=e?e.premium:"object"==typeof e&&null!=e&&e.premium},t.canDoTrial=function(){var e=window.userModel;return"object"==typeof e&&null!=e?e.can_trial:!!window.uct},t.isRealPremium=function(){var e=window.userModel;return"object"==typeof e&&null!=e?e.premium:"object"==typeof e&&null!=e&&e.premium},t.refresh=function(e){return void 0===e&&(e=null),n(this,void 0,void 0,function(){var n,r,o,a;return i(this,function(i){switch(i.label){case 0:return[4,fetch(e?"/user/info/"+e:"/user/info")];case 1:return n=i.sent(),a=(o=JSON).parse,[4,n.json()];case 2:return r=a.apply(o,[i.sent()]),t.set(r.user),[2]}})})},t.isTempPremium=function(){return"premium"===window.ilovepdfConfig.levelTemp},t.removeAds=function(){var e=document.getElementsByClassName("add");e&&Array.from(e).forEach(function(e){e.remove()})},t.updateUser=function(e){window.userModel=e,window.ilovepdfConfig&&(window.ilovepdfConfig.user=e),1==t.isRealPremium()&&t.removeAds()},t}();t.UserModel=r}).call(this,n(1))},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n(12),o=n(4),a=n(42),s=n(18),l=n(30),c=n(2),u=n(44),d=n(55);n.d(t,"Integrations",function(){return h}),n.d(t,"Severity",function(){return r.Severity}),n.d(t,"Status",function(){return r.Status}),n.d(t,"addGlobalEventProcessor",function(){return o.e}),n.d(t,"addBreadcrumb",function(){return o.d}),n.d(t,"captureException",function(){return o.g}),n.d(t,"captureEvent",function(){return o.f}),n.d(t,"captureMessage",function(){return o.h}),n.d(t,"configureScope",function(){return o.i}),n.d(t,"getHubFromCarrier",function(){return o.k}),n.d(t,"getCurrentHub",function(){return o.j}),n.d(t,"Hub",function(){return o.a}),n.d(t,"Scope",function(){return o.c}),n.d(t,"startTransaction",function(){return o.r}),n.d(t,"setContext",function(){return o.l}),n.d(t,"setExtra",function(){return o.m}),n.d(t,"setExtras",function(){return o.n}),n.d(t,"setTag",function(){return o.o}),n.d(t,"setTags",function(){return o.p}),n.d(t,"setUser",function(){return o.q}),n.d(t,"withScope",function(){return o.s}),n.d(t,"BrowserClient",function(){return a.a}),n.d(t,"defaultIntegrations",function(){return s.b}),n.d(t,"forceLoad",function(){return s.d}),n.d(t,"init",function(){return s.e}),n.d(t,"lastEventId",function(){return s.f}),n.d(t,"onLoad",function(){return s.g}),n.d(t,"showReportDialog",function(){return s.h}),n.d(t,"flush",function(){return s.c}),n.d(t,"close",function(){return s.a}),n.d(t,"wrap",function(){return s.i}),n.d(t,"SDK_NAME",function(){return l.a}),n.d(t,"SDK_VERSION",function(){return l.b}),n.d(t,"Transports",function(){return d});var p={},f=Object(c.f)();f.Sentry&&f.Sentry.Integrations&&(p=f.Sentry.Integrations);var h=i.a({},p,o.b,u)},function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"e",function(){return v}),n.d(t,"h",function(){return m}),n.d(t,"f",function(){return y}),n.d(t,"d",function(){return _}),n.d(t,"g",function(){return b}),n.d(t,"c",function(){return w}),n.d(t,"a",function(){return S}),n.d(t,"i",function(){return E});var i=n(4),r=n(46),o=n(5),a=n(2),s=n(15),l=n(42),c=n(14),u=n(51),d=n(50),p=n(52),f=n(53),h=n(54),g=[new i.b.InboundFilters,new i.b.FunctionToString,new u.a,new d.a,new p.a,new f.a,new h.a];function v(e){if(void 0===e&&(e={}),void 0===e.defaultIntegrations&&(e.defaultIntegrations=g),void 0===e.release){var t=Object(a.f)();t.SENTRY_RELEASE&&t.SENTRY_RELEASE.id&&(e.release=t.SENTRY_RELEASE.id)}Object(r.a)(l.a,e)}function m(e){void 0===e&&(e={}),e.eventId||(e.eventId=Object(o.b)().lastEventId());var t=Object(o.b)().getClient();t&&t.showReportDialog(e)}function y(){return Object(o.b)().lastEventId()}function _(){}function b(e){e()}function w(e){var t=Object(o.b)().getClient();return t?t.flush(e):s.a.reject(!1)}function S(e){var t=Object(o.b)().getClient();return t?t.close(e):s.a.reject(!1)}function E(e){return Object(c.b)(e)()}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),r=function(){function t(){}return t.bytesToSize=function(e){if(0==e)return"0 Byte";var t=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,t)).toFixed(2)+" "+["Bytes","KB","MB","GB","TB"][t]},t.mbytesToSize=function(e){return t.bytesToSize(1e6*e)},t.convertPointsToPixels=function(e){return e*(1+1/3)},t.strCapitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.isRTL=function(){return e("body").hasClass("rtl")},t.isTextRTL=function(e){return new RegExp("^[^A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜﷾-﹯﻽-￿]*[֑-߿יִ-﷽ﹰ-ﻼ]").test(e)},Object.defineProperty(t,"textDirection",{get:function(){return t.isRTL()?"right":"left"},enumerable:!0,configurable:!0}),t.getClosestNumber=function(e,t){for(var n=Math.abs(t[0]-e),i=0,r=1;r<t.length;r++){var o=Math.abs(t[r]-e);o<n&&(i=r,n=o)}return t[i]},t.modalView=function(e){var n='<div class="modal fade" id="'+e.id+'" aria-labelledby="'+e.id+'Modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content">';return n="title"in e?n+'<div class="modal-header"><h4 class="modal-title">'+e.title+'</h4><button type="button" class="close" data-dismiss="modal">'+t.svgClose()+"</button></div>":n+'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close">'+t.svgClose()+"</button></div>","content"in e?n=n+'<div class="modal-body">'+e.content+"</div>":n+='<div class="modal-body"></div>',"btn"in e&&(n=n+'<div class="modal-footer"><button type="button" class="btn btn-link" data-dismiss="modal">'+e.btn+"</button></div>"),n+="</div></div></div>"},t.modalViewOk=function(e){return e.btn=i.Lang.t("Ok"),t.modalView(e)},t.setInputCursorAtTheEnd=function(e){var t=e.val().length;e.focus(),e[0].setSelectionRange(t,t)},t.svgClose=function(){return t.svgRemove(12,12)},t.svgRotate=function(e,t){return void 0===e&&(e=14),void 0===t&&(t=16),'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+t+'" viewBox="0 0 14 16"><path d="M11.328 6.364l1.24-1.2c.79.98 1.283 2.113 1.433 3.288h-1.775c-.123-.735-.43-1.454-.896-2.088zm.896 3.778H14c-.15 1.175-.633 2.308-1.424 3.288l-1.24-1.2c.457-.634.765-1.344.888-2.088zm-.888 4.497C10.318 15.4 9.13 15.856 7.9 16v-1.716a5.31 5.31 0 0 0 2.162-.871l1.266 1.226zM6.152 2.595V0l4 3.846-4 3.76V4.302c-2.496.406-4.394 2.485-4.394 4.995s1.898 4.59 4.394 4.995V16C2.68 15.586 0 12.746 0 9.297s2.68-6.29 6.152-6.703z" fill="#383E45" fill-rule="evenodd"/></svg>'},t.svgRemove=function(e,t){return void 0===e&&(e=12),void 0===t&&(t=12),'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+t+'" viewBox="0 0 12 12"><polygon fill="#383E45" fill-rule="evenodd" points="12 1.208 10.79 0 6 4.792 1.21 0 0 1.208 4.79 6 0 10.792 1.21 12 6 7.208 10.79 12 12 10.792 7.21 6"/></svg>'},t.svgArrowRight=function(e,t){return void 0===e&&(e=12),void 0===t&&(t=12),'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+t+'" viewBox="0 0 448 512"><path d="M313.94 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.94v46.06c0 21.382 25.85 32.1 40.97 16.97l86.06-86.06c9.373-9.373 9.373-24.57 0-33.94l-86.06-86.06c-15.12-15.12-40.97-4.41-40.97 16.97V216z"/></svg>'},t.svgHome=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="26" height="21"><path d="M22.028 12.67v6.468a1.08 1.08 0 0 1-1.083 1.083h-5.236c-.298 0-.542-.244-.542-.542v-5.056c0-.298-.244-.542-.542-.542h-3.25c-.298 0-.542.244-.542.542v5.056c0 .298-.244.542-.542.542H5.056a1.08 1.08 0 0 1-1.083-1.083V12.67a.54.54 0 0 1 .199-.42l8.486-6.987a.55.55 0 0 1 .691 0l8.486 6.987c.122.104.194.257.194.42zm3.774-2.75l-3.774-3.1V.56c0-.298-.244-.542-.542-.542h-2.528c-.298 0-.542.244-.542.542v3.277L14.377.5c-.8-.66-1.955-.66-2.753 0L.2 9.922c-.23.2-.262.533-.072.763l1.15 1.4c.2.23.533.262.763.072l10.617-8.743a.55.55 0 0 1 .691 0l10.617 8.743c.23.2.573.158.763-.072l1.15-1.4c.2-.235.153-.573-.077-.763z"/></svg>'},t.randomId=function(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10)},t.colorpicker=function(t){var n=null;n=1==e(t).data("limit")?{preferredFormat:"hex",showPaletteOnly:!0,color:"blanchedalmond",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]]}:{allowEmpty:!0,showInitial:!0,preferredFormat:"hex"},1==e(t).data("input")&&(n.showInput=!0),1==e(t).data("empty")&&(n.allowEmpty=!0,1==e(t).data("limit")&&n.palette.push(["transparent"]),n.change=function(n){n=0===n._a?"transparent":n.toHexString(),e(t).val(n)}),1==e(t).data("inline")&&(n.flat=!0),1==e(t).data("aplha")&&(n.showAlpha=!0),n.clickoutFiresChange=!0;try{e(t).spectrum(n)}catch(t){}},t.isElementInView=function(t,n){return void 0===n&&(n=!1),0!=t.length&&(0==n?t.offset().top<e(window).height()&&t.offset().top+t.height()>60:t.offset().top+t.height()<e(window).height()&&t.offset().top>60)},t.keepInNumericBounds=function(e,t,n){return null!==e&&n<e&&(n=e),null!==t&&n>t&&(n=t),n},t.scrollControl=function(e,t,n){var i=0;e.scroll(function(){var r=e.scrollTop();r>i&&"function"==typeof n&&n(),i>r&&"function"==typeof t&&t(),i=r})},t.loadingFromPreviousStart=function(){var t=e(".fromPrevious");t.length>=0?t.css("display","flex"):(t=e('<div class="wait fromPrevious">'+i.Lang.t("previousTaskLoading")+"</div>"),e(".main").append(t),t.css("display","flex"))},t.loadingFromPreviousFail=function(){var t="<div><p>"+i.Lang.t("previousFail")+'</p><p></p><p><button class="btn" onclick="window.history.go(-1); return false;">'+i.Lang.t("previousFailBack")+'</button> <button class="btn btn--red" id="closePrevious">'+i.Lang.t("previousFailContinue")+"</button></p></div>";e(".fromPrevious").html(t).css("background-image","none")},t.loadingFromPreviousEnd=function(){e(".fromPrevious").remove()},t.serializeFormData=function(e){var t={};try{for(var n=0,i=e.entries();n<i.length;n++){var r=i[n],o=r[0],a=r[1];t[o]=a}}catch(e){}return t={info:"form data serialize failed"}},t.parseTemplate=function(t,n,i){return void 0===n&&(n=null),void 0===i&&(i="simple"),null!=n&&("simple"==i&&e.each(n,function(e,n){t=t.replace("{"+e+"}",n)}),"dollar"==i&&e.each(n,function(e,n){t=t.replace("${"+e+"}",n)})),t},t.isEmail=function(e){return!!/^\w+([\+\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w+)+$/.test(e)},t}();t.Tools=r}).call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),r=n(26),o=n(10),a=n(36),s=function(){function e(){var e=this;this.wasDomReadyExecutedBefore=!1,this.loadingElem=null,this.backdropElem=null,this.showBackdrop=function(t,n,i){var r=e.appendBackdropElement();r.innerHTML="",t.classList.add("ilove-backdrop__content"),r.appendChild(t);var o=r.querySelector(".ilove-backdrop__title");o.querySelector(".ilove-backdrop__title__text").innerHTML=null!==n&&void 0!==n?n:"";var a=r.querySelector(".ilove-backdrop__subtitle");a.querySelector(".ilove-backdrop__subtitle__text").innerHTML=null!==i&&void 0!==i?i:"",r.classList.add("ilove-backdrop--visible"),e.domRoot.style.overflow="hidden",o.addEventListener("click",function(){e._backdrop_click_callback1&&e._backdrop_click_callback1()}),a.addEventListener("click",function(){e._backdrop_click_callback2&&e._backdrop_click_callback2()})},this.setBackdropCallback=function(t,n){e._backdrop_click_callback1=t,e._backdrop_click_callback2=n},this.clearBackdrop=function(){var t;null===(t=e.backdropElem)||void 0===t||t.classList.remove("ilove-backdrop--visible"),e.domRoot.style.overflow="",e.setBackdropCallback(null,null)},this._onLayoutTemplateLoaded=function(){e.ctx._onDomReady(e.domRoot),e.dispatchEvent(new o.IloveEvent("unsetContentAbandonment")),a.Tooltip.init(),e.onDomReady(),e.wasDomReadyExecutedBefore=!0},this.showLoadingScreen=function(){e.appendLoadingElement().classList.add("wait--visible"),e.domRoot.style.overflow="hidden"},this.clearLoadingScreen=function(){var t;null===(t=e.loadingElem)||void 0===t||t.classList.remove("wait--visible"),e.domRoot.style.overflow=""},this.goToPreviousStateButtonIsVisible=function(){var t=e.domStateRoot.querySelector(".dialog__back");return!!t&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},this.t=function(t,n){if(e._t){if(!(t in e._t))throw"Key '"+t+"' not found";return i.Lang.tr(e._t[t],n)}var r=e.domRoot.querySelector("[data-state='"+e.name+"'] .text-translations");if(!r)throw"Text translations for state '"+e.name+"' not found";if("html"===r.dataset.format){var o=r.querySelector("[data-key="+t+"]");if(!o)throw"Key '"+t+"' not found";var a=o.innerHTML;return i.Lang.tr(a,n)}if(e._t=JSON.parse(r.textContent),"object"!=typeof e._t)throw"Translation object not found";return e.t(t,n)},this.eventEmitter=new r.ILoveEventEmitter}return e.prototype.render=function(e){var t=this;this.domRoot=e,this.ctx.isInline?this._onLayoutTemplateLoaded():this.loadTemplateOn(this.LAYOUT_TEMPLATE_NAME,this.domRoot).then(function(){t.showLoadingScreen(),t.showCurrentStateScreens().then(t._onLayoutTemplateLoaded).catch(function(e){throw e})}).catch(function(e){throw"Problem loading template "+t.LAYOUT_TEMPLATE_NAME+": "+e})},e.prototype.reset=function(){},e.prototype.appendLoadingElement=function(){var e=this.domRoot;return this.loadingElem||(this.loadingElem=document.createElement("div"),this.loadingElem.classList.add("wait","wait--animated","wait--sm"),e.parentNode.appendChild(this.loadingElem)),this.loadingElem},e.prototype.appendBackdropElement=function(){var e=this.domRoot;return this.backdropElem||(this.backdropElem=document.createElement("div"),this.backdropElem.classList.add("ilove-backdrop","ilove-backdrop--animated","ilove-backdrop--sm"),e.parentNode.appendChild(this.backdropElem)),this.backdropElem},e.prototype.isTemplateAppended=function(e){return this.ctx.appendedTemplates.includes(e)},e.prototype.loadTemplateOn=function(e,t){var n=this;return this.isTemplateAppended(e)?Promise.resolve():new Promise(function(i,r){n.ctx.getTemplateViaAjax(e).then(function(r){n.ctx.appendedTemplates.push(e),t.innerHTML=r,i()},function(e){r()})})},e.prototype.showCurrentStateScreens=function(){this.domRoot.querySelectorAll("[data-state]").forEach(function(e){return e.style.display="none"});var e=this.domRoot.querySelector("[data-state='"+this.name+"']");if(!e)throw"Template container for '"+this.name+"' state not found";e.style.display="";var t=e.getAttribute("data-template-name");return t?this.loadTemplateOn(t,e):Promise.resolve()},e.prototype.changeScreen=function(e){this.domRoot.querySelectorAll("[data-state='"+this.name+"'] [data-screen]").forEach(function(e){e.style.display="none"});var t=this.domRoot.querySelector("[data-state="+this.name+"] [data-screen='"+e+"']");if(!t)throw"Screen '"+e+"' for state '"+this.name+"' not found";t.style.display="",this.currentScreen=t},e.prototype.setContext=function(e){this.ctx=e},Object.defineProperty(e.prototype,"domStateRoot",{get:function(){var e=this.domRoot.querySelector("[data-state="+this.name+"]");if(!e)throw"Dom State root for "+this.name+" not found";return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dialogCloseBtn",{get:function(){return this.domStateRoot.querySelector(".dialog__close")},enumerable:!0,configurable:!0}),e.prototype.dispatchEvent=function(e){return this.eventEmitter.dispatchEvent(e)},e.prototype.addEventListener=function(e,t){return this.eventEmitter.addEventListener(e,t)},e}();t.StateBase=s},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c});var i=n(0),r=n(15),o=n(3),a=n(2),s=function(){function e(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return e.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},e.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},e.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,setTimeout(function(){e._scopeListeners.forEach(function(t){t(e)}),e._notifyingListeners=!1}))},e.prototype._notifyEventProcessors=function(e,t,n,a){var s=this;return void 0===a&&(a=0),new r.a(function(r,l){var c=e[a];if(null===t||"function"!=typeof c)r(t);else{var u=c(i.a({},t),n);Object(o.m)(u)?u.then(function(t){return s._notifyEventProcessors(e,t,n,a+1).then(r)}).then(null,l):s._notifyEventProcessors(e,u,n,a+1).then(r).then(null,l)}})},e.prototype.setUser=function(e){return this._user=e||{},this._notifyScopeListeners(),this},e.prototype.setTags=function(e){return this._tags=i.a({},this._tags,e),this._notifyScopeListeners(),this},e.prototype.setTag=function(e,t){var n;return this._tags=i.a({},this._tags,((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setExtras=function(e){return this._extra=i.a({},this._extra,e),this._notifyScopeListeners(),this},e.prototype.setExtra=function(e,t){var n;return this._extra=i.a({},this._extra,((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},e.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},e.prototype.setTransaction=function(e){return this._transaction=e,this._notifyScopeListeners(),this},e.prototype.setContext=function(e,t){var n;return this._contexts=i.a({},this._contexts,((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},e.prototype.getSpan=function(){return this._span},e.clone=function(t){var n=new e;return t&&(n._breadcrumbs=i.d(t._breadcrumbs),n._tags=i.a({},t._tags),n._extra=i.a({},t._extra),n._contexts=i.a({},t._contexts),n._user=t._user,n._level=t._level,n._span=t._span,n._transaction=t._transaction,n._fingerprint=t._fingerprint,n._eventProcessors=i.d(t._eventProcessors)),n},e.prototype.update=function(t){if(!t)return this;if("function"==typeof t){var n=t(this);return n instanceof e?n:this}return t instanceof e?(this._tags=i.a({},this._tags,t._tags),this._extra=i.a({},this._extra,t._extra),this._contexts=i.a({},this._contexts,t._contexts),t._user&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint)):Object(o.h)(t)&&(t=t,this._tags=i.a({},this._tags,t.tags),this._extra=i.a({},this._extra,t.extra),this._contexts=i.a({},this._contexts,t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint)),this},e.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transaction=void 0,this._fingerprint=void 0,this._span=void 0,this._notifyScopeListeners(),this},e.prototype.addBreadcrumb=function(e,t){var n=i.a({timestamp:Object(a.l)()},e);return this._breadcrumbs=void 0!==t&&t>=0?i.d(this._breadcrumbs,[n]).slice(-t):i.d(this._breadcrumbs,[n]),this._notifyScopeListeners(),this},e.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},e.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},e.prototype.applyToEvent=function(e,t){return this._extra&&Object.keys(this._extra).length&&(e.extra=i.a({},this._extra,e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=i.a({},this._tags,e.tags)),this._user&&Object.keys(this._user).length&&(e.user=i.a({},this._user,e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=i.a({},this._contexts,e.contexts)),this._level&&(e.level=this._level),this._transaction&&(e.transaction=this._transaction),this._applyFingerprint(e),e.breadcrumbs=i.d(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,this._notifyEventProcessors(i.d(l(),this._eventProcessors),e,t)},e}();function l(){var e=Object(a.f)();return e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[],e.__SENTRY__.globalEventProcessors}function c(e){l().push(e)}},function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s});var i=n(3);function r(e,t){return void 0===t&&(t=0),"string"!=typeof e||0===t?e:e.length<=t?e:e.substr(0,t)+"..."}function o(e,t){var n=e,i=n.length;if(i<=150)return n;t>i&&(t=i);var r=Math.max(t-60,0);r<5&&(r=0);var o=Math.min(r+140,i);return o>i-5&&(o=i),o===i&&(r=Math.max(o-140,0)),n=n.slice(r,o),r>0&&(n="'{snip} "+n),o<i&&(n+=" {snip}"),n}function a(e,t){if(!Array.isArray(e))return"";for(var n=[],i=0;i<e.length;i++){var r=e[i];try{n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function s(e,t){return!!Object(i.k)(e)&&(Object(i.j)(t)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t))}},function(e,t,n){"use strict";var i=n(0),r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e});n.d(t,"a",function(){return o});var o=function(e){function t(t){var n=this.constructor,i=e.call(this,t)||this;return i.message=t,i.name=n.prototype.constructor.name,r(i,n.prototype),i}return i.b(t,e),t}(Error)},function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.Invalid="invalid",e.Failed="failed"}(i||(i={})),function(e){e.fromHttpCode=function(t){return t>=200&&t<300?e.Success:429===t?e.RateLimit:t>=400&&t<500?e.Invalid:t>=500?e.Failed:e.Unknown}}(i||(i={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(0),r="?",o=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,s=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,l=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,c=/\((\S*)(?::(\d+))(?::(\d+))\)/;function u(e){var t=null,n=e&&e.framesToPop;try{if(t=function(e){if(!e||!e.stacktrace)return null;for(var t,n=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,o=e.stacktrace.split("\n"),a=[],s=0;s<o.length;s+=2){var l=null;(t=n.exec(o[s]))?l={url:t[2],func:t[3],args:[],line:+t[1],column:null}:(t=i.exec(o[s]))&&(l={url:t[6],func:t[3]||t[4],args:t[5]?t[5].split(","):[],line:+t[1],column:+t[2]}),l&&(!l.func&&l.line&&(l.func=r),a.push(l))}if(!a.length)return null;return{message:p(e),name:e.name,stack:a}}(e))return d(t,n)}catch(e){}try{if(t=function(e){if(!e||!e.stack)return null;for(var t,n,i,u=[],d=e.stack.split("\n"),f=0;f<d.length;++f){if(n=o.exec(d[f])){var h=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(t=c.exec(n[2]))&&(n[2]=t[1],n[3]=t[2],n[4]=t[3]),i={url:n[2]&&0===n[2].indexOf("address at ")?n[2].substr("address at ".length):n[2],func:n[1]||r,args:h?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=s.exec(d[f]))i={url:n[2],func:n[1]||r,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=a.exec(d[f])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(t=l.exec(n[3]))?(n[1]=n[1]||"eval",n[3]=t[1],n[4]=t[2],n[5]=""):0!==f||n[5]||void 0===e.columnNumber||(u[0].column=e.columnNumber+1),i={url:n[3],func:n[1]||r,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!i.func&&i.line&&(i.func=r),u.push(i)}if(!u.length)return null;return{message:p(e),name:e.name,stack:u}}(e))return d(t,n)}catch(e){}return{message:p(e),name:e&&e.name,stack:[],failed:!0}}function d(e,t){try{return i.a({},e,{stack:e.stack.slice(t)})}catch(t){return e}}function p(e){var t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this._eventEmitterCallbacks={}}return e.prototype.addEventListener=function(e,t){e in this._eventEmitterCallbacks||(this._eventEmitterCallbacks[e]=[]),this._eventEmitterCallbacks[e].push(t)},e.prototype.dispatchEvent=function(e){e.name in this._eventEmitterCallbacks&&this._eventEmitterCallbacks[e.name].forEach(function(t){return t(e)})},e}();t.ILoveEventEmitter=i},function(e,t,n){var i;!function(r){"use strict";function o(e,t,n){var i,r=document.createElement("img");return r.onerror=function(i){return o.onerror(r,i,e,t,n)},r.onload=function(i){return o.onload(r,i,e,t,n)},"string"==typeof e?(o.fetchBlob(e,function(t){t?(e=t,i=o.createObjectURL(e)):(i=e,n&&n.crossOrigin&&(r.crossOrigin=n.crossOrigin)),r.src=i},n),r):o.isInstanceOf("Blob",e)||o.isInstanceOf("File",e)?(i=r._objectURL=o.createObjectURL(e))?(r.src=i,r):o.readFile(e,function(e){var n=e.target;n&&n.result?r.src=n.result:t&&t(e)}):void 0}var a=r.createObjectURL&&r||r.URL&&URL.revokeObjectURL&&URL||r.webkitURL&&webkitURL;function s(e,t){!e._objectURL||t&&t.noRevoke||(o.revokeObjectURL(e._objectURL),delete e._objectURL)}o.fetchBlob=function(e,t,n){t()},o.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},o.transform=function(e,t,n,i,r){n(e,r)},o.onerror=function(e,t,n,i,r){s(e,r),i&&i.call(e,t)},o.onload=function(e,t,n,i,r){s(e,r),i&&o.transform(e,r,i,n,{})},o.createObjectURL=function(e){return!!a&&a.createObjectURL(e)},o.revokeObjectURL=function(e){return!!a&&a.revokeObjectURL(e)},o.readFile=function(e,t,n){if(r.FileReader){var i=new FileReader;if(i.onload=i.onerror=t,i[n=n||"readAsDataURL"])return i[n](e),i}return!1},void 0===(i=function(){return o}.call(t,n,t,e))||(e.exports=i)}("undefined"!=typeof window&&window||this)},function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"d",function(){return u});var i=n(3),r=n(7),o=n(25),a=50;function s(e){var t=u(e.stack),n={type:e.name,value:e.message};return t&&t.length&&(n.stacktrace={frames:t}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function l(e,t,n){var a={exception:{values:[{type:Object(i.f)(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+Object(r.a)(e)}]},extra:{__serialized__:Object(r.d)(e)}};if(t){var s=u(Object(o.a)(t).stack);a.stacktrace={frames:s}}return a}function c(e){return{exception:{values:[s(e)]}}}function u(e){if(!e||!e.length)return[];var t=e,n=t[0].func||"",i=t[t.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(t=t.slice(1)),-1!==i.indexOf("sentryWrapped")&&(t=t.slice(0,-1)),t.slice(0,a).map(function(e){return{colno:null===e.column?void 0:e.column,filename:e.url||t[0].url,function:e.func||"?",in_app:!0,lineno:null===e.line?void 0:e.line}}).reverse()}},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i,r=n(0),o=n(3),a=n(11),s=n(2),l=n(7),c=n(41),u=Object(s.f)(),d={},p={};function f(e){if(!p[e])switch(p[e]=!0,e){case"console":!function(){if(!("console"in u))return;["debug","info","warn","error","log","assert"].forEach(function(e){e in u.console&&Object(l.b)(u.console,e,function(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];g("console",{args:n,level:e}),t&&Function.prototype.apply.call(t,u.console,n)}})})}();break;case"dom":!function(){if(!("document"in u))return;u.document.addEventListener("click",b("click",g.bind(null,"dom")),!1),u.document.addEventListener("keypress",w(g.bind(null,"dom")),!1),["EventTarget","Node"].forEach(function(e){var t=u[e]&&u[e].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(Object(l.b)(t,"addEventListener",function(e){return function(t,n,i){return n&&n.handleEvent?("click"===t&&Object(l.b)(n,"handleEvent",function(e){return function(t){return b("click",g.bind(null,"dom"))(t),e.call(this,t)}}),"keypress"===t&&Object(l.b)(n,"handleEvent",function(e){return function(t){return w(g.bind(null,"dom"))(t),e.call(this,t)}})):("click"===t&&b("click",g.bind(null,"dom"),!0)(this),"keypress"===t&&w(g.bind(null,"dom"))(this)),e.call(this,t,n,i)}}),Object(l.b)(t,"removeEventListener",function(e){return function(t,n,i){var r=n;try{r=r&&(r.__sentry_wrapped__||r)}catch(e){}return e.call(this,t,r,i)}}))})}();break;case"xhr":!function(){if(!("XMLHttpRequest"in u))return;var e=XMLHttpRequest.prototype;Object(l.b)(e,"open",function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t[1];return this.__sentry_xhr__={method:Object(o.k)(t[0])?t[0].toUpperCase():t[0],url:t[1]},Object(o.k)(i)&&"POST"===this.__sentry_xhr__.method&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0),e.apply(this,t)}}),Object(l.b)(e,"send",function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this,o={args:t,startTimestamp:Date.now(),xhr:i};return g("xhr",r.a({},o)),i.addEventListener("readystatechange",function(){if(4===i.readyState){try{i.__sentry_xhr__&&(i.__sentry_xhr__.status_code=i.status)}catch(e){}g("xhr",r.a({},o,{endTimestamp:Date.now()}))}}),e.apply(this,t)}})}();break;case"fetch":!function(){if(!Object(c.c)())return;Object(l.b)(u,"fetch",function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i={args:t,fetchData:{method:function(e){void 0===e&&(e=[]);if("Request"in u&&Object(o.g)(e[0],Request)&&e[0].method)return String(e[0].method).toUpperCase();if(e[1]&&e[1].method)return String(e[1].method).toUpperCase();return"GET"}(t),url:function(e){void 0===e&&(e=[]);if("string"==typeof e[0])return e[0];if("Request"in u&&Object(o.g)(e[0],Request))return e[0].url;return String(e[0])}(t)},startTimestamp:Date.now()};return g("fetch",r.a({},i)),e.apply(u,t).then(function(e){return g("fetch",r.a({},i,{endTimestamp:Date.now(),response:e})),e},function(e){throw g("fetch",r.a({},i,{endTimestamp:Date.now(),error:e})),e})}})}();break;case"history":!function(){if(!Object(c.b)())return;var e=u.onpopstate;function t(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length>2?t[2]:void 0;if(r){var o=i,a=String(r);i=a,g("history",{from:o,to:a})}return e.apply(this,t)}}u.onpopstate=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=u.location.href,o=i;if(i=r,g("history",{from:o,to:r}),e)return e.apply(this,t)},Object(l.b)(u.history,"pushState",t),Object(l.b)(u.history,"replaceState",t)}();break;case"error":S=u.onerror,u.onerror=function(e,t,n,i,r){return g("error",{column:i,error:r,line:n,msg:e,url:t}),!!S&&S.apply(this,arguments)};break;case"unhandledrejection":E=u.onunhandledrejection,u.onunhandledrejection=function(e){return g("unhandledrejection",e),!E||E.apply(this,arguments)};break;default:a.a.warn("unknown instrumentation type:",e)}}function h(e){e&&"string"==typeof e.type&&"function"==typeof e.callback&&(d[e.type]=d[e.type]||[],d[e.type].push(e.callback),f(e.type))}function g(e,t){var n,i;if(e&&d[e])try{for(var o=r.e(d[e]||[]),l=o.next();!l.done;l=o.next()){var c=l.value;try{c(t)}catch(t){a.a.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+Object(s.e)(c)+"\nError: "+t)}}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}var v,m,y=1e3,_=0;function b(e,t,n){return void 0===n&&(n=!1),function(i){v=void 0,i&&m!==i&&(m=i,_&&clearTimeout(_),n?_=setTimeout(function(){t({event:i,name:e})}):t({event:i,name:e}))}}function w(e){return function(t){var n;try{n=t.target}catch(e){return}var i=n&&n.tagName;i&&("INPUT"===i||"TEXTAREA"===i||n.isContentEditable)&&(v||b("input",e)(t),clearTimeout(v),v=setTimeout(function(){v=void 0},y))}}var S=null;var E=null},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r});var i="sentry.javascript.browser",r="5.16.1"},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r(n,i)&&(e[i]=n[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,i,r){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+i),r);else for(var o=0;o<i;o++)e[r+o]=t[n+o]},flattenChunks:function(e){var t,n,i,r,o,a;for(i=0,t=0,n=e.length;t<n;t++)i+=e[t].length;for(a=new Uint8Array(i),r=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,r),r+=o.length;return a}},a={arraySet:function(e,t,n,i,r){for(var o=0;o<i;o++)e[r+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lazyload=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n="async");for(var i=document.getElementsByTagName("script"),r=i.length;r--;)if(i[r].src.match(e))return!0;var o=document.createElement("script");o.type="text/javascript",document.createElement("script");var a="defer"in document.createElement("script");for(var s in a&&(o.defer=!0),o.src=e,t)if(t.hasOwnProperty(s)){var l=t[s];o.setAttribute(s,l)}var c=document.getElementsByTagName("script")[0];return c.parentNode.insertBefore(o,c),!0}},function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return l});var i=n(3),r=n(2),o=n(28),a=n(25);function s(e,t,n){var s;if(void 0===n&&(n={}),Object(i.e)(e)&&e.error)return e=e.error,s=Object(o.b)(Object(a.a)(e));if(Object(i.a)(e)||Object(i.b)(e)){var c=e,u=c.name||(Object(i.a)(c)?"DOMError":"DOMException"),d=c.message?u+": "+c.message:u;return s=l(d,t,n),Object(r.b)(s,d),s}if(Object(i.d)(e))return s=Object(o.b)(Object(a.a)(e));if(Object(i.h)(e)||Object(i.f)(e)){var p=e;return s=Object(o.a)(p,t,n.rejection),Object(r.a)(s,{synthetic:!0}),s}return s=l(e,t,n),Object(r.b)(s,""+e,void 0),Object(r.a)(s,{synthetic:!0}),s}function l(e,t,n){void 0===n&&(n={});var i={message:e};if(n.attachStacktrace&&t){var r=Object(a.a)(t),s=Object(o.d)(r.stack);i.stacktrace={frames:s}}return i}},function(e,t,n){"use strict";var i=n(62),r=n(23),o=n(15),a=function(){function e(e){this._limit=e,this._buffer=[]}return e.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},e.prototype.add=function(e){var t=this;return this.isReady()?(-1===this._buffer.indexOf(e)&&this._buffer.push(e),e.then(function(){return t.remove(e)}).then(null,function(){return t.remove(e).then(null,function(){})}),e):o.a.reject(new r.a("Not adding Promise due to buffer limit reached."))},e.prototype.remove=function(e){return this._buffer.splice(this._buffer.indexOf(e),1)[0]},e.prototype.length=function(){return this._buffer.length},e.prototype.drain=function(e){var t=this;return new o.a(function(n){var i=setTimeout(function(){e&&e>0&&n(!1)},e);o.a.all(t._buffer).then(function(){clearTimeout(i),n(!0)}).then(null,function(){n(!0)})})},e}();n.d(t,"a",function(){return s});var s=function(){function e(e){this.options=e,this._buffer=new a(30),this._api=new i.a(this.options.dsn),this.url=this._api.getStoreEndpointWithUrlEncodedAuth()}return e.prototype.sendEvent=function(e){throw new r.a("Transport Class has to implement `sendEvent` method")},e.prototype.close=function(e){return this._buffer.drain(e)},e}()},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(33),r=n(70),o=function(){function t(){}return t.compat=function(){(-1!==navigator.appVersion.indexOf("MSIE 10")||navigator.userAgent.indexOf(" UCBrowser/")>=0||navigator.userAgent.indexOf("Opera Mini")>=0||navigator.userAgent.indexOf("Android")>=0&&parseFloat(navigator.userAgent.slice(navigator.userAgent.indexOf("Android")+8))>4.4)&&i.lazyload("//cdn.jsdelivr.net/npm/mutationobserver-shim/dist/mutationobserver.min.js")},t.init=function(n){void 0===n&&(n=null),window.tippy&&(null==n&&(n=".tooltip"),e(n).each(function(n,i){e(i)[0]._tippy||window.tippy(e(i)[0],t.getOptions(i))}),r.LinkTitle.disable(n),e(n).hover(function(){if(e(this).hasClass("rotate")||e(this).hasClass("remove"))try{var t=e(this).parent().parent()[0]._tippy;t&&(t.hide(),t.disable())}catch(e){}},function(){if(e(this).hasClass("rotate")||e(this).hasClass("remove"))try{var t=e(this).parent().parent()[0]._tippy;t&&t.enable()}catch(e){}}),e(".tooltip").on("mouseenter",function(e){e.preventDefault()}))},t.getOptions=function(n){return{animation:"fade",delay:[0,0],offset:[0,20],allowHTML:!0,content:e(n).is("[data-title]")?e(n).attr("data-title"):e(n).attr("title"),arrow:!0,placement:t.getPlacement(n)}},t.getPlacement=function(t){var n=e(t);return n.hasClass("tooltip--top")?"top":n.hasClass("tooltip--top-start")?"top-start":n.hasClass("tooltip--top-end")?"top-end":n.hasClass("tooltip--bottom")?"bottom":n.hasClass("tooltip--left")?"left":n.hasClass("tooltip--right")?"right":"top"},t.setContent=function(n,i){if(1==e(n).length)return e(n)[0]._tippy&&e(n)[0]._tippy.destroy(),e(n).attr("title",i),e(n).attr("data-title",i),void t.init(n);e(n).each(function(e,n){t.setContent(n,i)})},t.show=function(n,i){void 0===i&&(i=null);var r=e(n)[0];if(0!=e(n).length){window.tippy(r,t.getOptions(r)),"_tippy"in e(n)[0]||t.init(e(n));var o=e(n)[0]._tippy;e(n).is(":disabled")?(e(n).attr("disabled",!1),o.show(),setTimeout(function(){e(n).attr("disabled",!0)},100)):o.show(),null!=i&&setTimeout(function(){e(n)[0]._tippy.hide()},i)}},t.shake=function(t){var n=e(t)[0]._tippy;window.setTimeout(function(){e(n.popper).children().addClass("shake")},500)},t.hide=function(t){try{e(t)[0]._tippy.hide()}catch(e){}},t.enable=function(n){if(1!=e(n).length)e(n).each(function(e,n){t.enable(n)});else try{e(n)[0]._tippy.enable()}catch(e){}},t.disable=function(n){if(1!=e(n).length)e(n).each(function(e,n){t.disable(n)});else try{e(n)[0]._tippy.hide(),e(n)[0]._tippy.disable()}catch(e){}},t.wrapDisabled=function(t){e(t).wrap("<div class='tootlip-wrap'></div>")},t}();t.Tooltip=o,window.tootip=o}).call(this,n(1))},function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e.Fatal="fatal",e.Error="error",e.Warning="warning",e.Log="log",e.Info="info",e.Debug="debug",e.Critical="critical"}(i||(i={})),function(e){e.fromString=function(t){switch(t){case"debug":return e.Debug;case"info":return e.Info;case"warn":case"warning":return e.Warning;case"error":return e.Error;case"fatal":return e.Fatal;case"critical":return e.Critical;case"log":default:return e.Log}}}(i||(i={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(99),r=function(){function e(){}return e.get=function(e){var t="production";return i[t][e]},e.mode=function(){var e="production";return e},e.env=function(){return"production"},e}();t.Settings=r},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(24),r=n(15),o=function(){function e(){}return e.prototype.sendEvent=function(e){return r.a.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:i.a.Skipped})},e.prototype.close=function(e){return r.a.resolve(!0)},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(2);function r(e,t){var n="transaction"===e.type,r={body:JSON.stringify(e),url:n?t.getEnvelopeEndpointWithUrlEncodedAuth():t.getStoreEndpointWithUrlEncodedAuth()};if(n){var o=JSON.stringify({event_id:e.event_id,sent_at:new Date(1e3*Object(i.l)()).toISOString()})+"\n"+JSON.stringify({type:e.type})+"\n"+r.body;r.body=o}return r}},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return c});var i=n(11),r=n(2);function o(){if(!("fetch"in Object(r.f)()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function a(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function s(){if(!o())return!1;var e=Object(r.f)();if(a(e.fetch))return!0;var t=!1,n=e.document;if(n&&"function"==typeof n.createElement)try{var s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s),s.contentWindow&&s.contentWindow.fetch&&(t=a(s.contentWindow.fetch)),n.head.removeChild(s)}catch(e){i.a.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t}function l(){if(!o())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}}function c(){var e=Object(r.f)(),t=e.chrome,n=t&&t.app&&t.app.runtime,i="history"in e&&!!e.history.pushState&&!!e.history.replaceState;return!n&&i}},function(e,t,n){"use strict";var i=n(0),r=n(62),o=n(65),a=n(2),s=n(11),l=n(63),c=n(37),u=n(41),d=n(15),p=n(34),f=n(68),h=n(69),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.b(t,e),t.prototype._setupTransport=function(){if(!this._options.dsn)return e.prototype._setupTransport.call(this);var t=i.a({},this._options.transportOptions,{dsn:this._options.dsn});return this._options.transport?new this._options.transport(t):Object(u.a)()?new f.a(t):new h.a(t)},t.prototype.eventFromException=function(e,t){var n=t&&t.syntheticException||void 0,i=Object(p.b)(e,n,{attachStacktrace:this._options.attachStacktrace});return Object(a.a)(i,{handled:!0,type:"generic"}),i.level=c.a.Error,t&&t.event_id&&(i.event_id=t.event_id),d.a.resolve(i)},t.prototype.eventFromMessage=function(e,t,n){void 0===t&&(t=c.a.Info);var i=n&&n.syntheticException||void 0,r=Object(p.a)(e,i,{attachStacktrace:this._options.attachStacktrace});return r.level=t,n&&n.event_id&&(r.event_id=n.event_id),d.a.resolve(r)},t}(l.a),v=n(50),m=n(30);n.d(t,"a",function(){return y});var y=function(e){function t(t){return void 0===t&&(t={}),e.call(this,g,t)||this}return i.b(t,e),t.prototype._prepareEvent=function(t,n,r){return t.platform=t.platform||"javascript",t.sdk=i.a({},t.sdk,{name:m.a,packages:i.d(t.sdk&&t.sdk.packages||[],[{name:"npm:@sentry/browser",version:m.b}]),version:m.b}),e.prototype._prepareEvent.call(this,t,n,r)},t.prototype._sendEvent=function(t){var n=this.getIntegration(v.a);n&&n.addSentryBreadcrumb(t),e.prototype._sendEvent.call(this,t)},t.prototype.showReportDialog=function(e){void 0===e&&(e={});var t=Object(a.f)().document;if(t)if(this._isEnabled()){var n=e.dsn||this.getDsn();if(e.eventId)if(n){var i=t.createElement("script");i.async=!0,i.src=new r.a(n).getReportDialogEndpoint(e),e.onLoad&&(i.onload=e.onLoad),(t.head||t.body).appendChild(i)}else s.a.error("Missing `Dsn` option in showReportDialog call");else s.a.error("Missing `eventId` option in showReportDialog call")}else s.a.error("Trying to call showReportDialog with Sentry Client is disabled")},t}(o.a)},function(e,t,n){var i,r,o;!function(a){"use strict";r=[n(27)],void 0===(o="function"==typeof(i=function(e){var t="undefined"!=typeof Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[],65517:[]}},e.parseMetaData=function(t,n,i,r){i=i||{},r=r||{};var o=this,a=i.maxMetaDataSize||262144,s=!("undefined"!=typeof DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice);!s&&e.readFile(e.blobSlice.call(t,0,a),function(t){if(t.target.error)n(r);else{var a,s,l,c,u=t.target.result,d=new DataView(u),p=2,f=d.byteLength-4,h=p;if(65496===d.getUint16(0)){for(;p<f&&((a=d.getUint16(p))>=65504&&a<=65519||65534===a)&&(s=d.getUint16(p+2)+2,!(p+s>d.byteLength));){if(l=e.metaDataParsers.jpeg[a])for(c=0;c<l.length;c+=1)l[c].call(o,d,p,s,r,i);h=p+=s}!i.disableImageHead&&h>6&&(u.slice?r.imageHead=u.slice(0,h):r.imageHead=new Uint8Array(u).subarray(0,h))}n(r)}},"readAsArrayBuffer")||n(r)},e.hasMetaOption=function(e){return e&&e.meta};var n=e.transform;e.transform=function(t,i,r,o,a){e.hasMetaOption(i)?e.parseMetaData(o,function(a){n.call(e,t,i,r,o,a)},i,a):n.apply(e,arguments)}})?i.apply(t,r):i)||(e.exports=o)}()},function(e,t,n){"use strict";n.r(t);var i=n(52);n.d(t,"GlobalHandlers",function(){return i.a});var r=n(51);n.d(t,"TryCatch",function(){return r.a});var o=n(50);n.d(t,"Breadcrumbs",function(){return o.a});var a=n(53);n.d(t,"LinkedErrors",function(){return a.a});var s=n(54);n.d(t,"UserAgent",function(){return s.a})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.buildFormData=function(t,n,i){if(void 0===i&&(i=null),!n||"object"!=typeof n||n instanceof Date||n instanceof File){var r=null==n?"":n;t.append(i,r)}else Object.keys(n).forEach(function(r){e.buildFormData(t,n[r],null!=i?i+"["+r+"]":r)})},e.jsonToFormData=function(t){var n=new FormData;return e.buildFormData(n,t),n},e}();t.FormDataHelper=i},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(5),r=n(11);function o(e,t){!0===t.debug&&r.a.enable();var n=Object(i.b)(),o=new e(t);n.bindClient(o)}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),r=n(38);t.API_VERSION="v1",t.APP_VERSION="web.0";var o=function(){function n(e){this.taskId=null,this.tool=null,this.serviceServer=r.Settings.get("service"),this.workerServer=null,this.downloadUrl="",this.apiVersion=t.API_VERSION,this.appVersion=t.APP_VERSION,this.token=null,this.encrypted=!1,this.encryptKey=null,Object.assign(this,e)}return n.prototype.pingService=function(){var e=this;return new Promise(function(t,n){var i=new XMLHttpRequest,r=0,o=0;i.open("GET",e.serviceServer+"/ping",!0),i.onreadystatechange=function(){4==i.readyState&&(0==r&&0==o&&0!=i.status?t():n())},i.ontimeout=function(){r=1},i.onerror=function(e){o=1},i.send()})},n.prototype.sendRequest=function(e,t,n,i,r){void 0===n&&(n=null),void 0===i&&(i=!1),void 0===r&&(r=!1);var o=new XMLHttpRequest;return o.open(e,this.workerServer+"/"+this.apiVersion+"/"+t,!0),o.setRequestHeader("Authorization","Bearer "+this.token),o.setRequestHeader("Accept","application/json"),1==r&&o.setRequestHeader("Content-Type","application/json"),i&&(o.responseType="blob"),1==r?o.send(JSON.stringify(n)):o.send(n),o},n.prototype.sendServiceRequest=function(e,t,n,i,r){void 0===n&&(n=null),void 0===i&&(i=!1),void 0===r&&(r=!1);var o=new XMLHttpRequest;return o.open(e,this.serviceServer+"/"+t,!0),o.setRequestHeader("Authorization","Bearer "+this.userToken),o.setRequestHeader("Accept","application/json"),1==r&&o.setRequestHeader("Content-Type","application/json"),i&&(o.responseType="blob"),1==r?o.send(JSON.stringify(n)):o.send(n),o},n.prototype.query=function(e,t,n,i,r,o){void 0===n&&(n=null),void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===o&&(o="api");var a=this;return new Promise(function(s,l){var c=null;if("api"==o)c=a.sendRequest(e,t,n,i,r);else{if("service"!=o)throw new Error("invalid target api");c=a.sendServiceRequest(e,t,n,i,r)}c.onerror=function(e){l({status:-1})},c.onload=function(){if(4==c.readyState)if(200==c.status)try{s(JSON.parse(c.responseText))}catch(e){l({error:"invalidJSONResponse",status:500,response:c.responseText})}else if(400==c.status||500==c.status)try{(e=JSON.parse(c.responseText)).status=c.status,l(e)}catch(e){l({error:"invalidJSONResponse",status:500,response:c.responseText})}else{var e={};try{e=JSON.parse(c.responseText)}catch(e){}e.status=c.status,l(e)}}})},n.prototype.process=function(e){return this.query("POST","process",e)},n.prototype.getSigner=function(e){return this.query("GET","signature/signer/"+e)},n.prototype.request=function(e,t,n){var r=i.FormDataHelper.jsonToFormData(n);return this.query(e,t,r)},n.prototype.getTask=function(){var e=this;return new Promise(function(t,n){var i=e.sendRequest("GET","task/"+e.taskId);i.onreadystatechange=function(){if(4==i.readyState){if(200==i.status)return void t(JSON.parse(i.responseText));if(400==i.status||500==i.status)return window.ga("event","send","download_deleted",e.workerServer),void n(i.responseText);window.ga("event","send","download_deleted",e.workerServer),n(i.responseText)}}})},n.prototype.getLink=function(e){return this.workerServer+"/"+this.apiVersion+"/"+e},n.prototype.deleteTask=function(){return this.request("delete","task/"+this.taskId,{})},n.prototype.getSubdomain=function(e){return e.split("/")[2].split(".")[0]},n.prototype.getDomain=function(e){return e.split("/")[2]},n.prototype.uploadFromUrl=function(e){var t=new FormData;return t.append("cloud_file",e),t.append("cloud_source","public"),t.append("task",this.taskId),this.query("post","upload",t)},n.prototype.getPreview=function(e,t){var n=new FormData;for(var i in n.append("server_filename",e),n.append("task",this.taskId),delete t.output_filename,delete t.packaged_filename,t)t.hasOwnProperty(i)&&n.append(i,t[i]);return this.query("post","preview",n)},n.prototype.removeFile=function(e){var t=this,n=new FormData;return new Promise(function(i,r){var o=t.sendRequest("delete","upload/"+t.taskId+"/"+e,n);o.onreadystatechange=function(){if(4==o.readyState){if(404==o.status)return void i();if(400==o.status||500==o.status)return void r();i()}}})},n.prototype.next=function(e,t){var n=new FormData;return n.append("task",e),n.append("tool",t),n.append("thumbnails","1"),this.query("post","task/next",n)},n.prototype.nextFile=function(e,t){return this.workerServer+"/thumbnails/"+e+"/"+t},n.prototype.info=function(){return this.query("get","info")},n.prototype.getStatus=function(t,n){void 0===t&&(t=null),void 0===n&&(n=0);return t=t||this.workerServer,new Promise(function(i,r){e.ajax({url:t+"/status.json",dataType:"json",success:function(e){i(e)},timeout:n,error:function(){r()}})})},n.prototype.getFilePreviewInfo=function(e,t,n,i){void 0===n&&(n=150),void 0===i&&(i=null),n=n||150;var r="pdfrender/"+e+"/"+t.replace(".pdf","");return this.query("get",r)},n.prototype.saveToolConfig=function(e,t,n){var r={tool:e,options:t},o=i.FormDataHelper.jsonToFormData(r);return this.userToken=n,this.query("post","tool/save",o,!1,!1,"service")},n.prototype.touchTask=function(e){var t="task/touch/"+e;return this.query("get",t)},n}();t.Api=o}).call(this,n(1))},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(16),a=n(106),s=n(56),l=n(26),c=n(10),u=function(){function e(t){var n=this;void 0===t&&(t={}),this.state=null,this.stateHistory=[],this.objsListeningTo=new WeakMap,this.appendedTemplates=[],this._isInline=!1,this._ctxPlacement="dom",this._inEndState=!1,this.setEndState=function(){n._inEndState=!0},this.isInEndState=function(){return n._inEndState},this.listenToEvents=function(e){n.objsListeningTo.has(e)&&!0===n.objsListeningTo.get(e)||(e.addEventListener("end",function(e){n.setEndState(),n.dispatchEvent(new c.IloveEvent("end",e.detail))}),e.addEventListener("disableContentAbandonment",function(e){return n.dispatchEvent(new c.IloveEvent("disableContentAbandonment"))}),e.addEventListener("unsetContentAbandonment",function(e){return n.dispatchEvent(new c.IloveEvent("unsetContentAbandonment"))}),n.objsListeningTo.set(e,!0))},this.notifyOfContainerClosing=function(){n.isInEndState()&&n.dispatchEvent(new c.IloveEvent("end"))},this._onDomReady=function(e){n.dispatchEvent(new c.IloveEvent("domReady",{domRoot:e}))},this.eventEmitter=new l.ILoveEventEmitter,this._instanceID=++e._static_instanceID,this._wasUserLoggedOnInitialization=this.isLoggedIn(),this._isInline=!!t.isInline&&t.isInline}return e.prototype.setContextPlacement=function(e){this._ctxPlacement=e},e.prototype.getContextPlacement=function(){return this._ctxPlacement},e.prototype.render=function(e){this.state||(this.state=this.getInitialState(),this.changeState(this.state)),this.state.render(e)},Object.defineProperty(e.prototype,"isInline",{get:function(){return this._isInline},enumerable:!0,configurable:!0}),e.prototype.getState=function(){return this.state},e.prototype.changeState=function(e){if(!e)throw"State cannot be empty";if(this._inEndState)throw"Context is in end state; Cannot transition to state '"+e.name+"'";this.state=e,this.state.setContext(this),this.stateHistory.push(this.state),this.listenToEvents(this.state)},e.prototype.canGoToAPreviousState=function(){return!(this.stateHistory.length<2)},e.prototype.goToPreviousState=function(){if(!this.canGoToAPreviousState())throw"Cannot transition to previous state";this.stateHistory.pop();var e=this.stateHistory.pop();return this.changeState(e),e},e.prototype.getTemplateViaAjax=function(t){return i(this,void 0,void 0,function(){var n,i;return r(this,function(r){switch(r.label){case 0:return n="template_"+t,e.cache.existsEntry(n)?[2,e.cache.getEntry(n)]:[4,s.AjaxTemplate.load(t)];case 1:return i=r.sent(),e.cache.setEntry(n,i),[2,i]}})})},e.prototype.getStateHistory=function(){return this.stateHistory.map(function(e){return e.name})},e.prototype.wasUserLoggedOnInitialization=function(){return this._wasUserLoggedOnInitialization},e.prototype.reset=function(){this.state&&this.state.reset()},Object.defineProperty(e.prototype,"userType",{get:function(){var e=o.UserModel.userType;return"premium"==e&&0==o.UserModel.hasSubscription()?"user":e},enumerable:!0,configurable:!0}),e.prototype.canUserDoTrial=function(){switch(this.userType){case"guest":case"user":return o.UserModel.canDoTrial();case"premium":return!1;default:throw"Unknown userType "+this.userType+" to determine if can do trial"}},e.prototype.isTrialEnabledForThisTool=function(){return!(window.ilovepdfConfig&&"dtr"in window.ilovepdfConfig)||!window.ilovepdfConfig.dtr},e.prototype.isLoggedIn=function(){return"guest"!==this.userType},Object.defineProperty(e.prototype,"user",{get:function(){return o.UserModel.get()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userCurrentPaymentMethod",{get:function(){var e=this.user.last_payment;return e&&e.provider?e:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userCurrentSubscription",{get:function(){return this.user&&this.user.current_subscription?this.user.current_subscription:null},enumerable:!0,configurable:!0}),e.prototype.dispatchEvent=function(e){return this.eventEmitter.dispatchEvent(e)},e.prototype.addEventListener=function(e,t){return this.eventEmitter.addEventListener(e,t)},e.prototype.getInstanceID=function(){return this._instanceID},e.cache=new a.Cache,e._static_instanceID=0,e}();t.ContextBase=u},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(16),r=function(){function t(n){var r=this;this.onLoginSucess=null,this.onLoginError=null,this.onRegisterSuccess=null,this.onRegisterError=null,this.loginSuccess=function(e){e.token&&(e.user.token=e.token),window.userModel=e.user,window.ilovepdfConfig&&(t.updateUserMenu(e.content),t.updateUser(e.user)),null!==r.onLoginSucess&&("function"!=typeof r.onLoginSucess&&"object"!=typeof r.onLoginSucess||r.onLoginSucess(e.user))},this.registerSuccess=function(n){t.updateUserMenu(n.content),t.updateUser(n.user),n.token&&(n.user.token=n.token),e(".user-menu__item--premium").remove(),t.sendGA_registered(r.runningFrom),"function"==typeof r.onRegisterSuccess&&r.onRegisterSuccess(n)},this.registerError=function(e){"function"==typeof r.onRegisterError&&r.onRegisterError(e)},Object.assign(this,n),this.userModel=new i.UserModel}return t.initActions=function(){e(".logout").click(function(e){e.preventDefault(),i.UserModel.logout()})},t.sendGA_registered=function(e){window.ga("send","event","user","registered",e)},t.prototype.login=function(e){var t=this;void 0===e&&(e=null),e||this.extraLoginParams&&this.extraLoginParams.forEach(function(t){e.push(t)}),this.userModel.login(e).then(this.loginSuccess,function(e){return t.loginError(e.responseJSON)})},t.prototype.sendResetPasswordEmail=function(e){return this.userModel.sendResetPasswordEmail(e)},t.prototype.loginError=function(e){"function"==typeof this.onLoginError&&this.onLoginError(e)},t.updateUser=function(e){window.userModel=e,window.ilovepdfConfig&&(window.ilovepdfConfig.user=e),i.UserModel.updateUser(e),t.initActions()},t.updateUserMenu=function(t){e(".top-menu .nav__item.nav__item--red").remove(),e(".top-menu .nav__item.nav__item--gray").remove(),e(".top-menu .nav__item[data-account]").remove(),e(".top-menu .nav").prepend(t)},t.prototype.register=function(e){var t=this.userModel.register(e);return t.then(this.registerSuccess,this.registerError),t},t}();t.UserAuth=r}).call(this,n(1))},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(0),r=n(5),o=n(37),a=n(2),s=n(22),l=n(29),c=function(){function e(t){this.name=e.id,this._options=i.a({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},t)}return e.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&Object(r.b)().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:Object(a.d)(e)},{event:e})},e.prototype._consoleBreadcrumb=function(e){var t={category:"console",data:{arguments:e.args,logger:"console"},level:o.a.fromString(e.level),message:Object(s.b)(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;t.message="Assertion failed: "+(Object(s.b)(e.args.slice(1)," ")||"console.assert"),t.data.arguments=e.args.slice(1)}Object(r.b)().addBreadcrumb(t,{input:e.args,level:e.level})},e.prototype._domBreadcrumb=function(e){var t;try{t=e.event.target?Object(a.h)(e.event.target):Object(a.h)(e.event)}catch(e){t="<unknown>"}0!==t.length&&Object(r.b)().addBreadcrumb({category:"ui."+e.name,message:t},{event:e.event,name:e.name})},e.prototype._xhrBreadcrumb=function(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;Object(r.b)().addBreadcrumb({category:"xhr",data:e.xhr.__sentry_xhr__,type:"http"},{xhr:e.xhr})}else;},e.prototype._fetchBreadcrumb=function(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?Object(r.b)().addBreadcrumb({category:"fetch",data:e.fetchData,level:o.a.Error,type:"http"},{data:e.error,input:e.args}):Object(r.b)().addBreadcrumb({category:"fetch",data:i.a({},e.fetchData,{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response})))},e.prototype._historyBreadcrumb=function(e){var t=Object(a.f)(),n=e.from,i=e.to,o=Object(a.k)(t.location.href),s=Object(a.k)(n),l=Object(a.k)(i);s.path||(s=o),o.protocol===l.protocol&&o.host===l.host&&(i=l.relative),o.protocol===s.protocol&&o.host===s.host&&(n=s.relative),Object(r.b)().addBreadcrumb({category:"navigation",data:{from:n,to:i}})},e.prototype.setupOnce=function(){var e=this;this._options.console&&Object(l.a)({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._consoleBreadcrumb.apply(e,i.d(t))},type:"console"}),this._options.dom&&Object(l.a)({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._domBreadcrumb.apply(e,i.d(t))},type:"dom"}),this._options.xhr&&Object(l.a)({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._xhrBreadcrumb.apply(e,i.d(t))},type:"xhr"}),this._options.fetch&&Object(l.a)({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._fetchBreadcrumb.apply(e,i.d(t))},type:"fetch"}),this._options.history&&Object(l.a)({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._historyBreadcrumb.apply(e,i.d(t))},type:"history"})},e.id="Breadcrumbs",e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(0),r=n(2),o=n(7),a=n(14),s=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],l=function(){function e(t){this.name=e.id,this._options=i.a({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},t)}return e.prototype._wrapTimeFunction=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t[0];return t[0]=Object(a.b)(i,{mechanism:{data:{function:Object(r.e)(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}},e.prototype._wrapRAF=function(e){return function(t){return e.call(this,Object(a.b)(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Object(r.e)(e)},handled:!0,type:"instrument"}}))}},e.prototype._wrapEventTarget=function(e){var t=Object(r.f)(),n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Object(o.b)(n,"addEventListener",function(t){return function(n,i,o){try{"function"==typeof i.handleEvent&&(i.handleEvent=Object(a.b)(i.handleEvent.bind(i),{mechanism:{data:{function:"handleEvent",handler:Object(r.e)(i),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.call(this,n,Object(a.b)(i,{mechanism:{data:{function:"addEventListener",handler:Object(r.e)(i),target:e},handled:!0,type:"instrument"}}),o)}}),Object(o.b)(n,"removeEventListener",function(e){return function(t,n,i){var r=n;try{r=r&&(r.__sentry_wrapped__||r)}catch(e){}return e.call(this,t,r,i)}}))},e.prototype._wrapXHR=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(function(e){e in i&&"function"==typeof i[e]&&Object(o.b)(i,e,function(t){var n={mechanism:{data:{function:e,handler:Object(r.e)(t)},handled:!0,type:"instrument"}};return t.__sentry_original__&&(n.mechanism.data.handler=Object(r.e)(t.__sentry_original__)),Object(a.b)(t,n)})}),e.apply(this,t)}},e.prototype.setupOnce=function(){var e=Object(r.f)();(this._options.setTimeout&&Object(o.b)(e,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&Object(o.b)(e,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&Object(o.b)(e,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&Object(o.b)(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget)&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:s).forEach(this._wrapEventTarget.bind(this))},e.id="TryCatch",e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n(0),r=n(5),o=n(37),a=n(11),s=n(29),l=n(3),c=n(2),u=n(34),d=n(14),p=function(){function e(t){this.name=e.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=i.a({onerror:!0,onunhandledrejection:!0},t)}return e.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(a.a.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(a.a.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},e.prototype._installGlobalOnErrorHandler=function(){var t=this;this._onErrorHandlerInstalled||(Object(s.a)({callback:function(n){var i=n.error,o=Object(r.b)(),a=o.getIntegration(e),s=i&&!0===i.__sentry_own_request__;if(a&&!Object(d.a)()&&!s){var p=o.getClient(),f=Object(l.i)(i)?t._eventFromIncompleteOnError(n.msg,n.url,n.line,n.column):t._enhanceEventWithInitialFrame(Object(u.b)(i,void 0,{attachStacktrace:p&&p.getOptions().attachStacktrace,rejection:!1}),n.url,n.line,n.column);Object(c.a)(f,{handled:!1,type:"onerror"}),o.captureEvent(f,{originalException:i})}},type:"error"}),this._onErrorHandlerInstalled=!0)},e.prototype._installGlobalOnUnhandledRejectionHandler=function(){var t=this;this._onUnhandledRejectionHandlerInstalled||(Object(s.a)({callback:function(n){var i=n;try{"reason"in n?i=n.reason:"detail"in n&&"reason"in n.detail&&(i=n.detail.reason)}catch(e){}var a=Object(r.b)(),s=a.getIntegration(e),p=i&&!0===i.__sentry_own_request__;if(!s||Object(d.a)()||p)return!0;var f=a.getClient(),h=Object(l.i)(i)?t._eventFromIncompleteRejection(i):Object(u.b)(i,void 0,{attachStacktrace:f&&f.getOptions().attachStacktrace,rejection:!0});h.level=o.a.Error,Object(c.a)(h,{handled:!1,type:"onunhandledrejection"}),a.captureEvent(h,{originalException:i})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},e.prototype._eventFromIncompleteOnError=function(e,t,n,i){var r,o=Object(l.e)(e)?e.message:e;if(Object(l.k)(o)){var a=o.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);a&&(r=a[1],o=a[2])}var s={exception:{values:[{type:r||"Error",value:o}]}};return this._enhanceEventWithInitialFrame(s,t,n,i)},e.prototype._eventFromIncompleteRejection=function(e){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+e}]}}},e.prototype._enhanceEventWithInitialFrame=function(e,t,n,i){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].stacktrace=e.exception.values[0].stacktrace||{},e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames||[];var r=isNaN(parseInt(i,10))?void 0:i,o=isNaN(parseInt(n,10))?void 0:n,a=Object(l.k)(t)&&t.length>0?t:Object(c.g)();return 0===e.exception.values[0].stacktrace.frames.length&&e.exception.values[0].stacktrace.frames.push({colno:r,filename:a,function:"?",in_app:!0,lineno:o}),e},e.id="GlobalHandlers",e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n(0),r=n(21),o=n(5),a=n(3),s=n(28),l=n(25),c="cause",u=5,d=function(){function e(t){void 0===t&&(t={}),this.name=e.id,this._key=t.key||c,this._limit=t.limit||u}return e.prototype.setupOnce=function(){Object(r.b)(function(t,n){var i=Object(o.b)().getIntegration(e);return i?i._handler(t,n):t})},e.prototype._handler=function(e,t){if(!(e.exception&&e.exception.values&&t&&Object(a.g)(t.originalException,Error)))return e;var n=this._walkErrorTree(t.originalException,this._key);return e.exception.values=i.d(n,e.exception.values),e},e.prototype._walkErrorTree=function(e,t,n){if(void 0===n&&(n=[]),!Object(a.g)(e[t],Error)||n.length+1>=this._limit)return n;var r=Object(l.a)(e[t]),o=Object(s.c)(r);return this._walkErrorTree(e[t],t,i.d([o],n))},e.id="LinkedErrors",e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(0),r=n(21),o=n(5),a=n(2),s=Object(a.f)(),l=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){Object(r.b)(function(t){if(Object(o.b)().getIntegration(e)){if(!s.navigator||!s.location)return t;var n=t.request||{};return n.url=n.url||s.location.href,n.headers=n.headers||{},n.headers["User-Agent"]=s.navigator.userAgent,i.a({},t,{request:n})}return t})},e.id="UserAgent",e}()},function(e,t,n){"use strict";n.r(t);var i=n(35);n.d(t,"BaseTransport",function(){return i.a});var r=n(68);n.d(t,"FetchTransport",function(){return r.a});var o=n(69);n.d(t,"XHRTransport",function(){return o.a})},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.load=function(t){return i(this,void 0,void 0,function(){var n,i,o,a;return r(this,function(r){return n=new XMLHttpRequest,i=!1,o=!1,a=function(e){return!i&&!o&&200===e.status},n.open("GET",e.getLangBaseUrl()+"/"+t,!0),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Accept","text/html"),n.ontimeout=function(){return i=!0},n.onerror=function(){return o=!0},[2,new Promise(function(e,t){n.onreadystatechange=function(){4===n.readyState&&(a(n)?e(n.responseText):t(n.response))},n.send()})]})})},e.getLangBaseUrl=function(){var t=window.lang;return"en-US"==t?"/"+e.BASE_URL:"/"+t+"/"+e.BASE_URL},e.BASE_URL="templates",e}();t.AjaxTemplate=o},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(20),l=n(58),c=n(10),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.abstractPaymentInited=!1,t.paymentNumUsersDefault=1,t.DEFAULT_SELECTED_PROVIDER_BTN="stripe",t._onExternalPaymentAction=function(e,n){var i=n.detail;"UserPayment:AfterExternalAction"===e&&t._onPaymentSuccess(i.provider,i)},t._abstractOnPayButtonClicked=function(e){t._executePaymentAction("payButton",e)},t._abstractOnPaymentSuccess=function(e,n){t._onPaymentSuccess(e,n)},t._abstractOnPaymentFailed=function(e,n){t.userPayment.notifyPaymentError(e,n,t.paymentAction),t._onPaymentFailed(e,n)},t}return r(t,e),t.prototype.initAbstractPayment=function(e){var t;return o(this,void 0,void 0,function(){var n=this;return a(this,function(i){switch(i.label){case 0:if(this.ctx.canGoToAPreviousState()&&this.goToPreviousStateButtonIsVisible()?(this.dispatchEvent(new c.IloveEvent("disableContentAbandonment")),this.dialogCloseBtn&&(this.dialogCloseBtn.style.display="none")):this.dialogCloseBtn&&(this.dialogCloseBtn.style.display=""),this.abstractPaymentInited)return[2];if(this.userPayment=e.userPayment?e.userPayment:new l.UserPayment,this.abstractPaymentInited=!0,Object.assign(this,e),"gui"===(null===(t=this.paymentInterval)||void 0===t?void 0:t.type))switch(this.paymentInterval.gui){case"radio":break;case"boxes":this.initPaymentIntervalSelectorButtons();break;default:throw"Unknown way to determine paymentInterval '"+this.paymentInterval.type+"'"}return[4,this.initUserPayment(this.userPayment).then(function(){n.userPayment.addEventListener("UserPayment:ActionButtonClicked",n._abstractOnPayButtonClicked),n.userPayment.addEventListener("UserPayment:BeforeExternalAction",function(e){return n._onExternalPaymentAction("UserPayment:BeforeExternalAction",e)}),n.userPayment.addEventListener("UserPayment:AfterExternalAction",function(e){return n._onExternalPaymentAction("UserPayment:AfterExternalAction",e)})})];case 1:return i.sent(),[2]}})})},t.prototype.initAbstractCard=function(e){return o(this,void 0,void 0,function(){var t=this;return a(this,function(n){switch(n.label){case 0:return this.abstractPaymentInited=!0,Object.assign(this,e),this.userPayment=e.userPayment?e.userPayment:new l.UserPayment,[4,this.initUserPayment(this.userPayment).then(function(){t.userPayment.addEventListener("UserPayment:ActionButtonClicked",t._abstractOnPayButtonClicked)})];case 1:return n.sent(),[2]}})})},Object.defineProperty(t.prototype,"stripeViewParams",{get:function(){return{paymentButtonText:this.paymentProviderProps.find(function(e){return"stripe"===e.name}).paymentButtonText,currentPaymentMethod:this.currentPaymentMethod}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paypalViewParams",{get:function(){var e,t=this,n=(this.paymentProviderProps.find(function(e){return"paypal"===e.name}),function(){return!(t.ctx.isTrialEnabledForThisTool()&&t.ctx.canUserDoTrial())});switch(this.paymentAction){case"become_premium":case"subsc_update":e={actionName:"become_premium"===this.paymentAction?"PaySubscription":"UpdateSubscription",actionParams:{subscriptionInterval:function(){return t.selectedPaymentInterval},numUsers:function(){return t.numUsers?t.numUsers():t.paymentNumUsersDefault},numDigitalSignatures:function(){return t.numSignatures?t.numSignatures():void 0},disableTrial:n}};break;case"pay_package":e={actionName:"PayPackage",actionParams:{packageName:function(){return t.package.name},quantity:function(){return t.package.qty},disableTrial:n}};break;default:throw"Unknown paypal paymentAction '"+this.paymentAction+"'"}return{action:e}},enumerable:!0,configurable:!0}),t.prototype._executePaymentAction=function(e,t){var n,i=this,r=this.selectedPaymentProvider,o=this.paymentAction,a=this.paymentInterval?this.selectedPaymentInterval:void 0,s=this.numUsers?this.numUsers():this.paymentNumUsersDefault;this.showLoadingScreen(),this.userPayment.disableActionButton(r),this.dispatchEvent(new c.IloveEvent("disableContentAbandonment"));var l=!(this.ctx.isTrialEnabledForThisTool()&&this.ctx.canUserDoTrial());switch(o){case"become_premium":n=this.userPayment.paySubscription({numUsers:s,provider:r,subscriptionInterval:a,disableTrial:l});break;case"subsc_update":var u=this.numSignatures();n=this.userPayment.updateSubscription({numSignatures:u,numUsers:s,provider:r,subscriptionInterval:a,disableTrial:l});break;case"pay_package":var d=this.package.name,p=this.package.qty;n=this.userPayment.payPackage({packageName:d,packageQuantity:p,provider:r,disableTrial:l});break;case"update_card":var f=this.userPayment.stripeService.view.card;n=this.userPayment.updateCard({provider:r,element:f})}n.then(function(e){return i._abstractOnPaymentSuccess(r,e)}),n.catch(function(e){return i._abstractOnPaymentFailed(r,e)});var h=function(e){i.clearLoadingScreen(),i.userPayment.enableActionButton(r),i.dispatchEvent(new c.IloveEvent("unsetContentAbandonment"))};return n.then(h,h),n},t.prototype.initUserPayment=function(e){var t,n;return o(this,void 0,void 0,function(){var i,r;return a(this,function(o){switch(o.label){case 0:return(i=this.initializedPaymentProviders).includes("stripe")?[4,e.mountView("stripe",this.stripeViewMountPoint,this.stripeViewParams)]:[3,2];case 1:o.sent(),o.label=2;case 2:return i.includes("paypal")?[4,e.mountView("paypal",this.paypalViewMountPoint,this.paypalViewParams)]:[3,4];case 3:o.sent(),o.label=4;case 4:return r=null!==(n=null===(t=this.currentPaymentMethod)||void 0===t?void 0:t.provider)&&void 0!==n?n:this.DEFAULT_SELECTED_PROVIDER_BTN,this.initPaymentProviderSelectorButtons(),this.clickProviderButton(r),[2]}})})},Object.defineProperty(t.prototype,"initializedPaymentProviders",{get:function(){return this.paymentProviderProps.map(function(e){return e.name})},enumerable:!0,configurable:!0}),t.prototype.initPaymentIntervalSelectorButtons=function(){var e=this.domStateRoot.querySelectorAll(".payment__interval-selector__select-box"),t=function(t){e.forEach(function(e){return e.setAttribute("data-selected","false")}),t.setAttribute("data-selected","true")};e.forEach(function(e){return e.addEventListener("click",function(e){return t(e.currentTarget)})})},t.prototype.clickProviderButton=function(e){var t=this,n=this.domRoot,i=(n.querySelector(".payment__provider-views"),n.querySelector(".payment__provider-selector")),r=(n.querySelectorAll(".payment__provider-selector .payment__provider-selector__item"),Array.from(i.querySelectorAll(".payment__provider-selector__item")));r.forEach(function(e){return e.setAttribute("data-checked","false")});var o=r.find(function(t){return t.dataset.value===e});o.setAttribute("data-checked","true"),function(e){t.domRoot.querySelectorAll(".payment__provider-views .payment__provider-views__item").forEach(function(e){return e.classList.remove("payment__provider-views__item--appeared")});var n=t.domRoot.querySelector('.payment__provider-views .payment__provider-views__item[data-provider-name="'+e+'"]');n&&n.classList.add("payment__provider-views__item--appeared")}(o.getAttribute("data-value"))},t.prototype.initPaymentProviderSelectorButtons=function(){var e=this,t=this.domRoot,n=t.querySelector(".payment__provider-selector").querySelectorAll(".payment__provider-selector__item"),i=t.querySelectorAll(".payment__provider-selector .payment__provider-selector__item");n.forEach(function(t){t.addEventListener("click",function(n){e.clickProviderButton(t.dataset.value)})});var r=this.initializedPaymentProviders;i.forEach(function(e){var t=e.getAttribute("data-value");if(!t)throw"Provider selector button is missing data-value attribute";r.includes(t)||(e.style.display="none")})},Object.defineProperty(t.prototype,"stripeViewMountPoint",{get:function(){var e=this.domRoot.querySelector(".payment__stripe-view");if(!e)throw"Mountpoint for Stripe view not found";return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paypalViewMountPoint",{get:function(){var e=this.domRoot.querySelector(".payment__paypal-view");if(!e)throw"Mountpoint for Paypal view not found";return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedPaymentProvider",{get:function(){return 1==this.paymentProviderProps.length?this.paymentProviderProps[0].name:this.domRoot.querySelector(".payment__provider-selector .payment__provider-selector__item[data-checked='true']").getAttribute("data-value")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedPaymentInterval",{get:function(){if("gui"===this.paymentInterval.type){if("boxes"===this.paymentInterval.gui)return this.selected_paymentInterval_boxes;if("radio"===this.paymentInterval.gui)return this.selected_paymentInterval_radio}else if("predefined"===this.paymentInterval.type)return this.paymentInterval.value;throw"Unknown way to determine paymentInterval '"+this.paymentInterval.type+"'"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected_paymentInterval_radio",{get:function(){var e=Array.from(this.domRoot.querySelectorAll(".payment__interval-selector [name='paymentInterval']"));if(0===e.length)throw"Radio buttons for payment interval not found";for(var t=0;t<e.length;t++)if(e[t].checked)return e[t].value;return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected_paymentInterval_boxes",{get:function(){var e=this.domStateRoot.querySelector(".payment__interval-selector__select-box[data-selected='true']");if(!e)throw"No selected interval box found";return e.getAttribute("data-value")},enumerable:!0,configurable:!0}),t}(s.StateBase);t.AbstractPaymentState=u},function(e,t,n){"use strict";(function(e){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(107),s=n(17),l=n(109),c=n(10),u=n(26),d=n(49);!function(e){e.SUMMARY_INFO="/<locale?>/purchase-summary/info",e.CANCEL_SUBSCRIPTION="/user/subscription/cancel",e.CANCEL_SUBSCRIPTION_REASON="/user/subscription/cancel/reason",e.CANCEL_SUBSCR_OFFER="/user/subscription/canceloffer",e.REACTIVATE_SUBSCRIPTION="/user/subscription/reactivate",e.REMOVE_PAYMENT_DATA="/user/subscription/payment-remove"}(o||(o={}));var p=function(){function t(e){void 0===e&&(e={}),this.views={},this.eventEmitter=new u.ILoveEventEmitter,Object.assign(this,e),this.stripeService=new a.StripeService,this.paypalService=new l.PaypalService,this.initEventListenersOnProviders()}return t.prototype.notifyPaymentError=function(e,t,n){var i,r="generic_payment_error";"update_card"===n&&(r="generic_card_update_error");try{var o=JSON.parse(t.responseText).msg;return void("stripe"===e?this.stripeService.view.notifyCardErrorMsg(o):"paypal"===e&&this.paypalService.notifyErrorMsg(o))}catch(e){}if("stripe"===e){var a=null===(i=null===t||void 0===t?void 0:t.error)||void 0===i?void 0:i.message,s=a||this.stripeService.view.getTranslationText(r);this.stripeService.view.notifyCardErrorMsg(s)}else if("paypal"===e){s=this.paypalService.getTranslationText(r);this.paypalService.notifyErrorMsg(s)}},t.prototype.clearPaymentError=function(e){var t=this;void 0===e&&(e=null);var n=function(){return t.paypalService.clearErrorMsg()},i=function(){return t.stripeService.view.clearCardErrorMsg()};if(null===e)n(),i();else if("paypal"===e)n();else{if("stripe"!==e)throw"Unknown provider "+e;i()}},t.prototype.enableActionButton=function(e){if("stripe"!==e){if("paypal"!==e)throw"Not implemented provider"}else this.stripeService.view.enableActionButton()},t.prototype.disableActionButton=function(e){if("stripe"!==e){if("paypal"!==e)throw"Not implemented provider"}else this.stripeService.view.disableActionButton()},t.prototype.initEventListenersOnProviders=function(){var e=this;this.stripeService.addEventListener("View:ActionButtonClicked",function(){e.dispatchEvent(new c.IloveEvent("UserPayment:ActionButtonClicked"))}),this.paypalService.addEventListener("onPaymentInited",function(t){var n=Object.assign({provider:"paypal"},t.detail);e.dispatchEvent(new c.IloveEvent("UserPayment:BeforeExternalAction",n))}),this.paypalService.addEventListener("onPaymentAuthorized",function(t){var n=Object.assign({provider:"paypal"},t.detail);e.updateUser(n.response),e.dispatchEvent(new c.IloveEvent("UserPayment:AfterExternalAction",n))}),this.paypalService.addEventListener("onPaymentInited_error",function(t){var n=Object.assign({provider:"paypal"},t.detail);e.dispatchEvent(new c.IloveEvent("UserPayment:Error",n))}),this.paypalService.addEventListener("onPaymentAuthorized_error",function(t){var n=Object.assign({provider:"paypal"},t.detail);e.dispatchEvent(new c.IloveEvent("UserPayment:Error",n))})},t.prototype.updateCard=function(e){return i(this,void 0,void 0,function(){var t,n;return r(this,function(i){switch(i.label){case 0:if("updateCard","stripe"!==e.provider)return[3,5];t=void 0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.stripeService.updateCard(e.element)];case 2:return t=i.sent(),[3,4];case 3:throw n=i.sent(),s.configureScope(function(t){var i;t.setExtra("error",{err:null!==(i=null===n||void 0===n?void 0:n.responseText)&&void 0!==i?i:n,params:e})}),s.captureMessage("Failed Stripe updateCard"),n;case 4:return this.updateUser(t),[2,t];case 5:throw"'Update card' is not implemented for provider '"+e.provider+"'"}})})},t.prototype.payPackage=function(e){return i(this,void 0,void 0,function(){var t,n,i,o,a;return r(this,function(r){switch(r.label){case 0:if("paypal"===e.provider)throw"This action is performed by PaypalService by mounting the view";if(t="payPackage",n=null,"stripe"!==e.provider)return[3,5];i=this.stripeService.paymentVia,o={paymentVia:i,packageName:e.packageName,quantity:e.packageQuantity,disableTrial:e.disableTrial},this.dispatchEvent(new c.IloveEvent("UserPayment:BeforeAction",{action:t,params:e})),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.stripeService.payPackage(o)];case 2:return n=r.sent(),[3,4];case 3:throw a=r.sent(),s.configureScope(function(t){var n;t.setExtra("error",{err:null!==(n=null===a||void 0===a?void 0:a.responseText)&&void 0!==n?n:a,params:e})}),s.captureMessage("Failed Stripe payPackage"),a;case 4:return this.updateUser(n),this.dispatchEvent(new c.IloveEvent("UserPayment:AfterAction",{action:t,params:e,response:n})),[2,n];case 5:throw"Unknown provider "+e.provider}})})},t.prototype.subscribeNextMonthsWithDiscount=function(){return i(this,void 0,void 0,function(){var t,n,i,a,l,u,d;return r(this,function(r){switch(r.label){case 0:t="subscribeNextMonthsWithDiscount",this.dispatchEvent(new c.IloveEvent("UserPayment:BeforeAction",{action:t,params:null})),n=e.post(o.CANCEL_SUBSCR_OFFER),r.label=1;case 1:return r.trys.push([1,3,,4]),l=(a=JSON).parse,[4,n.promise()];case 2:return i=l.apply(a,[r.sent()]),[3,4];case 3:throw u=r.sent(),s.configureScope(function(e){var t;e.setExtra("error",{err:null!==(t=null===u||void 0===u?void 0:u.responseText)&&void 0!==t?t:u,params:null})}),s.captureMessage("Failed subscribeNextMonthsWithDiscount"),u;case 4:return d=i.data,this.updateUser(i),this.dispatchEvent(new c.IloveEvent("UserPayment:AfterAction",{action:t,params:null,response:i})),[2,d]}})})},t.prototype.cancelSubscription=function(){return i(this,void 0,void 0,function(){var t,n,i,a,l,u,d;return r(this,function(r){switch(r.label){case 0:t="cancelSubscription",this.dispatchEvent(new c.IloveEvent("UserPayment:BeforeAction",{action:t,params:null})),n=e.post(o.CANCEL_SUBSCRIPTION),r.label=1;case 1:return r.trys.push([1,3,,4]),l=(a=JSON).parse,[4,n.promise()];case 2:return i=l.apply(a,[r.sent()]),[3,4];case 3:throw u=r.sent(),s.configureScope(function(e){var t;e.setExtra("error",{err:null!==(t=null===u||void 0===u?void 0:u.responseText)&&void 0!==t?t:u,params:null})}),s.captureMessage("Failed cancelSubscription"),u;case 4:return d=i.data,this.updateUser(i),this.dispatchEvent(new c.IloveEvent("UserPayment:AfterAction",{action:t,params:null,response:i})),[2,d]}})})},t.prototype.reactivateSubscription=function(){return i(this,void 0,void 0,function(){var t,n,i,a,l,u,d;return r(this,function(r){switch(r.label){case 0:t="reactivateSubscription",this.dispatchEvent(new c.IloveEvent("UserPayment:BeforeAction",{action:t,params:null})),n=e.post(o.REACTIVATE_SUBSCRIPTION),r.label=1;case 1:return r.trys.push([1,3,,4]),l=(a=JSON).parse,[4,n.promise()];case 2:return i=l.apply(a,[r.sent()]),[3,4];case 3:throw u=r.sent(),s.configureScope(function(e){var t;e.setExtra("error",{err:null!==(t=null===u||void 0===u?void 0:u.responseText)&&void 0!==t?t:u,params:null})}),s.captureMessage("Failed reactivateSubscription"),u;case 4:return d=i.data,this.updateUser(i),this.dispatchEvent(new c.IloveEvent("UserPayment:AfterAction",{action:t,params:null,response:i})),[2,d]}})})},t.prototype.cancelSubscriptionReason=function(t){return i(this,void 0,void 0,function(){var n,i,a,l,u,d,p,f;return r(this,function(r){switch(r.label){case 0:n="cancelSubscriptionReason",i={reason:t.reason,message:t.message},this.dispatchEvent(new c.IloveEvent("UserPayment:BeforeAction",{action:n,params:t})),a=e.post(o.CANCEL_SUBSCRIPTION_REASON,i),r.label=1;case 1:return r.trys.push([1,3,,4]),d=(u=JSON).parse,[4,a.promise()];case 2:return l=d.apply(u,[r.sent()]),[3,4];case 3:throw p=r.sent(),s.configureScope(function(e){var n;e.setExtra("error",{err:null!==(n=null===p||void 0===p?void 0:p.responseText)&&void 0!==n?n:p,params:t})}),s.captureMessage("Failed cancelSubscriptionReason"),p;case 4:return f=l.data,this.updateUser(l),this.dispatchEvent(new c.IloveEvent("UserPayment:AfterAction",{action:n,params:null,response:l})),[2,f]}})})},t.prototype.paySubscription=function(e){return i(this,void 0,void 0,function(){var t,n,i,o,a;return r(this,function(r){switch(r.label){case 0:if("paypal"===e.provider)throw"This action is performed by PaypalService by mounting the view";if(n="paySubscription","stripe"!==e.provider)return[3,5];i=this.stripeService.paymentVia,o={paymentVia:i,numUsers:e.numUsers,subscriptionInterval:e.subscriptionInterval,disableTrial:e.disableTrial},this.dispatchEvent(new c.IloveEvent("UserPayment:BeforeAction",{detail:{action:n,params:e}})),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.stripeService.paySubscription(o)];case 2:return t=r.sent(),[3,4];case 3:throw a=r.sent(),s.configureScope(function(t){var n;t.setExtra("error",{err:null!==(n=null===a||void 0===a?void 0:a.responseText)&&void 0!==n?n:a,params:e})}),s.captureMessage("Failed Stripe PaySubscription"),a;case 4:return this.updateUser(t),this.dispatchEvent(new c.IloveEvent("UserPayment:AfterAction",{detail:{action:n,params:null,response:t}})),[2,t];case 5:throw"Unknown provider "+e.provider}})})},t.prototype.updateSubscription=function(e){return i(this,void 0,void 0,function(){var t,n,i,o,a;return r(this,function(r){switch(r.label){case 0:if("paypal"===e.provider)throw"This action is performed by PaypalService by mounting the view";if(t="updateSubscription","stripe"!==e.provider)return[3,5];n=this.stripeService.paymentVia,i=void 0,o={paymentVia:n,numDigitalSignatures:e.numSignatures,numUsers:e.numUsers,subscriptionInterval:e.subscriptionInterval,disableTrial:e.disableTrial},this.dispatchEvent(new c.IloveEvent("UserPayment:BeforeAction",{action:t,params:e})),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.stripeService.paySubscription(o)];case 2:return i=r.sent(),[3,4];case 3:throw a=r.sent(),s.configureScope(function(t){var n;t.setExtra("error",{err:null!==(n=null===a||void 0===a?void 0:a.responseText)&&void 0!==n?n:a,params:e})}),s.captureMessage("Failed Stripe UpdateSubscription"),a;case 4:return this.updateUser(i),this.dispatchEvent(new c.IloveEvent("UserPayment:AfterAction",{action:t,params:null,response:i})),[2,i];case 5:throw"Unknown provider "+e.provider}})})},t.prototype.paymentRemove=function(){return i(this,void 0,void 0,function(){var t,n,i,a,l,u,d;return r(this,function(r){switch(r.label){case 0:t="paymentRemove",this.dispatchEvent(new c.IloveEvent("UserPayment:BeforeAction",{detail:{action:t,params:null}})),n=e.post(o.REMOVE_PAYMENT_DATA),r.label=1;case 1:return r.trys.push([1,3,,4]),l=(a=JSON).parse,[4,n.promise()];case 2:return i=l.apply(a,[r.sent()]),[3,4];case 3:throw u=r.sent(),s.configureScope(function(e){var t;e.setExtra("error",{err:null!==(t=null===u||void 0===u?void 0:u.responseText)&&void 0!==t?t:u,params:null})}),s.captureMessage("Failed paymentRemove"),u;case 4:return d=i.data,this.updateUser(i),this.dispatchEvent(new c.IloveEvent("UserPayment:AfterAction",{detail:{action:t,params:null,response:i}})),[2,d]}})})},t.prototype.getPaymentSummary_updateSubscription=function(e,t,n){return this._getPaymentSummary({type:"subscription",numDigitalSignatures:e,numUsers:t,subscriptionInterval:n,subscriptionPlan:void 0})},t.prototype.getPaymentSummary_package=function(e,t){return this._getPaymentSummary({type:"package",package:e,quantity:t})},t.prototype._getPaymentSummary=function(t){var n=o.SUMMARY_INFO;n="en-US"===window.lang?n.replace("/<locale?>",""):n.replace("<locale?>",window.lang);var i=null;return"subscription"===t.type?i=e.post(n,{type:"subscription",users:t.numUsers,signatures:t.numDigitalSignatures,interval:t.subscriptionInterval}):"package"===t.type&&(i=e.post(n,{type:"package",package:t.package,quantity:t.quantity})),new Promise(function(e,t){i.done(function(t){var n=JSON.parse(t);e(n)}).fail(function(e,n,i){s.configureScope(function(t){t.setExtra("error",e.responseText)}),s.captureMessage("Error while fetching payment summary"),t(e.responseText)})})},t.prototype.mountView=function(e,t,n){return i(this,void 0,void 0,function(){var i,o,a,s;return r(this,function(r){switch(r.label){case 0:switch(e){case"stripe":return[3,1];case"paypal":return[3,3]}return[3,5];case 1:return i=this.views,o="stripe",[4,this.stripeService.view.mount(t,n)];case 2:return i[o]=r.sent(),[2,this.views.stripe];case 3:return a=this.views,s="paypal",[4,this.paypalService.mountView(t,n)];case 4:return a[s]=r.sent(),[2,this.views.paypal];case 5:return[2]}})})},t.prototype.updateUser=function(e){d.UserAuth.updateUser(e.user),e.content&&d.UserAuth.updateUserMenu(e.content)},t.prototype.dispatchEvent=function(e){return this.eventEmitter.dispatchEvent(e)},t.prototype.addEventListener=function(e,t){return this.eventEmitter.addEventListener(e,t)},t}();t.UserPayment=p}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),r=function(){return function(e){void 0===e&&(e={}),this.reUploaded=!1,this.server_filename=null,this.filename=null,this.rotate=null,this.password=null,this.file=null,Object.assign(this,e),null!=this.filename&&(this.filename=this.filename.replace(/[\u00A0\u1680​\u180e\u2000-\u2009\u200a​\u200b​\u202f\u205f​\u3000\ufeff]/g," ").trim())}}();t.File=r;var o=function(){function t(){this.files=[],this.ignored=[],this.removed=[]}return t.prototype.addFile=function(e){e=this.cleanName(e),this.files.push(e),this.onFileAdd()},t.prototype.getFile=function(t){var n=null;return e.each(this.files,function(e,i){i.id!=t||(n=i)}),n},t.prototype.getFileIndex=function(t){var n=0;return e.each(this.files,function(e,i){if(i.id==t)return n=e}),n},t.prototype.getFileByServerFilename=function(t){var n=null;return e.each(this.files,function(e,i){i.server_filename!=t||(n=i)}),n},t.prototype.getFirst=function(){return this.files[0]},t.prototype.getLast=function(){return this.files[this.files.length-1]},t.prototype.onFileAdd=function(){e(".numPages").html(this.files[0].numPages)},t.prototype.updateFile=function(t,n){var i=null,r=this;return e.each(this.files,function(e,o){if(o.id==t)return n=r.cleanName(n),Object.assign(o,n),i=o}),i},t.prototype.removeFile=function(t,n){void 0===n&&(n=!1);var i=this;e.each(this.files,function(e,r){if(r&&r.id==t){if(i.removed.push(t),e>-1&&i.files.splice(e,1),0==n){var o=null;!!window.MSInputMethodContext&&!!document.documentMode?(o=document.createEvent("CustomEvent")).initEvent("fileRemoved",!0,!0,{fileId:t}):(o=new CustomEvent("fileRemoved",{detail:{fileId:t}}),window.dispatchEvent(o))}}else;})},t.prototype.removeFilesExcept=function(t){var n=this;e.each(this.files,function(e,i){i&&i.id!==t&&e>-1&&n.files.splice(e,1)})},t.prototype.count=function(){return this.files.length},t.prototype.countNotIgnored=function(){var t=0;return e.each(this.files,function(e,n){1!=n.ignored&&t++}),t},t.prototype.countIgnored=function(){var t=0;return e.each(this.files,function(e,n){1==n.ignored&&t++}),t},t.prototype.size=function(){var t=0;return e.each(this.files,function(e,n){t+=parseInt(n.size)}),t},t.prototype.fileSize=function(e){var t=this,n=0;if(e instanceof Array)e.forEach(function(e,i){n+=t.fileSize(e)});else{var i=this.getFile(e);n=parseInt(i.size)}return n},t.prototype.getFileSizeNotIgnored=function(){var e=0;return this.files.forEach(function(t,n){1!=t.ignored&&t.size&&(e+=parseInt(t.size.toString()))}),e},t.prototype.cleanName=function(e){return"filename"in e&&null!=e.filename&&(e.filename,e.filename.replace(/[\u00A0\u1680​\u180e\u2000-\u2009\u200a​\u200b​\u202f\u205f​\u3000\ufeff]/g," ").trim(),e.filename=e.filename.replace(/"/g,"")),"name"in e&&null!=e.name&&(e.name,e.name.replace(/[\u00A0\u1680​\u180e\u2000-\u2009\u200a​\u200b​\u202f\u205f​\u3000\ufeff]/g," ").trim(),e.name=e.name.replace(/"/g,"")),e},t.prototype.onUploaded=function(){return new Promise(function(e,t){})},t.prototype.checkFilesUploaded=function(){var e=!0,t=this;return this.files.forEach(function(n){if(void 0===n||null===n)return!0;if("percent"in n&&!(n.percent<100)&&("server_filename"in n||"error"in n&&!("error"in n&&0==n.error))||(e=!1),1==n.error){e=!1;try{window.Toastr.error(i.Lang.t(n.errorData.error.param.type[0])+"<br>"+n.name,i.Lang.t("Wops"),{timeOut:5e3,positionClass:"toast-top-left"})}catch(e){}t.removeFile(n.id)}}),e},t.prototype.getUploadedFiles=function(){var e={};return this.files.forEach(function(t){var n={filename:t.name,server_filename:t.server_filename};t.rename&&(n.filename=t.rename),t.password&&(n.password=t.password),t.pages&&(n.pages=t.pages),t.rotate&&(n.rotate=t.rotate),e[t.id]=n}),e},t}();t.FileStack=o}).call(this,n(1))},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(10),a=n(26),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(n(96).Dialog);t.TemporaryDialog=s;var l=function(){function e(e){var t=this;void 0===e&&(e={}),this.isShown=!1,this.show=function(){if(!t.isShown){var e=new s(t.dialogProps);return e.addEventListener("closed",function(){t.currentDialog=null,t.dispatchEvent(new o.IloveEvent("closed"))}),e.addEventListener("hidden",function(){t.isShown=!1,e.destroy(),t.dispatchEvent(new o.IloveEvent("hidden"))}),e.addEventListener("shown",function(){t.dispatchEvent(new o.IloveEvent("shown"))}),e.setContent(t.contentBuilderFn()),e.show(),t.isShown=!0,t.currentDialog=e,e}},this.close=function(){t.currentDialog&&t.currentDialog.close()},this.setContentBuilder=function(e){return t.contentBuilderFn=e,t},this.eventEmitter=new a.ILoveEventEmitter,this.dialogProps=e}return e.prototype.dispatchEvent=function(e){return this.eventEmitter.dispatchEvent(e)},e.prototype.addEventListener=function(e,t){return this.eventEmitter.addEventListener(e,t)},e}();t.default=l},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(103),r=n(7),o=function(){function e(e){this.dsn=e,this._dsnObject=new i.a(e)}return e.prototype.getDsn=function(){return this._dsnObject},e.prototype.getBaseApiEndpoint=function(){var e=this._dsnObject,t=e.protocol?e.protocol+":":"",n=e.port?":"+e.port:"";return t+"//"+e.host+n+(e.path?"/"+e.path:"")+"/api/"},e.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},e.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},e.prototype._getIngestEndpoint=function(e){return""+this.getBaseApiEndpoint()+this._dsnObject.projectId+"/"+e+"/"},e.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},e.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},e.prototype._encodedAuth=function(){var e={sentry_key:this._dsnObject.user,sentry_version:"7"};return Object(r.e)(e)},e.prototype.getStoreEndpointPath=function(){var e=this._dsnObject;return(e.path?"/"+e.path:"")+"/api/"+e.projectId+"/store/"},e.prototype.getRequestHeaders=function(e,t){var n=this._dsnObject,i=["Sentry sentry_version=7"];return i.push("sentry_client="+e+"/"+t),i.push("sentry_key="+n.user),n.pass&&i.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":i.join(", ")}},e.prototype.getReportDialogEndpoint=function(e){void 0===e&&(e={});var t=this._dsnObject,n=this.getBaseApiEndpoint()+"embed/error-page/",i=[];for(var r in i.push("dsn="+t.toString()),e)if("user"===r){if(!e.user)continue;e.user.name&&i.push("name="+encodeURIComponent(e.user.name)),e.user.email&&i.push("email="+encodeURIComponent(e.user.email))}else i.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return i.length?n+"?"+i.join("&"):n},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(11),r=n(23),o=n(39),a=function(){function e(e){this._options=e,this._options.dsn||i.a.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return e.prototype._setupTransport=function(){return new o.a},e.prototype.eventFromException=function(e,t){throw new r.a("Backend has to implement `eventFromException` method")},e.prototype.eventFromMessage=function(e,t,n){throw new r.a("Backend has to implement `eventFromMessage` method")},e.prototype.sendEvent=function(e){this._transport.sendEvent(e).then(null,function(e){i.a.error("Error while sending event: "+e)})},e.prototype.getTransport=function(){return this._transport},e}()},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(16),o=n(9),a=n(19);!function(e){e.ERROR_FEATURE="this feature is for premium only",e.ERROR_SIZE="file size too big",e.ERROR_FILES="too much files",e.ERROR_EXTENSION="invalid filetype"}(i=t.REASON||(t.REASON={}));var s=function(){function t(e){this.LEVEL_PREMIUM="premium_limits",this.LEVEL_REGISTERED="registered_limits",this.LEVEL_PUBLIC="limits",this.err=null,this.files=null,this.fileLimits=null,this.allFileLimits=null,this.tool=null,this.subtool=null,this.ignored=[],this.userLevel="public",Object.assign(this,e),this.concreteTool=this.tool==this.subtool?this.tool:this.tool.replace("image",this.subtool)}return t.prototype.addIgnoredFile=function(e){this.ignored.push(e)},t.prototype.getIgnoredFiles=function(){return this.ignored},t.prototype.isIgnored=function(e){return-1!=this.ignored.indexOf(e)},t.prototype.checkFileLimits=function(t,n){var o=this;this.fileLimits=window.ilovepdfConfig.fileLimits;var a=r.UserModel.get();a&&1==a.premium&&(this.fileLimits=a.limits),function(){if(o.fileLimits[o.concreteTool])return!0;return!1}()&&(function(t){if(t>o.fileLimits[o.concreteTool].files)throw 0==e(".download").length&&window.ga("send","event","limits","filenumber-exceeded",o.concreteTool,t),i.ERROR_FILES}(n),function(t){if(t>1024*parseInt(o.fileLimits[o.concreteTool].mb)*1024){var n=Math.floor(t/1024/1024);throw 0==e(".download").length&&window.ga("send","event","limits","filesize-exceeded",o.concreteTool,n),i.ERROR_SIZE}}(t))},t.prototype.findNextLevelLimit=function(e,t,n){for(var i in this.allFileLimits)if(this.allFileLimits.hasOwnProperty(i)){var r=this.allFileLimits[i];if(r.hasOwnProperty(e)){var o=r[e];if(o.hasOwnProperty(t)&&o[t]>=n)return i}}return!1},t.prototype.getPremiumLimitByTool=function(e,t){return this.allFileLimits.premium_limits[e][t]},t.prototype.getLevelLimit=function(e,t,n){return 0==n&&(n=this.LEVEL_PREMIUM),this.allFileLimits[n][e][t]},t.prototype.makeErrorData=function(e,t,n,i,r){var a=this;function s(e,t){return 1==e?"files"==t?o.Lang.t("1 file"):o.Lang.t("1 mb"):("mb"==t&&e>=1e3&&(e/=1e3,t="Gb"),o.Lang.t("${limit} "+t.toLowerCase(),{limit:e}))}function l(e){return e==a.LEVEL_REGISTERED?o.Lang.t("registeredLevel"):e==a.LEVEL_PREMIUM?o.Lang.t("premiumLevel"):o.Lang.t("publicLevel")}return{currentLimit:s(t,e),currentLevel:l(n).ucFirst(),nextLimit:s(i,e),nextLevel:l(r).ucFirst()}},t.prototype.limitErrorText=function(e){return o.Lang.t("limitTaskMsg",e)},t.prototype.setLimit=function(t){this.err=t;var n=t==i.ERROR_SIZE?"mb":"files",r=t==i.ERROR_SIZE?this.files.size()/1024/1024:this.files.count(),s=this.findNextLevelLimit(this.concreteTool,n,r);if(0==s){var l=this.getPremiumLimitByTool(this.concreteTool,n);if(0==e("#superlimit").length){var c=a.Tools.modalView({id:"superlimit",title:"",content:""}),u=e(c);u.find(".modal-dialog").addClass("modal-dialog-centered"),u.appendTo(e("body"))}return setTimeout(function(){"files"==n?(e("#superlimit .modal-title").html(o.Lang.t("File number exceeded")),e("#superlimit .modal-body").html(o.Lang.t("Sorry, we are not ready for that.")+"<br>\n                         \x3c!--"+o.Lang.t("limitFiles",{files:l})+"<br>--\x3e\n                         "+o.Lang.t("superlimitWhoa")+"<br>\n                         "+o.Lang.t("superlimitDownload"))):(e("#superlimit .modal-title").html(o.Lang.t("File size exceeded")),e("#superlimit .modal-body").html(o.Lang.t("Sorry, we are not ready for that.")+"<br>\n                         \x3c!--"+o.Lang.t("limitMb",{mb:l})+"<br>--\x3e\n                         "+o.Lang.t("superlimitWhoa")+"<br>\n                         "+o.Lang.t("superlimitDownload"))),e("#superlimit").modal("toggle")},500),null}var d=this.getLevelLimit(this.concreteTool,n,s);return s==this.LEVEL_PUBLIC?null:{limitName:n,limitValue:r,nextLevelLimit:s,nextLimit:d}},t.prototype.getCurrentLimitsLevel=function(){var e=this.LEVEL_PUBLIC;return r.UserModel.isUser()&&(e=this.LEVEL_REGISTERED,r.UserModel.isPremium()&&(e=this.LEVEL_PREMIUM)),e},t}();t.Limits=s}).call(this,n(1))},function(e,t,n){"use strict";var i=n(0),r=n(21),o=n(103),a=n(3),s=n(11),l=n(15),c=n(2),u=n(7),d=n(22),p=n(5),f=[];function h(e){var t={};return function(e){var t=e.defaultIntegrations&&i.d(e.defaultIntegrations)||[],n=e.integrations,r=[];if(Array.isArray(n)){var o=n.map(function(e){return e.name}),a=[];t.forEach(function(e){-1===o.indexOf(e.name)&&-1===a.indexOf(e.name)&&(r.push(e),a.push(e.name))}),n.forEach(function(e){-1===a.indexOf(e.name)&&(r.push(e),a.push(e.name))})}else"function"==typeof n?(r=n(t),r=Array.isArray(r)?r:[r]):r=i.d(t);var s=r.map(function(e){return e.name});return-1!==s.indexOf("Debug")&&r.push.apply(r,i.d(r.splice(s.indexOf("Debug"),1))),r}(e).forEach(function(e){t[e.name]=e,function(e){-1===f.indexOf(e.name)&&(e.setupOnce(r.b,p.b),f.push(e.name),s.a.log("Integration installed: "+e.name))}(e)}),t}n.d(t,"a",function(){return g});var g=function(){function e(e,t){this._integrations={},this._processing=!1,this._backend=new e(t),this._options=t,t.dsn&&(this._dsn=new o.a(t.dsn))}return e.prototype.captureException=function(e,t,n){var i=this,r=t&&t.event_id;return this._processing=!0,this._getBackend().eventFromException(e,t).then(function(e){r=i.captureEvent(e,t,n)}),r},e.prototype.captureMessage=function(e,t,n,i){var r=this,o=n&&n.event_id;return this._processing=!0,(Object(a.i)(e)?this._getBackend().eventFromMessage(""+e,t,n):this._getBackend().eventFromException(e,n)).then(function(e){o=r.captureEvent(e,n,i)}),o},e.prototype.captureEvent=function(e,t,n){var i=this,r=t&&t.event_id;return this._processing=!0,this._processEvent(e,t,n).then(function(e){r=e&&e.event_id,i._processing=!1}).then(null,function(e){s.a.error(e),i._processing=!1}),r},e.prototype.getDsn=function(){return this._dsn},e.prototype.getOptions=function(){return this._options},e.prototype.flush=function(e){var t=this;return this._isClientProcessing(e).then(function(n){return clearInterval(n.interval),t._getBackend().getTransport().close(e).then(function(e){return n.ready&&e})})},e.prototype.close=function(e){var t=this;return this.flush(e).then(function(e){return t.getOptions().enabled=!1,e})},e.prototype.setupIntegrations=function(){this._isEnabled()&&(this._integrations=h(this._options))},e.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch(t){return s.a.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},e.prototype._isClientProcessing=function(e){var t=this;return new l.a(function(n){var i=0,r=0;clearInterval(r),r=setInterval(function(){t._processing?e&&(i+=1)>=e&&n({interval:r,ready:!1}):n({interval:r,ready:!0})},1)})},e.prototype._getBackend=function(){return this._backend},e.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},e.prototype._prepareEvent=function(e,t,n){var o=this,a=this.getOptions().normalizeDepth,s=void 0===a?3:a,u=i.a({},e,{event_id:e.event_id||(n&&n.event_id?n.event_id:Object(c.m)()),timestamp:e.timestamp||Object(c.l)()});this._applyClientOptions(u),this._applyIntegrationsMetadata(u);var d=t;n&&n.captureContext&&(d=r.a.clone(d).update(n.captureContext));var p=l.a.resolve(u);return d&&(p=d.applyToEvent(u,n)),p.then(function(e){return"number"==typeof s&&s>0?o._normalizeEvent(e,s):e})},e.prototype._normalizeEvent=function(e,t){return e?i.a({},e,e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(function(e){return i.a({},e,e.data&&{data:Object(u.c)(e.data,t)})})},e.user&&{user:Object(u.c)(e.user,t)},e.contexts&&{contexts:Object(u.c)(e.contexts,t)},e.extra&&{extra:Object(u.c)(e.extra,t)}):null},e.prototype._applyClientOptions=function(e){var t=this.getOptions(),n=t.environment,i=t.release,r=t.dist,o=t.maxValueLength,a=void 0===o?250:o;void 0===e.environment&&void 0!==n&&(e.environment=n),void 0===e.release&&void 0!==i&&(e.release=i),void 0===e.dist&&void 0!==r&&(e.dist=r),e.message&&(e.message=Object(d.d)(e.message,a));var s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=Object(d.d)(s.value,a));var l=e.request;l&&l.url&&(l.url=Object(d.d)(l.url,a))},e.prototype._applyIntegrationsMetadata=function(e){var t=e.sdk,n=Object.keys(this._integrations);t&&n.length>0&&(t.integrations=n)},e.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},e.prototype._processEvent=function(e,t,n){var i=this,r=this.getOptions(),o=r.beforeSend,c=r.sampleRate;if(!this._isEnabled())return l.a.reject("SDK not enabled, will not send event.");var u="transaction"===e.type;return!u&&"number"==typeof c&&Math.random()>c?l.a.reject("This event has been sampled, will not send event."):new l.a(function(r,l){i._prepareEvent(e,n,t).then(function(e){if(null!==e){var n=e;if(t&&t.data&&!0===t.data.__sentry__||!o||u)return i._sendEvent(n),void r(n);var c=o(e,t);if(void 0===c)s.a.error("`beforeSend` method has to return `null` or a valid event.");else if(Object(a.m)(c))i._handleAsyncBeforeSend(c,r,l);else{if(null===(n=c))return s.a.log("`beforeSend` returned `null`, will not send event."),void r(null);i._sendEvent(n),r(n)}}else l("An event processor returned null, will not send event.")}).then(null,function(e){i.captureException(e,{data:{__sentry__:!0},originalException:e}),l("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+e)})})},e.prototype._handleAsyncBeforeSend=function(e,t,n){var i=this;e.then(function(e){null!==e?(i._sendEvent(e),t(e)):n("`beforeSend` returned `null`, will not send event.")}).then(null,function(e){n("beforeSend rejected with "+e)})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return e.prototype.memoize=function(e){if(this._hasWeakSet)return!!this._inner.has(e)||(this._inner.add(e),!1);for(var t=0;t<this._inner.length;t++){if(this._inner[t]===e)return!0}return this._inner.push(e),!1},e.prototype.unmemoize=function(e){if(this._hasWeakSet)this._inner.delete(e);else for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e){this._inner.splice(t,1);break}},e}()},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(110),r=function(){function t(){}return t.bytesToSize=function(e){if(0==e)return"0 Byte";var t=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,t)).toFixed(2)+" "+["Bytes","KB","MB","GB","TB"][t]},t.mbytesToSize=function(e){return t.bytesToSize(1e6*e)},t.convertPointsToPixels=function(e){return e*(1+1/3)},t.strCapitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.isRTL=function(){return e("body").hasClass("rtl")},Object.defineProperty(t,"textDirection",{get:function(){return t.isRTL()?"right":"left"},enumerable:!0,configurable:!0}),t.getClosestNumber=function(e,t){for(var n=Math.abs(t[0]-e),i=0,r=1;r<t.length;r++){var o=Math.abs(t[r]-e);o<n&&(i=r,n=o)}return t[i]},t.createHTMLFromText=function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild},t.modalView=function(e){var n='<div class="modal fade" id="'+e.id+'" aria-labelledby="'+e.id+'Modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content">';return n="title"in e?n+'<div class="modal-header"><h4 class="modal-title">'+e.title+'</h4><button type="button" class="close" data-dismiss="modal">'+t.svgClose()+"</button></div>":n+'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close">'+t.svgClose()+"</button></div>","content"in e?n=n+'<div class="modal-body">'+e.content+"</div>":n+='<div class="modal-body"></div>',"btn"in e&&(n=n+'<div class="modal-footer"><button type="button" class="btn btn-link" data-dismiss="modal">'+e.btn+"</button></div>"),n+="</div></div></div>"},t.feedbackModalView=function(e){var t=e.id,n=e.title,i=void 0===n?"":n,r=e.content,o=void 0===r?"":r,a=e.img,s=void 0===a?"":a,l=e.primaryBtn,c=void 0===l?"Yes":l,u=e.secondaryBtn,d="";if(i){var p="";s&&(p='<img id="'+t+'-img" src='+s+' alt="Visual feedback" />'),d=p+'<span id="'+t+'-title" class="modal-title">'+i+"</span>"}var f="";return o&&(f='<div id="'+t+'-content" class="modal-body">'+o+"</div>"),('\n            <div class="modal modal--alert fade" id="'+t+'" aria-labelledby="'+t+'Modal" tabindex="-1" role="dialog"\n            aria-hidden="true">\n                <div class="modal-dialog modal-dialog-centered" role="document">\n                    <div class="modal-content modal-content--alert">\n                        <div class="modal-header">\n                            '+d+'\n                            <button id="'+t+'-close-btn" type="button" class="close" data-dismiss="modal">\n                                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><polygon fill="#383E45" fill-rule="evenodd" points="12 1.208 10.79 0 6 4.792 1.21 0 0 1.208 4.79 6 0 10.792 1.21 12 6 7.208 10.79 12 12 10.792 7.21 6"/></svg>\n                            </button>\n                        </div>\n                        '+f+'\n                        <div class="modal-actions">\n                            <button id="'+t+'-secondary-btn" type="button" class="btn btn--secondary" data-dismiss="modal">'+(void 0===u?"No":u)+'</button>\n                            <button id="'+t+'-primary-btn" type="button" class="btn" data-dismiss="modal">'+c+"</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ").trim()},t.codeModalView=function(e){return('\n        <div class="modal fade" id="'+e.id+'" aria-labelledby="'+e.id+'Modal" tabindex="-1" role="dialog"\n        aria-hidden="true">\n            <div class="modal-dialog modal-dialog-centered" role="document">\n                <div class="modal-content modal-content--code">\n                    <div class="code-editor code-editor--light">\n                        <div class="code-editor__libraries">\n                            <div class="code-editor__libraries__title black-3">\n                                <span>'+e.title+'</span>\n                            </div>\n                        </div>\n                        <div class="code-editor__content">\n                            <textarea class="code-editor__content__textarea" data-mode="javascript" readonly>\n'+e.code+"\n                            </textarea>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n        ").trim()},t.modalViewOk=function(e){return e.btn=i.Lang.t("Ok"),t.modalView(e)},t.setInputCursorAtTheEnd=function(e){var t=e.val().length;e.focus(),e[0].setSelectionRange(t,t)},t.svgClose=function(){return t.svgRemove(12,12)},t.svgRotate=function(e,t){return void 0===e&&(e=14),void 0===t&&(t=16),'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+t+'" viewBox="0 0 14 16"><path d="M11.328 6.364l1.24-1.2c.79.98 1.283 2.113 1.433 3.288h-1.775c-.123-.735-.43-1.454-.896-2.088zm.896 3.778H14c-.15 1.175-.633 2.308-1.424 3.288l-1.24-1.2c.457-.634.765-1.344.888-2.088zm-.888 4.497C10.318 15.4 9.13 15.856 7.9 16v-1.716a5.31 5.31 0 0 0 2.162-.871l1.266 1.226zM6.152 2.595V0l4 3.846-4 3.76V4.302c-2.496.406-4.394 2.485-4.394 4.995s1.898 4.59 4.394 4.995V16C2.68 15.586 0 12.746 0 9.297s2.68-6.29 6.152-6.703z" fill="#383E45" fill-rule="evenodd"/></svg>'},t.svgRemove=function(e,t){return void 0===e&&(e=12),void 0===t&&(t=12),'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+t+'" viewBox="0 0 12 12"><polygon fill="#383E45" fill-rule="evenodd" points="12 1.208 10.79 0 6 4.792 1.21 0 0 1.208 4.79 6 0 10.792 1.21 12 6 7.208 10.79 12 12 10.792 7.21 6"/></svg>'},t.svgArrowRight=function(e,t){return void 0===e&&(e=12),void 0===t&&(t=12),'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+t+'" viewBox="0 0 448 512"><path d="M313.94 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.94v46.06c0 21.382 25.85 32.1 40.97 16.97l86.06-86.06c9.373-9.373 9.373-24.57 0-33.94l-86.06-86.06c-15.12-15.12-40.97-4.41-40.97 16.97V216z"/></svg>'},t.svgHome=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="26" height="21"><path d="M22.028 12.67v6.468a1.08 1.08 0 0 1-1.083 1.083h-5.236c-.298 0-.542-.244-.542-.542v-5.056c0-.298-.244-.542-.542-.542h-3.25c-.298 0-.542.244-.542.542v5.056c0 .298-.244.542-.542.542H5.056a1.08 1.08 0 0 1-1.083-1.083V12.67a.54.54 0 0 1 .199-.42l8.486-6.987a.55.55 0 0 1 .691 0l8.486 6.987c.122.104.194.257.194.42zm3.774-2.75l-3.774-3.1V.56c0-.298-.244-.542-.542-.542h-2.528c-.298 0-.542.244-.542.542v3.277L14.377.5c-.8-.66-1.955-.66-2.753 0L.2 9.922c-.23.2-.262.533-.072.763l1.15 1.4c.2.23.533.262.763.072l10.617-8.743a.55.55 0 0 1 .691 0l10.617 8.743c.23.2.573.158.763-.072l1.15-1.4c.2-.235.153-.573-.077-.763z"/></svg>'},t.randomId=function(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10)},t.colorpicker=function(t){var n=null;n=1==e(t).data("limit")?{preferredFormat:"hex",showPaletteOnly:!0,color:"blanchedalmond",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]]}:{allowEmpty:!0,showInitial:!0,preferredFormat:"hex"},1==e(t).data("input")&&(n.showInput=!0),1==e(t).data("empty")&&(n.allowEmpty=!0,1==e(t).data("limit")&&n.palette.push(["transparent"]),n.change=function(n){n=0===n._a?"transparent":n.toHexString(),e(t).val(n)}),1==e(t).data("inline")&&(n.flat=!0),1==e(t).data("aplha")&&(n.showAlpha=!0),n.clickoutFiresChange=!0;try{e(t).spectrum(n)}catch(t){}},t.isElementInView=function(t,n){return void 0===n&&(n=!1),0!=t.length&&(0==n?t.offset().top<e(window).height()&&t.offset().top+t.height()>60:t.offset().top+t.height()<e(window).height()&&t.offset().top>60)},t.keepInNumericBounds=function(e,t,n){return null!==e&&n<e&&(n=e),null!==t&&n>t&&(n=t),n},t.scrollControl=function(e,t,n){var i=0;e.scroll(function(){var r=e.scrollTop();r>i&&"function"==typeof n&&n(),i>r&&"function"==typeof t&&t(),i=r})},t.loadingFromPreviousStart=function(){var t=e(".fromPrevious");t.length>=0?t.css("display","flex"):(t=e('<div class="wait fromPrevious">'+i.Lang.t("previousTaskLoading")+"</div>"),e(".main").append(t),t.css("display","flex"))},t.loadingFromPreviousFail=function(){var t="<div><p>"+i.Lang.t("previousFail")+'</p><p></p><p><button class="btn" onclick="window.history.go(-1); return false;">'+i.Lang.t("previousFailBack")+'</button> <button class="btn btn--red" id="closePrevious">'+i.Lang.t("previousFailContinue")+"</button></p></div>";e(".fromPrevious").html(t).css("background-image","none")},t.loadingFromPreviousEnd=function(){e(".fromPrevious").remove()},t.serializeFormData=function(e){var t={};try{for(var n=0,i=e.entries();n<i.length;n++){var r=i[n],o=r[0],a=r[1];t[o]=a}}catch(e){}return t={info:"form data serialize failed"}},t.parseTemplate=function(t,n,i){return void 0===n&&(n=null),void 0===i&&(i="simple"),null!=n&&("simple"==i&&e.each(n,function(e,n){t=t.replace("{"+e+"}",n)}),"dollar"==i&&e.each(n,function(e,n){t=t.replace("${"+e+"}",n)})),t},t.isEmail=function(e){return!!/^\w+([\+\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)},t}();t.Tools=r}).call(this,n(1))},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n(0),r=n(40),o=n(24),a=n(2),s=n(41),l=n(15),c=n(11),u=n(35),d=Object(a.f)(),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._disabledUntil=new Date(Date.now()),t}return i.b(t,e),t.prototype.sendEvent=function(e){var t=this;if(new Date(Date.now())<this._disabledUntil)return Promise.reject({event:e,reason:"Transport locked till "+this._disabledUntil+" due to too many requests.",status:429});var n=Object(r.a)(e,this._api),i={body:n.body,method:"POST",referrerPolicy:Object(s.d)()?"origin":""};return void 0!==this.options.headers&&(i.headers=this.options.headers),this._buffer.add(new l.a(function(e,r){d.fetch(n.url,i).then(function(n){var i=o.a.fromHttpCode(n.status);if(i!==o.a.Success){if(i===o.a.RateLimit){var s=Date.now();t._disabledUntil=new Date(s+Object(a.j)(s,n.headers.get("Retry-After"))),c.a.warn("Too many requests, backing off till: "+t._disabledUntil)}r(n)}else e({status:i})}).catch(r)}))},t}(u.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(0),r=n(40),o=n(24),a=n(15),s=n(2),l=n(11),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._disabledUntil=new Date(Date.now()),t}return i.b(t,e),t.prototype.sendEvent=function(e){var t=this;if(new Date(Date.now())<this._disabledUntil)return Promise.reject({event:e,reason:"Transport locked till "+this._disabledUntil+" due to too many requests.",status:429});var n=Object(r.a)(e,this._api);return this._buffer.add(new a.a(function(e,i){var r=new XMLHttpRequest;for(var a in r.onreadystatechange=function(){if(4===r.readyState){var n=o.a.fromHttpCode(r.status);if(n!==o.a.Success){if(n===o.a.RateLimit){var a=Date.now();t._disabledUntil=new Date(a+Object(s.j)(a,r.getResponseHeader("Retry-After"))),l.a.warn("Too many requests, backing off till: "+t._disabledUntil)}i(r)}else e({status:n})}},r.open("POST",n.url),t.options.headers)t.options.headers.hasOwnProperty(a)&&r.setRequestHeader(a,t.options.headers[a]);r.send(n.body)}))},t}(n(35).a)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(){}return t.disable=function(t){e(t).hover(function(){var t=e(this).attr("data-title");if(void 0===t||!1===t){var n=e(this).attr("title");e(this).attr("data-title",n)}e(this).attr("title","")},function(){var t=e(this).attr("data-title");e(this).attr("title",t)})},t}();t.LinkTitle=n}).call(this,n(1))},function(e,t,n){"use strict";(function(e){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(49),a=n(20),s=n(94),l=n(10),c=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.abstractAuthInited=!1,n.INITIAL_SCREEN="register",n.ELEMENTS_TO_HIDE_IN_TEMPLATE=[".form__title",".brand"],n.setUserTimeZoneInCookie=function(){if(Intl&&Intl.DateTimeFormat()){var e=Intl.DateTimeFormat().resolvedOptions().timeZone;e&&window.Cookies.set("auth_tz",e)}},n._onSocialAuthSuccess=function(e){!0===e.detail.socialAuth_isNewUser?n._abstractOnRegisterSuccess({from_auth_social_login:!0}):n._abstractOnLoginSuccess({from_auth_social_login:!0})},n.setSocialAuthLinkContextPlacement=function(){var e=n.domRoot.querySelectorAll(".auth-link"),t="dialog"===n.ctx.getContextPlacement()?"popup":"auth",i=s.SocialAuthPopup.runningFromAttr;e.forEach(function(e){e.setAttribute(i,t),e.removeAttribute("onclick"),e.removeAttribute("href");var r=e.getAttribute("data-provider"),o=n.t("social_provider_"+r),a="login"===e.getAttribute("data-auth-action")?"backdrop_social_signin_title":"backdrop_social_signup_title",l=n.t(a,{social_provider:o}),c=n.t("backdrop_social_subtitle");e.addEventListener("click",function(){var t=n.domStateRoot.querySelector(".auth-screens__backdrop--social"),i=document.createElement("div");i.innerHTML=t.innerHTML,n.showBackdrop(i,l,c),n.setBackdropCallback(function(){s.SocialAuthPopup.focusWindow()},function(){s.SocialAuthPopup.closeWindow(),n.clearBackdrop()}),s.SocialAuthPopup.open(r,{},e).then(n.clearBackdrop,function(e){n.clearBackdrop(),e.errors&&n.showFlashMessage(e.errors[0])})})})},n.clearInputs=function(){n.domStateRoot.querySelectorAll("input").forEach(function(e){return e.value=""})},n._abstractOnResetSubmit=function(t){var i=n.domRoot.querySelector('[data-screen="reset"] form'),r=e(i).serializeArray();n.showLoadingScreen(),n.userAuth.sendResetPasswordEmail(r).then(function(e){var t=n.domStateRoot.querySelector(".reset-password-success-msg");if(!t)throw"'Reset password success' element not found";t.innerHTML=e.data.status_msg,n.changeScreen("reset-success"),n.clearLoadingScreen()},function(e){var t,i,r,o,a;n.clearLoadingScreen();var s=null===(t=null===e||void 0===e?void 0:e.responseJSON)||void 0===t?void 0:t.data;throw(null===(i=null===s||void 0===s?void 0:s.errors)||void 0===i?void 0:i.email)?n.resetPasswordErrorDom.innerHTML=s.errors.email.join(","):n.resetPasswordErrorDom.innerHTML=null!==(a=null===(o=null===(r=null===e||void 0===e?void 0:e.responseJSON)||void 0===r?void 0:r.data)||void 0===o?void 0:o.status_msg)&&void 0!==a?a:"",e})},n._abstractOnLoginSubmit=function(t){var i=n.domRoot.querySelector('[data-screen="login"] form'),r=e(i).serializeArray();n.showLoadingScreen(),n.userAuth.login(r)},n._abstractOnRegisterSubmit=function(t){var i=n.domRoot.querySelector('[data-screen="register"] form'),r=e(i).serializeArray();n.showLoadingScreen(),n.userAuth.register(r)},n._abstractOnLoginSuccess=function(e){if(n.clearLoadingScreen(),!(!0===(null===e||void 0===e?void 0:e.from_auth_social_login))){var t=new CustomEvent("userAuth");window.dispatchEvent(t)}n._onLoginSuccess(e),n.dispatchEvent(new l.IloveEvent("login:success"))},n._abstractOnRegisterSuccess=function(e){if(n.clearLoadingScreen(),!(!0===(null===e||void 0===e?void 0:e.from_auth_social_login))){var t=new CustomEvent("userAuth");window.dispatchEvent(t)}n._onRegisterSuccess(e),n.dispatchEvent(new l.IloveEvent("register:success"))},n._abstractOnLoginError=function(e){n.genericAuthErrorHandler(e)},n._abstractOnRegisterError=function(e){n.genericAuthErrorHandler(e)},n.genericAuthErrorHandler=function(e){n.clearLoadingScreen(),n.clearFlashMessage();var t=e.responseJSON;if(t||"object"!=typeof e||(t=e),t){var i=t[Object.keys(t)[0]][0];n.showFlashMessage(i)}},n}return r(n,t),n.prototype.initAbstractAuth=function(){var e=this;if(!this.abstractAuthInited){var t=this.domStateRoot;this.ELEMENTS_TO_HIDE_IN_TEMPLATE.forEach(function(n){return e.hideHtmlElement(t,n)}),this.setSocialAuthLinkContextPlacement(),s.SocialAuthPopup.addEventListener("auth:success",this._onSocialAuthSuccess),this.userAuth=new o.UserAuth({onLoginSucess:this._abstractOnLoginSuccess,onRegisterSuccess:this._abstractOnRegisterSuccess,onLoginError:this._abstractOnLoginError,onRegisterError:this._abstractOnRegisterError,runningFrom:"dialog"===this.ctx.getContextPlacement()?"popup":"auth"}),this.setUserTimeZoneInCookie(),this.initOverrideFormActions(),this.abstractAuthInited=!0}},n.prototype.showFlashMessage=function(e){var t=document.createElement("div");t.classList.add("flash"),t.innerText=e,this.currentScreen.querySelector(".social-auth").appendChild(t)},n.prototype.clearFlashMessage=function(){this.domStateRoot.querySelectorAll(".flash").forEach(function(e){return e.remove()})},Object.defineProperty(n.prototype,"extraLoginParams",{set:function(e){this._extraLoginParams=e,e||(this.userAuth.extraLoginParams=null);var t=[];for(var n in e)t.push({name:n,value:e[n]});this.userAuth.extraLoginParams=t},enumerable:!0,configurable:!0}),n.prototype.initOverrideFormActions=function(){var e=this,t=this.domRoot;t.querySelectorAll("form").forEach(function(t){t.addEventListener("submit",function(t){t.preventDefault(),e.clearFlashMessage()})}),t.querySelectorAll("a").forEach(function(e){e.getAttribute("href").startsWith("javascript")||(e.setAttribute("data-a-href",e.href),e.href="javascript:;")}),this.goRegisterScreenBtn.addEventListener("click",function(t){return e.changeScreen("register")}),this.goLoginScreenBtn.addEventListener("click",function(t){return e.changeScreen("login")}),this.goForgetPasswordBtn.addEventListener("click",function(t){return e.changeScreen("reset")}),this.goBackFromResetScreenBtn.addEventListener("click",function(t){return e.changeScreen("login")}),this.okResetSuccessBtn.addEventListener("click",function(t){return e.dispatchEvent(new l.IloveEvent("end"))}),this.redefineActionsForLoginScreen(),this.redefineActionsForRegisterScreen(),this.redefineActionsForResetScreen()},Object.defineProperty(n.prototype,"goBackFromResetScreenBtn",{get:function(){var e=this.domRoot.querySelector("#goBackReset");if(!e)throw"'Go back from reset screen' button not found";return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"okResetSuccessBtn",{get:function(){var e=this.domRoot.querySelector("#resetSuccessBtn");if(!e)throw"'OkResetSuccessBtn' button not found";return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"goRegisterScreenBtn",{get:function(){var e=this.domRoot.querySelector("#goRegister");if(!e)throw"'Go register screen' button not found";return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"goLoginScreenBtn",{get:function(){var e=this.domRoot.querySelector("#goLogin");if(!e)throw"'Go login screen' button not found";return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"goForgetPasswordBtn",{get:function(){var e=this.domRoot.querySelector("#forget-password");if(!e)throw"'Go forget password screen' button not found";return e},enumerable:!0,configurable:!0}),n.prototype.redefineActionsForLoginScreen=function(){this.domRoot.querySelector('[data-screen="login"]').querySelector("form").addEventListener("submit",this._abstractOnLoginSubmit)},n.prototype.redefineActionsForResetScreen=function(){var e=this,t=this.domRoot.querySelector('[data-screen="reset"]');t.querySelector("form").addEventListener("submit",this._abstractOnResetSubmit);var n=t.querySelector("form #userpasswordresetform-email");if(!n)throw"Reset password email input not found";n.addEventListener("input",function(){return e.resetPasswordErrorDom.innerHTML=""})},Object.defineProperty(n.prototype,"resetPasswordErrorDom",{get:function(){var e=this.domStateRoot.querySelector("[data-screen='reset'] span.error");if(!e)throw"Error div not found";return e},enumerable:!0,configurable:!0}),n.prototype.redefineActionsForRegisterScreen=function(){var e,t,n=this.domRoot.querySelector('[data-screen="register"]').querySelector("form");n.querySelector("#signupform-timezone").value=null===(t=null===(e=null===Intl||void 0===Intl?void 0:Intl.DateTimeFormat())||void 0===e?void 0:e.resolvedOptions())||void 0===t?void 0:t.timeZone,n.addEventListener("submit",this._abstractOnRegisterSubmit)},n.prototype.hideHtmlElement=function(e,t){e.querySelectorAll(t).forEach(function(e){e.style.display="none"})},n.prototype.dispatchEvent=function(e){return this.eventEmitter.dispatchEvent(e)},n.prototype.addEventListener=function(e,t){return this.eventEmitter.addEventListener(e,t)},n}(a.StateBase);t.AbstractAuthState=c}).call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),r=n(19),o=function(){function e(){}return e.process=function(e,t){var n=e;for(var i in t)t.hasOwnProperty(i)&&(n=(n=n.replace(new RegExp("\\$\\{"+i+"\\}","g"),t[i])).replace(new RegExp("\\$\\{ "+i+" \\}","g"),t[i]));return n},e.processButton=function(e){return'<div id="processTaskWrapper"></div><button id="processTask" class="btn btn--process btn--red '+e.tool+'"><span id="processTaskTextBtn">'+e.toolText+'</span> <span><svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="#FFF" fill-rule="evenodd"><path d="M13 26C5.82 26 0 20.18 0 13S5.82 0 13 0s13 5.82 13 13-5.82 13-13 13zm0-2c6.075 0 11-4.925 11-11S19.075 2 13 2 2 6.925 2 13s4.925 11 11 11z" fill-rule="nonzero"/><path d="M18.684 13.105a.55.55 0 0 1-.148.378l-5.263 5.263a.55.55 0 0 1-.378.148.54.54 0 0 1-.526-.526V15.21H7.842a.54.54 0 0 1-.526-.526v-3.158A.54.54 0 0 1 7.842 11h4.526V7.842a.52.52 0 0 1 .526-.526c.148 0 .28.066.395.164l5.247 5.247a.55.55 0 0 1 .148.378z"/></svg></span></button></div>'},e.rangeBox=function(e){return'<div class="range" id="range-'+e.rangeId+'"><div class="file__actions"><a class="file__btn remove tooltip tooltip--top" title="'+i.Lang.t("Remove")+'">'+r.Tools.svgRemove()+'</a></div><div class="range__title">'+i.Lang.t("Range")+" "+e.rangeId+'</div><div class="range__container"><div class="range__element range__element--start"><div class="range__canvas"><canvas id="range-'+e.rangeId+'-ini" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name" id="info-'+e.rangeId+'-ini">'+e.pageIni+'</span></div></div><div class="range__to"></div><div class="range__element range__element--end"><div class="range__canvas range__canvas--end"><canvas id="range-'+e.rangeId+'-end" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name" id="info-'+e.rangeId+'-end">'+e.pageEnd+"</span></div></div></div></div>"},e.rangeFixedBox=function(e){return'<div class="range" id="range-fix-'+e.rangeId+'"><div class="file__actions"><a class="file__btn remove tooltip tooltip--top" title="'+i.Lang.t("Remove")+'">'+r.Tools.svgRemove()+'</a></div><div class="range__title">'+i.Lang.t("Range")+" "+e.rangeId+'</div><div class="range__container"><div class="range__element range__element--start"><div class="range__canvas"><canvas id="range-fix-'+e.rangeId+'-ini" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name" id="info-'+e.rangeId+'-ini">'+e.pageIni+'</span></div></div><div class="range__to"></div><div class="range__element range__element--end"><div class="range__canvas range__canvas--end"><canvas id="range-fix-'+e.rangeId+'-end" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name" id="info-'+e.rangeId+'-end">'+e.pageEnd+"</span></div></div></div></div>"},e.removeBox=function(e){return'<div class="range" id="remove-page-'+e.page+'" data-page="'+e.page+'"><div class="file__actions"><a class="file__btn remove tooltip tooltip--top" title="'+i.Lang.t("Remove")+'">'+r.Tools.svgRemove()+'</a></div><div class="range__container"><div class="range__element range__element--start"><div class="range__canvas"><canvas id="remove-page-'+e.page+'-ini" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name">Page '+e.page+"</span></div></div></div></div>"},e.reorderBox=function(e){return'<div class="range" id="reorder-page-'+e.page+'" data-page="'+e.page+'"><div class="file__actions"><a class="file__btn remove tooltip tooltip--top" title="'+i.Lang.t("Remove")+'">'+r.Tools.svgRemove()+'</a></div><div class="range__container"><div class="range__element range__element--start"><div class="range__canvas"><canvas id="reorder-page-'+e.page+'-ini" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name">Page '+e.page+"</span></div></div></div></div>"},e.pageBox=function(e){return'<div class="page '+e.class+'" id="'+e.file+e.page+'" data-page="'+e.page+'" data-pos="'+e.pos+'" data-file="'+e.file+'"><div class="page__add tooltip tooltip--top" data-title="'+i.Lang.t("addPage")+'"></div><div class="page__actions"><a class="page__btn rotate tooltip--top tooltip" data-rotate="0" title="'+i.Lang.t("Rotate")+'"><svg width="14px" height="17px" viewBox="0 0 14 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-434.000000, -182.000000)" fill="#383E45"><g transform="translate(265.000000, 172.000000)"><g transform="translate(164.000000, 8.000000)"><path d="M7.76002152,9.05407587 L6.54613936,7.83158461 C5.77132096,8.83023944 5.28921173,9.98385795 5.14285714,11.1805219 L6.881894,11.1805219 C7.00242131,10.4315308 7.30373957,9.69975787 7.76002152,9.05407587 L7.76002152,9.05407587 Z M6.881894,12.9023406 L5.14285714,12.9023406 C5.28921173,14.0990046 5.76271186,15.2526231 6.53753027,16.2512779 L7.75141243,15.0287867 C7.30373957,14.3831047 7.00242131,13.6599408 6.881894,12.9023406 L6.881894,12.9023406 Z M7.75141243,17.4823783 C8.75006726,18.2571967 9.91229486,18.7220877 11.1089588,18.8684423 L11.1089588,17.1207963 C10.3599677,16.9916599 9.63680387,16.6989508 8.99112187,16.2340597 L7.75141243,17.4823783 L7.75141243,17.4823783 Z M12.8307775,5.21442023 L12.8307775,2.57142857 L8.91364003,6.48856605 L12.8307775,10.3196126 L12.8307775,6.95345709 C15.27576,7.36669357 17.1353242,9.48453054 17.1353242,12.0414313 C17.1353242,14.598332 15.27576,16.716169 12.8307775,17.1294054 L12.8307775,18.8684423 C16.2313694,18.4465967 18.8571429,15.5539414 18.8571429,12.0414313 C18.8571429,8.52892117 16.2313694,5.63626581 12.8307775,5.21442023 L12.8307775,5.21442023 Z" transform="translate(12.000000, 10.719935) scale(-1, 1) translate(-12.000000, -10.719935) "></path></g></g></g></g></svg></a><a class="page__btn remove tooltip--top tooltip" title="'+i.Lang.t("Remove")+'"><svg width="12px" height="12px" viewBox="0 0 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-586.000000, -216.000000)" fill="#383E45"><g transform="translate(580.000000, 210.000000)"><polygon points="18 7.20857143 16.7914286 6 12 10.7914286 7.20857143 6 6 7.20857143 10.7914286 12 6 16.7914286 7.20857143 18 12 13.2085714 16.7914286 18 18 16.7914286 13.2085714 12"></polygon></g></g></g></svg></a></div><div class="page__container"><div class="page__element"><div class="page__canvas"><canvas id="page-'+e.file+"-"+e.page+'" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'"></canvas></div><div class="file__info"><span class="file__info__name"><span class="file__info__more"><strong>'+e.filename+"</strong><br>"+i.Lang.t("Page")+"&nbsp;</span>"+e.page+'</span></div></div></div><div class="page__add tooltip tooltip--top" data-title="'+i.Lang.t("addPage")+'"></div></div>'},e.page=function(e){return'<div class="page '+e.class+'" id="'+e.file+e.page+'" data-page="'+e.page+'" data-file="'+e.file+'"><div class="page__container"><div class="page__element"><div class="page__canvas"><canvas id="page-'+e.file+"-"+e.page+'" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'"></canvas></div></div></div></div>'},e.extractBox=function(e){return'<div class="range" id="extract-page-'+e.page+'" data-page="'+e.page+'"><div class="file__actions"><a class="file__btn remove tooltip tooltip--top" title="'+i.Lang.t("Remove")+'">'+r.Tools.svgRemove()+'</a></div><div class="range__container"><div class="range__element range__element--start"><div class="range__canvas"><canvas id="extract-page-'+e.page+'-ini" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'"></canvas> </div><div class="file__info"><span class="file__info__name">'+e.page+"</span></div></div></div></div>"},e.askPassword=function(){return'<div id="passwordAsk"><h2 class="title2">'+i.Lang.t("Some files require password")+'</h2><div class="form__group"><div class="checkbox"><input type="checkbox" name="allPwd" id="allPwd" value="1"><label for="allPwd">'+i.Lang.t("Same password for all files")+'</label></div></div><div class="passwords"></div><div class="text-right"><button class="btn btn--red" id="pwdSend">'+i.Lang.t("Send")+'</button></div><br><br><div class="text-right"><p id="useUnlock">'+i.Lang.t("Did you forgot your password?")+' <a href="'+window.unlockPdfUrl+'">'+i.Lang.t("Unlock PDF")+'</a></p><p id="ignorePwdFiles">'+i.Lang.t("Or")+' <a class="link--cancel" id="pwdIgnore" href="#">'+i.Lang.t("Ignore these files")+"</a></p></div></div>"},e.askPasswordField=function(e){return'<div class="password" id="pwd-'+e.id+'"><label for="pwd'+e.id+'">'+e.server_filename+'</label><div class="form__group form__group--btn form__group--btn-lg"><div class="input--icon input--lock"><input class="input" type="password" name="pwd'+e.id+'" id="pwd'+e.id+'"></div><a class="btn showPassword" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12.015 7c4.751 0 8.063 3.012 9.504 4.636-1.401 1.837-4.713 5.364-9.504 5.364-4.42 0-7.93-3.536-9.478-5.407 1.493-1.647 4.817-4.593 9.478-4.593zm0-2c-7.569 0-12.015 6.551-12.015 6.551s4.835 7.449 12.015 7.449c7.733 0 11.985-7.449 11.985-7.449s-4.291-6.551-11.985-6.551zm-.015 5c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2zm0-2c-2.209 0-4 1.792-4 4 0 2.209 1.791 4 4 4s4-1.791 4-4c0-2.208-1.791-4-4-4z"/></svg></a></div></div>'},e.checkOk=function(){return'<svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"><circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/><path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/></svg>'},e}();t.OptionsTemplate=o},function(e,t,n){"use strict";(function(e){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(149),a=n(152),s=n(9),l=n(19),c=function(t){function n(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.firstFileLoaded=!1,n}return r(n,t),n.prototype.triggerFirstFileReady=function(){e("body").addClass("first-file-ready");var t=new CustomEvent("firstFileReady",{detail:{file:this.files.files[0]}});window.dispatchEvent(t)},n.prototype.initViewManager=function(){this.viewManager=new a.ViewManager({tool:this.tool,subtool:this.subtool,files:this.files,processManager:this.processManager}),!0===this.passwordNeeded&&(this.viewManager.pdfViewer.needPassword=!0)},n.prototype.askForPassword=function(t){var n=this,i=this;return new Promise(function(r,o){var a=n.files.getFileByServerFilename(t),c=l.Tools.modalViewOk({id:"pwd-"+a.id,title:s.Lang.t("askPasswordTitle"),content:"<form><label>"+a.name+'</label><input type="password"></form>'});e(c).modal(),e("#pwd-"+a.id).on("click",function(){i.files.updateFile(a.id,{password:e("#pwd-"+a.id+" input").val()}),r(a)})})},n.prototype.fileAdded=function(e,n,i){return void 0===i&&(i=!1),null==this.viewManager&&this.init(),t.prototype.fileAdded.call(this,e,n,i)},n.prototype.tryInitByParent=function(){t.prototype.tryInitByParent.call(this)},n}(o.OptionsManager);t.OptionsManager=c}).call(this,n(1))},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(115),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="CannotTrialState",t.LAYOUT_TEMPLATE_NAME="new-premium",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.changeScreen(t.INITIAL_SCREEN),t.initAbstractPayment({paymentAction:"become_premium",paymentInterval:{type:"gui",gui:"boxes"},currentPaymentMethod:t.ctx.userCurrentPaymentMethod,paymentProviderProps:[{name:"stripe",paymentButtonText:t.t("paymentButtonText")},{name:"paypal"}]}).then(t._onAbstractPaymentInited)},t._onPaymentSuccess=function(e){var n="dialog"===t.ctx.getContextPlacement()?"popup":"auth";window.ga("send","event","user","premium",n);var i=new o.SubscriptionSuccessState;t.ctx.changeState(i),i.render(t.domRoot)},t._onPaymentFailed=function(e){},t._onAbstractPaymentInited=function(){setTimeout(t.clearLoadingScreen,150)},t}return r(t,e),t}(n(57).AbstractPaymentState);t.CannotTrialState=a},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(57),a=n(116),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="CanTrialState",t.LAYOUT_TEMPLATE_NAME="new-premium",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.changeScreen(t.INITIAL_SCREEN),t.initAbstractPayment({paymentAction:"become_premium",paymentInterval:{type:"gui",gui:"radio"},currentPaymentMethod:t.ctx.userCurrentPaymentMethod,paymentProviderProps:[{name:"stripe",paymentButtonText:t.t("paymentButtonText")},{name:"paypal"}]}).then(t._onAbstractPaymentInited)},t._onPaymentSuccess=function(e,n){var i="dialog"===t.ctx.getContextPlacement()?"popup":"auth";window.ga("send","event","user","premium",i);var r=new a.TrialSuccessState;t.ctx.changeState(r),r.render(t.domRoot)},t._onPaymentFailed=function(e,t){},t._onAbstractPaymentInited=function(){setTimeout(t.clearLoadingScreen,150)},t}return r(t,e),t}(o.AbstractPaymentState);t.CanTrialState=s},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(10),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="PremiumState",t.LAYOUT_TEMPLATE_NAME="new-premium",t.INITIAL_SCREEN="default",t.onDomReady=function(){},t}return r(t,e),t.prototype.render=function(e){this.dispatchEvent(new o.IloveEvent("end"))},t}(n(20).StateBase);t.PremiumState=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lazyloadCss=function(e,t){void 0===t&&(t={});for(var n=document.getElementsByTagName("link"),i=n.length;i--;)if(n[i].hasAttribute("href")&&n[i].href.match(e))return!0;var r=document.createElement("link");for(var o in r.rel="stylesheet",r.href=e,t)if(t.hasOwnProperty(o)){var a=t[o];r.setAttribute(o,a)}var s=document.getElementsByTagName("link")[0];return s.parentNode.insertBefore(r,s),!0}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(){}return t.width=function(t,n){void 0===n&&(n=null);var i=e("<div>"+t+"</div>");i.css({position:"absolute",visibility:"hidden",height:"auto",width:"auto","white-space":"nowrap","font-size":n}),i.appendTo(e("body"));var r=i.width();return i.remove(),r},t.getExistantTextNodeHeight=function(e){var t=0;if(document.createRange){var n=document.createRange();if(n.selectNodeContents(e),n.getBoundingClientRect){var i=n.getBoundingClientRect();i&&(t=i.bottom-i.top)}}return t},t.sanitize=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return e.replace(/[&<>"'/]/gi,function(e){return t[e]})},t.stripTags=function(e){return e.replace(/(<([^>]+)>)/gi,"")},t.maxLength=function(e,t){return e.substring(0,t)},t.maxLengthEllipse=function(e,t){return e.length>t?e.substring(0,t-3)+"...":e},t}();t.TextHelper=n}).call(this,n(1))},function(e,t,n){var i,r,o;!function(a){"use strict";r=[n(27)],void 0===(o="function"==typeof(i=function(e){var t=e.transform;e.transform=function(n,i,r,o,a){t.call(e,e.scale(n,i,a),i,r,o,a)},e.transformCoordinates=function(){},e.getTransformedOptions=function(e,t){var n,i,r,o,a=t.aspectRatio;if(!a)return t;for(i in n={},t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n.crop=!0,r=e.naturalWidth||e.width,o=e.naturalHeight||e.height,r/o>a?(n.maxWidth=o*a,n.maxHeight=o):(n.maxWidth=r,n.maxHeight=r/a),n},e.renderImageToCanvas=function(e,t,n,i,r,o,a,s,l,c){return e.getContext("2d").drawImage(t,n,i,r,o,a,s,l,c),e},e.hasCanvasOption=function(e){return e.canvas||e.crop||!!e.aspectRatio},e.scale=function(t,n,i){n=n||{};var r,o,a,s,l,c,u,d,p,f,h,g=document.createElement("canvas"),v=t.getContext||e.hasCanvasOption(n)&&g.getContext,m=t.naturalWidth||t.width,y=t.naturalHeight||t.height,_=m,b=y;function w(){var e=Math.max((a||_)/_,(s||b)/b);e>1&&(_*=e,b*=e)}function S(){var e=Math.min((r||_)/_,(o||b)/b);e<1&&(_*=e,b*=e)}if(v&&(n=e.getTransformedOptions(t,n,i),u=n.left||0,d=n.top||0,n.sourceWidth?(l=n.sourceWidth,void 0!==n.right&&void 0===n.left&&(u=m-l-n.right)):l=m-u-(n.right||0),n.sourceHeight?(c=n.sourceHeight,void 0!==n.bottom&&void 0===n.top&&(d=y-c-n.bottom)):c=y-d-(n.bottom||0),_=l,b=c),r=n.maxWidth,o=n.maxHeight,a=n.minWidth,s=n.minHeight,v&&r&&o&&n.crop?(_=r,b=o,(h=l/c-r/o)<0?(c=o*l/r,void 0===n.top&&void 0===n.bottom&&(d=(y-c)/2)):h>0&&(l=r*c/o,void 0===n.left&&void 0===n.right&&(u=(m-l)/2))):((n.contain||n.cover)&&(a=r=r||a,s=o=o||s),n.cover?(S(),w()):(w(),S())),v){if((p=n.pixelRatio)>1&&(g.style.width=_+"px",g.style.height=b+"px",_*=p,b*=p,g.getContext("2d").scale(p,p)),(f=n.downsamplingRatio)>0&&f<1&&_<l&&b<c)for(;l*f>_;)g.width=l*f,g.height=c*f,e.renderImageToCanvas(g,t,u,d,l,c,0,0,g.width,g.height),u=0,d=0,l=g.width,c=g.height,(t=document.createElement("canvas")).width=l,t.height=c,e.renderImageToCanvas(t,g,0,0,l,c,0,0,l,c);return g.width=_,g.height=b,e.transformCoordinates(g,n),e.renderImageToCanvas(g,t,u,d,l,c,0,0,_,b)}return t.width=_,t.height=b,t}})?i.apply(t,r):i)||(e.exports=o)}()},function(e,t,n){var i,r,o;!function(a){"use strict";r=[n(27),n(43)],void 0===(o="function"==typeof(i=function(e){e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.getExifThumbnail=function(t,n,i){if(i&&!(n+i>t.byteLength))return e.createObjectURL(new Blob([t.buffer.slice(n,n+i)]))},e.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,n,i,r,o,a){var s,l,c,u,d,p,f=e.exifTagTypes[r];if(f&&(s=f.size*o,!((l=s>4?n+t.getUint32(i+8,a):i+8)+s>t.byteLength))){if(1===o)return f.getValue(t,l,a);for(c=[],u=0;u<o;u+=1)c[u]=f.getValue(t,l+u*f.size,a);if(f.ascii){for(d="",u=0;u<c.length&&"\0"!==(p=c[u]);u+=1)d+=p;return d}return c}},e.parseExifTag=function(t,n,i,r,o){var a=t.getUint16(i,r);o.exif[a]=e.getExifValue(t,n,i,t.getUint16(i+2,r),t.getUint32(i+4,r),r)},e.parseExifTags=function(e,t,n,i,r){var o,a,s;if(!(n+6>e.byteLength||(o=e.getUint16(n,i),(a=n+2+12*o)+4>e.byteLength))){for(s=0;s<o;s+=1)this.parseExifTag(e,t,n+2+12*s,i,r);return e.getUint32(a,i)}},e.parseExifData=function(t,n,i,r,o){if(!o.disableExif){var a,s,l,c=n+10;if(1165519206===t.getUint32(n+4)&&!(c+8>t.byteLength)&&0===t.getUint16(n+8)){switch(t.getUint16(c)){case 18761:a=!0;break;case 19789:a=!1;break;default:return}42===t.getUint16(c+2,a)&&(s=t.getUint32(c+4,a),r.exif=new e.ExifMap,(s=e.parseExifTags(t,c,c+s,a,r))&&!o.disableExifThumbnail&&(l={exif:{}},s=e.parseExifTags(t,c,c+s,a,l),l.exif[513]&&(r.exif.Thumbnail=e.getExifThumbnail(t,c+l.exif[513],l.exif[514]))),r.exif[34665]&&!o.disableExifSub&&e.parseExifTags(t,c,c+r.exif[34665],a,r),r.exif[34853]&&!o.disableExifGps&&e.parseExifTags(t,c,c+r.exif[34853],a,r))}}},e.metaDataParsers.jpeg[65505].push(e.parseExifData)})?i.apply(t,r):i)||(e.exports=o)}()},function(e,t,n){var i,r,o;!function(a){"use strict";r=[n(27),n(43)],void 0===(o="function"==typeof(i=function(e){e.IptcMap=function(){return this},e.IptcMap.prototype.map={ObjectName:5},e.IptcMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.parseIptcTags=function(e,t,n,i){function r(e,t,n){for(var i="",r=t;r<t+n;r++)i+=String.fromCharCode(e.getUint8(r));return i}for(var o,a,s,l=t;l<t+n;)28===e.getUint8(l)&&2===e.getUint8(l+1)&&(s=e.getUint8(l+2))in i.iptc.tags&&(a=e.getInt16(l+3),o=r(e,l+5,a),i.iptc.hasOwnProperty(s)?i.iptc[s]instanceof Array?i.iptc[s].push(o):i.iptc[s]=[i.iptc[s],o]:i.iptc[s]=o),l++},e.parseIptcData=function(t,n,i,r,o){if(!o.disableIptc)for(var a=n+i,s=function(e,t){return 943868237===e.getUint32(t)&&1028===e.getUint16(t+4)};n+8<a;){if(s(t,n)){var l=t.getUint8(n+7);l%2!=0&&(l+=1),0===l&&(l=4);var c=n+8+l;if(c>a)break;var u=t.getUint16(n+6+l);if(n+u>a)break;return r.iptc=new e.IptcMap,e.parseIptcTags(t,c,u,r)}n++}},e.metaDataParsers.jpeg[65517].push(e.parseIptcData)})?i.apply(t,r):i)||(e.exports=o)}()},function(e,t,n){"use strict";e.exports=function(e,t,n,i){for(var r=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(r=r+t[i++]|0)|0}while(--a);r%=65521,o%=65521}return r|o<<16|0}},function(e,t,n){"use strict";var i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,r){var o=i,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},function(e,t,n){"use strict";var i=n(32),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var a=new i.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function l(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}a[254]=a[254]=1,t.string2buf=function(e){var t,n,r,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new i.Buf8(l),a=0,o=0;a<l;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var t=new i.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,i,r,o,s=t||e.length,c=new Array(2*s);for(i=0,n=0;n<s;)if((r=e[n++])<128)c[i++]=r;else if((o=a[r])>4)c[i++]=65533,n+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&n<s;)r=r<<6|63&e[n++],o--;o>1?c[i++]=65533:r<65536?c[i++]=r:(r-=65536,c[i++]=55296|r>>10&1023,c[i++]=56320|1023&r)}return l(c,i)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+a[e[n]]>t?n:t}},function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.tool=null,this.subtool=null,this.config=null,Object.assign(this,e)}return e.prototype.getConfig=function(e){return this.subtool in this.config&&e in this.config[this.subtool]?this.config[this.subtool][e]:this.tool in this.config&&e in this.config[this.tool]?this.config[this.tool][e]:this.config.default[e]},e}();t.Config=i},function(e,t,n){(function(t){e.exports=t.$=n(89)}).call(this,n(31))},function(e,t,n){var i;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,r){"use strict";var o=[],a=n.document,s=Object.getPrototypeOf,l=o.slice,c=o.concat,u=o.push,d=o.indexOf,p={},f=p.toString,h=p.hasOwnProperty,g=h.toString,v=g.call(Object),m={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},_=function(e){return null!=e&&e===e.window},b={type:!0,src:!0,noModule:!0};function w(e,t,n){var i,r=(t=t||a).createElement("script");if(r.text=e,n)for(i in b)n[i]&&(r[i]=n[i]);t.head.appendChild(r).parentNode.removeChild(r)}function S(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?p[f.call(e)]||"object":typeof e}var E=function(e,t){return new E.fn.init(e,t)},x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function k(e){var t=!!e&&"length"in e&&e.length,n=S(e);return!y(e)&&!_(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}E.fn=E.prototype={jquery:"3.3.1",constructor:E,length:0,toArray:function(){return l.call(this)},get:function(e){return null==e?l.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=E.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return E.each(this,e)},map:function(e){return this.pushStack(E.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:o.sort,splice:o.splice},E.extend=E.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||y(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(i=e[t])&&(c&&i&&(E.isPlainObject(i)||(r=Array.isArray(i)))?(r?(r=!1,o=n&&Array.isArray(n)?n:[]):o=n&&E.isPlainObject(n)?n:{},a[t]=E.extend(c,o,i)):void 0!==i&&(a[t]=i));return a},E.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==f.call(e))&&(!(t=s(e))||"function"==typeof(n=h.call(t,"constructor")&&t.constructor)&&g.call(n)===v)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){w(e)},each:function(e,t){var n,i=0;if(k(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(x,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(k(Object(e))?E.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:d.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,o=e.length,a=!n;r<o;r++)!t(e[r],r)!==a&&i.push(e[r]);return i},map:function(e,t,n){var i,r,o=0,a=[];if(k(e))for(i=e.length;o<i;o++)null!=(r=t(e[o],o,n))&&a.push(r);else for(o in e)null!=(r=t(e[o],o,n))&&a.push(r);return c.apply([],a)},guid:1,support:m}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=o[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){p["[object "+t+"]"]=t.toLowerCase()});var C=function(e){var t,n,i,r,o,a,s,l,c,u,d,p,f,h,g,v,m,y,_,b="sizzle"+1*new Date,w=e.document,S=0,E=0,x=ae(),k=ae(),C=ae(),P=function(e,t){return e===t&&(d=!0),0},T={}.hasOwnProperty,O=[],M=O.pop,I=O.push,A=O.push,D=O.slice,L=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",N="\\["+R+"*("+F+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+R+"*\\]",B=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",U=new RegExp(R+"+","g"),z=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),H=new RegExp("^"+R+"*,"+R+"*"),q=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),V=new RegExp("="+R+"*([^\\]'\"]*?)"+R+"*\\]","g"),W=new RegExp(B),G=new RegExp("^"+F+"$"),Y={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},K=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,Q=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),ee=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ie=function(){p()},re=ye(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{A.apply(O=D.call(w.childNodes),w.childNodes),O[w.childNodes.length].nodeType}catch(e){A={apply:O.length?function(e,t){I.apply(e,D.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function oe(e,t,i,r){var o,s,c,u,d,h,m,y=t&&t.ownerDocument,S=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==S&&9!==S&&11!==S)return i;if(!r&&((t?t.ownerDocument||t:w)!==f&&p(t),t=t||f,g)){if(11!==S&&(d=$.exec(e)))if(o=d[1]){if(9===S){if(!(c=t.getElementById(o)))return i;if(c.id===o)return i.push(c),i}else if(y&&(c=y.getElementById(o))&&_(t,c)&&c.id===o)return i.push(c),i}else{if(d[2])return A.apply(i,t.getElementsByTagName(e)),i;if((o=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return A.apply(i,t.getElementsByClassName(o)),i}if(n.qsa&&!C[e+" "]&&(!v||!v.test(e))){if(1!==S)y=t,m=e;else if("object"!==t.nodeName.toLowerCase()){for((u=t.getAttribute("id"))?u=u.replace(te,ne):t.setAttribute("id",u=b),s=(h=a(e)).length;s--;)h[s]="#"+u+" "+me(h[s]);m=h.join(","),y=Z.test(e)&&ge(t.parentNode)||t}if(m)try{return A.apply(i,y.querySelectorAll(m)),i}catch(e){}finally{u===b&&t.removeAttribute("id")}}}return l(e.replace(z,"$1"),t,i,r)}function ae(){var e=[];return function t(n,r){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function se(e){return e[b]=!0,e}function le(e){var t=f.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var n=e.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=t}function ue(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function fe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&re(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function he(e){return se(function(t){return t=+t,se(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},p=oe.setDocument=function(e){var t,r,a=e?e.ownerDocument||e:w;return a!==f&&9===a.nodeType&&a.documentElement?(h=(f=a).documentElement,g=!o(f),w!==f&&(r=f.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",ie,!1):r.attachEvent&&r.attachEvent("onunload",ie)),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(f.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=J.test(f.getElementsByClassName),n.getById=le(function(e){return h.appendChild(e).id=b,!f.getElementsByName||!f.getElementsByName(b).length}),n.getById?(i.filter.ID=function(e){var t=e.replace(Q,ee);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(Q,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,i,r,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(r=t.getElementsByName(e),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},m=[],v=[],(n.qsa=J.test(f.querySelectorAll))&&(le(function(e){h.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+R+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+R+"*(?:value|"+j+")"),e.querySelectorAll("[id~="+b+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||v.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=f.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+R+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(n.matchesSelector=J.test(y=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&le(function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),m.push("!=",B)}),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),t=J.test(h.compareDocumentPosition),_=t||J.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},P=t?function(e,t){if(e===t)return d=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e===f||e.ownerDocument===w&&_(w,e)?-1:t===f||t.ownerDocument===w&&_(w,t)?1:u?L(u,e)-L(u,t):0:4&i?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!r||!o)return e===f?-1:t===f?1:r?-1:o?1:u?L(u,e)-L(u,t):0;if(r===o)return ue(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?ue(a[i],s[i]):a[i]===w?-1:s[i]===w?1:0},f):f},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&p(e),t=t.replace(V,"='$1']"),n.matchesSelector&&g&&!C[t+" "]&&(!m||!m.test(t))&&(!v||!v.test(t)))try{var i=y.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return oe(t,f,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==f&&p(e),_(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==f&&p(e);var r=i.attrHandle[t.toLowerCase()],o=r&&T.call(i.attrHandle,t.toLowerCase())?r(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+"").replace(te,ne)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,i=[],r=0,o=0;if(d=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(P),d){for(;t=e[o++];)t===e[o]&&(r=i.push(o));for(;r--;)e.splice(i[r],1)}return u=null,e},r=oe.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=r(t);return n},(i=oe.selectors={cacheLength:50,createPseudo:se,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Q,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Q,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&W.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Q,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|"+R+")"+e+"("+R+"|$)"))&&x(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var r=oe.attr(i,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r.replace(U," ")+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,p,f,h,g=o!==a?"nextSibling":"previousSibling",v=t.parentNode,m=s&&t.nodeName.toLowerCase(),y=!l&&!s,_=!1;if(v){if(o){for(;g;){for(p=t;p=p[g];)if(s?p.nodeName.toLowerCase()===m:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?v.firstChild:v.lastChild],a&&y){for(_=(f=(c=(u=(d=(p=v)[b]||(p[b]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]||[])[0]===S&&c[1])&&c[2],p=f&&v.childNodes[f];p=++f&&p&&p[g]||(_=f=0)||h.pop();)if(1===p.nodeType&&++_&&p===t){u[e]=[S,f,_];break}}else if(y&&(_=f=(c=(u=(d=(p=t)[b]||(p[b]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]||[])[0]===S&&c[1]),!1===_)for(;(p=++f&&p&&p[g]||(_=f=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==m:1!==p.nodeType)||!++_||(y&&((u=(d=p[b]||(p[b]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]=[S,_]),p!==t)););return(_-=r)===i||_%i==0&&_/i>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)e[i=L(e,o[a])]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:se(function(e){var t=[],n=[],i=s(e.replace(z,"$1"));return i[b]?se(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace(Q,ee),function(t){return(t.textContent||t.innerText||r(t)).indexOf(e)>-1}}),lang:se(function(e){return G.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(Q,ee).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:fe(!1),disabled:fe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:he(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=pe(t);function ve(){}function me(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function ye(e,t,n){var i=t.dir,r=t.next,o=r||i,a=n&&"parentNode"===o,s=E++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||a)return e(t,n,r);return!1}:function(t,n,l){var c,u,d,p=[S,s];if(l){for(;t=t[i];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[i];)if(1===t.nodeType||a)if(u=(d=t[b]||(t[b]={}))[t.uniqueID]||(d[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[i]||t;else{if((c=u[o])&&c[0]===S&&c[1]===s)return p[2]=c[2];if(u[o]=p,p[2]=e(t,n,l))return!0}return!1}}function _e(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function be(e,t,n,i,r){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,i,r)||(a.push(o),c&&t.push(s)));return a}function we(e,t,n,i,r,o){return i&&!i[b]&&(i=we(i)),r&&!r[b]&&(r=we(r,o)),se(function(o,a,s,l){var c,u,d,p=[],f=[],h=a.length,g=o||function(e,t,n){for(var i=0,r=t.length;i<r;i++)oe(e,t[i],n);return n}(t||"*",s.nodeType?[s]:s,[]),v=!e||!o&&t?g:be(g,p,e,s,l),m=n?r||(o?e:h||i)?[]:a:v;if(n&&n(v,m,s,l),i)for(c=be(m,f),i(c,[],s,l),u=c.length;u--;)(d=c[u])&&(m[f[u]]=!(v[f[u]]=d));if(o){if(r||e){if(r){for(c=[],u=m.length;u--;)(d=m[u])&&c.push(v[u]=d);r(null,m=[],c,l)}for(u=m.length;u--;)(d=m[u])&&(c=r?L(o,d):p[u])>-1&&(o[c]=!(a[c]=d))}}else m=be(m===a?m.splice(h,m.length):m),r?r(null,a,m,l):A.apply(a,m)})}function Se(e){for(var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],l=a?1:0,u=ye(function(e){return e===t},s,!0),d=ye(function(e){return L(t,e)>-1},s,!0),p=[function(e,n,i){var r=!a&&(i||n!==c)||((t=n).nodeType?u(e,n,i):d(e,n,i));return t=null,r}];l<o;l++)if(n=i.relative[e[l].type])p=[ye(_e(p),n)];else{if((n=i.filter[e[l].type].apply(null,e[l].matches))[b]){for(r=++l;r<o&&!i.relative[e[r].type];r++);return we(l>1&&_e(p),l>1&&me(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),n,l<r&&Se(e.slice(l,r)),r<o&&Se(e=e.slice(r)),r<o&&me(e))}p.push(n)}return _e(p)}return ve.prototype=i.filters=i.pseudos,i.setFilters=new ve,a=oe.tokenize=function(e,t){var n,r,o,a,s,l,c,u=k[e+" "];if(u)return t?0:u.slice(0);for(s=e,l=[],c=i.preFilter;s;){for(a in n&&!(r=H.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),n=!1,(r=q.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(z," ")}),s=s.slice(n.length)),i.filter)!(r=Y[a].exec(s))||c[a]&&!(r=c[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):k(e,l).slice(0)},s=oe.compile=function(e,t){var n,r=[],o=[],s=C[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=Se(t[n]))[b]?r.push(s):o.push(s);(s=C(e,function(e,t){var n=t.length>0,r=e.length>0,o=function(o,a,s,l,u){var d,h,v,m=0,y="0",_=o&&[],b=[],w=c,E=o||r&&i.find.TAG("*",u),x=S+=null==w?1:Math.random()||.1,k=E.length;for(u&&(c=a===f||a||u);y!==k&&null!=(d=E[y]);y++){if(r&&d){for(h=0,a||d.ownerDocument===f||(p(d),s=!g);v=e[h++];)if(v(d,a||f,s)){l.push(d);break}u&&(S=x)}n&&((d=!v&&d)&&m--,o&&_.push(d))}if(m+=y,n&&y!==m){for(h=0;v=t[h++];)v(_,b,a,s);if(o){if(m>0)for(;y--;)_[y]||b[y]||(b[y]=M.call(l));b=be(b)}A.apply(l,b),u&&!o&&b.length>0&&m+t.length>1&&oe.uniqueSort(l)}return u&&(S=x,c=w),_};return n?se(o):o}(o,r))).selector=e}return s},l=oe.select=function(e,t,n,r){var o,l,c,u,d,p="function"==typeof e&&e,f=!r&&a(e=p.selector||e);if(n=n||[],1===f.length){if((l=f[0]=f[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&g&&i.relative[l[1].type]){if(!(t=(i.find.ID(c.matches[0].replace(Q,ee),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(o=Y.needsContext.test(e)?0:l.length;o--&&(c=l[o],!i.relative[u=c.type]);)if((d=i.find[u])&&(r=d(c.matches[0].replace(Q,ee),Z.test(l[0].type)&&ge(t.parentNode)||t))){if(l.splice(o,1),!(e=r.length&&me(l)))return A.apply(n,r),n;break}}return(p||s(e,f))(r,t,!g,n,!t||Z.test(e)&&ge(t.parentNode)||t),n},n.sortStable=b.split("").sort(P).join("")===b,n.detectDuplicates=!!d,p(),n.sortDetached=le(function(e){return 1&e.compareDocumentPosition(f.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||ce(j,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),oe}(n);E.find=C,E.expr=C.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=C.uniqueSort,E.text=C.getText,E.isXMLDoc=C.isXML,E.contains=C.contains,E.escapeSelector=C.escape;var P=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&E(e).is(n))break;i.push(e)}return i},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},O=E.expr.match.needsContext;function M(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var I=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function A(e,t,n){return y(t)?E.grep(e,function(e,i){return!!t.call(e,i,e)!==n}):t.nodeType?E.grep(e,function(e){return e===t!==n}):"string"!=typeof t?E.grep(e,function(e){return d.call(t,e)>-1!==n}):E.filter(t,e,n)}E.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?E.find.matchesSelector(i,e)?[i]:[]:E.find.matches(e,E.grep(t,function(e){return 1===e.nodeType}))},E.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(E(e).filter(function(){for(t=0;t<i;t++)if(E.contains(r[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)E.find(e,r[t],n);return i>1?E.uniqueSort(n):n},filter:function(e){return this.pushStack(A(this,e||[],!1))},not:function(e){return this.pushStack(A(this,e||[],!0))},is:function(e){return!!A(this,"string"==typeof e&&O.test(e)?E(e):e||[],!1).length}});var D,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof E?t[0]:t,E.merge(this,E.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:a,!0)),I.test(i[1])&&E.isPlainObject(t))for(i in t)y(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=a.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(E):E.makeArray(e,this)}).prototype=E.fn,D=E(a);var j=/^(?:parents|prev(?:Until|All))/,R={children:!0,contents:!0,next:!0,prev:!0};function F(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}E.fn.extend({has:function(e){var t=E(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(E.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,r=this.length,o=[],a="string"!=typeof e&&E(e);if(!O.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?E.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?d.call(E(e),this[0]):d.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),E.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return P(e,"parentNode")},parentsUntil:function(e,t,n){return P(e,"parentNode",n)},next:function(e){return F(e,"nextSibling")},prev:function(e){return F(e,"previousSibling")},nextAll:function(e){return P(e,"nextSibling")},prevAll:function(e){return P(e,"previousSibling")},nextUntil:function(e,t,n){return P(e,"nextSibling",n)},prevUntil:function(e,t,n){return P(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return M(e,"iframe")?e.contentDocument:(M(e,"template")&&(e=e.content||e),E.merge([],e.childNodes))}},function(e,t){E.fn[e]=function(n,i){var r=E.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=E.filter(i,r)),this.length>1&&(R[e]||E.uniqueSort(r),j.test(e)&&r.reverse()),this.pushStack(r)}});var N=/[^\x20\t\r\n\f]+/g;function B(e){return e}function U(e){throw e}function z(e,t,n,i){var r;try{e&&y(r=e.promise)?r.call(e).done(t).fail(n):e&&y(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}E.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return E.each(e.match(N)||[],function(e,n){t[n]=!0}),t}(e):E.extend({},e);var t,n,i,r,o=[],a=[],s=-1,l=function(){for(r=r||e.once,i=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,r&&(o=n?[]:"")},c={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){E.each(n,function(n,i){y(i)?e.unique&&c.has(i)||o.push(i):i&&i.length&&"string"!==S(i)&&t(i)})}(arguments),n&&!t&&l()),this},remove:function(){return E.each(arguments,function(e,t){for(var n;(n=E.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?E.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=a=[],n||t||(o=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},E.extend({Deferred:function(e){var t=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return E.Deferred(function(n){E.each(t,function(t,i){var r=y(e[i[4]])&&e[i[4]];o[i[1]](function(){var e=r&&r.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(e,i,r){var o=0;function a(e,t,i,r){return function(){var s=this,l=arguments,c=function(){var n,c;if(!(e<o)){if((n=i.apply(s,l))===t.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,y(c)?r?c.call(n,a(o,t,B,r),a(o,t,U,r)):(o++,c.call(n,a(o,t,B,r),a(o,t,U,r),a(o,t,B,t.notifyWith))):(i!==B&&(s=void 0,l=[n]),(r||t.resolveWith)(s,l))}},u=r?c:function(){try{c()}catch(n){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(n,u.stackTrace),e+1>=o&&(i!==U&&(s=void 0,l=[n]),t.rejectWith(s,l))}};e?u():(E.Deferred.getStackHook&&(u.stackTrace=E.Deferred.getStackHook()),n.setTimeout(u))}}return E.Deferred(function(n){t[0][3].add(a(0,n,y(r)?r:B,n.notifyWith)),t[1][3].add(a(0,n,y(e)?e:B)),t[2][3].add(a(0,n,y(i)?i:U))}).promise()},promise:function(e){return null!=e?E.extend(e,r):r}},o={};return E.each(t,function(e,n){var a=n[2],s=n[5];r[n[1]]=a.add,s&&a.add(function(){i=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=a.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,i=Array(n),r=l.call(arguments),o=E.Deferred(),a=function(e){return function(n){i[e]=this,r[e]=arguments.length>1?l.call(arguments):n,--t||o.resolveWith(i,r)}};if(t<=1&&(z(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||y(r[n]&&r[n].then)))return o.then();for(;n--;)z(r[n],a(n),o.reject);return o.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&H.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},E.readyException=function(e){n.setTimeout(function(){throw e})};var q=E.Deferred();function V(){a.removeEventListener("DOMContentLoaded",V),n.removeEventListener("load",V),E.ready()}E.fn.ready=function(e){return q.then(e).catch(function(e){E.readyException(e)}),this},E.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==e&&--E.readyWait>0||q.resolveWith(a,[E]))}}),E.ready.then=q.then,"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?n.setTimeout(E.ready):(a.addEventListener("DOMContentLoaded",V),n.addEventListener("load",V));var W=function(e,t,n,i,r,o,a){var s=0,l=e.length,c=null==n;if("object"===S(n))for(s in r=!0,n)W(e,t,s,n[s],!0,o,a);else if(void 0!==i&&(r=!0,y(i)||(a=!0),c&&(a?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(E(e),n)})),t))for(;s<l;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:c?t.call(e):l?t(e[0],n):o},G=/^-ms-/,Y=/-([a-z])/g;function K(e,t){return t.toUpperCase()}function X(e){return e.replace(G,"ms-").replace(Y,K)}var J=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function $(){this.expando=E.expando+$.uid++}$.uid=1,$.prototype={cache:function(e){var t=e[this.expando];return t||(t={},J(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[X(t)]=n;else for(i in t)r[X(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in i?[t]:t.match(N)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||E.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!E.isEmptyObject(t)}};var Z=new $,Q=new $,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}E.extend({hasData:function(e){return Q.hasData(e)||Z.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Z.access(e,t,n)},_removeData:function(e,t){Z.remove(e,t)}}),E.fn.extend({data:function(e,t){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=Q.get(o),1===o.nodeType&&!Z.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&(i=X(i.slice(5)),ne(o,i,r[i]));Z.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){Q.set(this,e)}):W(this,function(t){var n;if(o&&void 0===t)return void 0!==(n=Q.get(o,e))?n:void 0!==(n=ne(o,e))?n:void 0;this.each(function(){Q.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),E.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Z.get(e,t),n&&(!i||Array.isArray(n)?i=Z.access(e,t,E.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=E.queue(e,t),i=n.length,r=n.shift(),o=E._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,function(){E.dequeue(e,t)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Z.get(e,n)||Z.access(e,n,{empty:E.Callbacks("once memory").add(function(){Z.remove(e,[t+"queue",n])})})}}),E.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?E.queue(this[0],e):void 0===t?this:this.each(function(){var n=E.queue(this,e,t);E._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&E.dequeue(this,e)})},dequeue:function(e){return this.each(function(){E.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=E.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=Z.get(o[a],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,re=new RegExp("^(?:([+-])=|)("+ie+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&E.contains(e.ownerDocument,e)&&"none"===E.css(e,"display")},se=function(e,t,n,i){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in r=n.apply(e,i||[]),t)e.style[o]=a[o];return r};function le(e,t,n,i){var r,o,a=20,s=i?function(){return i.cur()}:function(){return E.css(e,t,"")},l=s(),c=n&&n[3]||(E.cssNumber[t]?"":"px"),u=(E.cssNumber[t]||"px"!==c&&+l)&&re.exec(E.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;a--;)E.style(e,t,u+c),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),u/=o;u*=2,E.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=r)),r}var ce={};function ue(e){var t,n=e.ownerDocument,i=e.nodeName,r=ce[i];return r||(t=n.body.appendChild(n.createElement(i)),r=E.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),ce[i]=r,r)}function de(e,t){for(var n,i,r=[],o=0,a=e.length;o<a;o++)(i=e[o]).style&&(n=i.style.display,t?("none"===n&&(r[o]=Z.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&ae(i)&&(r[o]=ue(i))):"none"!==n&&(r[o]="none",Z.set(i,"display",n)));for(o=0;o<a;o++)null!=r[o]&&(e[o].style.display=r[o]);return e}E.fn.extend({show:function(){return de(this,!0)},hide:function(){return de(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?E(this).show():E(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,fe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&M(e,t)?E.merge([e],n):n}function me(e,t){for(var n=0,i=e.length;n<i;n++)Z.set(e[n],"globalEval",!t||Z.get(t[n],"globalEval"))}ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;var ye,_e,be=/<|&#?\w+;/;function we(e,t,n,i,r){for(var o,a,s,l,c,u,d=t.createDocumentFragment(),p=[],f=0,h=e.length;f<h;f++)if((o=e[f])||0===o)if("object"===S(o))E.merge(p,o.nodeType?[o]:o);else if(be.test(o)){for(a=a||d.appendChild(t.createElement("div")),s=(fe.exec(o)||["",""])[1].toLowerCase(),l=ge[s]||ge._default,a.innerHTML=l[1]+E.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;E.merge(p,a.childNodes),(a=d.firstChild).textContent=""}else p.push(t.createTextNode(o));for(d.textContent="",f=0;o=p[f++];)if(i&&E.inArray(o,i)>-1)r&&r.push(o);else if(c=E.contains(o.ownerDocument,o),a=ve(d.appendChild(o),"script"),c&&me(a),n)for(u=0;o=a[u++];)he.test(o.type||"")&&n.push(o);return d}ye=a.createDocumentFragment().appendChild(a.createElement("div")),(_e=a.createElement("input")).setAttribute("type","radio"),_e.setAttribute("checked","checked"),_e.setAttribute("name","t"),ye.appendChild(_e),m.checkClone=ye.cloneNode(!0).cloneNode(!0).lastChild.checked,ye.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!ye.cloneNode(!0).lastChild.defaultValue;var Se=a.documentElement,Ee=/^key/,xe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ke=/^([^.]*)(?:\.(.+)|)/;function Ce(){return!0}function Pe(){return!1}function Te(){try{return a.activeElement}catch(e){}}function Oe(e,t,n,i,r,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(i=i||n,n=void 0),t)Oe(e,s,n,i,t[s],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Pe;else if(!r)return e;return 1===o&&(a=r,(r=function(e){return E().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=E.guid++)),e.each(function(){E.event.add(this,t,r,i,n)})}E.event={global:{},add:function(e,t,n,i,r){var o,a,s,l,c,u,d,p,f,h,g,v=Z.get(e);if(v)for(n.handler&&(n=(o=n).handler,r=o.selector),r&&E.find.matchesSelector(Se,r),n.guid||(n.guid=E.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(t){return void 0!==E&&E.event.triggered!==t.type?E.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(N)||[""]).length;c--;)f=g=(s=ke.exec(t[c])||[])[1],h=(s[2]||"").split(".").sort(),f&&(d=E.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=E.event.special[f]||{},u=E.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&E.expr.match.needsContext.test(r),namespace:h.join(".")},o),(p=l[f])||((p=l[f]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,i,h,a)||e.addEventListener&&e.addEventListener(f,a)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),r?p.splice(p.delegateCount++,0,u):p.push(u),E.event.global[f]=!0)},remove:function(e,t,n,i,r){var o,a,s,l,c,u,d,p,f,h,g,v=Z.hasData(e)&&Z.get(e);if(v&&(l=v.events)){for(c=(t=(t||"").match(N)||[""]).length;c--;)if(f=g=(s=ke.exec(t[c])||[])[1],h=(s[2]||"").split(".").sort(),f){for(d=E.event.special[f]||{},p=l[f=(i?d.delegateType:d.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)u=p[o],!r&&g!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(p.splice(o,1),u.selector&&p.delegateCount--,d.remove&&d.remove.call(e,u));a&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,h,v.handle)||E.removeEvent(e,f,v.handle),delete l[f])}else for(f in l)E.event.remove(e,f+t[c],n,i,!0);E.isEmptyObject(l)&&Z.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,o,a,s=E.event.fix(e),l=new Array(arguments.length),c=(Z.get(this,"events")||{})[s.type]||[],u=E.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,s)){for(a=E.event.handlers.call(this,s,c),t=0;(r=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(i=((E.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(s.result=i)&&(s.preventDefault(),s.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,i,r,o,a,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[r=(i=t[n]).selector+" "]&&(a[r]=i.needsContext?E(r,this).index(c)>-1:E.find(r,this,null,[c]).length),a[r]&&o.push(i);o.length&&s.push({elem:c,handlers:o})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(E.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[E.expando]?e:new E.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Te()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Te()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&M(this,"input"))return this.click(),!1},_default:function(e){return M(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},E.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},E.Event=function(e,t){if(!(this instanceof E.Event))return new E.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ce:Pe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&E.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Pe,isPropagationStopped:Pe,isImmediatePropagationStopped:Pe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ce,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ce,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ce,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ee.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&xe.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},E.event.addProp),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){E.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=e.relatedTarget,r=e.handleObj;return i&&(i===this||E.contains(this,i))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),E.fn.extend({on:function(e,t,n,i){return Oe(this,e,t,n,i)},one:function(e,t,n,i){return Oe(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,E(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Pe),this.each(function(){E.event.remove(this,e,n,t)})}});var Me=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ie=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,De=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Le(e,t){return M(e,"table")&&M(11!==t.nodeType?t:t.firstChild,"tr")&&E(e).children("tbody")[0]||e}function je(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Fe(e,t){var n,i,r,o,a,s,l,c;if(1===t.nodeType){if(Z.hasData(e)&&(o=Z.access(e),a=Z.set(t,o),c=o.events))for(r in delete a.handle,a.events={},c)for(n=0,i=c[r].length;n<i;n++)E.event.add(t,r,c[r][n]);Q.hasData(e)&&(s=Q.access(e),l=E.extend({},s),Q.set(t,l))}}function Ne(e,t,n,i){t=c.apply([],t);var r,o,a,s,l,u,d=0,p=e.length,f=p-1,h=t[0],g=y(h);if(g||p>1&&"string"==typeof h&&!m.checkClone&&Ae.test(h))return e.each(function(r){var o=e.eq(r);g&&(t[0]=h.call(this,r,o.html())),Ne(o,t,n,i)});if(p&&(o=(r=we(t,e[0].ownerDocument,!1,e,i)).firstChild,1===r.childNodes.length&&(r=o),o||i)){for(s=(a=E.map(ve(r,"script"),je)).length;d<p;d++)l=r,d!==f&&(l=E.clone(l,!0,!0),s&&E.merge(a,ve(l,"script"))),n.call(e[d],l,d);if(s)for(u=a[a.length-1].ownerDocument,E.map(a,Re),d=0;d<s;d++)l=a[d],he.test(l.type||"")&&!Z.access(l,"globalEval")&&E.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?E._evalUrl&&E._evalUrl(l.src):w(l.textContent.replace(De,""),u,l))}return e}function Be(e,t,n){for(var i,r=t?E.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||E.cleanData(ve(i)),i.parentNode&&(n&&E.contains(i.ownerDocument,i)&&me(ve(i,"script")),i.parentNode.removeChild(i));return e}E.extend({htmlPrefilter:function(e){return e.replace(Me,"<$1></$2>")},clone:function(e,t,n){var i,r,o,a,s,l,c,u=e.cloneNode(!0),d=E.contains(e.ownerDocument,e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||E.isXMLDoc(e)))for(a=ve(u),i=0,r=(o=ve(e)).length;i<r;i++)s=o[i],l=a[i],void 0,"input"===(c=l.nodeName.toLowerCase())&&pe.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(u),i=0,r=o.length;i<r;i++)Fe(o[i],a[i]);else Fe(e,u);return(a=ve(u,"script")).length>0&&me(a,!d&&ve(e,"script")),u},cleanData:function(e){for(var t,n,i,r=E.event.special,o=0;void 0!==(n=e[o]);o++)if(J(n)){if(t=n[Z.expando]){if(t.events)for(i in t.events)r[i]?E.event.remove(n,i):E.removeEvent(n,i,t.handle);n[Z.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),E.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return W(this,function(e){return void 0===e?E.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ne(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Le(this,e).appendChild(e)})},prepend:function(){return Ne(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Le(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ne(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ne(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(E.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return E.clone(this,e,t)})},html:function(e){return W(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ie.test(e)&&!ge[(fe.exec(e)||["",""])[1].toLowerCase()]){e=E.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(E.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Ne(this,arguments,function(t){var n=this.parentNode;E.inArray(this,e)<0&&(E.cleanData(ve(this)),n&&n.replaceChild(t,this))},e)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){E.fn[e]=function(e){for(var n,i=[],r=E(e),o=r.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),E(r[a])[t](n),u.apply(i,n.get());return this.pushStack(i)}});var Ue=new RegExp("^("+ie+")(?!px)[a-z%]+$","i"),ze=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},He=new RegExp(oe.join("|"),"i");function qe(e,t,n){var i,r,o,a,s=e.style;return(n=n||ze(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||E.contains(e.ownerDocument,e)||(a=E.style(e,t)),!m.pixelBoxStyles()&&Ue.test(a)&&He.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function Ve(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Se.appendChild(c).appendChild(u);var e=n.getComputedStyle(u);i="1%"!==e.top,l=12===t(e.marginLeft),u.style.right="60%",s=36===t(e.right),r=36===t(e.width),u.style.position="absolute",o=36===u.offsetWidth||"absolute",Se.removeChild(c),u=null}}function t(e){return Math.round(parseFloat(e))}var i,r,o,s,l,c=a.createElement("div"),u=a.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===u.style.backgroundClip,E.extend(m,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o}}))}();var We=/^(none|table(?!-c[ea]).+)/,Ge=/^--/,Ye={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"},Xe=["Webkit","Moz","ms"],Je=a.createElement("div").style;function $e(e){var t=E.cssProps[e];return t||(t=E.cssProps[e]=function(e){if(e in Je)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Xe.length;n--;)if((e=Xe[n]+t)in Je)return e}(e)||e),t}function Ze(e,t,n){var i=re.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function Qe(e,t,n,i,r,o){var a="width"===t?1:0,s=0,l=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=E.css(e,n+oe[a],!0,r)),i?("content"===n&&(l-=E.css(e,"padding"+oe[a],!0,r)),"margin"!==n&&(l-=E.css(e,"border"+oe[a]+"Width",!0,r))):(l+=E.css(e,"padding"+oe[a],!0,r),"padding"!==n?l+=E.css(e,"border"+oe[a]+"Width",!0,r):s+=E.css(e,"border"+oe[a]+"Width",!0,r));return!i&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))),l}function et(e,t,n){var i=ze(e),r=qe(e,t,i),o="border-box"===E.css(e,"boxSizing",!1,i),a=o;if(Ue.test(r)){if(!n)return r;r="auto"}return a=a&&(m.boxSizingReliable()||r===e.style[t]),("auto"===r||!parseFloat(r)&&"inline"===E.css(e,"display",!1,i))&&(r=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(r=parseFloat(r)||0)+Qe(e,t,n||(o?"border":"content"),a,i,r)+"px"}function tt(e,t,n,i,r){return new tt.prototype.init(e,t,n,i,r)}E.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=qe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=X(t),l=Ge.test(t),c=e.style;if(l||(t=$e(s)),a=E.cssHooks[t]||E.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:c[t];"string"===(o=typeof n)&&(r=re.exec(n))&&r[1]&&(n=le(e,t,r),o="number"),null!=n&&n==n&&("number"===o&&(n+=r&&r[3]||(E.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,i){var r,o,a,s=X(t);return Ge.test(t)||(t=$e(s)),(a=E.cssHooks[t]||E.cssHooks[s])&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=qe(e,t,i)),"normal"===r&&t in Ke&&(r=Ke[t]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),E.each(["height","width"],function(e,t){E.cssHooks[t]={get:function(e,n,i){if(n)return!We.test(E.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,i):se(e,Ye,function(){return et(e,t,i)})},set:function(e,n,i){var r,o=ze(e),a="border-box"===E.css(e,"boxSizing",!1,o),s=i&&Qe(e,t,i,a,o);return a&&m.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Qe(e,t,"border",!1,o)-.5)),s&&(r=re.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=E.css(e,t)),Ze(0,n,s)}}}),E.cssHooks.marginLeft=Ve(m.reliableMarginLeft,function(e,t){if(t)return(parseFloat(qe(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),E.each({margin:"",padding:"",border:"Width"},function(e,t){E.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+oe[i]+t]=o[i]||o[i-2]||o[0];return r}},"margin"!==e&&(E.cssHooks[e+t].set=Ze)}),E.fn.extend({css:function(e,t){return W(this,function(e,t,n){var i,r,o={},a=0;if(Array.isArray(t)){for(i=ze(e),r=t.length;a<r;a++)o[t[a]]=E.css(e,t[a],!1,i);return o}return void 0!==n?E.style(e,t,n):E.css(e,t)},e,t,arguments.length>1)}}),E.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||E.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(E.cssNumber[n]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,n=tt.propHooks[this.prop];return this.options.duration?this.pos=t=E.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=E.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){E.fx.step[e.prop]?E.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[E.cssProps[e.prop]]&&!E.cssHooks[e.prop]?e.elem[e.prop]=e.now:E.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},E.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},E.fx=tt.prototype.init,E.fx.step={};var nt,it,rt=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function at(){it&&(!1===a.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(at):n.setTimeout(at,E.fx.interval),E.fx.tick())}function st(){return n.setTimeout(function(){nt=void 0}),nt=Date.now()}function lt(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=oe[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function ct(e,t,n){for(var i,r=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,t,e))return i}function ut(e,t,n){var i,r,o=0,a=ut.prefilters.length,s=E.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=nt||st(),n=Math.max(0,c.startTime+c.duration-t),i=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(i);return s.notifyWith(e,[c,i,n]),i<1&&a?n:(a||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:E.extend({},t),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||st(),duration:n.duration,tweens:[],createTween:function(t,n){var i=E.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(!function(e,t){var n,i,r,o,a;for(n in e)if(r=t[i=X(n)],o=e[n],Array.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),(a=E.cssHooks[i])&&"expand"in a)for(n in o=a.expand(o),delete e[i],o)n in e||(e[n]=o[n],t[n]=r);else t[i]=r}(u,c.opts.specialEasing);o<a;o++)if(i=ut.prefilters[o].call(c,e,u,c.opts))return y(i.stop)&&(E._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return E.map(u,ct,c),y(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),E.fx.timer(E.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}E.Animation=E.extend(ut,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return le(n.elem,e,re.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(N);for(var n,i=0,r=e.length;i<r;i++)n=e[i],ut.tweeners[n]=ut.tweeners[n]||[],ut.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,r,o,a,s,l,c,u,d="width"in t||"height"in t,p=this,f={},h=e.style,g=e.nodeType&&ae(e),v=Z.get(e,"fxshow");for(i in n.queue||(null==(a=E._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,E.queue(e,"fx").length||a.empty.fire()})})),t)if(r=t[i],rt.test(r)){if(delete t[i],o=o||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!v||void 0===v[i])continue;g=!0}f[i]=v&&v[i]||E.style(e,i)}if((l=!E.isEmptyObject(t))||!E.isEmptyObject(f))for(i in d&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(c=v&&v.display)&&(c=Z.get(e,"display")),"none"===(u=E.css(e,"display"))&&(c?u=c:(de([e],!0),c=e.style.display||c,u=E.css(e,"display"),de([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===E.css(e,"float")&&(l||(p.done(function(){h.display=c}),null==c&&(u=h.display,c="none"===u?"":u)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),l=!1,f)l||(v?"hidden"in v&&(g=v.hidden):v=Z.access(e,"fxshow",{display:c}),o&&(v.hidden=!g),g&&de([e],!0),p.done(function(){for(i in g||de([e]),Z.remove(e,"fxshow"),f)E.style(e,i,f[i])})),l=ct(g?v[i]:0,i,p),i in v||(v[i]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),E.speed=function(e,t,n){var i=e&&"object"==typeof e?E.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return E.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in E.fx.speeds?i.duration=E.fx.speeds[i.duration]:i.duration=E.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){y(i.old)&&i.old.call(this),i.queue&&E.dequeue(this,i.queue)},i},E.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=E.isEmptyObject(e),o=E.speed(t,n,i),a=function(){var t=ut(this,E.extend({},e),o);(r||Z.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=E.timers,a=Z.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&ot.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));!t&&n||E.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Z.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=E.timers,a=i?i.length:0;for(n.finish=!0,E.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),E.each(["toggle","show","hide"],function(e,t){var n=E.fn[t];E.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(lt(t,!0),e,i,r)}}),E.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){E.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),E.timers=[],E.fx.tick=function(){var e,t=0,n=E.timers;for(nt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||E.fx.stop(),nt=void 0},E.fx.timer=function(e){E.timers.push(e),E.fx.start()},E.fx.interval=13,E.fx.start=function(){it||(it=!0,at())},E.fx.stop=function(){it=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(e,t){return e=E.fx&&E.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,i){var r=n.setTimeout(t,e);i.stop=function(){n.clearTimeout(r)}})},function(){var e=a.createElement("input"),t=a.createElement("select").appendChild(a.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=a.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var dt,pt=E.expr.attrHandle;E.fn.extend({attr:function(e,t){return W(this,E.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){E.removeAttr(this,e)})}}),E.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?E.prop(e,t,n):(1===o&&E.isXMLDoc(e)||(r=E.attrHooks[t.toLowerCase()]||(E.expr.match.bool.test(t)?dt:void 0)),void 0!==n?null===n?void E.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=E.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&M(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(N);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),dt={set:function(e,t,n){return!1===t?E.removeAttr(e,n):e.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),function(e,t){var n=pt[t]||E.find.attr;pt[t]=function(e,t,i){var r,o,a=t.toLowerCase();return i||(o=pt[a],pt[a]=r,r=null!=n(e,t,i)?a:null,pt[a]=o),r}});var ft=/^(?:input|select|textarea|button)$/i,ht=/^(?:a|area)$/i;function gt(e){return(e.match(N)||[]).join(" ")}function vt(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(N)||[]}E.fn.extend({prop:function(e,t){return W(this,E.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[E.propFix[e]||e]})}}),E.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&E.isXMLDoc(e)||(t=E.propFix[t]||t,r=E.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=E.find.attr(e,"tabindex");return t?parseInt(t,10):ft.test(e.nodeName)||ht.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(E.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){E.propFix[this.toLowerCase()]=this}),E.fn.extend({addClass:function(e){var t,n,i,r,o,a,s,l=0;if(y(e))return this.each(function(t){E(this).addClass(e.call(this,t,vt(this)))});if((t=mt(e)).length)for(;n=this[l++];)if(r=vt(n),i=1===n.nodeType&&" "+gt(r)+" "){for(a=0;o=t[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(s=gt(i))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,r,o,a,s,l=0;if(y(e))return this.each(function(t){E(this).removeClass(e.call(this,t,vt(this)))});if(!arguments.length)return this.attr("class","");if((t=mt(e)).length)for(;n=this[l++];)if(r=vt(n),i=1===n.nodeType&&" "+gt(r)+" "){for(a=0;o=t[a++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");r!==(s=gt(i))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,i="string"===n||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):y(e)?this.each(function(n){E(this).toggleClass(e.call(this,n,vt(this),t),t)}):this.each(function(){var t,r,o,a;if(i)for(r=0,o=E(this),a=mt(e);t=a[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=vt(this))&&Z.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Z.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+gt(vt(n))+" ").indexOf(t)>-1)return!0;return!1}});var yt=/\r/g;E.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=y(e),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,E(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=E.map(r,function(e){return null==e?"":e+""})),(t=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=E.valHooks[r.type]||E.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(yt,""):null==n?"":n:void 0}}),E.extend({valHooks:{option:{get:function(e){var t=E.find.attr(e,"value");return null!=t?t:gt(E.text(e))}},select:{get:function(e){var t,n,i,r=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?o+1:r.length;for(i=o<0?l:a?o:0;i<l;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!M(n.parentNode,"optgroup"))){if(t=E(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=E.makeArray(t),a=r.length;a--;)((i=r[a]).selected=E.inArray(E.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=E.inArray(E(e).val(),t)>-1}},m.checkOn||(E.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),m.focusin="onfocusin"in n;var _t=/^(?:focusinfocus|focusoutblur)$/,bt=function(e){e.stopPropagation()};E.extend(E.event,{trigger:function(e,t,i,r){var o,s,l,c,u,d,p,f,g=[i||a],v=h.call(e,"type")?e.type:e,m=h.call(e,"namespace")?e.namespace.split("."):[];if(s=f=l=i=i||a,3!==i.nodeType&&8!==i.nodeType&&!_t.test(v+E.event.triggered)&&(v.indexOf(".")>-1&&(v=(m=v.split(".")).shift(),m.sort()),u=v.indexOf(":")<0&&"on"+v,(e=e[E.expando]?e:new E.Event(v,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:E.makeArray(t,[e]),p=E.event.special[v]||{},r||!p.trigger||!1!==p.trigger.apply(i,t))){if(!r&&!p.noBubble&&!_(i)){for(c=p.delegateType||v,_t.test(c+v)||(s=s.parentNode);s;s=s.parentNode)g.push(s),l=s;l===(i.ownerDocument||a)&&g.push(l.defaultView||l.parentWindow||n)}for(o=0;(s=g[o++])&&!e.isPropagationStopped();)f=s,e.type=o>1?c:p.bindType||v,(d=(Z.get(s,"events")||{})[e.type]&&Z.get(s,"handle"))&&d.apply(s,t),(d=u&&s[u])&&d.apply&&J(s)&&(e.result=d.apply(s,t),!1===e.result&&e.preventDefault());return e.type=v,r||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(g.pop(),t)||!J(i)||u&&y(i[v])&&!_(i)&&((l=i[u])&&(i[u]=null),E.event.triggered=v,e.isPropagationStopped()&&f.addEventListener(v,bt),i[v](),e.isPropagationStopped()&&f.removeEventListener(v,bt),E.event.triggered=void 0,l&&(i[u]=l)),e.result}},simulate:function(e,t,n){var i=E.extend(new E.Event,n,{type:e,isSimulated:!0});E.event.trigger(i,null,t)}}),E.fn.extend({trigger:function(e,t){return this.each(function(){E.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return E.event.trigger(e,t,n,!0)}}),m.focusin||E.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){E.event.simulate(t,e.target,E.event.fix(e))};E.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=Z.access(i,t);r||i.addEventListener(e,n,!0),Z.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=Z.access(i,t)-1;r?Z.access(i,t,r):(i.removeEventListener(e,n,!0),Z.remove(i,t))}}});var wt=n.location,St=Date.now(),Et=/\?/;E.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||E.error("Invalid XML: "+e),t};var xt=/\[\]$/,kt=/\r?\n/g,Ct=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;function Tt(e,t,n,i){var r;if(Array.isArray(t))E.each(t,function(t,r){n||xt.test(e)?i(e,r):Tt(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==S(t))i(e,t);else for(r in t)Tt(e+"["+r+"]",t[r],n,i)}E.param=function(e,t){var n,i=[],r=function(e,t){var n=y(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!E.isPlainObject(e))E.each(e,function(){r(this.name,this.value)});else for(n in e)Tt(n,e[n],t,r);return i.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=E.prop(this,"elements");return e?E.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!E(this).is(":disabled")&&Pt.test(this.nodeName)&&!Ct.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}});var Ot=/%20/g,Mt=/#.*$/,It=/([?&])_=[^&]*/,At=/^(.*?):[ \t]*([^\r\n]*)$/gm,Dt=/^(?:GET|HEAD)$/,Lt=/^\/\//,jt={},Rt={},Ft="*/".concat("*"),Nt=a.createElement("a");function Bt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(N)||[];if(y(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Ut(e,t,n,i){var r={},o=e===Rt;function a(s){var l;return r[s]=!0,E.each(e[s]||[],function(e,s){var c=s(t,n,i);return"string"!=typeof c||o||r[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)}),l}return a(t.dataTypes[0])||!r["*"]&&a("*")}function zt(e,t){var n,i,r=E.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&E.extend(!0,e,i),e}Nt.href=wt.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ft,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,E.ajaxSettings),t):zt(E.ajaxSettings,e)},ajaxPrefilter:Bt(jt),ajaxTransport:Bt(Rt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,o,s,l,c,u,d,p,f,h=E.ajaxSetup({},t),g=h.context||h,v=h.context&&(g.nodeType||g.jquery)?E(g):E.event,m=E.Deferred(),y=E.Callbacks("once memory"),_=h.statusCode||{},b={},w={},S="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(u){if(!s)for(s={};t=At.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(e,t){return null==u&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==u&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)x.always(e[x.status]);else for(t in e)_[t]=[_[t],e[t]];return this},abort:function(e){var t=e||S;return i&&i.abort(t),k(0,t),this}};if(m.promise(x),h.url=((e||h.url||wt.href)+"").replace(Lt,wt.protocol+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(N)||[""],null==h.crossDomain){c=a.createElement("a");try{c.href=h.url,c.href=c.href,h.crossDomain=Nt.protocol+"//"+Nt.host!=c.protocol+"//"+c.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=E.param(h.data,h.traditional)),Ut(jt,h,t,x),u)return x;for(p in(d=E.event&&h.global)&&0==E.active++&&E.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Dt.test(h.type),r=h.url.replace(Mt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Ot,"+")):(f=h.url.slice(r.length),h.data&&(h.processData||"string"==typeof h.data)&&(r+=(Et.test(r)?"&":"?")+h.data,delete h.data),!1===h.cache&&(r=r.replace(It,"$1"),f=(Et.test(r)?"&":"?")+"_="+St+++f),h.url=r+f),h.ifModified&&(E.lastModified[r]&&x.setRequestHeader("If-Modified-Since",E.lastModified[r]),E.etag[r]&&x.setRequestHeader("If-None-Match",E.etag[r])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ft+"; q=0.01":""):h.accepts["*"]),h.headers)x.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(!1===h.beforeSend.call(g,x,h)||u))return x.abort();if(S="abort",y.add(h.complete),x.done(h.success),x.fail(h.error),i=Ut(Rt,h,t,x)){if(x.readyState=1,d&&v.trigger("ajaxSend",[x,h]),u)return x;h.async&&h.timeout>0&&(l=n.setTimeout(function(){x.abort("timeout")},h.timeout));try{u=!1,i.send(b,k)}catch(e){if(u)throw e;k(-1,e)}}else k(-1,"No Transport");function k(e,t,a,s){var c,p,f,b,w,S=t;u||(u=!0,l&&n.clearTimeout(l),i=void 0,o=s||"",x.readyState=e>0?4:0,c=e>=200&&e<300||304===e,a&&(b=function(e,t,n){for(var i,r,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(h,x,a)),b=function(e,t,n,i){var r,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(r in c)if((s=r.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[r]:!0!==c[r]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(h,b,x,c),c?(h.ifModified&&((w=x.getResponseHeader("Last-Modified"))&&(E.lastModified[r]=w),(w=x.getResponseHeader("etag"))&&(E.etag[r]=w)),204===e||"HEAD"===h.type?S="nocontent":304===e?S="notmodified":(S=b.state,p=b.data,c=!(f=b.error))):(f=S,!e&&S||(S="error",e<0&&(e=0))),x.status=e,x.statusText=(t||S)+"",c?m.resolveWith(g,[p,S,x]):m.rejectWith(g,[x,S,f]),x.statusCode(_),_=void 0,d&&v.trigger(c?"ajaxSuccess":"ajaxError",[x,h,c?p:f]),y.fireWith(g,[x,S]),d&&(v.trigger("ajaxComplete",[x,h]),--E.active||E.event.trigger("ajaxStop")))}return x},getJSON:function(e,t,n){return E.get(e,t,n,"json")},getScript:function(e,t){return E.get(e,void 0,t,"script")}}),E.each(["get","post"],function(e,t){E[t]=function(e,n,i,r){return y(n)&&(r=r||i,i=n,n=void 0),E.ajax(E.extend({url:e,type:t,dataType:r,data:n,success:i},E.isPlainObject(e)&&e))}}),E._evalUrl=function(e){return E.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},E.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=E(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return y(e)?this.each(function(t){E(this).wrapInner(e.call(this,t))}):this.each(function(){var t=E(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=y(e);return this.each(function(n){E(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){E(this).replaceWith(this.childNodes)}),this}}),E.expr.pseudos.hidden=function(e){return!E.expr.pseudos.visible(e)},E.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Ht={0:200,1223:204},qt=E.ajaxSettings.xhr();m.cors=!!qt&&"withCredentials"in qt,m.ajax=qt=!!qt,E.ajaxTransport(function(e){var t,i;if(m.cors||qt&&!e.crossDomain)return{send:function(r,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)s.setRequestHeader(a,r[a]);t=function(e){return function(){t&&(t=i=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Ht[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),i=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout(function(){t&&i()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),E.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return E.globalEval(e),e}}}),E.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),E.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(i,r){t=E("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),a.head.appendChild(t[0])},abort:function(){n&&n()}}});var Vt,Wt=[],Gt=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Wt.pop()||E.expando+"_"+St++;return this[e]=!0,e}}),E.ajaxPrefilter("json jsonp",function(e,t,i){var r,o,a,s=!1!==e.jsonp&&(Gt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Gt,"$1"+r):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||E.error(r+" was not called"),a[0]},e.dataTypes[0]="json",o=n[r],n[r]=function(){a=arguments},i.always(function(){void 0===o?E(n).removeProp(r):n[r]=o,e[r]&&(e.jsonpCallback=t.jsonpCallback,Wt.push(r)),a&&y(o)&&o(a[0]),a=o=void 0}),"script"}),m.createHTMLDocument=((Vt=a.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Vt.childNodes.length),E.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(m.createHTMLDocument?((i=(t=a.implementation.createHTMLDocument("")).createElement("base")).href=a.location.href,t.head.appendChild(i)):t=a),r=I.exec(e),o=!n&&[],r?[t.createElement(r[1])]:(r=we([e],t,o),o&&o.length&&E(o).remove(),E.merge([],r.childNodes)));var i,r,o},E.fn.load=function(e,t,n){var i,r,o,a=this,s=e.indexOf(" ");return s>-1&&(i=gt(e.slice(s)),e=e.slice(0,s)),y(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&E.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(i?E("<div>").append(E.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){E.fn[t]=function(e){return this.on(t,e)}}),E.expr.pseudos.animated=function(e){return E.grep(E.timers,function(t){return e===t.elem}).length},E.offset={setOffset:function(e,t,n){var i,r,o,a,s,l,c=E.css(e,"position"),u=E(e),d={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=E.css(e,"top"),l=E.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(a=(i=u.position()).top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),y(t)&&(t=t.call(e,n,E.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+r),"using"in t?t.using.call(e,d):u.css(d)}},E.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){E.offset.setOffset(this,e,t)});var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if("fixed"===E.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===E.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((r=E(e).offset()).top+=E.css(e,"borderTopWidth",!0),r.left+=E.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-E.css(i,"marginTop",!0),left:t.left-r.left-E.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===E.css(e,"position");)e=e.offsetParent;return e||Se})}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;E.fn[e]=function(i){return W(this,function(e,i,r){var o;if(_(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===r)return o?o[t]:e[i];o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):e[i]=r},e,i,arguments.length)}}),E.each(["top","left"],function(e,t){E.cssHooks[t]=Ve(m.pixelPosition,function(e,n){if(n)return n=qe(e,t),Ue.test(n)?E(e).position()[t]+"px":n})}),E.each({Height:"height",Width:"width"},function(e,t){E.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){E.fn[i]=function(r,o){var a=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===o?"margin":"border");return W(this,function(t,n,r){var o;return _(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?E.css(t,n,s):E.style(t,n,r,s)},t,a?r:void 0,a)}})}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){E.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),E.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),E.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),E.proxy=function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return i=l.call(arguments,2),(r=function(){return e.apply(t||this,i.concat(l.call(arguments)))}).guid=e.guid=e.guid||E.guid++,r},E.holdReady=function(e){e?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=M,E.isFunction=y,E.isWindow=_,E.camelCase=X,E.type=S,E.now=Date.now,E.isNumeric=function(e){var t=E.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0===(i=function(){return E}.apply(t,[]))||(e.exports=i);var Yt=n.jQuery,Kt=n.$;return E.noConflict=function(e){return n.$===E&&(n.$=Kt),e&&n.jQuery===E&&(n.jQuery=Yt),E},r||(n.jQuery=n.$=E),E})},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),a=n(64),s=n(48),l=n(114),c=n(74),u=n(75),d=n(76),p=function(e){function t(t){var n=e.call(this,t)||this;return n.contentName="PremiumContext",n.onDomReadyCalledOnce=!1,n._onDomReady=function(e){n.onDomReadyCalledOnce||n.updateTriggerReasonText(e),n.onDomReadyCalledOnce=!0,n.updateTitleText(e)},n.triggerReason="triggerReason"in t?t.triggerReason:void 0,n.limits="limits"in t?t.limits:void 0,n.premiumFeatureName="premiumFeatureName"in t?t.premiumFeatureName:void 0,n.tool=t.tool,n}return r(t,e),t.prototype.initAllFeaturesTooltip=function(e){if(!this.tooltipRoot){if(this.tooltipRoot=e.querySelector(".new-premium__all-features-tooltip"),!this.tooltipRoot)throw"'All features' dom element not found";var t=e.querySelector(".new-premium__all-features-tooltip__html-template");if(!t)throw"htmlTemplate not found for 'All features' tooltip";window.tippy(this.tooltipRoot,{allowHTML:!0,theme:"light new-premium-all-features-tooltip",content:t.innerHTML,placement:"bottom",arrow:!0,animation:"fade",trigger:"mouseenter",interactive:!0})}},t.prototype.initOCRTooltip=function(e){if(!this.tooltipRoot_OCR){if(this.tooltipRoot_OCR=e.querySelector(".new-premium__ocr-tooltip"),!this.tooltipRoot_OCR)throw"'OCR' dom element not found";var t=e.querySelector(".new-premium__ocr-features-tooltip__html-template");if(!t)throw"htmlTemplate not found for 'OCR' tooltip";window.tippy(this.tooltipRoot_OCR,{allowHTML:!0,theme:"light new-premium__ocr-tooltip",content:t.innerHTML,placement:"bottom",arrow:!0,animation:"fade",trigger:"mouseenter",interactive:!0})}},t.prototype.updateTitleText=function(e){var t=e.querySelector(".dialog__title");if(!t)throw"'Title' element not found";var n=this.isTrialEnabledForThisTool()&&this.canUserDoTrial();switch(this.userType){case"guest":case"user":return void(t.innerHTML=n?this.getTranslation(e,"title_canTrial"):this.getTranslation(e,"title_cannotTrial"));case"premium":return;default:throw"Unhandled userType '"+this.userType+"' for updateTitleText"}},t.prototype.updateTriggerReasonText=function(e){var t,n,i,r,s,l=e.querySelector(".new-premium__trigger-reason_sub1"),c=e.querySelector(".new-premium__trigger-reason_sub2");if(!l)throw"'Trigger Reason subtitle1' element not found";if(!c)throw"'Trigger Reason subtitle2' element not found";var u,d,p=null!==(i=this.tool)&&void 0!==i?i:null===(r=this.limits)||void 0===r?void 0:r.tool,f=null===(s=window.ilovepdfConfig)||void 0===s?void 0:s.subtool,h=!1;switch(this.triggerReason){case a.REASON.ERROR_FEATURE:var g="triggerReason_errorFeature";switch(p){case"sign":case"pdfa":case"pdfoffice":g+="_"+p}["pdfexcel","pdfword"].includes(f)&&(g+="_"+f),this.premiumFeatureName&&(g+="_"+this.premiumFeatureName),l.innerHTML=this.getTranslation(e,g+"_subtitle1"),"ocr"===this.premiumFeatureName&&"pdfoffice"===p&&(h=!0,l.innerHTML=l.innerHTML.replace("OCR",'<span class="new-premium__ocr-tooltip" data-template="new-premium__ocr-features-tooltip__html-template">OCR</span>')),c.innerHTML=this.getTranslation(e,g+"_subtitle2");break;case a.REASON.ERROR_FILES:if(!this.limits)throw"Limits object is needed to translate subtitles' text";u=(t=[this.limits.fileLimits[this.tool],this.limits.allFileLimits.premium_limits[this.tool]])[0],d=t[1],l.innerHTML=o.Lang.tr(this.getTranslation(e,"triggerReason_errorFilesNum_subtitle1"),{n:u.files}),c.innerHTML=o.Lang.tr(this.getTranslation(e,"triggerReason_errorFilesNum_subtitle2"),{n:d.files});break;case a.REASON.ERROR_SIZE:if(!this.limits)throw"Limits object is needed to translate subtitles' text";u=(n=[this.limits.fileLimits[this.tool],this.limits.allFileLimits.premium_limits[this.tool]])[0],d=n[1],l.innerHTML=o.Lang.tr(this.getTranslation(e,"triggerReason_errorFilesSize_subtitle1"),{n:u.mb}),c.innerHTML=o.Lang.tr(this.getTranslation(e,"triggerReason_errorFilesSize_subtitle2"),{n:d.mb/1e3});break;case null:l.style.display="none",c.style.display="none";break;default:throw"Unknown triggerReason '"+this.triggerReason+"'"}this.initAllFeaturesTooltip(e),h&&this.initOCRTooltip(e)},t.prototype.getTranslation=function(e,t,n){if(void 0===n&&(n={}),this._translations){if(!(t in this._translations))throw"Translation for key '"+t+"' not found";return this._translations[t]}var i=e.querySelector(".new-premium__text-translations");if(!i)throw"'Text translations' DOM not found";if("html"===i.dataset.format){var r=i.querySelector("[data-key="+t+"]");if(!r)throw"Key '"+t+"' not found";return r.innerHTML}return this._translations=JSON.parse(i.innerHTML),this._translations?this.getTranslation(e,t):null},t.prototype.getInitialState=function(){switch(this.userType){case"guest":return new l.AuthState;case"user":return this.canUserDoTrial()&&this.isTrialEnabledForThisTool()?new u.CanTrialState:new c.CannotTrialState;case"premium":return new d.PremiumState;default:throw"Not implemented 'initialState' when userType is "+this.userType}},t}(s.ContextBase);t.PremiumContext=p},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),r=n(17),o=n(12),a=function(){function t(){}return t.getError=function(e){if("string"==typeof e)return e;if("error"in e&&"string"==typeof e.error)return e.error;if("response"in e){var t=this.getJson(e.response);if(null!=t)return"error"in t&&"param"in t.error&&t.error.param&&t.error.param&&"type"in t.error.param&&t.error.param.type instanceof Array?t.error.param.type[0]:"error"in t&&"type"in t.error&&t.error.type&&"string"==typeof t.error.type?t.error.type:"ServerError"}return"param"in e&&"type"in e.param?e.param.type:"UnknownError"},t.isJson=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},t.getJson=function(e){var t=null;try{t=JSON.parse(e)}catch(e){return null}return t},t.fatalError=function(n,a,s,l,c){void 0===n&&(n=null),void 0===a&&(a=null),void 0===s&&(s=null),void 0===l&&(l=null),void 0===c&&(c=null),null==n&&(n="UnknownError"),"UnknownError"==(n=t.getError(n))&&(r.configureScope(function(e){e.setExtra("unknownError",n),e.setExtra("tool",a),e.setExtra("fileName",l),e.setExtra("workerServer",s),e.setExtra("extra",c)}),r.addBreadcrumb({category:"upload",level:o.Severity.Error,message:"Unknown Error"})),window.ga("send","event","upload-fatal",a,n),e(".tool").hide(),e("#uploading").hide(),e("#process").hide(),e("body").addClass("process-run");var u="";u="FileRemoved"==n||"FileTooLarge"==n?n:"errorRetry";var d='\n        <div class="tool-error">\n            <h2 class="title2">'+i.Lang.t("Upload error")+'</h2>\n            <div class="tool-error__content">'+i.Lang.t(u);null!=l&&"FileRemoved"!=n&&(d=d+"<p>"+l+"</p>"),d=d+'</div><div class="tool-error__action"><a class="btn btn-sm" href="javascript:window.location.href=window.location.href">'+i.Lang.t("Retry")+"</a></div>",e("#uploading").html(d).show()},t.error=function(e,t,n,i){void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null)},t}();t.IloveError=a}).call(this,n(1))},function(e,t,n){(function(e,t){t.fn.preventDoubleSubmission=function(t){return e(this).on("submit",function(n){var i=e(this);!0===i.data("submitted")?(n.preventDefault(),i.find('[type="submit"]').attr("disabled",!0)):(i.data("submitted",!0),t>1&&(i.find('[type="submit"]').attr("disabled",!0),window.setTimeout(function(){i.data("submitted",!1),i.find('[type="submit"]').attr("disabled",null)},t)))}),this}}).call(this,n(1),n(1))},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(178),a=n(179),s=n(67),l=n(180),c=function(){function e(){var e=this;this.inputListener=function(){},this.pricesMap={},this.initialQtyIsValid=!0,this._isValid=!0,this.overrideBubbleTemplateQuantity={},this.showCustom=function(){return e.customElement.classList.remove("hidden"),e.sliderElement.classList.add("hidden"),e.mode="custom",!0},this.showSlider=function(){return e.customElement.classList.add("hidden"),e.sliderElement.classList.remove("hidden"),e.mode="slider",!0},this.setBubbleText=function(){var t=e.getText();e.bubble.setText(t),e._inputChanged()},this._inputChanged=function(){var t=e.getStatusByMaxMin();e.initialQtyIsValid||(t=t&&e.getQuantity()!==e.initialQty),t?e.setValid():e.setInvalid(),e.inputListener()},this.getStatusByMaxMin=function(){var t=e.getQuantity();return!(t<e.getMin()||t>e.getMax())},this.setCustomText=function(){e.customElement&&(e.textCustom.innerHTML=e.getText(),e._inputChanged())},this.addInputListeners_IE11=function(){e.inputRange.addEventListener("change",function(){e.setBubbleText()}),e.customElement&&e.inputCustom.addEventListener("input",function(){e.setCustomText()})},this.addInputListeners=function(){e.inputRange.addEventListener("input",function(){e.setBubbleText()}),e.customElement&&e.inputCustom.addEventListener("input",function(){e.setCustomText()})},this.getDataPrices=function(){var t=[];return JSON.parse(e.inputRange.dataset.packages).forEach(function(n){t[n]=e.getPackPrice(n)}),t},this.getPackPrice=function(t){var n=JSON.parse(e.inputRange.dataset.discount),i=JSON.parse(e.inputRange.dataset.basePrice),r=""==e.inputRange.dataset.priceInterval?1:parseInt(e.inputRange.dataset.priceInterval),o=""==e.inputRange.dataset.overallPriceDiscount?1:parseFloat(e.inputRange.dataset.overallPriceDiscount),a=0,s=0;return Object.keys(n).forEach(function(e){var r=parseInt(e),o=n[e];t>s&&(a+=t>=r?(r-s)*i*o:(t-s)*i*o,s=r)}),a=a*r*o,e.roundPrice(a)},this.onInput=function(t){e.inputListener=t},this.getPrice=function(){if("custom"==e.mode)return e.getPackPrice(Number(e.inputCustom.value));var t=e.getCurrentPriceItem(),n=(t[0],t[1]);return e.roundPrice(n)},this.getQuantity=function(){if("custom"==e.mode)return Number(e.inputCustom.value);var t=e.getCurrentPriceItem()[0];return Number(t)},this.getCurrentPriceItem=function(){return Object.entries(e.pricesMap).find(function(t,n){return Number(e.inputRange.value)===n})},this.setQuantity=function(t){var n=Object.entries(e.pricesMap).findIndex(function(e){var n=e[0];return Number(n)===t});e.inputRange.value=n.toString(),e.setBubbleText(),e.inputCustom&&(e.inputCustom.value=t.toString(),e.setCustomText())},this.setPrices=function(t){e.pricesMap=t;var n=Object.keys(e.pricesMap);e.setMin(Number(n[0])),e.setMax(Number(n[n.length-1])),e.setInputElements(n.length)},this.getPricesMap=function(){return e.pricesMap},this.getQuantities=function(){return Object.keys(e.getPricesMap()).map(function(e){return Number(e)})},this.setMin=function(t){e.container.setAttribute("data-min",t.toString())},this.setMax=function(t){e.container.setAttribute("data-max",t.toString())},this.setInputElements=function(t){e.inputRange.max=""+(t-1),e.inputRange.min="0";for(var n=e.container.querySelector(".slider__element__slider-datalist"),i="",r=0;r<t;r++)i+='<span class="slider__element__slider-datalist__option"></span>';n.innerHTML=i}}return e.prototype.init=function(e,t){return i(this,void 0,void 0,function(){var n=this;return r(this,function(i){if(e.hasAttribute("data-min"))return[2];t.mode||(t.mode="slider"),"initialQtyIsValid"in t&&"initialQty"in t&&(this.initialQtyIsValid=t.initialQtyIsValid),this.container=e,this.inputRange=e.querySelector('input[type="range"]'),this.inputCustom=e.querySelector('input[type="number"]'),this.sliderElement=e.querySelector(".slider__element__slider"),this.customElement=e.querySelector(".slider__element__custom"),this.switchElement=e.querySelector(".slider__element__mode"),this.textCustom=e.querySelector("[data-select-text]"),this.bubble=new o.default,this.bubble.init(this.inputRange),this.bubbleTemplate=this.inputRange.dataset.bubbleTemplate,this.currencyCode=this.inputRange.dataset.currencyCode;try{this.overrideBubbleTemplateQuantity=JSON.parse(this.inputRange.dataset.overrideBubbleTemplateQuantity)}catch(e){}return l.isIE11()?this.addInputListeners_IE11():this.addInputListeners(),this.setPrices(this.getDataPrices()),this.mode=t.mode,this.switchElement&&this.enableSwitchMode(),[2,new Promise(function(e,i){var r=null;if(t.minQty&&n.setMin(t.minQty),t.maxQty&&n.setMax(t.maxQty),t.initialQty){var o=n.getQuantities().sort(function(e,t){return e-t});r="function"==typeof t.initialQty?o.find(t.initialQty):t.initialQty}r=null!==r&&void 0!==r?r:n.getQuantities()[0],n.initialQty=r,n.setQuantity(r),e()})]})})},e.prototype.enableSwitchMode=function(){this.switchElement.classList.remove("hidden"),this.switchElement.style.display="block",this.initSwitchModeActions()},e.prototype.initSwitchModeActions=function(){var e=this,t=this.switchElement.querySelector('[data-select-mode="slide"]'),n=this.switchElement.querySelector('[data-select-mode="custom"]');t.addEventListener("click",function(){t.classList.add("payment-period__payments__item--active"),n.classList.remove("payment-period__payments__item--active"),e.showSlider(),e._inputChanged()}),n.addEventListener("click",function(){n.classList.add("payment-period__payments__item--active"),t.classList.remove("payment-period__payments__item--active"),e.showCustom(),e._inputChanged()})},e.prototype.getText=function(){var e=this.getQuantity(),t=a.localePrice(this.getPrice(),this.currencyCode),n=this.bubbleTemplate;return"string"==typeof this.overrideBubbleTemplateQuantity[e]&&(n=this.overrideBubbleTemplateQuantity[e]),s.Tools.parseTemplate(n,{quantity:a.localeNumber(e),price:t})},e.prototype.isValid=function(){return this._isValid},e.prototype.setInvalid=function(){this._isValid=!1,this.sliderElement.classList.add("invalid")},e.prototype.setValid=function(){this._isValid=!0,this.sliderElement.classList.remove("invalid")},e.prototype.roundPrice=function(e){return Number(Math.round(e))},e.prototype.getMin=function(){return Number(this.container.getAttribute("data-min"))},e.prototype.getMax=function(){return Number(this.container.getAttribute("data-max"))},e}();t.default=c},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),r=n(26),o=n(49),a=function(){function t(){var e=this;this.eventEmitter=new r.ILoveEventEmitter,this.dispatchEvent=function(t){return e.eventEmitter.dispatchEvent(t)}}return t.open=function(e,n,i){void 0===n&&(n={});var r=t.instance;r.popup&&(clearInterval(r.popupInterval),r.popupInterval=null,r.popup.close(),r.popup=null);var o=r.mergeWindowFeatureProps(n,!0),a="/auth/auth?authclient="+String(e);r.popup=window.open(a,"social_auth_popup",o);var s=r.popup;window.ilove_socialAuthPopupStatus=void 0,window.ilove_socialAuthPopupOpened=!0;var l=function(){window.ilove_socialAuthPopupStatus;var e=window.ilove_socialAuthPopupNewUser;window.ilove_socialAuthPopupOpened=!1,window.ilove_socialAuthPopupStatus=void 0,window.ilove_socialAuthPopupNewUser=void 0,r.popupInterval=null,r.onPopupClosed(e,i),r.popup=null};return new Promise(function(e,t){r.popupInterval=setInterval(function(){var n=r.popup&&!r.popup.closed,i=!1;try{var o=r.popup.location.hostname,a=null!==r.popup.location.href.match("social-login-redirect");i=o===window.location.hostname&&!a}catch(e){}if(!n||s!==r.popup||i)if(clearInterval(r.popupInterval),i)var c=setInterval(function(){r.popup.addEventListener&&(clearInterval(c),r.popup.addEventListener("DOMContentLoaded",function(){var e,n,i=null===(n=null===(e=r.popup)||void 0===e?void 0:e.document)||void 0===n?void 0:n.body;i.style.display="none";var o=Array.from(i.querySelectorAll(".flash")).map(function(e){return e.innerText});r.popup.close(),l(),t({errors:o})}))});else l(),e({})})})},t.focusWindow=function(){var e;null===(e=t.instance.popup)||void 0===e||e.focus()},t.closeWindow=function(){var e;null===(e=t.instance.popup)||void 0===e||e.close()},t.prototype.onPopupClosed=function(n,r){var a,s=this,l=null!==(a=null===r||void 0===r?void 0:r.getAttribute(t.runningFromAttr))&&void 0!==a?a:"auth";n&&o.UserAuth.sendGA_registered(l),e.get("/login").done(function(e){s.userAuth=new o.UserAuth({runningFrom:l}),s.userAuth.loginSuccess(e);var t={socialAuth_isNewUser:n},r=new CustomEvent("userAuth",{detail:t});window.dispatchEvent(r),s.dispatchEvent(new i.IloveEvent("auth:success",t))}).fail(function(e,t,n){})},Object.defineProperty(t,"instance",{get:function(){return window.ilove_socialAuthPopupInstance||(window.ilove_socialAuthPopupInstance=new t),window.ilove_socialAuthPopupInstance},enumerable:!0,configurable:!0}),t.prototype.mergeWindowFeatureProps=function(e,t){void 0===t&&(t=!1);var n=Object.assign({resizable:"yes",scrollbars:"no",toolbar:"no",menubar:"no",location:"no",directories:"no",status:"yes",width:450,height:380,left:null,top:null},e);if(n.left=(window.innerWidth-n.width)/2,n.top=(window.innerHeight-n.height)/2,t){var i=[];for(var r in n)n.hasOwnProperty(r)&&i.push(r+"="+n[r]);return i.join(",")}return n},t.runningFromAttr="data-running-from",t.addEventListener=function(e,n){return t.instance.eventEmitter.addEventListener(e,n)},t}();t.SocialAuthPopup=a}).call(this,n(1))},function(e,t,n){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var r=n(121);e.loadImage=r;var o=n(126);e.canvasToBlob=o;var a=function(){function e(e){void 0===e&&(e={}),this.files=null,this.coversShow=!0,this.screenSize=[],this.imageIsLoaded=!1,this.URL=window.URL||window.webkitURL,this.URLObj={},this.imageSrc={},this.utif=n(127),this.useLoadImageLib=!1,Object.assign(this,e),this.init()}return e.prototype.init=function(){},e.prototype.renderUrl=function(e,t,n){void 0===n&&(n=!1);return new Promise(function(r,o){var a=document.getElementById(t);1==n?i(a).attr("src",e):i(a).attr("style","background-image: url("+e+");background-size:contain");var s=new Image;s.src=e,s.onload=function(){var t=new XMLHttpRequest;t.open("HEAD",e,!0),t.onreadystatechange=function(){4==t.readyState&&(200==t.status?r({size:t.getResponseHeader("Content-Length")}):r({}))},t.send(null)}})},e.prototype.renderImage=function(e,t,n){return void 0===n&&(n=!1),1==this.useLoadImageLib?this.renderImageOrientation(e,t,n):this.renderImageBasic(e,t,n)},e.prototype.hasBrowserAppliedImageOrientation=function(e){return"from-image"===i(e).css("image-orientation")},e.prototype.renderImageBasic=function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1);var o=this;return new Promise(function(r,a){var s=document.getElementById(t);try{var l=new FileReader;l.onload=function(e){var c=0;c=o.getExifOrientation(e);var u,d,p=new Uint8Array(l.result),f=new Blob([p]);try{u=window.URL||window.webkitURL,d=u.createObjectURL(f)}catch(e){return void a(e)}o.imageSrc[t]=d,o.imageIsLoaded=!0;var h=new Image;h.onload=function(){var e=h.height,t=h.width;o.hasBrowserAppliedImageOrientation(s)&&(c=0),c>4&&c<9&&(e+=t,e-=t=e-t),1==n?i(s).attr("src",d):i(s).css("background-image","url("+d+")").css("background-size","contain"),o.transformByOrientation(s,c),r({width:t,height:e})},h.onerror=function(e){i(s).css("background-image",'url("/img/filetype/damaged.svg")').css("background-size","35%;"),a(e)},h.src=d},l.readAsArrayBuffer(e)}catch(e){a()}})},e.prototype.transformByOrientation=function(e,t){var n="";if(t>1){switch(t){case 1:break;case 2:n="scaleX(-1)";break;case 3:n="rotate(180deg)";break;case 4:n="rotate(180deg) scale(-1)";break;case 5:n="rotate(90deg) scale(-1)";break;case 6:n="rotate(90deg)";break;case 7:n="rotate(270deg) scale(-1)";break;case 8:n="rotate(270deg)"}i(e).css("transform",n)}},e.prototype.renderImageOrientation=function(e,t,n){void 0===n&&(n=!1);var r=this;return new Promise(function(o,a){var s=document.getElementById(t);try{var l=new FileReader;l.onload=function(e){var c=0,u=new Uint8Array(l.result),d=new Blob([u]);if(r.hasBrowserAppliedImageOrientation(s)||(c=r.getExifOrientation(e)),c>1)window.loadImage(d,function(e){!e||"type"in e&&"error"==e.type?a({error:"damagedImage",message:"cannot render image"}):e.toBlob(function(e){var l,c;try{l=window.URL||window.webkitURL,c=l.createObjectURL(e)}catch(e){return void a(e)}r.imageSrc[t]=c,r.imageIsLoaded=!0;var u=new Image;u.onload=function(){var e=u.height,t=u.width;n?i(s).attr("src",c):i(s).attr("style","background-image: url("+c+");background-size:contain"),window.setTimeout(function(){r.URL.revokeObjectURL(c)},1e3),o({width:t,height:e})},u.onerror=function(e){i(s).attr("style",'background-image: url("/img/filetype/damaged.svg");background-size:35%;'),a(e)},u.src=c})},{canvas:!0,orientation:c});else{var p,f=void 0;try{f=window.URL||window.webkitURL,p=f.createObjectURL(d)}catch(e){return void a(e)}r.imageSrc[t]=p,r.imageIsLoaded=!0;var h=new Image;h.onload=function(){var e=h.height,t=h.width;1==n?i(s).attr("src",p):i(s).css("background-image","url("+p+")").css("background-size","contain"),o({width:t,height:e})},h.onerror=function(e){i(s).css("background-image",'url("/img/filetype/damaged.svg")').css("background-size","35%;"),a(e)},h.src=p}},l.readAsArrayBuffer(e)}catch(e){a()}})},e.prototype.getExifOrientation=function(e){var t=new DataView(e.target.result);if(65496!=t.getUint16(0,!1))return-2;for(var n=t.byteLength,i=2;i<n;){if(t.getUint16(i+2,!1)<=8)return-1;var r=t.getUint16(i,!1);if(i+=2,65505==r){if(1165519206!=t.getUint32(i+=2,!1))return-1;var o=18761==t.getUint16(i+=6,!1);i+=t.getUint32(i+4,o);var a=t.getUint16(i,o);i+=2;for(var s=0;s<a;s++)if(274==t.getUint16(i+12*s,o))return t.getUint16(i+12*s+8,o)}else{if(65280!=(65280&r))break;i+=t.getUint16(i,!1)}}return-1},e.prototype.renderSvg=function(e,t,n){void 0===n&&(n=!1);var r=this;return new Promise(function(o,a){var s=document.getElementById(t),l=new FileReader;l.onload=function(e){r.imageSrc[t]=e.target.result,n?i(s).attr("src",r.imageSrc[t]):i(s).attr("style","background-image: url("+r.imageSrc[t]+");background-size:contain"),r.imageIsLoaded=!0;var l=new Image;l.onload=function(){var e=l.height,t=l.width;o({width:t,height:e})},l.onerror=function(e){i(s).attr("style",'background-image: url("/img/filetype/damaged.svg");background-size:35%;'),a(e)},l.src=r.imageSrc[t]};try{l.readAsDataURL(e)}catch(e){a()}})},e.prototype.renderTif=function(e,t){var n=this,r=document.getElementById(t),o=new FileReader;return new Promise(function(a,s){o.onload=function(e){try{var o=n.utif.decode(e.target.result)[0],l=n.utif.toRGBA8(o),c=o.width,u=o.height,d=void 0,p=0;c>u?p=u*(d=n.screenSize.h)/c:d=c*(p=n.screenSize.h)/u,"canvas"!=r.tagName&&(i("#"+t).append('<canvas class="raw"></canvas>'),r=i("#"+t+" canvas")[0]),r.width=c,r.height=u;for(var f=r.getContext("2d"),h=f.createImageData(c,u),g=0;g<l.length;g++)h.data[g]=l[g];f.putImageData(h,0,0),"canvas"==i("#"+t)[0].tagName?i("#"+t).css("width",d+"px").css("height",p+"px"):i("#"+t+" canvas").css("width",d+"px").css("height",p+"px"),a()}catch(e){s(e)}},o.readAsArrayBuffer(e)})},e.prototype.onFileReady=function(){var e=this;return new Promise(function(t,n){var i=window.setInterval(function(){!0===e.imageIsLoaded&&(clearInterval(i),t())},200)})},e}();t.ImageView=a}).call(this,n(31),n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),r=n(26),o=function(){function e(t){var n=this;void 0===t&&(t={}),this.isShown=!1,this.contentsListeningTo=new Array,this.destroyed=!1,this._canBeClosedByUser=void 0,this._isClosing=!1,this.show=function(){if(n.destroyed)throw"This dialog was destroyed. It's no longer usable";if(document.body.style.overflow="hidden",!n.isShown){var t=n.element,r=n.backdrop,o=n.closeBtn;return n.content&&n.content.reset(),0==n.props.enableCloseBtn&&o&&(o.style.display="none"),n.dialog.style.display="",n.elementContainer,t.offsetWidth,n.elementContainer.classList.add("dialog__container--appeared"),r.offsetWidth,r.classList.add("dialog__backdrop--appeared"),n.isShown=!0,e.visibleDialogs.add(n),void n.dispatchEvent(new i.IloveEvent("shown"))}},this.close=function(){if(n.destroyed)throw"This dialog was destroyed. It's no longer usable";n.isShown&&(n.elementContainer.classList.remove("dialog__container--appeared"),n.backdrop.classList.remove("dialog__backdrop--appeared"),n._isClosing=!0,setTimeout(function(){n._dialog&&(n.dialog.style.display="none"),n.isShown=!1,n._isClosing=!1,document.body.style.overflow="",e.visibleDialogs.delete(n),n.dispatchEvent(new i.IloveEvent("hidden"))},250),n.dispatchEvent(new i.IloveEvent("closed")),n.content&&n.content.isInEndState()&&n.content.notifyOfContainerClosing())},this.getDialogName=function(){return n.props.dialogName},this.destroy=function(){n.destroyed||(n._dialog&&(n._dialog.parentNode.removeChild(n._dialog),n._dialog=void 0),n.destroyed=!0)},this.setContent=function(e){if(n.destroyed)throw"This dialog was destroyed. It's no longer usable";return n.content=e,e.setContextPlacement("dialog"),e.render(n.domRoot),n.listenToEvents(e),n},this._closeOnEscapeKey=function(e){"Escape"===e.key&&n.close()},this.createDialogContainer=function(){var e=document.createElement("div");return e.classList.add("dialog__container"),e},this.createDialogElement=function(){var e=document.createElement("div");return e.classList.add("dialog__element"),e},this.createDialogBackdrop=function(){var e=document.createElement("div");return e.classList.add("dialog__backdrop"),n.props.clickAwayClose&&e.addEventListener("click",function(){n.canBeClosedByUser()&&n.close()}),e},this.initCloseBtn=function(){n.dialog.addEventListener("click",function(e){e.target.classList.contains("dialog__close")&&n.canBeClosedByUser()&&n.close()})},this.eventEmitter=new r.ILoveEventEmitter,this.props=this.mergeWithDefaultPropValues(t)}return e.getVisibleDialogs=function(){return Array.from(this.visibleDialogs).filter(function(e){return!e.isClosing()})},e.prototype.canBeClosedByUser=function(){return void 0!==this._canBeClosedByUser?this._canBeClosedByUser:this.props.canBeClosedByUser},e.prototype.isClosedOrInProcessOfClosing=function(){return this.isClosing()||!this.isShown},e.prototype.isClosing=function(){return this._isClosing},e.prototype.listenToEvents=function(e){var t=this;-1!==this.contentsListeningTo.indexOf(e.getInstanceID())||(e.addEventListener("end",function(){t.isClosedOrInProcessOfClosing()||t.close()}),e.addEventListener("disableContentAbandonment",function(){return t._canBeClosedByUser=!1}),e.addEventListener("unsetContentAbandonment",function(){return t._canBeClosedByUser=void 0}),this.contentsListeningTo.push(e.getInstanceID()))},Object.defineProperty(e.prototype,"dialog",{get:function(){if(!this._dialog){var e=this.createDialogContainer(),t=this.createDialogElement();e.appendChild(t);var n=this.createDialogBackdrop();this._dialog=document.createElement("div"),this.props.dialogName&&this._dialog.setAttribute("data-dialog-name",this.props.dialogName),this._dialog.classList.add("dialog"),this._dialog.appendChild(e),this._dialog.appendChild(n),this.props.enableCloseBtn&&this.initCloseBtn(),this._dialog.style.display="none",document.body.appendChild(this._dialog)}return this._dialog},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"domRoot",{get:function(){return this.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.dialog.children[0].children[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elementContainer",{get:function(){return this.dialog.querySelector(".dialog__container")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backdrop",{get:function(){return this.dialog.children[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeBtn",{get:function(){return this.dialog.querySelector(".dialog__close")},enumerable:!0,configurable:!0}),e.prototype.mergeWithDefaultPropValues=function(e){var t,n,i,r=null===(t=e.canBeClosedByUser)||void 0===t||t,o=null!==(n=e.clickAwayClose)&&void 0!==n&&n,a=null!==(i=e.enableCloseBtn)&&void 0!==i?i:r;return{dialogName:e.dialogName,canBeClosedByUser:r,clickAwayClose:o,escapeKeyClose:r,enableCloseBtn:a}},e.prototype.getContent=function(){return this.content},e.prototype.dispatchEvent=function(e){return this.eventEmitter.dispatchEvent(e)},e.prototype.addEventListener=function(e,t){return this.eventEmitter.addEventListener(e,t)},e.visibleDialogs=new Set,e}();t.Dialog=o},function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l,c=[],u=!1,d=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&f())}function f(){if(!u){var e=s(p);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||u||s(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e){e.exports={development:{service:"https://servicedev.ilovepdf.com",service_subdomain:"servicedev",web_prefix:"dev",api_sufix:"dev",stripe_key:"pk_test_3QB411Rie7QKjMhfSA0oiEOx",paypal_env:"sandbox",paypal_sandbox_key:"AZ1YHzR1wxJRRmfpqDHyoTwxfOwxB3UTlewVDk-1o6iZQX9SOCVHUpurugviVCowIPGCQ-SsTfbN8ubr",paypal_production_key:"AZRtaJu6iBHsygDFp5OMdCQabjEStco4pfXUdP1SnMGLnpLQdl84xBjXYIMyqY-6pyVKAj-muy5ZeMpv"},staging:{service:"https://servicestaging.ilovepdf.com",service_subdomain:"servicestaging",web_prefix:"staging",api_sufix:"dev",stripe_key:"pk_test_3QB411Rie7QKjMhfSA0oiEOx",stripe_key_api:"pk_test_mDCbsVuNmGS4QIePyxrnLexu",paypal_env:"sandbox",paypal_sandbox_key:"AZ1YHzR1wxJRRmfpqDHyoTwxfOwxB3UTlewVDk-1o6iZQX9SOCVHUpurugviVCowIPGCQ-SsTfbN8ubr",paypal_production_key:"AZRtaJu6iBHsygDFp5OMdCQabjEStco4pfXUdP1SnMGLnpLQdl84xBjXYIMyqY-6pyVKAj-muy5ZeMpv"},production:{service:"https://service.ilovepdf.com",service_subdomain:"service",web_prefix:"www",api_sufix:"",stripe_key:"pk_live_yt4GO14tITBDJGQFVBSAbkaT",stripe_key_api:"pk_live_epWBEsOopGb3Oo75Y6YzAbTP",paypal_env:"production",paypal_sandbox_key:"AZ1YHzR1wxJRRmfpqDHyoTwxfOwxB3UTlewVDk-1o6iZQX9SOCVHUpurugviVCowIPGCQ-SsTfbN8ubr",paypal_production_key:"AZRtaJu6iBHsygDFp5OMdCQabjEStco4pfXUdP1SnMGLnpLQdl84xBjXYIMyqY-6pyVKAj-muy5ZeMpv"}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(33),r=n(9),o=n(17),a=n(12),s=n(47),l=function(){function t(e){this.SLOW_CONNECTION_LIMIT=200,this.BPS_CONNECTION_LIMIT=2e4,this.RETRY_NUM=4,this.optionsManager=null,this.processManager=null,this.config=null,this.files=null,this.workerServer=null,this.startServer=null,this.token=null,this.tool=null,this.taskId=null,this.id="pickfiles",this.container="uploader",this.servers=null,this.haveDrop=!0,this.dropElement="workArea",this.ignoreFiles=!1,this.chunkSize="2Mb",Object.assign(this,e),this.appVersion=s.APP_VERSION,this.apiVersion=s.API_VERSION,this.slowConnectionCounter=0,this.dnsFallback=!1,this.dnsFallbackActive=!1,this.servers=this.shuffle(this.servers),this.notCheckedServers=this.servers,this.retryCount=this.RETRY_NUM,this.settimer0=null,this.settimer1=null;var t=this.notCheckedServers.indexOf(this.workerServer);t>-1&&this.notCheckedServers.splice(t,1),this.uploader=null,this.timeout=null,this.timeLimit=684e4,this.timeCheck=3e5,this.init()}return t.prototype.shuffle=function(e){for(var t,n=e.length-1;n>0;n--){var i=Math.floor(Math.random()*(n+1));t=[e[i],e[n]],e[n]=t[0],e[i]=t[1]}return e},t.prototype.init=function(){var t=this;this.initPlupload().then(function(){e("#"+t.id).addClass("active"),t.configPlupload(),t.dragDrop(),t.checkTimeoutInterval()},function(){})},t.prototype.initPlupload=function(){return new Promise(function(e){if(null===window.plupload||void 0!==window.plupload)return e(!0);i.lazyload("assets/js/plupload/plupload.full.min.js");var t=window.setInterval(function(){if(null!==window.plupload&&"object"==typeof window.plupload)return clearInterval(t),e(!0)},100)})},t.prototype.changeDNSServer=function(e){return this.workerServer=this.workerServer.replace(".","-cf."),this.optionsManager.changeServer(this.workerServer),this.uploader.setOption("url",this.workerServer+"/"+this.apiVersion+"/upload"),this.dnsFallbackActive=!0,window.ga("send","event","upload-info","upload-change","dns"),o.addBreadcrumb({category:"upload",level:a.Severity.Info,message:"change dns: "+e}),!0},t.prototype.checkServerStatus=function(){var e=this;return new Promise(function(t,n){1==e.optionsManager.checkServerStatusOnStart?(e.optionsManager.checkServerStatusOnStart=!1,e.optionsManager.processManager.api.getStatus(e.workerServer).then(function(n){n&&"down"==n.status&&e.changeServer(),t()},function(n){e.changeServer(),t()})):t()})},t.prototype.changeServer=function(){var t=this;if(this.notCheckedServers=e.grep(this.notCheckedServers,function(e){return e!=t.workerServer.replace("-cf.",".")}),t.notCheckedServers.length>0){var n=this.workerServer;return this.workerServer=this.notCheckedServers[0],t.uploader.setOption("url",this.workerServer+"/"+t.apiVersion+"/upload"),window.ga("send","event","upload-info","upload-change","server-"+n),this.optionsManager.changeServer(this.workerServer),o.addBreadcrumb({category:"upload",level:a.Severity.Info,message:"change server: "+n+" - "+this.workerServer}),!0}return!1},t.prototype.configPlupload=function(){var t=this,n={file:null,offset:0,chunk:0};this.uploader=new window.plupload.Uploader({browse_button:t.id,chunk_size:this.chunkSize,max_retries:0,runtimes:"html5",container:t.container,drop_element:t.dropElement,dragdrop:t.haveDrop,multi_selection:t.config.getConfig("multiSelection"),url:t.getUrl(),filters:{mime_types:t.config.getConfig("mimeTypes")},headers:t.getHeaders(),multipart_params:t.getUploadParams(),init:{Init:function(e,t){},PostInit:function(){},QueueChanged:function(e){},FilesAdded:function(n,i){t.checkServerStatus().then(function(){i.length;if(e.each(i,function(e,n){n.upBy=t.id,1==t.ignoreFiles&&(n.ignored=!0,t.optionsManager.limits.addIgnoredFile(n.id)),t.files.addFile(n)}),0==t.ignoreFiles&&(i=t.checkLimits(i,n)),e.each(t.files.removed,function(e,t){try{n.removeFile(t)}catch(e){}}),!(i.length>0))return!1;n.start(),e.each(i,function(e,i){"errorData"in i&&delete i.errorData,t.fileAdded(i,n)})})},FilesRemoved:function(e,t){},BeforeUpload:function(e,t){n.file=t,n.offset=0,n.chunk=0,o.addBreadcrumb({category:"upload",level:a.Severity.Info,message:"before upload: "+t.name+" w."+t.size})},BeforeChunkUpload:function(r,s,l,c,u){return!1===t.isOnline?(r.stop(),!1):(t.timeout=Date.now(),o.addBreadcrumb({category:"upload",level:a.Severity.Info,message:"before chunk: "+n.chunk}),1==t.dnsFallback&&0==t.dnsFallbackActive?(t.changeDNSServer("slow"),i(),!1):0==c.size?(s.status=window.plupload.FAILED,t.error({error:"FileRemoved",file:s}),s.errorData="FileRemoved",r.removeFile(s.id),t.uploader.stop(),e("body").hasClass("process-run")||t.uploader.start(),!1):void 0)},ChunkUploaded:function(e,t,i){n.offset=i.offset,n.chunk++},UploadProgress:function(n,i){e("#uploadSpeed").html(window.plupload.formatSize(n.total.bytesPerSec).toUpperCase()+"/S");var r=Math.round((n.total.size-n.total.loaded)/n.total.bytesPerSec*1e3);void 0!=s(r)&&e("#timeLeft").html(s(r).toUpperCase()),i.size>3*t.BPS_CONNECTION_LIMIT&&n.total.bytesPerSec<t.BPS_CONNECTION_LIMIT?t.slowConnectionCounter++:t.slowConnectionCounter--,t.slowConnectionCounter==t.SLOW_CONNECTION_LIMIT&&(t.dnsFallback=!0,o.addBreadcrumb({category:"upload",level:a.Severity.Info,message:"Slow Connection: Set to change server"}))},FileUploaded:function(e,i,r){n.file=null;var o=JSON.parse(r.response);t.fileUploaded(i.id,o)},UploadComplete:function(e,t){},Error:function(n,s){-600!=s.code||0!=s.file.origSize?-600==s.code&&s.file.origSize>0?window.Toastr.error(r.Lang.t("FileSizeExceeded")+"<br>"+s.file.name,r.Lang.t("Upload error"),{timeOut:6e3,positionClass:"toast-top-left"}):-601!=s.code?-200==s.code&&"status"in s&&400==s.status?t.error(s):-200==s.code?(o.addBreadcrumb({category:"upload",level:a.Severity.Error,message:"Server Error"}),500==s.status||401==s.status?(o.addBreadcrumb({category:"upload",level:a.Severity.Error,message:"Server Error"}),500==s.status&&(o.configureScope(function(e){e.setExtra("error500",s)}),o.captureMessage("upload500")),401==s.status&&(o.configureScope(function(e){e.setExtra("error401",s)}),o.captureMessage("upload401")),1==t.changeServer()?t.reUploadAllFiles():(t.timeout=null,t.uploader.stop(),t.fatalError("ServerError"),"file"in s&&(s.file.errorData="ServerError"))):t.retryCount>0?(t.retryCount--,t.uploader.stop(),i(!0)):0==t.dnsFallbackActive?(t.uploader.stop(),t.retryCount=t.RETRY_NUM,t.changeDNSServer("connection"),i(!0)):0==s.status&&"HTTP Error."==s.message?1==t.changeServer()?t.reUploadAllFiles():(t.timeout=null,e("body").hasClass("process-run")?(t.error({error:"ConnectionError"}),t.processManager.status="error",t.uploader.stop()):t.error({error:"ConnectionError"})):t.uploader.stop()):(t.uploader.stop(),n.removeFile(s.file.id),t.error(s)):window.Toastr.error(r.Lang.t("InvalidExtension")+"<br>"+s.file.name,r.Lang.t("Upload error"),{timeOut:6e3,positionClass:"toast-top-left"}):window.Toastr.error(r.Lang.t("EmptyFile")+"<br>"+s.file.name,r.Lang.t("Upload error"),{timeOut:6e3,positionClass:"toast-top-left"})}}});var i=function(e){void 0===e&&(e=!1),n.file.loaded=n.offset,clearTimeout(t.settimer1),t.settimer1=setTimeout(function(){o.addBreadcrumb({category:"upload",level:a.Severity.Info,message:"retry upload "}),n.file&&(n.file.status=window.plupload.UPLOADING,t.uploader.state=window.plupload.STARTED,t.uploader.trigger("UploadFile",n.file))},1500)};function s(e){r.Lang.t("Time left");var t,n=r.Lang.t("minute"),i=r.Lang.t("hour"),o=r.Lang.t("less than"),a=r.Lang.t("minutes"),s=r.Lang.t("hours"),l=r.Lang.t("seconds"),c=Math.floor(e/1e3);e%=1e3;var u=Math.floor(c/60);c%=60;var d=Math.floor(u/60);u%=60;Math.floor(d/60);return 0==(d%=60)?0==u?t=c+" "+l:1==u?t="1 "+n:u>1&&(t=" "+u+" "+a):1==d?t=o+" "+(d+1)+" "+s:d>1&&(t=o+" "+d+" "+i),t}window.addEventListener("goProcess",function(){var e={task:t.taskId,preview:0,v:t.appVersion};t.uploader.setOption("multipart_params",e)},!1),window.addEventListener("offline",function(){t.isOnline=!1,t.uploader.stop(),o.addBreadcrumb({category:"upload",level:a.Severity.Info,message:"go offline "})},!1),window.addEventListener("online",function(){if(t.isOnline=!0,null===n.file)return!1;o.addBreadcrumb({category:"upload",level:a.Severity.Info,message:"go online"}),i()},!1),window.addEventListener("fileRemoved",function(e){t.uploader.removeFile(e.detail.fileId)}),this.uploader.init()},t.prototype.reUploadAllFiles=function(){var e=this.uploader;o.addBreadcrumb({category:"upload",level:a.Severity.Info,message:"Reuploading all files "+this.id}),e.stop(),clearTimeout(this.settimer0),e.files.forEach(function(e,t){e.status=window.plupload.QUEUED,e.percent=0,e.loaded=0,e.error=!1,e.retry=!0,e.server_filename&&(delete e.server_filename,e.reUploaded=!0)}),this.settimer0=setTimeout(function(){e.refresh(),e.start()},500)},t.prototype.getHeaders=function(){return{Authorization:"Bearer "+this.token,Accept:"application/json"}},t.prototype.getUrl=function(){return this.workerServer+"/"+this.apiVersion+"/upload"},t.prototype.getUploadParams=function(){return{task:this.taskId,preview:1==window.processStart?0:1,pdfinfo:1==window.pdfinfo?1:0,pdfforms:1==window.pdfforms?1:0,pdfresetforms:1==window.pdfresetforms?1:0,v:this.appVersion}},t.prototype.checkLimits=function(e,t){return this.optionsManager.checkLimits(e,this.id)},t.prototype.fileAdded=function(e,t){e.runtime=t.runtime,e.canvasId=e.id,this.optionsManager.fileAdded(e,this.id,this.ignoreFiles).then(function(){},function(){})},t.prototype.fileUploaded=function(e,t){this.optionsManager.fileUploaded(e,t)},t.prototype.error=function(e){this.optionsManager.invalidUpload(e)},t.prototype.fatalError=function(e){this.optionsManager.fatalError(e)},t.prototype.dragDrop=function(){"function"!=typeof e.fn.dndhover&&0!=this.haveDrop&&(e.fn.dndhover=function(t){return this.each(function(){var t=e(this),n=e();t.on("dragenter",function(e){if(0===n.length){var i=e.originalEvent.dataTransfer;i.types&&(i.types.indexOf?-1!=i.types.indexOf("Files"):i.types.contains("Files"))&&t.trigger("dndHoverStart")}n=n.add(e.target)}),t.on("dragleave",function(e){setTimeout(function(){0===(n=n.not(e.target)).length&&t.trigger("dndHoverEnd")},1)}),t.on("drop",function(e){setTimeout(function(){0===(n=n.not(e.target)).length&&t.trigger("dndHoverEnd")},1)})})},e(".tool__workarea").dndhover().on({dndHoverStart:function(t){return e("#dropArea").text(r.Lang.t("dropIt")),e("#dropArea").show(),t.stopPropagation(),t.preventDefault(),!1},dndHoverEnd:function(t){return e("#dropArea").hide(),t.stopPropagation(),t.preventDefault(),!1}}))},t.prototype.timeIsOk=function(){if(null==this.timeout)return!0;var e=Date.now()-this.timeLimit;return this.timeout>e},t.prototype.checkTimeoutInterval=function(){var e=this;window.setInterval(function(){e.checkTimeout()},e.timeCheck)},t.prototype.checkTimeout=function(){null!=this.timeout&&(this.timeIsOk()||(this.uploader.stop(),this.optionsManager.timeout(),this.timeout=null))},t.prototype.changeTaskId=function(e){this.taskId=e;var t=this.getUploadParams();this.uploader.setOption("multipart_params",t)},t}();t.PluploadUpload=l}).call(this,n(1))},function(e,t){!function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}()},function(e,t,n){(function(e){var t;String.prototype.ucFirst=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.camelCase=function(){return this.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()})},e.fn.exchangePositionWith=function(t){var n=e(t),i=e("<span>").hide();this.before(i),n.before(this),i.replaceWith(n)},Array.prototype.move=function(e,t){if(t>=this.length)for(var n=t-this.length;1+n--;)this.push(void 0);return this.splice(t,0,this.splice(e,1)[0]),this},String.prototype.trunc=function(e){return this.substr(0,e-1)+(this.length>e?"&hellip;":"")},String.prototype.trim||(t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,String.prototype.trim=function(){return this.replace(t,"")}),String.prototype.ltrim||(String.prototype.ltrim=function(){return this.replace(/^\s+/g,"")})}).call(this,n(1))},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(0),r=n(23),o=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w\.-]+)(?::(\d+))?\/(.+)/,a=function(){function e(e){"string"==typeof e?this._fromString(e):this._fromComponents(e),this._validate()}return e.prototype.toString=function(e){void 0===e&&(e=!1);var t=this,n=t.host,i=t.path,r=t.pass,o=t.port,a=t.projectId;return t.protocol+"://"+t.user+(e&&r?":"+r:"")+"@"+n+(o?":"+o:"")+"/"+(i?i+"/":i)+a},e.prototype._fromString=function(e){var t=o.exec(e);if(!t)throw new r.a("Invalid Dsn");var n=i.c(t.slice(1),6),a=n[0],s=n[1],l=n[2],c=void 0===l?"":l,u=n[3],d=n[4],p=void 0===d?"":d,f="",h=n[5],g=h.split("/");g.length>1&&(f=g.slice(0,-1).join("/"),h=g.pop()),this._fromComponents({host:u,pass:c,path:f,projectId:h,port:p,protocol:a,user:s})},e.prototype._fromComponents=function(e){this.protocol=e.protocol,this.user=e.user,this.pass=e.pass||"",this.host=e.host,this.port=e.port||"",this.path=e.path||"",this.projectId=e.projectId},e.prototype._validate=function(){var e=this;if(["protocol","user","host","projectId"].forEach(function(t){if(!e[t])throw new r.a("Invalid Dsn")}),"http"!==this.protocol&&"https"!==this.protocol)throw new r.a("Invalid Dsn");if(this.port&&isNaN(parseInt(this.port,10)))throw new r.a("Invalid Dsn")},e}()},function(e,t,n){"use strict";function i(){return window.navigator.mockUserAgent||window.navigator.userAgent}function r(){return!0===window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches}function o(e){return void 0===e&&(e=i()),-1!==e.indexOf("FBAN")||-1!==e.indexOf("FBAV")}function a(e){return void 0===e&&(e=i()),/FxiOS/i.test(e)}function s(e){return void 0===e&&(e=i()),/EdgiOS/i.test(e)}function l(e){return void 0===e&&(e=i()),e.indexOf("Opera Mini")>-1}function c(e){return void 0===e&&(e=i()),/Android/.test(e)}function u(e){return void 0===e&&(e=i()),/iPhone|iPod|iPad/.test(e)}function d(e){return void 0===e&&(e=i()),/\bGSA\b/.test(e)}function p(e){return void 0===e&&(e=i()),/QQBrowser/.test(e)}function f(e){return void 0===e&&(e=i()),!!u(e)&&(!!d(e)||/.+AppleWebKit(?!.*Safari)/.test(e))}function h(e){return void 0===e&&(e=i()),!!c(e)&&(/Version\/[\d.]+/.test(e)&&!l(e))}function g(){var e=i();return/Macintosh.*AppleWebKit(?!.*Safari)/i.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getUserAgent=i,t.isDevice=function(){return!!i().match(/Android|webOS|iPhone|iPad|iPod|bada|Symbian|Palm|CriOS|BlackBerry|IEMobile|WindowsMobile|Opera Mini/i)},t.isStandAlone=r,t.isFacebookWebView=o,t.isFirefoxIOS=a,t.isEdgeIOS=s,t.isOperaMini=l,t.isAndroid=c,t.isIos=u,t.isGoogleSearchApp=d,t.isQQBrowser=p,t.isIosWebview=f,t.isAndroidWebview=h,t.isWebView=function(){return o()||f()||h()},t.isIE=function(){return!!window.document.documentMode||Boolean(window.navigator&&window.navigator.userAgent&&/Edge|MSIE/i.test(window.navigator.userAgent))},t.isIECompHeader=function(){var e=window.document.querySelector('meta[http-equiv="X-UA-Compatible"]'),t=window.document.querySelector('meta[content="IE=edge"]');return!(!e||!t)},t.isIEIntranet=function(){if(window.document.documentMode)try{var e=window.status;return window.status="testIntranetMode","testIntranetMode"===window.status&&(window.status=e,!0)}catch(e){return!1}return!1},t.isMacOsCna=g,t.supportsPopups=function(e){return void 0===e&&(e=i()),!(f(e)||h(e)||l(e)||a(e)||s(e)||o(e)||p(e)||g()||r())}},function(e){e.exports={default:{mimeTypes:[{title:"Pdf files",extensions:"pdf"}],multiSelection:!0},editpdf:{maxFiles:1,mimeTypes:[{title:"Pdf files",extensions:"pdf"}],multiSelection:!1},sign:{mimeTypes:[{title:"Pdf files",extensions:"pdf"}],multiSelection:!0},organize:{mimeTypes:[{title:"Pdf files",extensions:"pdf"}],multiSelection:!0},split:{maxFiles:1,mimeTypes:[{title:"Pdf files",extensions:"pdf"}],multiSelection:!1},imagepdf:{mimeTypes:[{title:"Image files",extensions:"jpg,jpeg,png,tif,tiff",mime:"image/jpeg,image/jpg,image/png,image/tiff"}]},watermarkimage:{mimeTypes:[{title:"Image files",extensions:"jpg,jpeg,png",mime:"image/jpeg,image/jpg,image/gif,image/png"}]},officepdf:{mimeTypes:[{title:"Word files",extensions:"doc,docx,odt,ott,stw,sdw,sxw"},{title:"Excel files",extensions:"xls,xlsx,ods,ots,sdc,sxc"},{title:"Powerpoint files",extensions:"ppt,pptx,odp,pps,ppsx,sxi"}]},wordpdf:{mimeTypes:[{title:"Word files",extensions:"doc,docx,odt,ott,stw,sdw,sxw"}]},powerpointpdf:{mimeTypes:[{title:"Powerpoint files",extensions:"ppt,pptx,odp,pps,ppsx,sxi"}]},excelpdf:{mimeTypes:[{title:"Excel files",extensions:"xls,xlsx,ods,ots,sdc,sxc"}]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this._cache={}}return e.prototype.existsEntry=function(e){return"template_"+e in this._cache},e.prototype.setEntry=function(e,t){return this._cache[e]=t,t},e.prototype.getEntry=function(e){return this._cache[e]},e.prototype.clearEntry=function(e){delete this._cache[e]},e}();t.Cache=i},function(e,t,n){"use strict";(function(e){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(33),s=n(38),l=n(108),c=n(26),u=n(10);!function(e){e.CONFIRM_3DSECURE_PAYMENT="/stripe/confirm-payment",e.EXECUTE_PAYMENT="/stripe/execute",e.BUY_PACKAGE="/stripe/buy",e.UPDATE_CARD="/stripe/update-card"}(o||(o={}));var d=function(){function t(e){var t=this;void 0===e&&(e={}),this.eventEmitter=new c.ILoveEventEmitter,this.view=new l.StripeView(this,{onActionButtonClicked:function(){t.dispatchEvent(new u.IloveEvent("View:ActionButtonClicked"))}})}return t.prototype.updateCard=function(t){return i(this,void 0,void 0,function(){var n,i,a,s,l,c,u,d;return r(this,function(r){switch(r.label){case 0:return[4,this.getPaymentCardToken(t)];case 1:return n=r.sent(),i=n.id,a=e.post(o.UPDATE_CARD,{token:i}).promise(),c=(l=JSON).parse,[4,a.promise()];case 2:return s=c.apply(l,[r.sent()]),u={type:"update",notifyParams:{token:i}},this.needs3DSecure(s)?[4,this._resolve3DSecure(s,u)]:[3,4];case 3:return d=r.sent(),[3,5];case 4:d=s,r.label=5;case 5:return[2,d]}})})},t.prototype.setPaymentVia=function(e){this._paymentVia=e},t.prototype.paySubscription=function(t){return i(this,void 0,void 0,function(){var n,i,a,s,l,c,u;return r(this,function(r){switch(r.label){case 0:return n={interval:t.subscriptionInterval,users:t.numUsers,signatures:t.numDigitalSignatures,token:void 0,dtr:t.disableTrial},[4,this._setupPaymentVia(n,t.paymentVia)];case 1:return r.sent(),i=e.post(o.EXECUTE_PAYMENT,n),l=(s=JSON).parse,[4,i.promise()];case 2:return a=l.apply(s,[r.sent()]),c={type:"subscription",notifyParams:n},this.needs3DSecure(a)?[4,this._resolve3DSecure(a,c)]:[3,4];case 3:return u=r.sent(),[3,5];case 4:u=a,r.label=5;case 5:return[2,u]}})})},t.prototype.payPackage=function(t){return i(this,void 0,void 0,function(){var n,i,a,s,l,c,u;return r(this,function(r){switch(r.label){case 0:return n={package:t.packageName,quantity:t.quantity,token:void 0,dtr:t.disableTrial},[4,this._setupPaymentVia(n,t.paymentVia)];case 1:return r.sent(),i=e.post(o.BUY_PACKAGE,n),l=(s=JSON).parse,[4,i.promise()];case 2:return a=l.apply(s,[r.sent()]),c={type:"package",notifyParams:n},this.needs3DSecure(a)?[4,this._resolve3DSecure(a,c)]:[3,4];case 3:return u=r.sent(),[3,5];case 4:u=a,r.label=5;case 5:return[2,u]}})})},t.prototype._setupPaymentVia=function(e,t){return i(this,void 0,void 0,function(){var n,i;return r(this,function(r){switch(r.label){case 0:switch(i=t.type,t.type){case"stripeElement":return[3,1];case"stripeElementUpdateCard":return[3,3];case"paymentMethod":return[3,5]}return[3,6];case 1:return[4,this.getPaymentCardToken(t.cardElement)];case 2:return n=r.sent(),e.token=n.id,[3,7];case 3:return[4,this.getPaymentCardToken(t.cardElement)];case 4:return n=r.sent(),e.token=n.id,e.updatecard=!0,[3,7];case 5:return t.info,[3,7];case 6:throw"Unknown paymentVia type '"+i+"'";case 7:return[2]}})})},t.prototype._resolve3DSecure=function(e,t){return i(this,void 0,void 0,function(){var n,i,o;return r(this,function(r){switch(r.label){case 0:return this.needs3DSecure(e)?(n=this.extractIntentInfo(e),[4,this.show3DSecureScreenToUser(n)]):[2,e];case 1:switch(i=r.sent(),n.intentType){case"setup_intent":return[3,2];case"payment_intent":return[3,3]}return[3,5];case 2:return[2,e];case 3:return o=i.paymentIntent.id,[4,this.confirmPayment3DSecure(o,t)];case 4:return[2,e=r.sent()];case 5:throw"Unknown intent type "+n.intentType}})})},t.prototype.needs3DSecure=function(e){return!(!e||!e.user)&&("payment_intent"in e.user||"setup_intent"in e.user)},t.prototype.extractIntentInfo=function(e){var t;if(e.user.payment_intent)t="payment_intent";else{if(!e.user.setup_intent)throw"Unknown IntentType";t="setup_intent"}return{intentType:t,intentSecret:"payment_intent"===t?e.user.payment_intent:e.user.setup_intent}},t.prototype.confirmPayment3DSecure=function(t,n){return i(this,void 0,void 0,function(){var i,a,s,l;return r(this,function(r){switch(r.label){case 0:return i=Object.assign({},{payment_intent_id:t},n,n.notifyParams),a=e.post(o.CONFIRM_3DSECURE_PAYMENT,i),l=(s=JSON).parse,[4,a.promise()];case 1:return[2,l.apply(s,[r.sent()])]}})})},t.prototype.show3DSecureScreenToUser=function(e){return i(this,void 0,void 0,function(){var t,n;return r(this,function(i){switch(i.label){case 0:return[4,this.stripe];case 1:switch(t=i.sent(),e.intentType){case"setup_intent":return[3,2];case"payment_intent":return[3,4]}return[3,6];case 2:return[4,t.confirmCardSetup(e.intentSecret)];case 3:return n=i.sent(),[3,7];case 4:return[4,t.confirmCardPayment(e.intentSecret)];case 5:return n=i.sent(),[3,7];case 6:throw"Unknown secretType "+e.intentType;case 7:if(!("error"in n&&n.error))return[2,n];throw n}})})},t.prototype.getPaymentCardToken=function(e){return i(this,void 0,void 0,function(){var t,n;return r(this,function(i){switch(i.label){case 0:return[4,this.stripe];case 1:t=i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,t.createToken(e)];case 3:return n=i.sent(),[3,5];case 4:throw i.sent();case 5:if(n.error)throw this.view.notifyCardErrorMsg(n.error.message),n;return[2,n.token]}})})},Object.defineProperty(t.prototype,"stripe",{get:function(){var e=this;return this._stripe?Promise.resolve(this._stripe):new Promise(function(t,n){e.createStripeInstance().then(function(n){e._stripe=n,t(e._stripe)})})},enumerable:!0,configurable:!0}),t.prototype.loadStripeLibrary=function(){return i(this,void 0,void 0,function(){var e=this;return r(this,function(n){switch(n.label){case 0:return this.isStripeLibLoaded?[2,window.Stripe]:[4,new Promise(function(n,i){a.lazyload(t.stripeLibSrc);var r=window.setInterval(function(){e.isStripeLibLoaded&&(clearInterval(r),n(window.Stripe))},100)})];case 1:return[2,n.sent()]}})})},t.prototype.createStripeInstance=function(){return i(this,void 0,void 0,function(){var e,n,i=this;return r(this,function(r){switch(r.label){case 0:return[4,this.loadStripeLibrary()];case 1:return e=r.sent(),n=e(t.stripeKey,{locale:window.lang}),this.isStripeInstanceReady(n)?[2,n]:[4,new Promise(function(e,t){var r=window.setInterval(function(){i.isStripeInstanceReady(n)&&(window.clearInterval(r),e(n))},100)})];case 2:return[2,r.sent()]}})})},t.prototype.isStripeInstanceReady=function(e){return"object"==typeof e},Object.defineProperty(t.prototype,"isStripeLibLoaded",{get:function(){return null!==window.Stripe&&"function"==typeof window.Stripe},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paymentVia",{get:function(){return this._paymentVia},enumerable:!0,configurable:!0}),t.prototype.dispatchEvent=function(e){return this.eventEmitter.dispatchEvent(e)},t.prototype.addEventListener=function(e,t){return this.eventEmitter.addEventListener(e,t)},t.stripeKey=s.Settings.get("stripe_key"),t.stripeLibSrc="https://js.stripe.com/v3/",t}();t.StripeService=d}).call(this,n(1))},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(56),a=n(9),s=function(){function e(e,t){var n=this;this._onKeepPaymentMethodBtnClicked=function(e,t){if("stripe"!==t.provider)throw"Payment method is not from provider Stripe";var i=n.currentPaymentMethodView,r=n.newPaymentMethodView;n.stripeService.setPaymentVia({type:"paymentMethod",info:t}),n.payButton.disabled=!1,i.style.display="",r.style.display="none"},this._onChangePaymentMethodBtnClicked=function(e,t){var i=n.currentPaymentMethodView,r=n.newPaymentMethodView;n.stripeService.setPaymentVia({type:"stripeElementUpdateCard",cardElement:t}),n.payButton.disabled=!1,i.style.display="none",r.style.display=""},this._onPayButtonClicked=function(){n.callback_onActionButtonClicked()},this._onStripeNewCardChange=function(e){e.error?(n.notifyCardErrorMsg(e.error.message),n.payButton.disabled=!1):(n.clearCardErrorMsg(),n.payButton.disabled=!1)},this.stripeService=e,this.callback_onActionButtonClicked=t.onActionButtonClicked}return e.prototype.getTranslationText=function(e){var t,n=this.view.querySelector(".stripe__text-translations");if(!n)throw"Stripe text translations not found";if(!(e in(t=JSON.parse(n.textContent))))throw"Stripe translation for key "+e+" not found";return t[e]},e.prototype.disableActionButton=function(){this.view&&(this.payButton.disabled=!1)},e.prototype.enableActionButton=function(){this.view&&(this.payButton.disabled=!1)},e.prototype.mount=function(t,n){var a;return i(this,void 0,void 0,function(){var i,s,l,c,u,d,p;return r(this,function(r){switch(r.label){case 0:return this.view?[2,this.view]:[4,o.AjaxTemplate.load(e.TEMPLATE_NAME)];case 1:if(i=r.sent(),(s=document.createElement("div")).innerHTML=i,this.view=s,t.appendChild(this.view),!(l=this.view.querySelector(e.cardMountPointSelector)))throw"Mount point for Stripe card not found";return c=this.currentPaymentMethodView,u=this.newPaymentMethodView,d=this,[4,this.mountCardOn(l)];case 2:return d.card=r.sent(),(p="currentPaymentMethod"in n&&"stripe"===(null===(a=null===n||void 0===n?void 0:n.currentPaymentMethod)||void 0===a?void 0:a.provider)&&n.currentPaymentMethod.last_card)?u.style.display="none":c.style.display="none",p?(this.setupViewCurrentPaymentMethod(n.currentPaymentMethod,this.card),this.payButton.disabled=!1,this.stripeService.setPaymentVia({type:"paymentMethod",info:n.currentPaymentMethod})):this.stripeService.setPaymentVia({type:"stripeElement",cardElement:this.card}),this.payButton.innerHTML=n.paymentButtonText,this.payButton.addEventListener("click",this._onPayButtonClicked),[2,this.view]}})})},e.prototype.setupViewCurrentPaymentMethod=function(e,t){var n=this;if("stripe"!==e.provider)throw"Payment method is not from provider Stripe";var i=this.currentPaymentMethodView,r=this.newPaymentMethodView,o=i.querySelector(".payment__card-details__text");if(!o)throw"Stripe - Card Details text not found";var s=o.querySelector(".payment__card-details__text__brand"),l=o.querySelector(".payment__card-details__text__expires"),c=s.innerHTML.replace("${cardBrand}","<span class='payment__card-brand'>${cardBrand}</span>");s.innerHTML=a.Lang.tr(c,{cardBrand:e.brand_card?e.brand_card:"",cardLast4Digits:e.last_card}),l.innerHTML=a.Lang.tr(l.innerHTML,{expMonthCard:e.exp_month_card,expYearCard:e.exp_year_card});var u=i.querySelector(".payment__card-details__change-btn");if(!u)throw"Change button for Stripe - CurrentPaymentMethod view not found";u.addEventListener("click",function(e){n._onChangePaymentMethodBtnClicked(e,t)});var d=r.querySelector(".payment__card-details__keep-card-btn");if(d.style.display="",!d)throw"'Keep payment method' button for Stripe not found";d.innerHTML=a.Lang.tr(d.innerHTML,{cardBrand:e.brand_card?e.brand_card:"",cardLast4Digits:e.last_card}),d.addEventListener("click",function(t){n._onKeepPaymentMethodBtnClicked(t,e)})},Object.defineProperty(e.prototype,"currentPaymentMethodView",{get:function(){var e=this.view.querySelector(".payment__stripe-view__current-payment-method-view");if(!e)throw"Stripe - Current Payment Method view not found";return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"newPaymentMethodView",{get:function(){var e=this.view.querySelector(".payment__stripe-view__new-payment-method-view");if(!e)throw"Stripe - New Payment Method view not found";return e},enumerable:!0,configurable:!0}),e.prototype.mountCardOn=function(e){return i(this,void 0,void 0,function(){var t,n,i;return r(this,function(r){switch(r.label){case 0:return[4,this.stripeService.stripe];case 1:return t=r.sent().elements(),n={base:{color:"#32325d",lineHeight:"24px",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}},(i=t.create("card",{style:n,hidePostalCode:!0})).mount(e),i.addEventListener("change",this._onStripeNewCardChange),[2,i]}})})},e.prototype.notifyCardErrorMsg=function(e){this.cardErrorMsgDom.forEach(function(t){t.classList.remove("payment__card-error--hidden"),t.textContent=e})},e.prototype.clearCardErrorMsg=function(){this.cardErrorMsgDom.forEach(function(e){e.classList.add("payment__card-error--hidden"),e.innerHTML="&nbsp;"})},Object.defineProperty(e.prototype,"payButton",{get:function(){var e=this.view.querySelector(".payment__pay-btn");if(!e)throw"Submit button not found";return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cardErrorMsgDom",{get:function(){var e=Array.from(this.view.querySelectorAll(".payment__card-error"));if(0===e.length)throw"Card Error Msg DOM not found";return e},enumerable:!0,configurable:!0}),e.TEMPLATE_NAME="stripe",e.cardMountPointSelector=".payment__stripe-view__card-binding",e}();t.StripeView=s},function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a,s=n(33),l=n(104),c=n(38),u=n(26),d=n(10),p=n(56),f=n(67),h=n(17);!function(e){e.CREATE_PAYMENT_SUBSC="/paypal/create",e.EXECUTE_PAYMENT_SUBSC="/paypal/execute",e.CREATE_PAYMENT_PKG="/paypal/createbuy",e.EXECUTE_PAYMENT_PKG="/paypal/executebuy"}(a||(a={}));var g=function(){function e(e){var t=this;if(void 0===e&&(e={}),this._onPaymentInit_package=function(){t._onPaypalButtonClicked();var e=t,n=t.packageParams;return window.paypal.request.post(a.CREATE_PAYMENT_PKG,{package:n.packageName(),quantity:n.quantity(),dtr:n.disableTrial()}).then(function(t){return e.dispatchEvent(new d.IloveEvent("onPaymentInited",{action:"payPackage",params:n,response:t})),t},function(t){h.configureScope(function(e){e.setExtra("error",JSON.parse(t))}),h.captureMessage("Paypal: error on create payment package"),e.dispatchEvent(new d.IloveEvent("onPaymentInited_error",{action:"payPackage",params:n,error:JSON.parse(t)}))})},this._onAuthorize_package=function(e){var n=t,i=t.packageParams;return window.paypal.request.post(a.EXECUTE_PAYMENT_PKG,{token:e.paymentToken,payment_id:e.paymentID,payer_id:e.payerID,package:i.packageName(),quantity:i.quantity(),dtr:i.disableTrial()}).then(function(e){n.dispatchEvent(new d.IloveEvent("onPaymentAuthorized",{action:"payPackage",params:i,response:e}))},function(e){h.configureScope(function(t){t.setExtra("error",JSON.parse(e))}),h.captureMessage("Paypal: error on execute payment package"),n.dispatchEvent(new d.IloveEvent("onPaymentAuthorized_error",{action:"payPackage",params:i,error:JSON.parse(e)}))})},this._onPaymentInit_subsc=function(){t._onPaypalButtonClicked();var e=t,n=window.paypal,i=t.subscriptionParams,r=t.removeUndefinedValuesFromObject({interval:i.subscriptionInterval(),users:i.numUsers(),signatures:i.numDigitalSignatures(),dtr:i.disableTrial()});return n.request.post(a.CREATE_PAYMENT_SUBSC,r).then(function(t){return e.dispatchEvent(new d.IloveEvent("onPaymentInited",{action:"paySubscription",params:i,response:t})),t},function(t){h.configureScope(function(e){e.setExtra("error",JSON.parse(t))}),h.captureMessage("Paypal: error on create payment subscription"),e.dispatchEvent(new d.IloveEvent("onPaymentInited_error",{action:"paySubscription",params:i,error:JSON.parse(t)}))})},this._onPaypalButtonClicked=function(){t.clearErrorMsg()},this._onAuthorize_subsc=function(e){var n=t,r=window.paypal,o=t.subscriptionParams,s=t.removeUndefinedValuesFromObject({interval:o.subscriptionInterval(),users:o.numUsers(),signatures:o.numDigitalSignatures(),dtr:o.disableTrial()});return r.request.post(a.EXECUTE_PAYMENT_SUBSC,i({token:e.paymentToken,payment_id:e.paymentID,payer_id:e.payerID},s)).then(function(e){n.dispatchEvent(new d.IloveEvent("onPaymentAuthorized",{action:"paySubscription",params:o,response:e}))},function(e){h.configureScope(function(t){t.setExtra("error",JSON.parse(e))}),h.captureMessage("Paypal: error on execute payment subscription"),n.dispatchEvent(new d.IloveEvent("onPaymentAuthorized_error",{action:"paySubscription",params:o,error:JSON.parse(e)}))})},this._onCancel=function(e){},this.eventEmitter=new u.ILoveEventEmitter,l.isIEIntranet())throw"Is IE Intranet"}return e.prototype.notifyErrorMsg=function(e){this.errorMsgDom.classList.remove("payment__method-error--hidden"),this.errorMsgDom.innerHTML=e},e.prototype.clearErrorMsg=function(){this.errorMsgDom.classList.add("payment__method-error--hidden"),this.errorMsgDom.innerHTML="&nbsp;"},e.prototype.getTranslationText=function(e){var t,n=this.view.querySelector(".paypal__text-translations");if(!n)throw"Paypal text translations not found";if(!(e in(t=JSON.parse(n.textContent))))throw"Paypal translation for key "+e+" not found";return t[e]},Object.defineProperty(e.prototype,"errorMsgDom",{get:function(){var e=this.view.querySelector(".payment__method-error");if(!e)throw"Missing Paypal Error message DOM not found";return e},enumerable:!0,configurable:!0}),e.prototype.mountView=function(t,n){return r(this,void 0,void 0,function(){var i,r,a;return o(this,function(o){switch(o.label){case 0:return this.view?[2,this.view]:[4,p.AjaxTemplate.load(e.TEMPLATE_NAME)];case 1:if(i=o.sent(),(r=document.createElement("div")).innerHTML=i,this.view=r,t.appendChild(this.view),!(a=this.view.querySelector(e.buttonMountPointSelector)))throw"Mount point for Paypal button not found";switch(n.action.actionName){case"PaySubscription":this.mountPaySubscription(a,n.action.actionParams);break;case"PayPackage":this.mountPayPackage(a,n.action.actionParams);break;case"UpdateSubscription":this.mountUpdateSubscription(a,n.action.actionParams);break;default:throw"Unknown Paypal action for Paypal mountPoint func"}return[2,this.view]}})})},e.prototype.mountPayPackage=function(e,t){return r(this,void 0,void 0,function(){var n,i;return o(this,function(r){switch(r.label){case 0:return this.packageParams=t,[4,this.loadPaypalLibrary()];case 1:return r.sent(),n=this._onPaymentInit_package,i=this._onAuthorize_package,this.mountPaypalButton(e,{payment:n,onAuthorize:i}),[2]}})})},e.prototype.mountPaySubscription=function(e,t){return r(this,void 0,void 0,function(){var n,i;return o(this,function(r){switch(r.label){case 0:return this.subscriptionParams=t,[4,this.loadPaypalLibrary()];case 1:return r.sent(),n=this._onPaymentInit_subsc,i=this._onAuthorize_subsc,this.mountPaypalButton(e,{payment:n,onAuthorize:i}),[2]}})})},e.prototype.mountUpdateSubscription=function(e,t){return r(this,void 0,void 0,function(){return o(this,function(n){return[2,this.mountPaySubscription(e,t)]})})},e.prototype.mountPaypalButton=function(e,t){return r(this,void 0,void 0,function(){var n;return o(this,function(i){switch(i.label){case 0:return[4,this.loadPaypalLibrary()];case 1:return n=i.sent(),e.getAttribute("id")||e.setAttribute("id",f.Tools.randomId()),n.Button.render({env:c.Settings.get("paypal_env"),locale:this.assignedLocale,commit:!0,style:{label:"paypal",size:"medium",shape:"rect",color:"blue",tagline:!1},client:{sandbox:c.Settings.get("paypal_sandbox_key"),production:c.Settings.get("paypal_production_key")},payment:t.payment,onAuthorize:t.onAuthorize,onCancel:this._onCancel},"#"+e.getAttribute("id")),[2]}})})},e.prototype.removeUndefinedValuesFromObject=function(e){var t={};for(var n in e){void 0===e[n]||(t[n]=e[n])}return t},e.prototype.loadPaypalLibrary=function(){return r(this,void 0,void 0,function(){var t=this;return o(this,function(n){switch(n.label){case 0:return this.isPaypalLibLoaded?[2,window.paypal]:[4,new Promise(function(n,i){s.lazyload(e.paypalLibSrc);var r=window.setInterval(function(){t.isPaypalLibLoaded&&(clearInterval(r),n(window.paypal))},100)})];case 1:return[2,n.sent()]}})})},Object.defineProperty(e.prototype,"paypal",{get:function(){var e=this;return new Promise(function(t,n){e.loadPaypalLibrary().then(function(e){return t(e)})})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPaypalLibLoaded",{get:function(){return null!==window.paypal&&"object"==typeof window.paypal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assignedLocale",{get:function(){var e="en_US";switch(window.lang){case"en-US":e="en_US";break;case"es":e="es_ES";break;case"it":e="it_IT";break;case"fr":e="fr_FR";break;case"de":e="de_DE";break;case"pt":e="pt_BR";break;case"zh-cn":e="zh_CN";break;case"id":e="id_ID";break;case"ja":e="ja_JP";break;case"nl":e="nl_NL";break;case"pl":e="pl_PL";break;case"ru":e="ru_RU";break;case"sv":e="sv_SE";break;case"th":e="th_TH";break;case"zh-tw":e="zh_TW"}return e},enumerable:!0,configurable:!0}),e.prototype.dispatchEvent=function(e){return this.eventEmitter.dispatchEvent(e)},e.prototype.addEventListener=function(e,t){return this.eventEmitter.addEventListener(e,t)},e.paypalLibSrc="https://www.paypalobjects.com/api/checkout.js",e.TEMPLATE_NAME="paypal",e.buttonMountPointSelector=".payment__paypal-view__button-binding",e}();t.PaypalService=g},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(111),r=function(){function t(){}return t.t=function(t,n){var i="iloveLang";return n&&n.source&&(i=n.source),window[i]&&window[i][t]&&(t=window[i][t]),null!=n&&e.each(n,function(e,n){t=t.replace("${"+e+"}",n)}),t},t.w=function(n,i){void 0===n&&(n="translate"),e("."+n).each(function(){var n=e(this).html();e(this).html(t.t(n,i))}),e("#"+n).each(function(){var n=e(this).html();e(this).html(t.t(n,i))})},t.fontsForWritingSystem=function(e){switch(e){case"latin":return["arial","verdana","courier","comic","times-new-roman","impact","arial-unicode-ms"];case"indic":return["lohit-marathi","lohit-devanagari","arial-unicode-ms"];case"unknown":default:return["arial-unicode-ms"]}},t.getFontsInfo=function(){var e=window.fonts;if(!e)throw"[Lang Service] You have to load the fonts information from the backend to use this method";return e},t.loadAllFonts=function(){for(var e in window.fonts)window.fonts.hasOwnProperty(e)&&"arial"!=e&&this.loadFont(e)},t.loadFont=function(e){e in this.loadedFonts||(i.lazyloadCss("/font/"+e+".css"),this.loadedFonts[e]=!0)},t.hasHindiCharacters=function(e){return e.split("").filter(function(e){var t=e.charCodeAt();return t>=2309&&t<=2361}).length>0},t.hasJapanCharacters=function(e){return/[\u3000-\u303f]|[\u3040-\u309f]|[\u30a0-\u30ff]|[\uff00-\uff9f]|[\u4e00-\u9faf]|[\u3400-\u4dbf]/.test(e)},t.hasChineseCharacters=function(e){return/[\u4e00-\u9fff]|[\u3400-\u4dbf]|[\uf900-\ufaff]|[\u3300-\u33ff]|[\ufe30-\ufe4f]|[\uf900-\ufaff]/.test(e)},t.hasKoreanCharacters=function(e){return/[\uac00-\uafff]|[\ub000-\ubfff]/.test(e)},t.hasArabicCharacters=function(e){return/[\u0600-\u06FF]|[\u0750-\u077F]/.test(e)},t.hasGreekCharacters=function(e){return/[\u0370-\u03FF]|[\u1F00-\u1FFF]/.test(e)},t.hasCyrillicCharacters=function(e){return/[\u0400-\u04FF]|[\u0500-\u052F]/.test(e)},t.hasCommonLatinCharacters=function(e){return!1},t.keyCodeToWritingSystem=function(e){for(var t in this.writingSystemCharacterRanges)for(var n=this.writingSystemCharacterRanges[t],i=0;i<n.length;i++){var r=n[i],o=r[0],a=r[1];if(e>=o&&e<=a)return t}return"unknown"},t.detectWritingSystems=function(e){if(0===e.length)return[];for(var t={},n=0;n<e.length;n++){t[this.keyCodeToWritingSystem(e.charCodeAt(n))]=!0}return Object.keys(t)},t.loadedFonts={},t.writingSystemCharacterRanges={latin:[[0,127],[128,255],[256,383],[384,591],[7680,7935],[9312,9471],[11360,11391],[42784,43007],[64256,64335],[65104,65135]],indic:[[2304,2431],[43232,43263]]},t}();t.Lang=r}).call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lazyloadCss=function(e,t){void 0===t&&(t={});for(var n=document.getElementsByTagName("link"),i=n.length;i--;)if(n[i].hasAttribute("href")&&n[i].href.match(e))return!0;var r=document.createElement("link");for(var o in r.rel="stylesheet",r.href=e,t)if(t.hasOwnProperty(o)){var a=t[o];r.setAttribute(o,a)}var s=document.getElementsByTagName("link")[0];return s.parentNode.insertBefore(r,s),!0}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),r=n(17),o=n(19),a=n(72),s=n(91),l=n(47),c=n(45),u=n(38),d=n(16),p=function(){function t(e){this.stopGoDownload=!1,this.stopGoProblem=!1,this.taskId=null,this.tool=null,this.subtool=null,this.realTool=null,this.files=null,this.ignoredFiles=[],this.filesUploaded={},this.options=null,this.optionFiles=[],this.workerServer=null,this.downloadUrl="",this.apiVersion="v1",this.appVersion=null,this.exceptions=null,this.userId=null,this.site=null,this.token=null,this.encrypted=!1,this.encryptKey=null,this.processStarted=!1,this.uploadInterval=null,this.processCheckCount=3,this.processWait=!1,this.outToPage=!1,this.hideProblemForm=!1,this.processForceEnd=!1,this.params=null,this.status="ok",this.toolEvent=null,this.askedPassword=!1,this.afterFilesLoaded=null,this.processCount=0,Object.assign(this,e),null!=this.tool&&(this.toolEvent=this.tool==this.subtool?this.tool:this.tool.replace("image",this.subtool)),this.stopGoDownload="dev"==u.Settings.env()&&this.stopGoDownload,this.stopGoProblem="dev"==u.Settings.env()&&this.stopGoProblem,this.initApi()}return t.prototype.initApi=function(){this.api=new l.Api({tool:this.tool,taskId:this.taskId,workerServer:this.workerServer,downloadUrl:this.downloadUrl,token:this.token,encrypted:this.encrypted,encryptKey:this.encryptKey})},t.prototype.setOptions=function(e){Object.assign(this.options,e)},t.prototype.setUploadedFiles=function(){this.filesUploaded=this.files.getUploadedFiles()},t.prototype.process=function(){this.showProcess();var t=this;if(1!=t.processForceEnd)if(1==this.files.checkFilesUploaded()){this.showProcess();var n={};e.each(this.files.files,function(e,t){var i=/(?:\.([^.]+))?$/.exec(t.name)[1];void 0==n[i]?n[i]=1:n[i]=n[i]+1});var i=0;e.each(n,function(e,t){var n=Math.max(i,t);t>i&&(i=n,e)}),this.execute().then(function(e){t.processExecute=!1,t.actionProcess(e)},function(e){-100!=e.status&&(t.processExecute=!1,500==e.status?t.actionProcessError(e,"500 in process"):504==e.status?t.actionProcessError(e,"504 in process"):400==e.status&&e.error&&e.error.param&&e.error.param[0]&&e.error.param[0].error&&"WrongPassword"==e.error.param[0].error?t.askForPassword(e.error.param).then(function(){t.showProcess(),t.setUploadedFiles(),t.processCount=0,t.process()},function(e){t.options.ignore_errors=!0,t.showProcess(),t.setUploadedFiles(),t.processCount=0,t.process()}):400==e.status&&e.error&&e.error.param&&e.error.param.task&&e.error.param.task[0]&&1==e.error.param.task[0].includes("complete status")?(r.captureMessage("Process error repaired "+t.subtool+t.processCount),window.clearTimeout(t.checkTimeout),t.checkTimeout=window.setTimeout(function(){t.checkTaskProcess()},1e3)):400==e.status?t.actionProcessError(e,{params:t.options}):(window.clearTimeout(t.checkTimeout),t.checkTimeout=window.setTimeout(function(){t.checkTaskProcess()},1e3)))})}else{if(1==this.processStarted)return void(0==t.checkFatalError()&&window.setTimeout(function(){t.process()},1e3));this.showUpload(),this.processStarted=!0}},t.prototype.checkTaskProcess=function(){var e=this;this.processCheckCount--,this.api.getTask().then(function(t){"TaskWaiting"==t.status?(e.setUploadedFiles(),e.process()):"TaskProcessing"==t.status?(window.clearTimeout(e.checkTimeout),e.checkTimeout=window.setTimeout(function(){e.checkTaskProcess()},1e3)):"TaskSuccess"==t.status||"TaskSuccessWithWarnings"==t.status?e.actionProcess(t):e.actionProcessError(t,{info:"in check task",params:e.options})},function(t){e.processCheckCount<0?e.actionProcessError(t,{info:"in check task error",params:e.options}):(window.clearTimeout(e.checkTimeout),e.checkTimeout=window.setTimeout(function(){e.checkTaskProcess()},1e3))})},t.prototype.actionProcess=function(e){var t={filesize:e.filesize,server:this.workerServer,status_message:e.status_message,status:e.status,timer:e.timer,tool:this.tool,output_filenumber:e.output_filenumber,output_filesize:e.output_filesize,output_extensions:e.output_extensions,toolUrl:function(e,t){var n=e.split("?");if(n.length>=2){for(var i=encodeURIComponent(t)+"=",r=n[1].split(/[&;]/g),o=r.length;o-- >0;)-1!==r[o].lastIndexOf(i,0)&&r.splice(o,1);return n[0]+(r.length>0?"?"+r.join("&"):"")}return e}(window.location.href,"from"),download_filename:e.download_filename,process_start:(new Date).toUTCString()};1==this.hideProblemForm&&(t.hideProblemForm=!0),"warnings"in e&&(t.warnings=e.warnings),!0!==this.stopGoDownload&&Cookies.set(this.taskId,t,{expires:1/480}),this.goDownload(e)},t.prototype.actionProcessError=function(e,t){void 0===t&&(t=null);var n=this,i={error:e,server:n.api.getSubdomain(n.workerServer),taskId:n.taskId,tool:n.tool,subtool:n.subtool,toolUrl:window.location.href.split("?")[0]};if(!0!==this.stopGoProblem&&Cookies.set("error",i,{expires:1/480}),e&&e.error&&e.error.param&&e.error.param[0]&&e.error.param[0].error&&("NoText"==e.error.param[0].error||"NoImages"==e.error.param[0].error||"noTablesToExtract"==e.error.param[0].error)||(r.configureScope(function(i){i.setExtra("processError",e),i.setExtra("params",n.options),i.setExtra("extra",t)}),r.captureMessage("Process error "+n.subtool)),e.error){if(e.error.param&&e.error.param[0]&&e.error.param[0].error)return void n.goProblem(e.error.param[0].error);if(e.error.type)return void n.goProblem(e.error.type)}n.goProblem("ServerError")},t.prototype.execute=function(){var e=this,t=this;if(!0===this.processExecute)return new Promise(function(e,t){t({status:-100})});if(this.processExecute=!0,t.showProcess(),t.setUploadedFiles(),null!=this.afterFilesLoaded&&(this.options=this.afterFilesLoaded(this.files,this.options)),t.params=c.FormDataHelper.jsonToFormData(this.options),t.params.append("task",this.taskId),t.params.append("tool",this.tool),!t.options.packaged_filename){var n=this.tool.replace("image","")+"ed";"croped"==n&&(n="crop"),"resizeed"==n&&(n="resized"),"splited"==n&&(n="split"),t.params.append("packaged_filename",this.site+"-"+i.Lang.t(n))}var o=d.UserModel.get();o&&(t.params.append("custom_int",o.id),t.params.append("custom_str",o.loginkey));var a=0;for(var s in t.filesUploaded)t.isIgnored(s)||(t.params.append("files["+a+"][server_filename]",this.filesUploaded[s].server_filename),t.params.append("files["+a+"][filename]",this.filesUploaded[s].filename),t.filesUploaded[s].rotate&&t.params.append("files["+a+"][rotate]",this.filesUploaded[s].rotate),t.filesUploaded[s].password&&t.params.append("files["+a+"][password]",this.filesUploaded[s].password),t.filesUploaded[s].pages&&t.params.append("files["+a+"][pages]",this.filesUploaded[s].pages),a++);return this.processCount++,0==t.filesUploaded.length?(r.configureScope(function(n){n.setExtra("files",t.filesUploaded),n.setExtra("tool",t.subtool),n.setExtra("count",e.processCount)}),r.captureMessage("Process without files"),new Promise(function(e,t){t({status:400,error:{type:"DamagedFile"}})})):(this.processCount>1&&(r.configureScope(function(n){n.setExtra("params",t.params),n.setExtra("files",t.filesUploaded),n.setExtra("tool",t.subtool),n.setExtra("count",e.processCount)}),r.captureMessage("Process multiple")),this.api.process(t.params))},t.prototype.showProcess=function(){"error"!=this.status&&(e("body").addClass("process-run"),e(".uploading").hide(),e(".process").css("display","flex").show(),setTimeout(function(){e("#waitnotify").html(i.Lang.t("waitnotify")),e("#waitnotify").show()},1e4))},t.prototype.showUpload=function(){if(1!=this.processStarted){if("error"==this.status)return this.stop(),!0;var t=this;e("body").addClass("process-run"),e(".process").hide(),e(".uploading").css("display","flex").hide().fadeIn();var n=i.Lang.t("Uploading...");!0!==this.uploadShowStarted&&(e(".uploading__status__title.drive").hide(),e(".uploading__status__title.dropbox").hide(),e(".uploading__status__title.user").hide(),e(".uploading__bar").hide(),e(".uploading__status__percent").hide(),this.uploadShowStarted=!0),t.uploadInterval=setInterval(function(){var r=0,a=0,s=0,l=0,c=0,u=0,d=0,p=0,f=0,h=!0;if("error"==t.status&&t.stop(),t.checkFatalError(),e.each(t.files.files,function(t,i){!(i.percent<100)&&"server_filename"in i||!0===i.error||(h=!1,"drive"==i.service&&!1,"dropbox"==i.service?!1:!1),100==i.percent&&a++,u++,"drive"==i.service?(p++,100==i.percent&&l++):"dropbox"==i.service?(f++,100==i.percent&&c++):(d++,100==i.percent?s++:i.percent>0&&i.percent<100&&"html5"==i.runtime?(n=i.name+" ("+o.Tools.bytesToSize(i.size)+")",e("#upload_"+i.id).addClass("uploading__files__item--active")):e("#upload_"+i.id).removeClass("uploading__files__item--active"),i.loaded,i.size,r+=i.percent)}),e(".uploading__status__percent__value").html(parseInt((r/d).toString())+"%"),e(".uploading__bar__completed").css("width",r/d+"%"),e(".uploading__status__file").html(n),e(".uploading__status__total").html(d.toString()),d>0?(e(".uploading__status__title.user").show(),e(".uploading__bar").show(),e(".uploading__bar--small").hide(),e(".uploading__status__percent").show()):(e(".uploading__status__file").hide(),e(".uploading__status__info").hide()),p>0&&e(".uploading__status__title.drive").show(),f>0&&e(".uploading__status__title.dropbox").show(),s==d&&(e(".uploading__status__file").html(i.Lang.t("uploadComplete")),e(".uploading__bar").hide(),e(".uploading__status__percent").hide()),l==p&&p>0&&e(".uploading__status__title.drive").addClass("done").html("<strong>Google Drive:</strong> "+i.Lang.t("uploadComplete")),c==f&&p>0&&e(".uploading__status__title.dropbox").addClass("done").html("<strong>Dropbox:</strong> "+i.Lang.t("uploadComplete")),e(".uploading__status__title").removeClass("last"),e(".uploading__status__title:visible:last").addClass("last"),a==u&&h&&"error"!=t.status)clearInterval(t.uploadInterval),window.setTimeout(function(){t.process()},200);else{var g=Math.min(s+1,d);e(".uploading__status__current").html(g.toString())}},100)}},t.prototype.goDownload=function(e){1!=this.stopGoDownload&&(window.location.href=this.downloadUrl+"/"+this.taskId+"/"+this.getWorkerNumber())},t.prototype.getWorkerNumber=function(){return this.workerServer.split(".")[0].replace(/^\D+/g,"")},t.prototype.goProblem=function(e){void 0===e&&(e=null);var t="/problem/"+this.tool+"/"+this.taskId+"/"+this.getWorkerNumber();"en-US"!=window.lang&&(t="/"+window.lang+t),null!==e&&("string"==typeof e?t=t+"/"+e:e.error&&"string"==typeof e.error?t=t+"/"+e.error:t+="/ServerError"),1!=this.stopGoProblem&&(window.location.href=t)},t.prototype.askForPassword=function(t){var n=this,r=[];return e.each(t,function(e,t){"WrongPassword"==t.error&&r.push(n.files.getFileByServerFilename(t.server_filename))}),new Promise(function(t,o){e("#process").hide(),0==e("#passwordAsk").length&&(e(a.OptionsTemplate.askPassword()).insertAfter(e("#process")),n.files.files.length>1?e("#ignorePwdFiles").show():e("#ignorePwdFiles").hide(),"unlock"==n.tool&&e("#useUnlock").hide(),e(".passwords").append(e(a.OptionsTemplate.askPasswordField({id:"all",server_filename:""}))),e("#pwd-all").hide(),e("#allPwd").on("change",function(){1==e("#allPwd").is(":checked")?(e(".password").hide(),e("#pwd-all").show()):(e(".password").show(),e("#pwd-all").hide())})),e("#pwdSend").unbind("click").on("click",function(){var r=null;1==e("#allPwd").is(":checked")&&(r=e("#pwd-all input").val());var o=!0;e.each(n.files.files,function(t,a){var s=null==r?e("#pwd-"+a.id+" input").val():r;if(""==s)return o=!1,e("#pwd-"+a.id+" input").focus(),window.Toastr.error(i.Lang.t("passwordRequiredFor",{filename:a.name}),i.Lang.t("paswordRequired"),{timeOut:5e3,positionClass:"toast-top-left"}),!1;n.files.updateFile(a.id,{password:s})}),!0===o&&(e("#passwordAsk").hide(),t())}),e("#pwdCancel").unbind("click").on("click",function(){e.each(r,function(t,i){n.files.removeFile(i.id),e("#pwd-"+i.id).remove()}),e("#passwordAsk").hide(),o()}),e("#pwdIgnore").unbind("click").on("click",function(){e("#passwordAsk").hide(),o()}),e("#passwordAsk .passwordInput").hide(),e(".password").hide(),e.each(r,function(t,n){0==e("#pwd-"+n.id).length&&(e(".passwords").append(e(a.OptionsTemplate.askPasswordField({id:n.id,server_filename:n.name}))),e("#pwd-"+n.id+" .showPassword").on("click",function(t){t.preventDefault(),e(".password input").attr("type","text"==e(".password input").attr("type")?"password":"text")})),e("#pwd-"+n.id).show()}),r.length<2&&e("#allPwd").parent().parent().hide(),e("#passwordAsk").show(),setTimeout(function(){e("#passwordAsk input:visible:first").focus()},1e3),0==n.askedPassword&&(n.askedPassword=!0,window.ga("send","event","password","ask",n.subtool))})},t.prototype.fatalError=function(e,t,n){void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),"ConnectionError"!=e&&s.IloveError.fatalError(e,this.tool,this.workerServer,t,n)},t.prototype.removeFile=function(e){var t=this.files.getFile(e);if(null==t)return new Promise(function(e,t){e()});var n=t.server_filename,i=t.status;return this.files.removeFile(t.id),5!=i?new Promise(function(e,t){e()}):this.api.removeFile(n)},t.prototype.addIgnoredFile=function(e){this.ignoredFiles.push(e)},t.prototype.getIgnoredFiles=function(){return this.ignoredFiles},t.prototype.isIgnored=function(e){return-1!=this.ignoredFiles.indexOf(e)},t.prototype.deleteIgnored=function(e){var t=this.ignoredFiles.indexOf(e);-1!==t&&this.ignoredFiles.splice(t,1)},t.prototype.stop=function(){clearInterval(this.uploadInterval)},t.prototype.checkFatalError=function(){if("error"==this.status)return this.stop(),!0;var t=this;if(0==this.files.files.length)return this.fatalError({error:"NoFiles"}),this.status="error",this.stop(),!0;try{e.each(t.files.files,function(e,n){if("errorData"in n)throw t.fatalError(n.errorData,n.name,"error data on task"),n.errorData})}catch(e){return t.status="error",t.stop(),!0}if(1==t.files.files.length&&!0===t.files.files[0].error)return t.status="error",t.fatalError(t.files.files[0].errorData,t.files.files[0].name,"error field on task"),t.stop(),!0;try{e.each(t.files.files,function(e,n){if("FileRemoved"==n.errorData)throw t.fatalError(n.errorData,n.name,"file removed on task"),n.errorData})}catch(e){return t.stop(),t.status="error",!0}if("merge"==this.tool)try{e.each(t.files.files,function(e,n){if("errorData"in n)throw t.fatalError(n.errorData,n.name,"error data on task, merge tool"),n.errorData})}catch(e){return t.status="error",t.stop(),!0}return!1},t}();t.Process=p}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(){}return t.checkNetwork=function(){var n=navigator.onLine;window.setInterval(function(){navigator.onLine?0==n&&(n=!0,t.hideNetworkAlert()):1==n&&(n=!1,t.showNetworkAlert(),e("#uploadSpeed").html("0 KB/s"),e("#timeLeft").html("&infin;"))},1e3)},t.showNetworkAlert=function(){e("#network").css("display","flex").hide().fadeIn()},t.hideNetworkAlert=function(){e("#network").fadeOut()},t.waitForConnection=function(e){void 0===e&&(e=null);var t=0;return new Promise(function(n,i){var r=window.setInterval(function(){navigator.onLine&&(window.clearInterval(r),n()),null!=e&&(t+=1e3)>=e&&(window.clearInterval(r),i())},1e3)})},t}();t.Network=n}).call(this,n(1))},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(71),a=n(74),s=n(75),l=n(76),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="AuthState",t.LAYOUT_TEMPLATE_NAME="new-premium",t.onDomReady=function(){t.initAbstractAuth(),t.changeScreen(t.INITIAL_SCREEN),t.clearLoadingScreen()},t._onLoginSuccess=function(){t.executeAfterLoginOrRegisterSuccess()},t._onRegisterSuccess=function(){t.executeAfterLoginOrRegisterSuccess()},t.executeAfterLoginOrRegisterSuccess=function(){var e=t.computeNextState();t.ctx.changeState(e),e.render(t.domRoot)},t}return r(t,e),t.prototype.computeNextState=function(){var e=null;"premium"===this.ctx.userType?e=new l.PremiumState:e=this.ctx.canUserDoTrial()&&this.ctx.isTrialEnabledForThisTool()?new s.CanTrialState:new a.CannotTrialState;return e},t}(o.AbstractAuthState);t.AuthState=c},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(10),a=n(9),s=n(16),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="SubscriptionSuccessState",t.LAYOUT_TEMPLATE_NAME="new-premium",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.ctx.setEndState(),t.changeScreen(t.INITIAL_SCREEN),t.init(),t.hideHeaderAndFooter(),t.clearLoadingScreen()},t._onDoneButtonClick=function(){t.dispatchEvent(new o.IloveEvent("end"))},t}return r(t,e),t.prototype.init=function(){this.actionBtn.addEventListener("click",this._onDoneButtonClick);var e=this.dialogSubtitle;e.innerHTML=e.innerHTML.replace("${email}","<b>${email}</b>"),e.innerHTML=a.Lang.tr(e.innerHTML,{email:this.authenticatedUserEmail})},t.prototype.hideHeaderAndFooter=function(){var e=this.domRoot.querySelector(".dialog__header");if(!e)throw"Header not found";var t=this.domRoot.querySelector(".dialog__footer");if(!t)throw"Footer not found";e.style.display="none",t.style.display="none"},Object.defineProperty(t.prototype,"dialogSubtitle",{get:function(){var e=this.domStateRoot.querySelector(".dialog__subtitle");if(!e)throw"Description elem not found";return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authenticatedUserEmail",{get:function(){var e=s.UserModel.get();if(!e)throw"Authenticated user not found!";return e.email},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actionBtn",{get:function(){var e=this.domStateRoot.querySelector(".dialog__action [next-from-payment-completed]");if(!e)throw"'Done' button not found";return e},enumerable:!0,configurable:!0}),t}(n(20).StateBase);t.SubscriptionSuccessState=l},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(10),a=n(9),s=n(16),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="TrialSuccessState",t.LAYOUT_TEMPLATE_NAME="new-premium",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.ctx.setEndState(),t.changeScreen(t.INITIAL_SCREEN),t.init(),t.hideHeaderAndFooter(),t.clearLoadingScreen()},t._onDoneButtonClick=function(){t.dispatchEvent(new o.IloveEvent("end"))},t}return r(t,e),t.prototype.init=function(){this.actionBtn.addEventListener("click",this._onDoneButtonClick);var e=this.dialogSubtitle;e.innerHTML=e.innerHTML.replace("${email}","<b>${email}</b>"),e.innerHTML=a.Lang.tr(e.innerHTML,{email:this.authenticatedUserEmail})},t.prototype.hideHeaderAndFooter=function(){var e=this.domRoot.querySelector(".dialog__header");if(!e)throw"Header not found";var t=this.domRoot.querySelector(".dialog__footer");if(!t)throw"Footer not found";e.style.display="none",t.style.display="none"},Object.defineProperty(t.prototype,"dialogSubtitle",{get:function(){var e=this.domStateRoot.querySelector(".dialog__subtitle");if(!e)throw"Description elem not found";return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authenticatedUserEmail",{get:function(){var e=s.UserModel.get();if(!e)throw"Authenticated user not found!";return e.email},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actionBtn",{get:function(){var e=this.domStateRoot.querySelector(".dialog__action [next-from-payment-completed]");if(!e)throw"'Done' button not found";return e},enumerable:!0,configurable:!0}),t}(n(20).StateBase);t.TrialSuccessState=l},,function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(33),r=function(){function e(e){void 0===e&&(e={}),this.src="https://apis.google.com/js/platform.js",this.developerKey="AIzaSyAscL1olxYauMLc0sj0LXpCWL2Jmztr8dA",this.clientId="391438661644-2uum636mg2ckariol0if8h3364a1h6dc.apps.googleusercontent.com",this.scope="https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/userinfo.email",this.URL_API="https://www.googleapis.com/drive/v3/",Object.assign(this,e)}return e.prototype.init=function(){var e=this;this.loadDrive().then(function(){setTimeout(function(){e.drive()},500)},function(){})},e.prototype.loadDrive=function(){var e=this;return new Promise(function(t,n){if(null===window.gapi||void 0!==window.gapi)return t(!0);i.lazyload(e.src);var r=window.setInterval(function(){if(null!==window.gapi&&"object"==typeof window.gapi)return clearInterval(r),t(!0)},100)})},e.prototype.drive=function(){},e}();t.DriveService=r},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(33),r=function(){function t(e){void 0===e&&(e={}),this.src="https://www.dropbox.com/static/api/2/dropins.js",this.appKey="xntw8za866940lz",this.id=null,Object.assign(this,e)}return t.prototype.init=function(){var e=this;this.loadDropbox().then(function(){setTimeout(function(){e.initDropbox()},500)},function(){})},t.prototype.loadDropbox=function(){var e=this;return new Promise(function(t,n){if(null===window.Dropbox||void 0!==window.Dropbox)return t(!0);i.lazyload(e.src,{"data-app-key":e.appKey,id:"dropboxjs"});var r=window.setInterval(function(){if(null!==window.Dropbox&&"object"==typeof window.Dropbox||"function"==typeof window.Dropbox)return clearInterval(r),t(!0)},100)})},t.prototype.initDropbox=function(){var t=this;e("#"+this.id).addClass("active").on("click",function(){t.dropbox()})},t.prototype.dropbox=function(){},t}();t.DropboxService=r}).call(this,n(1))},function(e,t,n){e.exports=n(27),n(79),n(43),n(122),n(80),n(123),n(81),n(124),n(125)},function(e,t,n){var i,r,o;!function(a){"use strict";r=[n(27),n(43)],void 0===(o="function"==typeof(i=function(e){"undefined"!=typeof fetch&&"undefined"!=typeof Request&&(e.fetchBlob=function(t,n,i){if(e.hasMetaOption(i))return fetch(new Request(t,i)).then(function(e){return e.blob()}).then(n).catch(function(e){n()});n()})})?i.apply(t,r):i)||(e.exports=o)}()},function(e,t,n){var i,r,o;!function(a){"use strict";r=[n(27),n(80)],void 0===(o="function"==typeof(i=function(e){e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":if(!t)return;return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":if(!t)return;return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":if(!t)return;return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},function(e){var t,n=e.tags,i=e.map;for(t in n)n.hasOwnProperty(t)&&(i[n[t]]=t)}(e.ExifMap.prototype),e.ExifMap.prototype.getAll=function(){var e,t,n={};for(e in this)this.hasOwnProperty(e)&&(t=this.tags[e])&&(n[t]=this.getText(t));return n}})?i.apply(t,r):i)||(e.exports=o)}()},function(e,t,n){var i,r,o;!function(a){"use strict";r=[n(27),n(81)],void 0===(o="function"==typeof(i=function(e){e.IptcMap.prototype.tags={3:"ObjectType",4:"ObjectAttribute",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectRef",15:"Category",20:"SupplCategory",22:"FixtureID",25:"Keywords",26:"ContentLocCode",27:"ContentLocName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"RefService",47:"RefDate",50:"RefNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"CountryName",103:"OrigTransRef",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",122:"WriterEditor",130:"ImageType",131:"ImageOrientation",135:"LanguageID"},e.IptcMap.prototype.getText=function(e){var t=this.get(e);return String(t)},function(e){var t,n=e.tags,i=e.map||{};for(t in n)n.hasOwnProperty(t)&&(i[n[t]]=t)}(e.IptcMap.prototype),e.IptcMap.prototype.getAll=function(){var e,t,n={};for(e in this)this.hasOwnProperty(e)&&(t=this.tags[e])&&(n[t]=this.getText(t));return n}})?i.apply(t,r):i)||(e.exports=o)}()},function(e,t,n){var i,r,o;!function(a){"use strict";r=[n(27),n(79),n(43)],void 0===(o="function"==typeof(i=function(e){var t=e.hasCanvasOption,n=e.hasMetaOption,i=e.transformCoordinates,r=e.getTransformedOptions;e.hasCanvasOption=function(n){return!!n.orientation||t.call(e,n)},e.hasMetaOption=function(t){return t&&!0===t.orientation||n.call(e,t)},e.transformCoordinates=function(t,n){i.call(e,t,n);var r=t.getContext("2d"),o=t.width,a=t.height,s=t.style.width,l=t.style.height,c=n.orientation;if(c&&!(c>8))switch(c>4&&(t.width=a,t.height=o,t.style.width=l,t.style.height=s),c){case 2:r.translate(o,0),r.scale(-1,1);break;case 3:r.translate(o,a),r.rotate(Math.PI);break;case 4:r.translate(0,a),r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI),r.translate(0,-a);break;case 7:r.rotate(.5*Math.PI),r.translate(o,-a),r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI),r.translate(-o,0)}},e.getTransformedOptions=function(t,n,i){var o,a,s=r.call(e,t,n),l=s.orientation;if(!0===l&&i&&i.exif&&(l=i.exif.get("Orientation")),!l||l>8||1===l)return s;for(a in o={},s)s.hasOwnProperty(a)&&(o[a]=s[a]);switch(o.orientation=l,l){case 2:o.left=s.right,o.right=s.left;break;case 3:o.left=s.right,o.top=s.bottom,o.right=s.left,o.bottom=s.top;break;case 4:o.top=s.bottom,o.bottom=s.top;break;case 5:o.left=s.top,o.top=s.left,o.right=s.bottom,o.bottom=s.right;break;case 6:o.left=s.top,o.top=s.right,o.right=s.bottom,o.bottom=s.left;break;case 7:o.left=s.bottom,o.top=s.right,o.right=s.top,o.bottom=s.left;break;case 8:o.left=s.bottom,o.top=s.left,o.right=s.top,o.bottom=s.right}return o.orientation>4&&(o.maxWidth=s.maxHeight,o.maxHeight=s.maxWidth,o.minWidth=s.minHeight,o.minHeight=s.minWidth,o.sourceWidth=s.sourceHeight,o.sourceHeight=s.sourceWidth),o}})?i.apply(t,r):i)||(e.exports=o)}()},function(e,t,n){var i;!function(r){"use strict";var o=r.HTMLCanvasElement&&r.HTMLCanvasElement.prototype,a=r.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),s=a&&r.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),l=r.BlobBuilder||r.WebKitBlobBuilder||r.MozBlobBuilder||r.MSBlobBuilder,c=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,u=(a||l)&&r.atob&&r.ArrayBuffer&&r.Uint8Array&&function(e){var t,n,i,r,o,u,d,p,f;if(!(t=e.match(c)))throw new Error("invalid data URI");for(n=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),i=!!t[4],r=e.slice(t[0].length),o=i?atob(r):decodeURIComponent(r),u=new ArrayBuffer(o.length),d=new Uint8Array(u),p=0;p<o.length;p+=1)d[p]=o.charCodeAt(p);return a?new Blob([s?d:u],{type:n}):((f=new l).append(u),f.getBlob(n))};r.HTMLCanvasElement&&!o.toBlob&&(o.mozGetAsFile?o.toBlob=function(e,t,n){var i=this;setTimeout(function(){n&&o.toDataURL&&u?e(u(i.toDataURL(t,n))):e(i.mozGetAsFile("blob",t))})}:o.toDataURL&&u&&(o.toBlob=function(e,t,n){var i=this;setTimeout(function(){e(u(i.toDataURL(t,n)))})})),void 0===(i=function(){return u}.call(t,n,t,e))||(e.exports=i)}(window)},function(e,t,n){(function(e){function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i={decode:function(e){i.decode._decodeG3.allow2D=null;var t=new Uint8Array(e),n=0,r=i._binBE.readASCII(t,n,2);n+=2;var o="II"==r?i._binLE:i._binBE;o.readUshort(t,n);n+=2;var a=o.readUint(t,n);n+=4;for(var s=[];;){var l=i.decode._readIFD(o,t,a,s);if(0==(a=o.readUint(t,l)))break}for(var c=0;c<s.length;c++){var u=s[c];u.width=u.t256[0],delete u.t256,u.height=u.t257[0],delete u.t257;var d=u.t259[0];delete u.t259;var p=u.t266?u.t266[0]:1;delete u.t266,u.t284&&u.t284[0];var f=(u.t258?u.t258[0]:1)*(u.t277?u.t277[0]:1),h=u.t273;null==h&&(h=u.t324);var g=u.t279;1==d&&1==h.length&&(g=[u.height*u.width*f>>3]),null==g&&(g=u.t325);var v=new Uint8Array(u.width*u.height*f>>3),m=0;if(null!=u.t322){for(var y=u.t322[0],_=u.t323[0],b=Math.floor((u.width+y-1)/y),w=Math.floor((u.height+_-1)/_),S=new Uint8Array(y*_*f>>3),E=0;E<w;E++)for(var x=0;x<b;x++){for(var k=E*b+x,C=0;C<S.length;C++)S[C]=0;i.decode._decompress(u,t,h[k],g[k],d,S,0,p),i._copyTile(S,y*f>>3,_,v,u.width*f>>3,u.height,x*y*f>>3,E*_)}m=v.length<<3}else{var P=u.t278?u.t278[0]:u.height;P=Math.min(P,u.height);for(k=0;k<h.length;k++)i.decode._decompress(u,t,h[k],g[k],d,v,m>>3,p),m+=u.width*f*P;m=Math.min(m,v.length<<3)}u.data=new Uint8Array(v.buffer,0,m>>3)}return s}};i.decode._decompress=function(e,t,r,o,a,s,l,c){var u=n(128);if(1==a)for(var d=0;d<o;d++)s[l+d]=t[r+d];else if(3==a)i.decode._decodeG3(t,r,o,s,l,e.width,c);else if(4==a)i.decode._decodeG4(t,r,o,s,l,e.width,c);else if(5==a)i.decode._decodeLZW(t,r,s,l);else if(8==a)for(var p=new Uint8Array(t.buffer,r,o),f=u.inflate(p),h=0;h<f.length;h++)s[l+h]=f[h];else 32773==a?i.decode._decodePackBits(t,r,o,s,l):32809==a&&i.decode._decodeThunder(t,r,o,s,l);if(e.t317&&2==e.t317[0])for(var g=e.t277?e.t277[0]:1,v=e.t278?e.t278[0]:e.height,m=e.width*g,y=0;y<v;y++){var _=l+y*m;for(d=g;d<m;d++)s[_+d]=s[_+d]+s[_+d-g]&255}},i.decode._decodePackBits=function(e,t,n,i,r){for(var o=new Int8Array(e.buffer),a=new Int8Array(i.buffer),s=t+n;t<s;){var l=o[t];if(t++,l>=0&&l<128)for(var c=0;c<l+1;c++)a[r]=o[t],r++,t++;if(l>=-127&&l<0){for(c=0;c<1-l;c++)a[r]=o[t],r++;t++}}},i.decode._decodeThunder=function(e,t,n,i,r){for(var o=[0,1,0,-1],a=[0,1,2,3,0,-3,-2,-1],s=t+n,l=2*r,c=0;t<s;){var u=e[t],d=u>>6,p=63&u;if(t++,3==d&&(c=15&p,i[l>>1]|=c<<4*(1-l&1),l++),0==d)for(var f=0;f<p;f++)i[l>>1]|=c<<4*(1-l&1),l++;if(2==d)for(f=0;f<2;f++){4!=(h=p>>3*(1-f)&7)&&(c+=a[h],i[l>>1]|=c<<4*(1-l&1),l++)}if(1==d)for(f=0;f<3;f++){var h;2!=(h=p>>2*(2-f)&3)&&(c+=o[h],i[l>>1]|=c<<4*(1-l&1),l++)}}},i.decode._dmap={1:0,"011":1,"000011":2,"0000011":3,"010":-1,"000010":-2,"0000010":-3},i.decode._lens=function(){var e=function(e,t,n,i){for(var r=0;r<t.length;r++)e[t[r]]=n+r*i},t="00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100",n="0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111",i="11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011",r="0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,0000001011011,0000001100100,0000001100101",o="00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111";t=t.split(","),n=n.split(","),i=i.split(","),r=r.split(","),o=o.split(",");var a={},s={};return e(a,t,0,1),e(a,i,64,64),e(a,o,1792,64),e(s,n,0,1),e(s,r,64,64),e(s,o,1792,64),[a,s]}(),i.decode._decodeG4=function(e,t,n,r,o,a,s){for(var l=i.decode,c=t<<3,u=0,d="",p=[],f=[],h=0;h<a;h++)f.push(0);f=l._makeDiff(f);for(var g=0,v=0,m=0,y=0,_=0,b=0,w="",S=0;c>>3<t+n;){m=l._findDiff(f,g+(0==g?0:1),1-_),y=l._findDiff(f,m,_);var E=0;if(1==s&&(E=e[c>>3]>>7-(7&c)&1),2==s&&(E=e[c>>3]>>(7&c)&1),c++,d+=E,"H"==w){if(null!=l._lens[_][d]){var x=l._lens[_][d];d="",u+=x,x<64&&(l._addNtimes(p,u,_),g+=u,_=1-_,u=0,0==--S&&(w=""))}}else"0001"==d&&(d="",l._addNtimes(p,y-g,_),g=y),"001"==d&&(d="",w="H",S=2),null!=l._dmap[d]&&(v=m+l._dmap[d],l._addNtimes(p,v-g,_),g=v,d="",_=1-_);p.length==a&&""==w&&(l._writeBits(p,r,8*o+b*a),_=0,b++,g=0,f=l._makeDiff(p),p=[])}},i.decode._findDiff=function(e,t,n){for(var i=0;i<e.length;i+=2)if(e[i]>=t&&e[i+1]==n)return e[i]},i.decode._makeDiff=function(e){var t=[];1==e[0]&&t.push(0,1);for(var n=1;n<e.length;n++)e[n-1]!=e[n]&&t.push(n,e[n]);return t.push(e.length,0,e.length,1),t},i.decode._decodeG3=function(e,t,n,r,o,a,s){for(var l=i.decode,c=t<<3,u=0,d="",p=[],f=[],h=0;h<a;h++)p.push(0);for(var g=0,v=0,m=0,y=0,_=0,b=-1,w="",S=0,E=!1;c>>3<t+n;){m=l._findDiff(f,g+(0==g?0:1),1-_),y=l._findDiff(f,m,_);var x=0;if(1==s&&(x=e[c>>3]>>7-(7&c)&1),2==s&&(x=e[c>>3]>>(7&c)&1),c++,d+=x,E){if(null!=l._lens[_][d]){var k=l._lens[_][d];d="",u+=k,k<64&&(l._addNtimes(p,u,_),_=1-_,u=0)}}else if("H"==w){if(null!=l._lens[_][d]){k=l._lens[_][d];d="",u+=k,k<64&&(l._addNtimes(p,u,_),g+=u,_=1-_,u=0,0==--S&&(w=""))}}else"0001"==d&&(d="",l._addNtimes(p,y-g,_),g=y),"001"==d&&(d="",w="H",S=2),null!=l._dmap[d]&&(v=m+l._dmap[d],l._addNtimes(p,v-g,_),g=v,d="",_=1-_);d.endsWith("000000000001")&&(b>=0&&l._writeBits(p,r,8*o+b*a),E=1==(e[c>>3]>>(7&c)&1),c++,null==l._decodeG3.allow2D&&(l._decodeG3.allow2D=E),l._decodeG3.allow2D||(E=!0,c--),d="",_=0,b++,g=0,f=l._makeDiff(p),p=[])}p.length==a&&l._writeBits(p,r,8*o+b*a)},i.decode._addNtimes=function(e,t,n){for(var i=0;i<t;i++)e.push(n)},i.decode._writeBits=function(e,t,n){for(var i=0;i<e.length;i++)t[n+i>>3]|=e[i]<<7-(n+i&7)},i.decode._decodeLZW=function(e,t,n,i){for(var r=[],o=9,a=t<<3,s=0,l=0;;){if(s=(e[a>>3]<<16|e[a+8>>3]<<8|e[a+16>>3])>>24-(7&a)-o&(1<<o)-1,a+=o,0==r.length&&256!=s)return;if(257==s)break;if(256==s){o=9,r=[];for(var c=0;c<258;c++)r[c]=[c];if(s=(e[a>>3]<<16|e[a+8>>3]<<8|e[a+16>>3])>>24-(7&a)-o&(1<<o)-1,a+=o,257==s)break;for(c=0;c<r[s].length;c++)n[i+c]=r[s][c];i+=r[s].length,l=s}else if(s<r.length){for(c=0;c<r[s].length;c++)n[i+c]=r[s][c];i+=r[s].length;var u=r[l].slice(0);u.push(r[s][0]),r.push(u),r.length+1==1<<o&&o++,l=s}else{var d=r[l].slice(0);d.push(d[0]);for(c=0;c<d.length;c++)n[i+c]=d[c];i+=d.length,r.push(d),r.length+1==1<<o&&o++,l=s}}},i.tags={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",266:"FillOrder",269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffset",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",286:"XPosition",287:"YPosition",292:"T4Options",296:"ResolutionUnit",297:"PageNumber",305:"Software",306:"DateTime",315:"Artist",317:"Predictor",320:"ColorMap",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffset",325:"TileByteCounts",336:"DotRange",338:"ExtraSample",339:"SampleFormat",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",33432:"Copyright",34377:"Photoshop"},i.decode._readIFD=function(e,t,n,i){var r=e.readUshort(t,n);n+=2;var o={};i.push(o);for(var a=0;a<r;a++){var s=e.readUshort(t,n);n+=2;var l=e.readUshort(t,n);n+=2;var c=e.readUint(t,n);n+=4;var u=e.readUint(t,n);n+=4;var d=o["t"+s]=[];if(1==l||7==l)for(var p=0;p<c;p++)d.push(t[(c<5?n-4:u)+p]);if(2==l&&d.push(e.readASCII(t,c<5?n-4:u,c-1)),3==l)for(p=0;p<c;p++)d.push(e.readUshort(t,(c<3?n-4:u)+2*p));if(4==l)for(p=0;p<c;p++)d.push(e.readUint(t,(c<2?n-4:u)+4*p));if(5==l)for(p=0;p<c;p++)d.push(e.readUint(t,u+8*p)/e.readUint(t,u+8*p+4));d.length}return n},i.toRGBA8=function(e){var t=e.width*e.height,n=4*t,i=e.data,r=new Uint8Array(4*t),o=e.t262[0],a=e.t258?e.t258[0]:1;if(0==o){if(1==a)for(var s=0;s<t;s++){var l=s<<2,c=i[s>>3]>>7-(7&s)&1;r[l]=r[l+1]=r[l+2]=255*(1-c),r[l+3]=255}if(4==a)for(s=0;s<t;s++){l=s<<2,c=i[s>>1]>>4-4*(1&s)&15;r[l]=r[l+1]=r[l+2]=17*(15-c),r[l+3]=255}if(8==a)for(s=0;s<t;s++){l=s<<2,c=i[s];r[l]=r[l+1]=r[l+2]=255-c,r[l+3]=255}}if(1==o){if(1==a)for(s=0;s<t;s++){l=s<<2,c=i[s>>3]>>7-(7&s)&1;r[l]=r[l+1]=r[l+2]=255*c,r[l+3]=255}if(2==a)for(s=0;s<t;s++){l=s<<2,c=i[s>>2]>>6-2*(3&s)&3;r[l]=r[l+1]=r[l+2]=85*c,r[l+3]=255}if(8==a)for(s=0;s<t;s++){l=s<<2,c=i[s];r[l]=r[l+1]=r[l+2]=c,r[l+3]=255}if(16==a)for(s=0;s<t;s++){l=s<<2,c=Math.max(0,i[2*s+1]-5)<<8|i[2*s];r[l]=r[l+1]=r[l+2]=Math.min(255,c),r[l+3]=255}}if(2==o)if(8==a)if(e.t338)if(1==e.t338[0])for(s=0;s<n;s++)r[s]=i[s];else for(s=0;s<n;s+=4)r[s]=i[s],r[s+1]=i[s+1],r[s+2]=i[s+2],r[s+3]=255;else for(s=0;s<t;s++){var u=3*s;r[l=s<<2]=i[u],r[l+1]=i[u+1],r[l+2]=i[u+2],r[l+3]=255}else for(s=0;s<t;s++){u=6*s;r[l=s<<2]=i[u],r[l+1]=i[u+2],r[l+2]=i[u+4],r[l+3]=255}if(3==o){var d=e.t320;for(s=0;s<t;s++){l=s<<2;var p=i[s];r[l]=d[p]>>8,r[l+1]=d[256+p]>>8,r[l+2]=d[512+p]>>8,r[l+3]=255}}if(5==o)for(s=0;s<t;s++){var f=255-i[l=s<<2],h=255-i[l+1],g=255-i[l+2],v=(255-i[l+3])*(1/255);r[l]=Math.round(f*v),r[l+1]=Math.round(h*v),r[l+2]=Math.round(g*v),r[l+3]=255}return r},i.replaceIMG=function(){for(var e=document.getElementsByTagName("img"),t=0;t<e.length;t++){var n=e[t],r=n.getAttribute("src"),o=r.split(".").pop().toLowerCase();if("tif"==o||"tiff"==o){var a=new XMLHttpRequest;i._xhrs.push(a),i._imgs.push(n),a.open("GET",r),a.responseType="arraybuffer",a.onload=i._imgLoaded,a.send()}}},i._xhrs=[],i._imgs=[],i._imgLoaded=function(e){var t=i.decode(e.target.response)[0],n=i.toRGBA8(t),r=t.width,o=t.height,a=i._xhrs.indexOf(e.target),s=i._imgs[a];i._xhrs.splice(a,1),i._imgs.splice(a,1);var l=document.createElement("canvas");l.width=r,l.height=o;for(var c=l.getContext("2d"),u=c.createImageData(r,o),d=0;d<n.length;d++)u.data[d]=n[d];c.putImageData(u,0,0);var p=["style","class","id"];for(d=0;d<p.length;d++)l.setAttribute(p[d],s.getAttribute(p[d]));s.parentNode.replaceChild(l,s)},i._binBE={nextZero:function(e,t){for(;0!=e[t];)t++;return t},readUshort:function(e,t){return e[t]<<8|e[t+1]},readUint:function(e,t){var n=i._binBE.ui8;return n[0]=e[t+3],n[1]=e[t+2],n[2]=e[t+1],n[3]=e[t],i._binBE.ui32[0]},readASCII:function(e,t,n){for(var i="",r=0;r<n;r++)i+=String.fromCharCode(e[t+r]);return i}},i._binBE.ui8=new Uint8Array(4),i._binBE.ui32=new Uint32Array(i._binBE.ui8.buffer),i._binLE={nextZero:i._binBE.nextZero,readUshort:function(e,t){return e[t+1]<<8|e[t]},readUint:function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},readASCII:i._binBE.readASCII},i._copyTile=function(e,t,n,i,r,o,a,s){for(var l=0;l<n;l++)for(var c=0;c<t;c++){var u=a+c,d=s+l;u<r&&d<o&&(i[d*r+u]=e[l*t+c])}},"object"==t(e)&&(e.exports=i)}).call(this,n(118)(e))},function(e,t,n){"use strict";var i={};(0,n(32).assign)(i,n(129),n(132),n(86)),e.exports=i},function(e,t,n){"use strict";var i=n(130),r=n(32),o=n(84),a=n(60),s=n(85),l=Object.prototype.toString,c=0,u=-1,d=0,p=8;function f(e){if(!(this instanceof f))return new f(e);this.options=r.assign({level:u,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=i.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==c)throw new Error(a[n]);if(t.header&&i.deflateSetHeader(this.strm,t.header),t.dictionary){var h;if(h="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=i.deflateSetDictionary(this.strm,h))!==c)throw new Error(a[n]);this._dict_set=!0}}function h(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}f.prototype.push=function(e,t){var n,a,s=this.strm,u=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new r.Buf8(u),s.next_out=0,s.avail_out=u),1!==(n=i.deflate(s,a))&&n!==c)return this.onEnd(n),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(r.shrinkBuf(s.output,s.next_out))):this.onData(r.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==n);return 4===a?(n=i.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==a||(this.onEnd(c),s.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=f,t.deflate=h,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,h(e,t)}},function(e,t,n){"use strict";var i,r=n(32),o=n(131),a=n(82),s=n(83),l=n(60),c=0,u=1,d=3,p=4,f=5,h=0,g=1,v=-2,m=-3,y=-5,_=-1,b=1,w=2,S=3,E=4,x=0,k=2,C=8,P=9,T=15,O=8,M=286,I=30,A=19,D=2*M+1,L=15,j=3,R=258,F=R+j+1,N=32,B=42,U=69,z=73,H=91,q=103,V=113,W=666,G=1,Y=2,K=3,X=4,J=3;function $(e,t){return e.msg=l[t],t}function Z(e){return(e<<1)-(e>4?9:0)}function Q(e){for(var t=e.length;--t>=0;)e[t]=0}function ee(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(r.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function te(e,t){o._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ee(e.strm)}function ne(e,t){e.pending_buf[e.pending++]=t}function ie(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function re(e,t){var n,i,r=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-F?e.strstart-(e.w_size-F):0,c=e.window,u=e.w_mask,d=e.prev,p=e.strstart+R,f=c[o+a-1],h=c[o+a];e.prev_length>=e.good_match&&(r>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(n=t)+a]===h&&c[n+a-1]===f&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<p);if(i=R-(p-o),o=p-R,i>a){if(e.match_start=t,a=i,i>=s)break;f=c[o+a-1],h=c[o+a]}}}while((t=d[t&u])>l&&0!=--r);return a<=e.lookahead?a:e.lookahead}function oe(e){var t,n,i,o,l,c,u,d,p,f,h=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=h+(h-F)){r.arraySet(e.window,e.window,h,h,0),e.match_start-=h,e.strstart-=h,e.block_start-=h,t=n=e.hash_size;do{i=e.head[--t],e.head[t]=i>=h?i-h:0}while(--n);t=n=h;do{i=e.prev[--t],e.prev[t]=i>=h?i-h:0}while(--n);o+=h}if(0===e.strm.avail_in)break;if(c=e.strm,u=e.window,d=e.strstart+e.lookahead,p=o,f=void 0,(f=c.avail_in)>p&&(f=p),n=0===f?0:(c.avail_in-=f,r.arraySet(u,c.input,c.next_in,f,d),1===c.state.wrap?c.adler=a(c.adler,u,f,d):2===c.state.wrap&&(c.adler=s(c.adler,u,f,d)),c.next_in+=f,c.total_in+=f,f),e.lookahead+=n,e.lookahead+e.insert>=j)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+j-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<j)););}while(e.lookahead<F&&0!==e.strm.avail_in)}function ae(e,t){for(var n,i;;){if(e.lookahead<F){if(oe(e),e.lookahead<F&&t===c)return G;if(0===e.lookahead)break}if(n=0,e.lookahead>=j&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-F&&(e.match_length=re(e,n)),e.match_length>=j)if(i=o._tr_tally(e,e.strstart-e.match_start,e.match_length-j),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=j){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(te(e,!1),0===e.strm.avail_out))return G}return e.insert=e.strstart<j-1?e.strstart:j-1,t===p?(te(e,!0),0===e.strm.avail_out?K:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?G:Y}function se(e,t){for(var n,i,r;;){if(e.lookahead<F){if(oe(e),e.lookahead<F&&t===c)return G;if(0===e.lookahead)break}if(n=0,e.lookahead>=j&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=j-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-F&&(e.match_length=re(e,n),e.match_length<=5&&(e.strategy===b||e.match_length===j&&e.strstart-e.match_start>4096)&&(e.match_length=j-1)),e.prev_length>=j&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-j,i=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-j),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=j-1,e.strstart++,i&&(te(e,!1),0===e.strm.avail_out))return G}else if(e.match_available){if((i=o._tr_tally(e,0,e.window[e.strstart-1]))&&te(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return G}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<j-1?e.strstart:j-1,t===p?(te(e,!0),0===e.strm.avail_out?K:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?G:Y}function le(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}function ce(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=k,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?B:V,e.adler=2===t.wrap?0:1,t.last_flush=c,o._tr_init(t),h):$(e,v)}function ue(e){var t,n=ce(e);return n===h&&((t=e.state).window_size=2*t.w_size,Q(t.head),t.max_lazy_match=i[t.level].max_lazy,t.good_match=i[t.level].good_length,t.nice_match=i[t.level].nice_length,t.max_chain_length=i[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=j-1,t.match_available=0,t.ins_h=0),n}function de(e,t,n,i,o,a){if(!e)return v;var s=1;if(t===_&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),o<1||o>P||n!==C||i<8||i>15||t<0||t>9||a<0||a>E)return $(e,v);8===i&&(i=9);var l=new function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=C,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*D),this.dyn_dtree=new r.Buf16(2*(2*I+1)),this.bl_tree=new r.Buf16(2*(2*A+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(L+1),this.heap=new r.Buf16(2*M+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*M+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0};return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+j-1)/j),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=n,ue(e)}i=[new le(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(oe(e),0===e.lookahead&&t===c)return G;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,te(e,!1),0===e.strm.avail_out))return G;if(e.strstart-e.block_start>=e.w_size-F&&(te(e,!1),0===e.strm.avail_out))return G}return e.insert=0,t===p?(te(e,!0),0===e.strm.avail_out?K:X):(e.strstart>e.block_start&&(te(e,!1),e.strm.avail_out),G)}),new le(4,4,8,4,ae),new le(4,5,16,8,ae),new le(4,6,32,32,ae),new le(4,4,16,16,se),new le(8,16,32,32,se),new le(8,16,128,128,se),new le(8,32,128,256,se),new le(32,128,258,1024,se),new le(32,258,258,4096,se)],t.deflateInit=function(e,t){return de(e,t,C,T,O,x)},t.deflateInit2=de,t.deflateReset=ue,t.deflateResetKeep=ce,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?v:(e.state.gzhead=t,h):v},t.deflate=function(e,t){var n,r,a,l;if(!e||!e.state||t>f||t<0)return e?$(e,v):v;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||r.status===W&&t!==p)return $(e,0===e.avail_out?y:v);if(r.strm=e,n=r.last_flush,r.last_flush=t,r.status===B)if(2===r.wrap)e.adler=0,ne(r,31),ne(r,139),ne(r,8),r.gzhead?(ne(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),ne(r,255&r.gzhead.time),ne(r,r.gzhead.time>>8&255),ne(r,r.gzhead.time>>16&255),ne(r,r.gzhead.time>>24&255),ne(r,9===r.level?2:r.strategy>=w||r.level<2?4:0),ne(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(ne(r,255&r.gzhead.extra.length),ne(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=s(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=U):(ne(r,0),ne(r,0),ne(r,0),ne(r,0),ne(r,0),ne(r,9===r.level?2:r.strategy>=w||r.level<2?4:0),ne(r,J),r.status=V);else{var m=C+(r.w_bits-8<<4)<<8;m|=(r.strategy>=w||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(m|=N),m+=31-m%31,r.status=V,ie(r,m),0!==r.strstart&&(ie(r,e.adler>>>16),ie(r,65535&e.adler)),e.adler=1}if(r.status===U)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(e.adler=s(e.adler,r.pending_buf,r.pending-a,a)),ee(e),a=r.pending,r.pending!==r.pending_buf_size));)ne(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(e.adler=s(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=z)}else r.status=z;if(r.status===z)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(e.adler=s(e.adler,r.pending_buf,r.pending-a,a)),ee(e),a=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,ne(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>a&&(e.adler=s(e.adler,r.pending_buf,r.pending-a,a)),0===l&&(r.gzindex=0,r.status=H)}else r.status=H;if(r.status===H)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(e.adler=s(e.adler,r.pending_buf,r.pending-a,a)),ee(e),a=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,ne(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>a&&(e.adler=s(e.adler,r.pending_buf,r.pending-a,a)),0===l&&(r.status=q)}else r.status=q;if(r.status===q&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&ee(e),r.pending+2<=r.pending_buf_size&&(ne(r,255&e.adler),ne(r,e.adler>>8&255),e.adler=0,r.status=V)):r.status=V),0!==r.pending){if(ee(e),0===e.avail_out)return r.last_flush=-1,h}else if(0===e.avail_in&&Z(t)<=Z(n)&&t!==p)return $(e,y);if(r.status===W&&0!==e.avail_in)return $(e,y);if(0!==e.avail_in||0!==r.lookahead||t!==c&&r.status!==W){var _=r.strategy===w?function(e,t){for(var n;;){if(0===e.lookahead&&(oe(e),0===e.lookahead)){if(t===c)return G;break}if(e.match_length=0,n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(te(e,!1),0===e.strm.avail_out))return G}return e.insert=0,t===p?(te(e,!0),0===e.strm.avail_out?K:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?G:Y}(r,t):r.strategy===S?function(e,t){for(var n,i,r,a,s=e.window;;){if(e.lookahead<=R){if(oe(e),e.lookahead<=R&&t===c)return G;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=j&&e.strstart>0&&(i=s[r=e.strstart-1])===s[++r]&&i===s[++r]&&i===s[++r]){a=e.strstart+R;do{}while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<a);e.match_length=R-(a-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=j?(n=o._tr_tally(e,1,e.match_length-j),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(te(e,!1),0===e.strm.avail_out))return G}return e.insert=0,t===p?(te(e,!0),0===e.strm.avail_out?K:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?G:Y}(r,t):i[r.level].func(r,t);if(_!==K&&_!==X||(r.status=W),_===G||_===K)return 0===e.avail_out&&(r.last_flush=-1),h;if(_===Y&&(t===u?o._tr_align(r):t!==f&&(o._tr_stored_block(r,0,0,!1),t===d&&(Q(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),ee(e),0===e.avail_out))return r.last_flush=-1,h}return t!==p?h:r.wrap<=0?g:(2===r.wrap?(ne(r,255&e.adler),ne(r,e.adler>>8&255),ne(r,e.adler>>16&255),ne(r,e.adler>>24&255),ne(r,255&e.total_in),ne(r,e.total_in>>8&255),ne(r,e.total_in>>16&255),ne(r,e.total_in>>24&255)):(ie(r,e.adler>>>16),ie(r,65535&e.adler)),ee(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?h:g)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==B&&t!==U&&t!==z&&t!==H&&t!==q&&t!==V&&t!==W?$(e,v):(e.state=null,t===V?$(e,m):h):v},t.deflateSetDictionary=function(e,t){var n,i,o,s,l,c,u,d,p=t.length;if(!e||!e.state)return v;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==B||n.lookahead)return v;for(1===s&&(e.adler=a(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===s&&(Q(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new r.Buf8(n.w_size),r.arraySet(d,t,p-n.w_size,n.w_size,0),t=d,p=n.w_size),l=e.avail_in,c=e.next_in,u=e.input,e.avail_in=p,e.next_in=0,e.input=t,oe(n);n.lookahead>=j;){i=n.strstart,o=n.lookahead-(j-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+j-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--o);n.strstart=i,n.lookahead=j-1,oe(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=j-1,n.match_available=0,e.next_in=c,e.input=u,e.avail_in=l,n.wrap=s,h},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";var i=n(32),r=4,o=0,a=1,s=2;function l(e){for(var t=e.length;--t>=0;)e[t]=0}var c=0,u=1,d=2,p=29,f=256,h=f+1+p,g=30,v=19,m=2*h+1,y=15,_=16,b=7,w=256,S=16,E=17,x=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],C=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],O=new Array(2*(h+2));l(O);var M=new Array(2*g);l(M);var I=new Array(512);l(I);var A=new Array(256);l(A);var D=new Array(p);l(D);var L,j,R,F=new Array(g);function N(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}function B(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function U(e){return e<256?I[e]:I[256+(e>>>7)]}function z(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function H(e,t,n){e.bi_valid>_-n?(e.bi_buf|=t<<e.bi_valid&65535,z(e,e.bi_buf),e.bi_buf=t>>_-e.bi_valid,e.bi_valid+=n-_):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function q(e,t,n){H(e,n[2*t],n[2*t+1])}function V(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function W(e,t,n){var i,r,o=new Array(y+1),a=0;for(i=1;i<=y;i++)o[i]=a=a+n[i-1]<<1;for(r=0;r<=t;r++){var s=e[2*r+1];0!==s&&(e[2*r]=V(o[s]++,s))}}function G(e){var t;for(t=0;t<h;t++)e.dyn_ltree[2*t]=0;for(t=0;t<g;t++)e.dyn_dtree[2*t]=0;for(t=0;t<v;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*w]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Y(e){e.bi_valid>8?z(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function K(e,t,n,i){var r=2*t,o=2*n;return e[r]<e[o]||e[r]===e[o]&&i[t]<=i[n]}function X(e,t,n){for(var i=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&K(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!K(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i}function J(e,t,n){var i,r,o,a,s=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],r=e.pending_buf[e.l_buf+s],s++,0===i?q(e,r,t):(q(e,(o=A[r])+f+1,t),0!==(a=k[o])&&H(e,r-=D[o],a),q(e,o=U(--i),n),0!==(a=C[o])&&H(e,i-=F[o],a))}while(s<e.last_lit);q(e,w,t)}function $(e,t){var n,i,r,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=m,n=0;n<l;n++)0!==o[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(r=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[r]=0,e.opt_len--,s&&(e.static_len-=a[2*r+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)X(e,o,n);r=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],X(e,o,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,o[2*r]=o[2*n]+o[2*i],e.depth[r]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,o[2*n+1]=o[2*i+1]=r,e.heap[1]=r++,X(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,i,r,o,a,s,l=t.dyn_tree,c=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,h=t.stat_desc.max_length,g=0;for(o=0;o<=y;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<m;n++)(o=l[2*l[2*(i=e.heap[n])+1]+1]+1)>h&&(o=h,g++),l[2*i+1]=o,i>c||(e.bl_count[o]++,a=0,i>=f&&(a=p[i-f]),s=l[2*i],e.opt_len+=s*(o+a),d&&(e.static_len+=s*(u[2*i+1]+a)));if(0!==g){do{for(o=h-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[h]--,g-=2}while(g>0);for(o=h;0!==o;o--)for(i=e.bl_count[o];0!==i;)(r=e.heap[--n])>c||(l[2*r+1]!==o&&(e.opt_len+=(o-l[2*r+1])*l[2*r],l[2*r+1]=o),i--)}}(e,t),W(o,c,e.bl_count)}function Z(e,t,n){var i,r,o=-1,a=t[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=a,a=t[2*(i+1)+1],++s<l&&r===a||(s<c?e.bl_tree[2*r]+=s:0!==r?(r!==o&&e.bl_tree[2*r]++,e.bl_tree[2*S]++):s<=10?e.bl_tree[2*E]++:e.bl_tree[2*x]++,s=0,o=r,0===a?(l=138,c=3):r===a?(l=6,c=3):(l=7,c=4))}function Q(e,t,n){var i,r,o=-1,a=t[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),i=0;i<=n;i++)if(r=a,a=t[2*(i+1)+1],!(++s<l&&r===a)){if(s<c)do{q(e,r,e.bl_tree)}while(0!=--s);else 0!==r?(r!==o&&(q(e,r,e.bl_tree),s--),q(e,S,e.bl_tree),H(e,s-3,2)):s<=10?(q(e,E,e.bl_tree),H(e,s-3,3)):(q(e,x,e.bl_tree),H(e,s-11,7));s=0,o=r,0===a?(l=138,c=3):r===a?(l=6,c=3):(l=7,c=4)}}l(F);var ee=!1;function te(e,t,n,r){H(e,(c<<1)+(r?1:0),3),function(e,t,n,r){Y(e),r&&(z(e,n),z(e,~n)),i.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){ee||(function(){var e,t,n,i,r,o=new Array(y+1);for(n=0,i=0;i<p-1;i++)for(D[i]=n,e=0;e<1<<k[i];e++)A[n++]=i;for(A[n-1]=i,r=0,i=0;i<16;i++)for(F[i]=r,e=0;e<1<<C[i];e++)I[r++]=i;for(r>>=7;i<g;i++)for(F[i]=r<<7,e=0;e<1<<C[i]-7;e++)I[256+r++]=i;for(t=0;t<=y;t++)o[t]=0;for(e=0;e<=143;)O[2*e+1]=8,e++,o[8]++;for(;e<=255;)O[2*e+1]=9,e++,o[9]++;for(;e<=279;)O[2*e+1]=7,e++,o[7]++;for(;e<=287;)O[2*e+1]=8,e++,o[8]++;for(W(O,h+1,o),e=0;e<g;e++)M[2*e+1]=5,M[2*e]=V(e,5);L=new N(O,k,f+1,h,y),j=new N(M,C,0,g,y),R=new N(new Array(0),P,0,v,b)}(),ee=!0),e.l_desc=new B(e.dyn_ltree,L),e.d_desc=new B(e.dyn_dtree,j),e.bl_desc=new B(e.bl_tree,R),e.bi_buf=0,e.bi_valid=0,G(e)},t._tr_stored_block=te,t._tr_flush_block=function(e,t,n,i){var l,c,p=0;e.level>0?(e.strm.data_type===s&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return o;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return a;for(t=32;t<f;t++)if(0!==e.dyn_ltree[2*t])return a;return o}(e)),$(e,e.l_desc),$(e,e.d_desc),p=function(e){var t;for(Z(e,e.dyn_ltree,e.l_desc.max_code),Z(e,e.dyn_dtree,e.d_desc.max_code),$(e,e.bl_desc),t=v-1;t>=3&&0===e.bl_tree[2*T[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),l=e.opt_len+3+7>>>3,(c=e.static_len+3+7>>>3)<=l&&(l=c)):l=c=n+5,n+4<=l&&-1!==t?te(e,t,n,i):e.strategy===r||c===l?(H(e,(u<<1)+(i?1:0),3),J(e,O,M)):(H(e,(d<<1)+(i?1:0),3),function(e,t,n,i){var r;for(H(e,t-257,5),H(e,n-1,5),H(e,i-4,4),r=0;r<i;r++)H(e,e.bl_tree[2*T[r]+1],3);Q(e,e.dyn_ltree,t-1),Q(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,p+1),J(e,e.dyn_ltree,e.dyn_dtree)),G(e),i&&Y(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(A[n]+f+1)]++,e.dyn_dtree[2*U(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){H(e,u<<1,3),q(e,w,O),function(e){16===e.bi_valid?(z(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,n){"use strict";var i=n(133),r=n(32),o=n(84),a=n(86),s=n(60),l=n(85),c=n(136),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=i.inflateInit2(this.strm,t.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new c,i.inflateGetHeader(this.strm,this.header)}function p(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}d.prototype.push=function(e,t){var n,s,l,c,d,p,f=this.strm,h=this.options.chunkSize,g=this.options.dictionary,v=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?f.input=o.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new r.Buf8(h),f.next_out=0,f.avail_out=h),(n=i.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&g&&(p="string"==typeof g?o.string2buf(g):"[object ArrayBuffer]"===u.call(g)?new Uint8Array(g):g,n=i.inflateSetDictionary(this.strm,p)),n===a.Z_BUF_ERROR&&!0===v&&(n=a.Z_OK,v=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==a.Z_STREAM_END&&(0!==f.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(f.output,f.next_out),c=f.next_out-l,d=o.buf2string(f.output,l),f.next_out=c,f.avail_out=h-c,c&&r.arraySet(f.output,f.output,l,c,0),this.onData(d)):this.onData(r.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(v=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=i.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),f.avail_out=0,!0)},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=d,t.inflate=p,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},t.ungzip=p},function(e,t,n){"use strict";var i=n(32),r=n(82),o=n(83),a=n(134),s=n(135),l=0,c=1,u=2,d=4,p=5,f=6,h=0,g=1,v=2,m=-2,y=-3,_=-4,b=-5,w=8,S=1,E=2,x=3,k=4,C=5,P=6,T=7,O=8,M=9,I=10,A=11,D=12,L=13,j=14,R=15,F=16,N=17,B=18,U=19,z=20,H=21,q=22,V=23,W=24,G=25,Y=26,K=27,X=28,J=29,$=30,Z=31,Q=32,ee=852,te=592,ne=15;function ie(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function re(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=S,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(ee),t.distcode=t.distdyn=new i.Buf32(te),t.sane=1,t.back=-1,h):m}function oe(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,re(e)):m}function ae(e,t){var n,i;return e&&e.state?(i=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?m:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,oe(e))):m}function se(e,t){var n,r;return e?(r=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},e.state=r,r.window=null,(n=ae(e,t))!==h&&(e.state=null),n):m}var le,ce,ue=!0;function de(e){if(ue){var t;for(le=new i.Buf32(512),ce=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(c,e.lens,0,288,le,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(u,e.lens,0,32,ce,0,e.work,{bits:5}),ue=!1}e.lencode=le,e.lenbits=9,e.distcode=ce,e.distbits=5}function pe(e,t,n,r){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new i.Buf8(a.wsize)),r>=a.wsize?(i.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>r&&(o=r),i.arraySet(a.window,t,n-r,o,a.wnext),(r-=o)?(i.arraySet(a.window,t,n-r,r,0),a.wnext=r,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}t.inflateReset=oe,t.inflateReset2=ae,t.inflateResetKeep=re,t.inflateInit=function(e){return se(e,ne)},t.inflateInit2=se,t.inflate=function(e,t){var n,ee,te,ne,re,oe,ae,se,le,ce,ue,fe,he,ge,ve,me,ye,_e,be,we,Se,Ee,xe,ke,Ce=0,Pe=new i.Buf8(4),Te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return m;(n=e.state).mode===D&&(n.mode=L),re=e.next_out,te=e.output,ae=e.avail_out,ne=e.next_in,ee=e.input,oe=e.avail_in,se=n.hold,le=n.bits,ce=oe,ue=ae,Ee=h;e:for(;;)switch(n.mode){case S:if(0===n.wrap){n.mode=L;break}for(;le<16;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if(2&n.wrap&&35615===se){n.check=0,Pe[0]=255&se,Pe[1]=se>>>8&255,n.check=o(n.check,Pe,2,0),se=0,le=0,n.mode=E;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&se)<<8)+(se>>8))%31){e.msg="incorrect header check",n.mode=$;break}if((15&se)!==w){e.msg="unknown compression method",n.mode=$;break}if(le-=4,Se=8+(15&(se>>>=4)),0===n.wbits)n.wbits=Se;else if(Se>n.wbits){e.msg="invalid window size",n.mode=$;break}n.dmax=1<<Se,e.adler=n.check=1,n.mode=512&se?I:D,se=0,le=0;break;case E:for(;le<16;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if(n.flags=se,(255&n.flags)!==w){e.msg="unknown compression method",n.mode=$;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=$;break}n.head&&(n.head.text=se>>8&1),512&n.flags&&(Pe[0]=255&se,Pe[1]=se>>>8&255,n.check=o(n.check,Pe,2,0)),se=0,le=0,n.mode=x;case x:for(;le<32;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}n.head&&(n.head.time=se),512&n.flags&&(Pe[0]=255&se,Pe[1]=se>>>8&255,Pe[2]=se>>>16&255,Pe[3]=se>>>24&255,n.check=o(n.check,Pe,4,0)),se=0,le=0,n.mode=k;case k:for(;le<16;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}n.head&&(n.head.xflags=255&se,n.head.os=se>>8),512&n.flags&&(Pe[0]=255&se,Pe[1]=se>>>8&255,n.check=o(n.check,Pe,2,0)),se=0,le=0,n.mode=C;case C:if(1024&n.flags){for(;le<16;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}n.length=se,n.head&&(n.head.extra_len=se),512&n.flags&&(Pe[0]=255&se,Pe[1]=se>>>8&255,n.check=o(n.check,Pe,2,0)),se=0,le=0}else n.head&&(n.head.extra=null);n.mode=P;case P:if(1024&n.flags&&((fe=n.length)>oe&&(fe=oe),fe&&(n.head&&(Se=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),i.arraySet(n.head.extra,ee,ne,fe,Se)),512&n.flags&&(n.check=o(n.check,ee,fe,ne)),oe-=fe,ne+=fe,n.length-=fe),n.length))break e;n.length=0,n.mode=T;case T:if(2048&n.flags){if(0===oe)break e;fe=0;do{Se=ee[ne+fe++],n.head&&Se&&n.length<65536&&(n.head.name+=String.fromCharCode(Se))}while(Se&&fe<oe);if(512&n.flags&&(n.check=o(n.check,ee,fe,ne)),oe-=fe,ne+=fe,Se)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=O;case O:if(4096&n.flags){if(0===oe)break e;fe=0;do{Se=ee[ne+fe++],n.head&&Se&&n.length<65536&&(n.head.comment+=String.fromCharCode(Se))}while(Se&&fe<oe);if(512&n.flags&&(n.check=o(n.check,ee,fe,ne)),oe-=fe,ne+=fe,Se)break e}else n.head&&(n.head.comment=null);n.mode=M;case M:if(512&n.flags){for(;le<16;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if(se!==(65535&n.check)){e.msg="header crc mismatch",n.mode=$;break}se=0,le=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=D;break;case I:for(;le<32;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}e.adler=n.check=ie(se),se=0,le=0,n.mode=A;case A:if(0===n.havedict)return e.next_out=re,e.avail_out=ae,e.next_in=ne,e.avail_in=oe,n.hold=se,n.bits=le,v;e.adler=n.check=1,n.mode=D;case D:if(t===p||t===f)break e;case L:if(n.last){se>>>=7&le,le-=7&le,n.mode=K;break}for(;le<3;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}switch(n.last=1&se,le-=1,3&(se>>>=1)){case 0:n.mode=j;break;case 1:if(de(n),n.mode=z,t===f){se>>>=2,le-=2;break e}break;case 2:n.mode=N;break;case 3:e.msg="invalid block type",n.mode=$}se>>>=2,le-=2;break;case j:for(se>>>=7&le,le-=7&le;le<32;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if((65535&se)!=(se>>>16^65535)){e.msg="invalid stored block lengths",n.mode=$;break}if(n.length=65535&se,se=0,le=0,n.mode=R,t===f)break e;case R:n.mode=F;case F:if(fe=n.length){if(fe>oe&&(fe=oe),fe>ae&&(fe=ae),0===fe)break e;i.arraySet(te,ee,ne,fe,re),oe-=fe,ne+=fe,ae-=fe,re+=fe,n.length-=fe;break}n.mode=D;break;case N:for(;le<14;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if(n.nlen=257+(31&se),se>>>=5,le-=5,n.ndist=1+(31&se),se>>>=5,le-=5,n.ncode=4+(15&se),se>>>=4,le-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=$;break}n.have=0,n.mode=B;case B:for(;n.have<n.ncode;){for(;le<3;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}n.lens[Te[n.have++]]=7&se,se>>>=3,le-=3}for(;n.have<19;)n.lens[Te[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,xe={bits:n.lenbits},Ee=s(l,n.lens,0,19,n.lencode,0,n.work,xe),n.lenbits=xe.bits,Ee){e.msg="invalid code lengths set",n.mode=$;break}n.have=0,n.mode=U;case U:for(;n.have<n.nlen+n.ndist;){for(;me=(Ce=n.lencode[se&(1<<n.lenbits)-1])>>>16&255,ye=65535&Ce,!((ve=Ce>>>24)<=le);){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if(ye<16)se>>>=ve,le-=ve,n.lens[n.have++]=ye;else{if(16===ye){for(ke=ve+2;le<ke;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if(se>>>=ve,le-=ve,0===n.have){e.msg="invalid bit length repeat",n.mode=$;break}Se=n.lens[n.have-1],fe=3+(3&se),se>>>=2,le-=2}else if(17===ye){for(ke=ve+3;le<ke;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}le-=ve,Se=0,fe=3+(7&(se>>>=ve)),se>>>=3,le-=3}else{for(ke=ve+7;le<ke;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}le-=ve,Se=0,fe=11+(127&(se>>>=ve)),se>>>=7,le-=7}if(n.have+fe>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=$;break}for(;fe--;)n.lens[n.have++]=Se}}if(n.mode===$)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=$;break}if(n.lenbits=9,xe={bits:n.lenbits},Ee=s(c,n.lens,0,n.nlen,n.lencode,0,n.work,xe),n.lenbits=xe.bits,Ee){e.msg="invalid literal/lengths set",n.mode=$;break}if(n.distbits=6,n.distcode=n.distdyn,xe={bits:n.distbits},Ee=s(u,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,xe),n.distbits=xe.bits,Ee){e.msg="invalid distances set",n.mode=$;break}if(n.mode=z,t===f)break e;case z:n.mode=H;case H:if(oe>=6&&ae>=258){e.next_out=re,e.avail_out=ae,e.next_in=ne,e.avail_in=oe,n.hold=se,n.bits=le,a(e,ue),re=e.next_out,te=e.output,ae=e.avail_out,ne=e.next_in,ee=e.input,oe=e.avail_in,se=n.hold,le=n.bits,n.mode===D&&(n.back=-1);break}for(n.back=0;me=(Ce=n.lencode[se&(1<<n.lenbits)-1])>>>16&255,ye=65535&Ce,!((ve=Ce>>>24)<=le);){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if(me&&0==(240&me)){for(_e=ve,be=me,we=ye;me=(Ce=n.lencode[we+((se&(1<<_e+be)-1)>>_e)])>>>16&255,ye=65535&Ce,!(_e+(ve=Ce>>>24)<=le);){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}se>>>=_e,le-=_e,n.back+=_e}if(se>>>=ve,le-=ve,n.back+=ve,n.length=ye,0===me){n.mode=Y;break}if(32&me){n.back=-1,n.mode=D;break}if(64&me){e.msg="invalid literal/length code",n.mode=$;break}n.extra=15&me,n.mode=q;case q:if(n.extra){for(ke=n.extra;le<ke;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}n.length+=se&(1<<n.extra)-1,se>>>=n.extra,le-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=V;case V:for(;me=(Ce=n.distcode[se&(1<<n.distbits)-1])>>>16&255,ye=65535&Ce,!((ve=Ce>>>24)<=le);){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if(0==(240&me)){for(_e=ve,be=me,we=ye;me=(Ce=n.distcode[we+((se&(1<<_e+be)-1)>>_e)])>>>16&255,ye=65535&Ce,!(_e+(ve=Ce>>>24)<=le);){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}se>>>=_e,le-=_e,n.back+=_e}if(se>>>=ve,le-=ve,n.back+=ve,64&me){e.msg="invalid distance code",n.mode=$;break}n.offset=ye,n.extra=15&me,n.mode=W;case W:if(n.extra){for(ke=n.extra;le<ke;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}n.offset+=se&(1<<n.extra)-1,se>>>=n.extra,le-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=$;break}n.mode=G;case G:if(0===ae)break e;if(fe=ue-ae,n.offset>fe){if((fe=n.offset-fe)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=$;break}fe>n.wnext?(fe-=n.wnext,he=n.wsize-fe):he=n.wnext-fe,fe>n.length&&(fe=n.length),ge=n.window}else ge=te,he=re-n.offset,fe=n.length;fe>ae&&(fe=ae),ae-=fe,n.length-=fe;do{te[re++]=ge[he++]}while(--fe);0===n.length&&(n.mode=H);break;case Y:if(0===ae)break e;te[re++]=n.length,ae--,n.mode=H;break;case K:if(n.wrap){for(;le<32;){if(0===oe)break e;oe--,se|=ee[ne++]<<le,le+=8}if(ue-=ae,e.total_out+=ue,n.total+=ue,ue&&(e.adler=n.check=n.flags?o(n.check,te,ue,re-ue):r(n.check,te,ue,re-ue)),ue=ae,(n.flags?se:ie(se))!==n.check){e.msg="incorrect data check",n.mode=$;break}se=0,le=0}n.mode=X;case X:if(n.wrap&&n.flags){for(;le<32;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if(se!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=$;break}se=0,le=0}n.mode=J;case J:Ee=g;break e;case $:Ee=y;break e;case Z:return _;case Q:default:return m}return e.next_out=re,e.avail_out=ae,e.next_in=ne,e.avail_in=oe,n.hold=se,n.bits=le,(n.wsize||ue!==e.avail_out&&n.mode<$&&(n.mode<K||t!==d))&&pe(e,e.output,e.next_out,ue-e.avail_out)?(n.mode=Z,_):(ce-=e.avail_in,ue-=e.avail_out,e.total_in+=ce,e.total_out+=ue,n.total+=ue,n.wrap&&ue&&(e.adler=n.check=n.flags?o(n.check,te,ue,e.next_out-ue):r(n.check,te,ue,e.next_out-ue)),e.data_type=n.bits+(n.last?64:0)+(n.mode===D?128:0)+(n.mode===z||n.mode===R?256:0),(0===ce&&0===ue||t===d)&&Ee===h&&(Ee=b),Ee)},t.inflateEnd=function(e){if(!e||!e.state)return m;var t=e.state;return t.window&&(t.window=null),e.state=null,h},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?m:(n.head=t,t.done=!1,h):m},t.inflateSetDictionary=function(e,t){var n,i=t.length;return e&&e.state?0!==(n=e.state).wrap&&n.mode!==A?m:n.mode===A&&r(1,t,i,0)!==n.check?y:pe(e,t,i,i)?(n.mode=Z,_):(n.havedict=1,h):m},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";e.exports=function(e,t){var n,i,r,o,a,s,l,c,u,d,p,f,h,g,v,m,y,_,b,w,S,E,x,k,C;n=e.state,i=e.next_in,k=e.input,r=i+(e.avail_in-5),o=e.next_out,C=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,d=n.wnext,p=n.window,f=n.hold,h=n.bits,g=n.lencode,v=n.distcode,m=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{h<15&&(f+=k[i++]<<h,h+=8,f+=k[i++]<<h,h+=8),_=g[f&m];t:for(;;){if(f>>>=b=_>>>24,h-=b,0===(b=_>>>16&255))C[o++]=65535&_;else{if(!(16&b)){if(0==(64&b)){_=g[(65535&_)+(f&(1<<b)-1)];continue t}if(32&b){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&_,(b&=15)&&(h<b&&(f+=k[i++]<<h,h+=8),w+=f&(1<<b)-1,f>>>=b,h-=b),h<15&&(f+=k[i++]<<h,h+=8,f+=k[i++]<<h,h+=8),_=v[f&y];n:for(;;){if(f>>>=b=_>>>24,h-=b,!(16&(b=_>>>16&255))){if(0==(64&b)){_=v[(65535&_)+(f&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(S=65535&_,h<(b&=15)&&(f+=k[i++]<<h,(h+=8)<b&&(f+=k[i++]<<h,h+=8)),(S+=f&(1<<b)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=b,h-=b,S>(b=o-a)){if((b=S-b)>u&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(E=0,x=p,0===d){if(E+=c-b,b<w){w-=b;do{C[o++]=p[E++]}while(--b);E=o-S,x=C}}else if(d<b){if(E+=c+d-b,(b-=d)<w){w-=b;do{C[o++]=p[E++]}while(--b);if(E=0,d<w){w-=b=d;do{C[o++]=p[E++]}while(--b);E=o-S,x=C}}}else if(E+=d-b,b<w){w-=b;do{C[o++]=p[E++]}while(--b);E=o-S,x=C}for(;w>2;)C[o++]=x[E++],C[o++]=x[E++],C[o++]=x[E++],w-=3;w&&(C[o++]=x[E++],w>1&&(C[o++]=x[E++]))}else{E=o-S;do{C[o++]=C[E++],C[o++]=C[E++],C[o++]=C[E++],w-=3}while(w>2);w&&(C[o++]=C[E++],w>1&&(C[o++]=C[E++]))}break}}break}}while(i<r&&o<s);i-=w=h>>3,f&=(1<<(h-=w<<3))-1,e.next_in=i,e.next_out=o,e.avail_in=i<r?r-i+5:5-(i-r),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=f,n.bits=h}},function(e,t,n){"use strict";var i=n(32),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,l,c,u,d,p){var f,h,g,v,m,y,_,b,w,S=p.bits,E=0,x=0,k=0,C=0,P=0,T=0,O=0,M=0,I=0,A=0,D=null,L=0,j=new i.Buf16(16),R=new i.Buf16(16),F=null,N=0;for(E=0;E<=15;E++)j[E]=0;for(x=0;x<l;x++)j[t[n+x]]++;for(P=S,C=15;C>=1&&0===j[C];C--);if(P>C&&(P=C),0===C)return c[u++]=20971520,c[u++]=20971520,p.bits=1,0;for(k=1;k<C&&0===j[k];k++);for(P<k&&(P=k),M=1,E=1;E<=15;E++)if(M<<=1,(M-=j[E])<0)return-1;if(M>0&&(0===e||1!==C))return-1;for(R[1]=0,E=1;E<15;E++)R[E+1]=R[E]+j[E];for(x=0;x<l;x++)0!==t[n+x]&&(d[R[t[n+x]]++]=x);if(0===e?(D=F=d,y=19):1===e?(D=r,L-=257,F=o,N-=257,y=256):(D=a,F=s,y=-1),A=0,x=0,E=k,m=u,T=P,O=0,g=-1,v=(I=1<<P)-1,1===e&&I>852||2===e&&I>592)return 1;for(;;){_=E-O,d[x]<y?(b=0,w=d[x]):d[x]>y?(b=F[N+d[x]],w=D[L+d[x]]):(b=96,w=0),f=1<<E-O,k=h=1<<T;do{c[m+(A>>O)+(h-=f)]=_<<24|b<<16|w|0}while(0!==h);for(f=1<<E-1;A&f;)f>>=1;if(0!==f?(A&=f-1,A+=f):A=0,x++,0==--j[E]){if(E===C)break;E=t[n+d[x]]}if(E>P&&(A&v)!==g){for(0===O&&(O=P),m+=k,M=1<<(T=E-O);T+O<C&&!((M-=j[T+O])<=0);)T++,M<<=1;if(I+=1<<T,1===e&&I>852||2===e&&I>592)return 1;c[g=A&v]=P<<24|T<<16|m-u|0}}return 0!==A&&(c[m+A]=E-O<<24|64<<16|0),p.bits=P,0}},function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(184),l=n(57),c=n(58),u=n(166),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="SummaryState",t.LAYOUT_TEMPLATE_NAME="packages",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.changeScreen(t.INITIAL_SCREEN),t.initBackAction();var e=new c.UserPayment,n=t.renderSummary(e),i=t.initAbstractPayment({paymentAction:"pay_package",userPayment:e,currentPaymentMethod:t.ctx.userCurrentPaymentMethod,paymentProviderProps:[{name:"stripe",paymentButtonText:t.t("paymentButtonText")},{name:"paypal"}],package:{name:t.ctx.summaryParams.packageName,qty:t.ctx.summaryParams.packageQty}});Promise.all([n,i]).then(t._onEverythingReady)},t._onPaymentSuccess=function(e){var n=t.ctx.summaryParams,i=n.packageName,r=n.packageQty;window.ga("send","event","payment",i,String(r));var o=new s.PaymentCompletedState;t.ctx.changeState(o),o.render(t.domRoot)},t._onPaymentFailed=function(e){},t._onEverythingReady=function(){setTimeout(t.clearLoadingScreen,150)},t._goBackState=function(){t.cleanUpState(),t.ctx.goToPreviousState().render(t.domRoot)},t._goNextState=function(){var e=new s.PaymentCompletedState;t.ctx.changeState(e),e.render(t.domRoot)},t}return r(t,e),t.prototype.renderSummary=function(e){return o(this,void 0,void 0,function(){var t,n,i=this;return a(this,function(r){return t=e.getPaymentSummary_package(this.ctx.summaryParams.packageName,this.ctx.summaryParams.packageQty),n=this.domStateRoot.querySelector(".summary-template").innerHTML,t.then(function(e){new u.SummaryBuilder(n,e).setTexts({new:i.t("purchaseDetails")}).render(i.summariesDomRoot)}).catch(function(e){}),[2]})})},Object.defineProperty(t.prototype,"summariesDomRoot",{get:function(){var e=this.domStateRoot.querySelector(".summaries-root");if(!e)throw"summariesDomRoot not found";return e},enumerable:!0,configurable:!0}),t.prototype.cleanUpState=function(){this.summariesDomRoot.innerHTML="",this.domRoot.querySelectorAll(".payment__mountpoint").forEach(function(e){return e.innerHTML=""}),this.goBackBtn.removeEventListener("click",this._goBackState)},t.prototype.initBackAction=function(){this.ctx.canGoToAPreviousState()?(this.goBackBtn.style.display="",this.goBackBtn.addEventListener("click",this._goBackState)):this.goBackBtn.style.display="none"},Object.defineProperty(t.prototype,"goBackBtn",{get:function(){var e=this.domRoot.querySelector(".dialog__back");if(!e)throw"Go back btn not found";return e},enumerable:!0,configurable:!0}),t}(l.AbstractPaymentState);t.SummaryState=d},,function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(){}return t.scrollToPage=function(n,i){var r=e('.editor__page[data-file="'+n+'"][data-page="'+i+'"]');r.length>0&&(e("#workArea").animate({scrollTop:r.position().top},500),t.scrollToPreview(n,i))},t.scrollToPreview=function(t,n){var i=e('.preview__page[data-file="'+t+'"][data-page="'+n+'"]'),r=e(".tool__preview__pages");i.length>0&&r.animate({scrollTop:r.scrollTop()+i.offset().top-200},500)},t.scrollToFirstItem=function(n,i){var r=e('.editor__page[data-file="'+n+'"][data-page="'+i+'"]'),o=(e('.preview__page[data-file="'+n+'"][data-page="'+i+'"]'),r.height());r.children(".sign__element, .sign__group").each(function(t,n){var i=parseInt(e(n).css("top"));isNaN(i)||(o=Math.min(o,i))}),e("#workArea").animate({scrollTop:r.position().top+o-parseInt((e(".tool__workarea").height()/3).toString())},500),t.scrollToPreview(n,i)},t.scrollToElement=function(n,i){return void 0===i&&(i=null),new Promise(function(r,o){0==e(n).length&&r();var a=e(n).parent().position().top+e(n).position().top;e("#workArea").animate({scrollTop:a-parseInt((e(".tool__workarea").height()/3).toString()),duration:500},function(){null!=i&&i(),r()});var s=e(n).parent().attr("data-file"),l=e(n).parent().attr("data-page");t.scrollToPreview(s,l)})},t}();t.ScrollHelper=n}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(59),r=n(112),o=n(143),a=n(87),s=n(17),l=n(146),c=n(12),u=n(19),d=n(16),p=n(113),f=n(147),h=function(){function t(e){var t=this;void 0===e&&(e={}),this.action=null,this.alias=null,this.tool=null,this.subtool=null,this.realTool=null,this.toolText=null,this.fileLimits=null,this.taskId=null,this.parentId=null,this.parentTool=null,this.covers_hidden=!1,this.token=null,this.userId=null,this.startServer=null,this.workerServer=null,this.level="user",this.levelTemp="user",this.userToken=null,this.servers=null,this.downloadUrl=null,this.error=null,this.site=null,this.country=null,this.files=new i.FileStack,this.processManager=null,this.uploadManager=null,this.optionsManager=null,this.defaultOptions=null,this.configData=n(148),this.config=null,Object.assign(this,e),null==this.subtool&&(this.subtool=this.tool),null!=this.alias&&(this.subtool=this.alias),null!=this.userId&&s.configureScope(function(e){e.setUser({id:t.userId})}),null!=this.country&&s.configureScope(function(e){e.setTag("country",t.country)}),null!=this.taskId&&s.configureScope(function(e){e.setTag("taskId",t.taskId)}),null==this.workerServer&&this.servers&&(this.workerServer=this.servers[Math.floor(Math.random()*this.servers.length)]),window.Sentry=s,window.ilovetools={user:d.UserModel},f.Modal.init()}return t.prototype.variableUserLevel=function(){var e=document.URL.split("#");if("n"!==(e.length>1?e[1]:null)){for(var t=window.ilovepdfConfig.fp,n=!1,i=0;i<t;i++){var r=null;if(window.Cookies&&(r=window.Cookies.get("fp"+i)),null==r){n=!0;break}}!0===n&&"premium"!==this.level&&(window.ilovepdfConfig.fileLimits=this.fileLimits=this.allFileLimits.temp_limits,"user"==this.level?this.allFileLimits.limits=this.allFileLimits.temp_limits:this.allFileLimits.registered_limits=this.allFileLimits.temp_limits,window.ilovepdfConfig.levelTemp=this.levelTemp="premium")}},t.prototype.init=function(){if("tool"==this.action&&null!=this.tool){var e=this.tool==this.subtool?this.tool.replace("image",""):this.tool.replace("image",this.subtool);this.alias=e,window.Cookies&&window.Cookies.set("lastTool",e),this.variableUserLevel(),this.initTool(),p.Network.checkNetwork()}},t.prototype.beforeInit=function(){var t=this,n=this;return new Promise(function(r,o){if(null!=n.parentId){u.Tools.loadingFromPreviousStart(),window.ga("send","event","tool","chained",t.tool+"-"+t.parentTool);var a=new l.Chain({parentId:n.parentId,workerServer:n.workerServer,tool:n.tool,token:n.token});a.makeChild().then(function(t){n.uploadManager.taskId=n.uploadManager.plupload.taskId=n.processManager.api.taskId=n.processManager.taskId=n.taskId=t.task,n.uploadManager.plupload&&n.uploadManager.plupload.uploader&&n.uploadManager.plupload.uploader&&n.uploadManager.plupload.uploader.settings&&(n.uploadManager.plupload.uploader.settings.multipart_params.task=n.uploadManager.taskId);try{n.optionsManager.limits&&n.optionsManager.limits.checkFileLimits(0,Object.keys(t.files).length)}catch(t){return u.Tools.loadingFromPreviousFail(),void e("#closePrevious").on("click",function(){u.Tools.loadingFromPreviousEnd(),r()})}for(var o in t.files)if(t.files.hasOwnProperty(o)){var s=u.Tools.randomId(),l=new i.File({id:s,canvasId:s,filename:t.files[o],name:t.files[o],server_filename:o,url:a.getFileUrl(t.task,o),loaded:100,percent:100,origin:"chained",runtime:"html5"});n.files.addFile(l),n.optionsManager.fileAdded(l,n.uploadManager.id)}u.Tools.loadingFromPreviousEnd(),r()},function(t){""==t?(s.configureScope(function(e){e.setExtra("parent_id",n.parentId),e.setExtra("tool",n.tool)}),s.captureMessage("Error on child creation: Options fail",c.Severity.Error)):t.error&&t.error.type&&"TaskRestartError"==t.error.type?(s.configureScope(function(e){e.setExtra("parent_id",n.parentId),e.setExtra("tool",n.tool),e.setExtra("error",t)}),s.captureMessage("Error on child creation, parent removed",c.Severity.Error)):(s.configureScope(function(e){e.setExtra("parent_id",n.parentId),e.setExtra("tool",n.tool),e.setExtra("error",t)}),s.captureMessage("Error on child creation",c.Severity.Error)),u.Tools.loadingFromPreviousFail(),e("#closePrevious").on("click",function(){u.Tools.loadingFromPreviousEnd(),r()})})}else r()})},t.prototype.initTool=function(){this.config=new a.Config({tool:this.tool,subtool:this.subtool,config:this.configData}),this.initProcessManager(),this.optionsManager=this.getOptionsManager(),this.initUploader(),this.beforeInit().then(function(){},function(){}),this.listenEventTaskIdChanged()},t.prototype.initProcessManager=function(){this.processManager=new r.Process({taskId:this.taskId,tool:this.tool,site:this.site,subtool:this.subtool,options:{},startServer:this.startServer,workerServer:this.workerServer,files:this.files,token:this.token,userId:this.userId,downloadUrl:this.downloadUrl})},t.prototype.initUploader=function(){this.uploadManager=new o.UploadManager({id:"pickfiles",files:this.files,startServer:this.startServer,workerServer:this.workerServer,optionsManager:this.optionsManager,processManager:this.processManager,config:this.config,token:this.token,taskId:this.taskId,tool:this.tool,servers:this.servers})},t.prototype.getOptionsManager=function(){return null},t.prototype.getToolOptions=function(){return{processManager:this.processManager,tool:this.tool,subtool:this.subtool,toolText:this.toolText,startServer:this.startServer,workerServer:this.workerServer,defaultOptions:this.defaultOptions,files:this.files,pdfViewer:this.pdfViewer,config:this.config,fileLimits:this.fileLimits,allFileLimits:this.allFileLimits,level:this.level,levelTemp:this.levelTemp,userToken:this.userToken}},t.prototype.changeServer=function(e){this.uploadManager.workerServer=e,this.uploadManager.plupload.workerServer=e,this.uploadManager.plupload.uploader.setOption("url",e+"/"+this.uploadManager.plupload.apiVersion+"/upload"),"changeServer"in this.optionsManager&&this.optionsManager.changeServer(e),this.uploadManager.workerServer=e},t.prototype.listenEventTaskIdChanged=function(){var e=this;window.addEventListener("taskIdChanged",function(t){var n=t.detail.taskId;e.processManager.taskId=n,e.uploadManager.plupload.changeTaskId(n),e.processManager.api.taskId=n,window.ilovepdfConfig.taskId=e.processManager.taskId=e.processManager.api.taskId=n})},t}();t.IloveTool=h}).call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.getBase64=function(e,t){return void 0===t&&(t=!1),new Promise(function(n,i){var r=new FileReader,o=null;r.readAsDataURL(e.getNative()),r.onerror=function(e){},r.onload=function(){o=r.result,1!=t?(o=o.substring(o.indexOf(",")+1),n(o)):n(o)}})},e.urlToBase64=function(e){return new Promise(function(t,n){var i=new XMLHttpRequest;i.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(i.response)},i.onerror=function(e){},i.open("GET",e),i.responseType="blob",i.send()})},e.preload=function(e){(new Image).src=e},e.calculateAspectRatioFit=function(e,t,n,i){var r=Math.min(n/e,i/t);return{width:e*r,height:t*r}},e}();t.ImageHelper=i},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(19),r=n(172),o=n(175),a=n(36),s=n(9),l=n(141),c=n(17),u=n(12);t.ELEMENT_BASE_WIDTH=140,t.ELEMENT_BASE_HEIGHT=24,t.ELEMENT_BASE_FONT_SIZE=16,t.ELEMENT_BASE_ADJUST_X=12,t.ELEMENT_BASE_ADJUST_Y=2;var d=function(){function n(){this.id=i.Tools.randomId(),this.type="base",this.tipo="base",this.askSigner=!0,this.mode="request",this.cloneMode="current",this.filesPages={},this.childs=[],this.width=t.ELEMENT_BASE_WIDTH,this.height=t.ELEMENT_BASE_HEIGHT,this.fontSize=t.ELEMENT_BASE_FONT_SIZE,this.deferSilentActions={}}return n.prototype.setSigner=function(e){void 0===e&&(e=null),this.signer=e},n.prototype.fromTemplate=function(){},n.prototype.setZoom=function(t){void 0===t&&(t=null);var n=e(".editor__content").width()/800;this.applyZoom(t,n)},n.prototype.applyZoom=function(e,t){void 0===e&&(e=null),void 0===t&&(t=1),!0!==isNaN(t)&&0!=t||(t=1),this.zoom||(this.zoom=1),this.zoomSize(e,t),this.sendEventElementChanged()},n.prototype.zoomPosition=function(e,t){void 0===e&&(e=null),void 0===t&&(t=1),!0!==isNaN(t)&&0!=t||(t=1),this.position.x=this.position.x*t,this.position.y=this.position.y*t,this.applyZoomPosition(e)},n.prototype.applyZoomPosition=function(t){void 0===t&&(t=null),e(null==t?'[data-id="'+this.id+'"]':"#"+t).css({top:this.position.y+"px",left:this.position.x+"px"})},n.prototype.zoomSize=function(e,t){void 0===e&&(e=null),void 0===t&&(t=1),!0!==isNaN(t)&&0!=t||(t=1),this.zoom=this.zoom*t,this.width=this.width*t,this.height=this.height*t,this.fontSize=this.fontSize*t,this.applyZoomSize(e,t)},n.prototype.applyZoomSize=function(t,n){void 0===t&&(t=null),void 0===n&&(n=1),!0!==isNaN(n)&&0!=n||(n=1);var i=e(null==t?'[data-id="'+this.id+'"]':"#"+t);this.applyZoomApplied(i,n),this.applyZoomAppliedContent(i,n),this.applyZoomAppliedContentImg(i,n)},n.prototype.applyZoomApplied=function(e,t){!0!==isNaN(t)&&0!=t||(t=1),e.css({width:this.width+"px",height:this.getElementTotalHeightByRatio(t)+"px"})},n.prototype.applyZoomAppliedContent=function(e,t){!0!==isNaN(t)&&0!=t||(t=1),e.find(" .sign__element__content__applied").css({height:this.height+"px",width:this.width+"px","font-size":this.fontSize+"px","line-height":this.height+"px"}),e.find(" .sign__element__name").css({height:this.height+"px",width:this.width+"px","font-size":this.fontSize+"px","line-height":this.height+"px"});try{var n=e.css("padding").split(" ").map(function(e){return Number(e.replace("px",""))*t+"px"});e.css({padding:n.join(" ")}),e.find(".sign__element__icon").css("transform","scale("+this.zoom+")")}catch(e){}},n.prototype.applyZoomAppliedContentImg=function(e,t){var n=e.find(".sign__element__content img");1==n.hasClass("sign__element__textImage")?n.css({maxWidth:"100%",maxHeight:"70%",width:"auto",height:"auto"}):n.css({maxWidth:"100%",maxHeight:"100%",width:"auto",height:"auto"})},n.prototype.applyResize=function(e,t){void 0===e&&(e=null),void 0===t&&(t=1),1!=isNaN(t)&&0!=t||(t=1,c.configureScope(function(e){e.setExtra("window.width",window.innerWidth),e.setExtra("window.height",window.innerHeight)}),c.captureMessage("Sign element - Ratio NaN error",u.Severity.Info)),this.ratio=this.ratio*t,this.width=this.width*t,this.height=this.height*t,this.fontSize=this.fontSize*t,this.applySize(e,t)},n.prototype.applyPosition=function(t){void 0===t&&(t=null),e(null==t?'[data-id="'+this.id+'"]':"#"+t).css({top:this.position.y+"px",left:this.position.x+"px"})},n.prototype.cleanSize=function(t){void 0===t&&(t=null);var n=e(null==t?'[data-id="'+this.id+'"]':"#"+t);n.css({width:this.width+"px",height:this.height+"px"}),n.find(".sign__element__content__applied").css({width:"",height:""})},n.prototype.applySize=function(t,n){void 0===t&&(t=null),void 0===n&&(n=1),1!=isNaN(n)&&0!=n||(n=1);var i=e(null==t?'[data-id="'+this.id+'"]':"#"+t);this.applySizeApplied(i,n),this.applySizeAppliedContent(i,n),this.applySizeAppliedContentImg(i,n)},n.prototype.applySizeApplied=function(e,t){void 0===t&&(t=1),e.css({width:this.width+"px",height:this.getElementTotalHeight()*t+"px"})},n.prototype.applySizeAppliedContent=function(e,t){void 0===t&&(t=1),e.find(" .sign__element__content__applied").css({height:this.height+"px",width:this.width+"px","font-size":this.fontSize+"px","line-height":this.height+"px"}),e.find(" .sign__element__content__name").css({height:this.height+"px",width:this.width+"px","font-size":this.fontSize+"px","line-height":this.height+"px"})},n.prototype.applySizeAppliedContentImg=function(e,t){void 0===t&&(t=1);var n=e.find(".sign__element__content img"),i=e.find(".sign__element__content__applied");if(1==n.hasClass("sign__element__textImage")?n.css({maxWidth:"100%",maxHeight:"70%",width:"auto",height:"auto"}):n.css({maxWidth:"100%",maxHeight:"100%",width:"auto",height:"auto"}),i.width()>n.width()&&i.height()>n.height()){var r=l.ImageHelper.calculateAspectRatioFit(n.width(),n.height(),i.width(),i.height());1==n.hasClass("sign__element__textImage")&&(r=l.ImageHelper.calculateAspectRatioFit(n.width(),n.height(),i.width(),.7*i.height())),n.css({maxWidth:"initial",maxHeight:"initial",width:r.width+"px",height:r.height+"px"})}},n.prototype.trim=function(t){void 0===t&&(t=null);e(null==t?'[data-id="'+this.id+'"]':"#"+t)},n.prototype.insert=function(t){var n=i.Tools.randomId(),o=this;t=this.recalculateInsertPoint(t),this.position={x:t.x,y:t.y};var l=this.makeElement(n,t);return r.ElementHelper.append(l,t,this.signer),e("#"+n).addClass(this.mode),e("#"+n+" .sign__element__content__applied").css({"font-size":this.fontSize+"px","line-height":this.height+"px",height:this.height+"px",width:this.width+"px"}),e("#"+n+" .sign__element__content__applied img").hasClass("sign__element__textImage")?e("#"+n+" .sign__element__content__applied img").css({"max-width":this.width+"px","max-height":.7*this.height+"px"}):e("#"+n+" .sign__element__content__applied img").css({"max-width":this.width+"px","max-height":this.height+"px"}),e("#"+n).css({width:this.width+"px",height:this.getElementTotalHeight()+"px"}),"request"==this.mode?(this.initDraggable(n),this.initRequestActions(n),this.applyData()):"selfsigned"==this.mode?(this.initDraggable(n),this.initSelfsignedActions(n),this.applySingature()):this.signatureModel&&"signed"==this.mode?(this.signed=!0,this.applySingature()):this.signatureModel&&"sign"==this.mode?(this.applyData(),this.initSignActions(n)):this.signatureModel&&"review"==this.mode&&this.initReviewActions(n),a.Tooltip.init("#"+n+".tooltip, #"+n+" .tooltip"),"sign"==this.mode&&a.Tooltip.setContent("#"+n,s.Lang.t("clickToSign")),this.filesPages[t.file]||(this.filesPages[t.file]=[]),this.filesPages[t.file].push(t.page),this.filesPages[t.file].sort(),this.childs.push(n),r.ElementHelper.setPreviewBullet(t),e("#"+n+" .sign__element__link").on("click",function(){o.sendEventDetachElement(n,o.id)}),e("#groupActions").css("opacity",0),e("#"+n).css("opacity",0),window.setTimeout(function(){e("#"+n).css("opacity",""),e("#groupActions").css("opacity","")},100),this.sendEventElementAdded(),this.sendEventElementChanged(),this.checkLinked(),n},n.prototype.getElementTotalHeight=function(){return this.height},n.prototype.getElementTotalHeightByRatio=function(e){return this.height},n.prototype.initDraggable=function(t){var n=this;this.position={x:parseInt(e("#"+t).css("left")),y:parseInt(e("#"+t).css("top"))},o.default("#"+t).draggable({ignoreFrom:".sign__element__close, .sign__group__actions, .sign__element--list, .sign__element__custom, sign__element__edit",modifiers:[o.default.modifiers.restrictRect({restriction:"parent"})],listeners:{start:function(t){a.Tooltip.hide(e(t.currentTarget))},move:function(e){n.position.x+=e.dx,n.position.y+=e.dy,e.currentTarget.style.top=n.position.y+"px",e.currentTarget.style.left=n.position.x+"px"},end:function(t){n.onDragEnd(t),a.Tooltip.show(e(t.currentTarget)),n.sendEventElementChanged()}}})},n.prototype.onDragEnd=function(t){e('[data-id="'+this.id+'"]').css({top:this.position.y+"px",left:this.position.x+"px"})},n.prototype.initRequestActions=function(e){},n.prototype.initSelfsignedActions=function(e){},n.prototype.initSignActions=function(t){var n=this;1!=this.autoApply?(e("#"+t).on("click",function(){e("#"+t).not(".signed")&&n.applySingature()}),a.Tooltip.init("#"+t+".tooltip")):this.applySingature()},n.prototype.initReviewActions=function(e){1!=this.autoReviewApply||this.applySingature()},n.prototype.recalculateInsertPoint=function(e){return e},n.prototype.makeElement=function(t,n){return e(document.createElement("div"))},n.prototype.addLinkedItems=function(t){var n=e(e("#linkTemplate").html());return e(t).find(".sign__element__name").append(n.clone()),e(t).find(".sign__element__content").append(n.clone()),t},n.prototype.sendEventElementAdded=function(){if(!0!==this.insertSilentMode){var e=new CustomEvent("elementAdded",{detail:{elementId:this.id}});window.dispatchEvent(e)}else this.deferSilentActions.sendEventElementAdded=!0},n.prototype.sendEventElementChanged=function(){if(!0!==this.insertSilentMode){var e=new CustomEvent("elementChanged",{detail:{elementId:this.id,signed:this.signed,type:this.type,auto:this.autoApply}});window.dispatchEvent(e)}else this.deferSilentActions.sendEventElementChanged=!0},n.prototype.sendEventDetachElement=function(e,t){var n=new CustomEvent("detachElement",{detail:{elementId:e,parentId:t}});window.dispatchEvent(n)},n.prototype.remove=function(t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var i=this;if(null==t)return this.childs.forEach(function(t){r.ElementHelper.removePreviewBullet(t),e("#"+t).remove()}),this.filesPages={},this.childs=[],this.removed=!0,void r.ElementHelper.sendEventElementRemoved(this.id);this.childs.forEach(function(n){if(t==n){r.ElementHelper.removePreviewBullet(n);var o=e("#"+n).parent(),a=o.attr("data-file"),s=parseInt(o.attr("data-page"));if(i.filesPages[a]){var l=i.filesPages[a].indexOf(s);-1!==l&&i.filesPages[a].splice(l,1)}e("#"+n).remove()}});var o=this.childs.indexOf(t);-1!==o&&this.childs.splice(o,1),0!=this.childs.length?this.checkLinked():0==n?(this.removed=!0,r.ElementHelper.sendEventElementRemoved(this.id)):(this.removedSilent=!0,r.ElementHelper.sendEventElementRemoved(this.id))},n.prototype.updateSigner=function(t){e('[data-id="'+this.id+'"').removeClass(this.signer.colorClass),this.signer=t,e('[data-id="'+this.id+'"').addClass(this.signer.colorClass)},n.prototype.applySingature=function(){if(this.signatureModel)if(!0!==this.insertSilentMode){this.signed=!0,"sign"!=this.mode&&"review"!=this.mode||(this.mode="signed");var t=e('[data-id="'+this.id+'"]');if(t.removeClass("sign").addClass(this.mode),t.attr("title",this.signatureModel.signature),a.Tooltip.disable(t),a.Tooltip.setContent(t,this.signatureModel.signature.trunc(25)),t[0])try{t.find(".sign__element__id").css("width",t[0].getBoundingClientRect().width+"px"),this.trim()}catch(e){}this.sendEventElementChanged()}else this.deferSilentActions.applySingature=!0},n.prototype.insertFromData=function(e,t){},n.prototype.getDataRatio=function(t){if(void 0===t&&(t=null),null==t)for(var n in this.filesPages)t=n;var i=this.filesPages[t],r=e('.editor__page[data-file="'+t+'"][data-page="'+i[0]+'"]');return parseFloat(r.attr("data-height"))/r.height()},n.prototype.getData=function(n,i){var o=this;void 0===n&&(n=null),void 0===i&&(i=null);if(null==n){var a=[];for(var s in this.filesPages)this.filesPages.hasOwnProperty(s)&&(a=a.concat(this.getData(s)));return a}var l=this.filesPages[n],d=e('.editor__page[data-file="'+n+'"][data-page="'+l[0]+'"]'),p=parseFloat(d.attr("data-width")),f=parseFloat(d.attr("data-height"));if(0==e('[data-id="'+this.id+'"]').length||0==e('[data-id="'+this.id+'"]').width())return[];var h=e('[data-id="'+this.id+'"]').first(),g=this.position.x,v=this.position.y;if("signature-element"!==this.type&&"initials-element"!==this.type){if(1==e("body").hasClass("mode-multiple"))g+=t.ELEMENT_BASE_ADJUST_X,v+=(O=(this.height-this.fontSize)/4-1)*O/2;else v+=t.ELEMENT_BASE_ADJUST_Y,v+=(O=(this.height-this.fontSize)/4-1)*O/2;e("body").hasClass("tool-signature")}var m=p*g/d.width(),y=f*v/d.height(),_=h[0].getBoundingClientRect().height,b=f/d.height(),w=_*b,S=this.fontSize*b,E=0;if("signature-element"==this.type){var x=h.find(".sign__element__id"),k=x[0].getBoundingClientRect().height,C=0;0!=k&&(C=parseFloat(x.css("margin-top"))),w=w-(E=k*b)-(C*=b)}if(isNaN(w))return[];var P={type:this.type.replace("-element",""),position:m+" -"+y,x:this.position.x,y:this.position.y,pages:r.ElementHelper.makeRange(this.filesPages[n].join(",")),size:Math.round(w),size_full:w,font_size:Math.round(S),reference:this.reference};if("signature-element"==this.type&&(P.frame_size=Math.round(E)),"signature-element"==this.type&&(1==e("body").hasClass("selfsigned")||1==h.hasClass("signed"))){var T=Math.round(h.find(".sign__element__content__applied img").height()*b),O=P.size-T;P.size=T,y+=O,P.position=m+" -"+y}if(0==P.size){var M={};this.childs.forEach(function(t,n){M[t]=e("#"+t).length}),c.configureScope(function(e){e.setExtra("elementData",P),e.setExtra("element",o),e.setExtra("childsOnView",M)}),c.captureMessage("Signature element size error",u.Severity.Error)}if(isNaN(m)){var I={};this.childs.forEach(function(t,n){I[t]=e("#"+t).length}),c.configureScope(function(e){e.setExtra("elementData",P),e.setExtra("element",o),e.setExtra("childsOnView",I)}),c.captureMessage("Signature element position NaN error",u.Severity.Error)}return[P]},n.prototype.copyProperties=function(e){this.type,e.type},n.prototype.detach=function(t){var n=r.ElementHelper.createElement(this.type);n.signer=this.signer,n.signatureModel=this.signatureModel,n.mode=this.mode;var i=e("#"+t),o=i.parent(),a=o.attr("data-file"),s=parseInt(o.attr("data-page")),l=this.filesPages[a].indexOf(s);-1!==l&&this.filesPages[a].splice(l,1);var c=this.childs.indexOf(t);-1!==c&&this.childs.splice(c,1),r.ElementHelper.removePreviewBullet(t),i.remove();var u={file:a,page:s,x:this.position.x,y:this.position.y};return n.insert(u),this.checkLinked(),n},n.prototype.clone=function(e){return 1==this.existsInPage(e.file,e.page)?null:this.insert(e)},n.prototype.applyStylesFrom=function(e){},n.prototype.existsInPage=function(e,t){return this.filesPages[e]&&this.filesPages[e].includes(t)},n.prototype.checkLinked=function(){if(!0!==this.insertSilentMode){if(this.childs&&this.childs.length>1){var t=e('[data-id="'+this.id+'"] .sign__element__link');t.show();var n=this.type.replace("-element","");return n="type"+n.charAt(0).toUpperCase()+n.slice(1),void a.Tooltip.setContent(t,s.Lang.t("linked",{quantity:this.childs.length,elementType:s.Lang.t(n)}))}e('[data-id="'+this.id+'"] .sign__element__link').hide()}else this.deferSilentActions.checkLinked=!0},n.prototype.checkHasSignerDataInFile=function(e,t){return this.filesPages&&this.filesPages[e]&&this.signer.id==t},n.prototype.applyData=function(){var t=e('[data-id="'+this.id+'"]');t.attr("title",this.signer.name),a.Tooltip.setContent(t,this.signer.name)},n.prototype.getWidthInView=function(){return e('[data-id="'+this.id+'"]').first().width()},n.prototype.getHeightInView=function(){return e('[data-id="'+this.id+'"]').first().height()},n.prototype.setData=function(e){if(void 0===e&&(e=null),null!=e){var t={};if(e.info)try{t=JSON.parse(e.info)}catch(e){return}for(var n in t.content=e.content,t)this.hasOwnProperty(n)&&(this[n]=t[n]);this.setSize(e)}},n.prototype.setSize=function(t){if(void 0===t&&(t=null),null!=t&&!isNaN(parseFloat(t.size))){var n=e('.editor__page[data-file="'+t.file+'"][data-page="'+t.page+'"]'),i=parseFloat(n.attr("data-height"))/n.height();this.height=parseFloat(t.size)/i}},n.prototype.setNormalizeSize=function(t){if(void 0===t&&(t=null),null!=t&&!isNaN(parseFloat(t.size))){var n=e('.editor__page[data-file="'+t.file+'"][data-page="'+t.page+'"]'),i=parseFloat(n.attr("data-height"))/n.height();this.height=parseFloat(t.size)/i}},n.prototype.inSamePage=function(e,t){return this.filesPages[e]&&this.filesPages[e].includes(t)},n.prototype.initInsertSilentMode=function(){this.insertSilentMode=!0},n.prototype.endInsertSilentMode=function(){this.insertSilentMode=!1,this.sendDeferActions()},n.prototype.sendDeferActions=function(){!0===this.deferSilentActions.applySingature&&this.applySingature(),!0===this.deferSilentActions.checkLinked&&this.checkLinked(),!0===this.deferSilentActions.sendEventElementAdded&&this.sendEventElementAdded(),!0===this.deferSilentActions.sendEventElementChanged&&this.sendEventElementChanged(),this.deferSilentActions={}},n}();t.ElementBase=d}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(144),r=n(145),o=n(100),a=n(36),s=function(){function t(e){this.id="pickfiles",this.optionsManager=null,this.processManager=null,this.config=null,this.files=null,this.workerServer=null,this.startServer=null,this.token=null,this.tool=null,this.taskId=null,this.servers=null,Object.assign(this,e),this.plupload=null,this.drive=null,this.dropbox=null,this.firstFile=!1,this.init()}return t.prototype.init=function(){this.plupload=new o.PluploadUpload({id:this.id,optionsManager:this.optionsManager,processManager:this.processManager,config:this.config,files:this.files,workerServer:this.workerServer,startServer:this.startServer,token:this.token,tool:this.tool,taskId:this.taskId,servers:this.servers,haveDrop:!0,dropElement:"workArea"}),window.pluploader=this.plupload,this.drive=new i.DriveUpload({id:"gdrive_file_selector",optionsManager:this.optionsManager,processManager:this.processManager,config:this.config}),this.dropbox=new r.DropboxUpload({id:"dropbox_file_selector",optionsManager:this.optionsManager,processManager:this.processManager,config:this.config});var t=this;e("#pickfiles").on("click",function(){t.firstClick()}),a.Tooltip.disable("#pickfiles"),e("#gdrive_file_selector").on("click",function(){t.firstClick()}),e("#dropbox_file_selector").on("click",function(){t.firstClick()})},t.prototype.firstClick=function(){if("pickfiles"==this.id){0==this.firstFile&&(this.firstFile=!0)}},t}();t.UploadManager=s}).call(this,n(1))},function(e,t,n){"use strict";(function(e){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(119),a=n(17),s=function(t){function n(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.optionsManager=null,n.processManager=null,n.pickerApiLoaded=!1,n.oauthToken=null,n.userEmail=null,n.id=null,n.config=null,Object.assign(n,e),n.src="//apis.google.com/js/client.js",n.init(),n}return r(n,t),n.prototype.getUploadParams=function(e){return{task:this.processManager.taskId,google_email:this.userEmail,cloud_source:"drive",cloud_file:e.id,preview:1==window.processStart?0:1,pdfinfo:1==window.pdfinfo?1:0}},n.prototype.drive=function(){var t=this,n=this.config.getConfig("mimeTypes");function i(){e("#"+t.id).addClass("active").on("click",function(){window.gapi.auth2.authorize({client_id:t.clientId,scope:t.scope,fetch_basic_profile:!1,immediate:!1},o)})}function r(){t.pickerApiLoaded=!0,a()}function o(e){e&&!e.error&&(t.oauthToken=e.access_token,window.gapi.client.load("oauth2","v2",function(){window.gapi.client.oauth2.userinfo.get().execute(function(e){t.userEmail=e.email})}),a())}function a(){if(t.pickerApiLoaded&&t.oauthToken){var e=window.google.picker.ViewId.DOCS;if("Pdf files"==n[0].title)e=window.google.picker.ViewId.PDFS;else if("Word files"==n[0].title)e=window.google.picker.ViewId.DOCUMENTS;else if("Excel files"==n[0].title)e=window.google.picker.ViewId.SPREADSHEETS;else if("Powerpoint files"==n[0].title)e=window.google.picker.ViewId.PRESENTATIONS;else if("Image files"==n[0].title)e=window.google.picker.ViewId.DOCS_IMAGES;else if(void 0!=n[0].mime){new window.google.picker.View(window.google.picker.ViewId.DOCS).setMimeTypes(n[0].mime)}(new window.google.picker.PickerBuilder).enableFeature(window.google.picker.Feature.NAV_HIDDEN).enableFeature(window.google.picker.Feature.MULTISELECT_ENABLED).addView(e).setOAuthToken(t.oauthToken).setDeveloperKey(t.developerKey).setCallback(s).build().setVisible(!0)}}function s(n){if(n[window.google.picker.Response.ACTION]==window.google.picker.Action.PICKED){for(var i=n[window.google.picker.Response.DOCUMENTS],r=function(e){return window.gapi.client.request({path:"/drive/v2/files/"+e,method:"GET"})},o=window.gapi.client.newBatch(),a=0;a<i.length;a++){n[window.google.picker.Response.DOCUMENTS].length;var s=n[window.google.picker.Response.DOCUMENTS][a];s[window.google.picker.Document.URL],s[window.google.picker.Document.NAME];var l=r(s[window.google.picker.Document.ID]);o.add(l)}o.then(function(n,i){(n.status=200)&&e.each(n.result,function(e,n){200==n.status&&t.fileAdded(n.result).then(function(){t.uploadFile(n.result,0)},function(e){t.optionsManager.removeFile(n.result.id)})})},function(e){})}}window.gapi.load("auth2",i),window.gapi.load("picker",r)},n.prototype.fileAdded=function(e){e.runtime="html5",e.percent=0,e.service="drive",e.origin="drive",e.name=e.title,e.filename=e.title,e.uri=this.URL_API+"files/"+e.id+"?alt=media",e.uri=e.uri,e.url=e.thumbnailLink,e.size=e.fileSize,e.token=this.oauthToken,e.canvasId=e.id;try{e.width=e.imageMediaMetadata.width,e.height=e.imageMediaMetadata.height}catch(e){}if(e.mimeType)switch(e.mimeType){case"application/vnd.google-apps.document":e.extension="docx";break;case"application/vnd.google-apps.presentation":e.extension="pptx";break;case"application/vnd.google-apps.spreadsheet":e.extension="xlsx"}return this.optionsManager.files.addFile(e),this.optionsManager.fileAdded(e,"drive")},n.prototype.uploadFile=function(e,t){var n=this;void 0===t&&(t=0);var i=this,r=500*t;window.setTimeout(function(){n.processManager.api.request("POST","upload",i.getUploadParams(e)).then(function(t){i.processManager.files.updateFile(e.id,{process:100,percent:100,server_filename:t.server_filename}),i.optionsManager.fileUploaded(e.id,t)},function(t){(t=JSON.parse(t)).email=i.userEmail,t.file=e.id,e.error=!0,i.processManager.files.updateFile(e.id,{process:0,percent:0,error:!0}),i.optionsManager.invalidUpload({error:"CloudError",file:{id:e.id}}),a.configureScope(function(e){e.setExtra("error",t)}),a.captureMessage("Upload from drive error"),i.optionsManager.invalidUpload(t)})},r)},n.prototype.downloadFile=function(e){var t=this;return new Promise(function(n,i){var r=new XMLHttpRequest;r.responseType="arraybuffer",r.onload=function(){if(200===r.status){var e=r.response;n(e)}},r.onprogress=function(e){e.loaded,e.total},r.open("GET",t.URL_API+"files/"+e.id+"?alt=media"),r.setRequestHeader("Authorization","Bearer "+t.oauthToken),r.send()})},n}(o.DriveService);t.DriveUpload=s}).call(this,n(1))},function(e,t,n){"use strict";(function(e){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(120),a=n(17),s=function(t){function n(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.optionsManager=null,n.processManager=null,n.id=null,n.config=null,Object.assign(n,e),n.init(),n}return r(n,t),n.prototype.dropbox=function(){var t=this,n=this.config.getConfig("mimeTypes")[0].extensions.split(","),i=[];e.each(n,function(e,t){i.push("."+t)}),window.Dropbox.choose({success:function(n){e.each(n,function(e,n){t.fileAdded(n),t.uploadFile(n)})},cancel:function(){},error:function(e){a.configureScope(function(t){t.setExtra("error",e)}),a.captureMessage("Dropbox upload error")},linkType:"direct",multiselect:!0,extensions:i})},n.prototype.fileAdded=function(e){e.id=e.id.replace(":",""),e.runtime="html5",e.percent=0,e.service="dropbox",e.url=e.link,e.size=e.bytes,e.canvasId=e.id,e.filename=e.name,e.origin="dropbox",this.optionsManager.files.addFile(e),this.optionsManager.fileAdded(e,"dropbox")},n.prototype.getUploadParams=function(e){return{task:this.processManager.taskId,cloud_source:"dropbox",cloud_file:e.link,dropbox_link:e.link,preview:1==window.processStart?0:1,pdfinfo:1==window.pdfinfo?1:0}},n.prototype.uploadFile=function(e){var t=this;this.processManager.api.request("POST","upload",this.getUploadParams(e)).then(function(n){t.processManager.files.updateFile(e.id,{process:100,percent:100,server_filename:n.server_filename}),t.optionsManager.fileUploaded(e.id,n)},function(n){e.error=!0,t.processManager.files.updateFile(e.id,{process:0,percent:0,error:!0}),t.optionsManager.invalidUpload({error:"CloudError",file:{id:e.id}}),a.configureScope(function(e){e.setExtra("error",JSON.parse(n))}),a.captureMessage("Upload from dropbox error")})},n}(o.DropboxService);t.DropboxUpload=s}).call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(47),r=function(){function e(e){this.parentId=null,this.tool=null,this.token=null,Object.assign(this,e)}return e.prototype.makeChild=function(){var e=this,t=this;return new Promise(function(n,r){null!=t.parentId?(e.api=new i.Api({taskId:null,tool:t.tool,workerServer:t.workerServer,token:t.token}),e.api.next(t.parentId,t.tool).then(function(e){n(e)},function(e){r(e)})):n()})},e.prototype.getFileUrl=function(e,t){return this.api.nextFile(e,t)},e}();t.Chain=r},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(){}return t.init=function(){e(document).on({"show.bs.modal":function(){var t=1050;e(".modal:visible, .dialog:visible").each(function(n,i){t=Math.max(t,parseInt(e(i).css("z-index"))+10)}),e(this).css("z-index",t),setTimeout(function(){e(".modal-backdrop").not(".modal-stack").css("z-index",t-1).addClass("modal-stack")},0)},"hidden.bs.modal":function(){e(".modal:visible, .dialog:visible").length>0&&setTimeout(function(){e(document.body).addClass("modal-open")},0)}},".modal")},t}();t.Modal=n}).call(this,n(1))},function(e){e.exports={default:{mimeTypes:[{title:"All files"}],multiSelection:!0}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(72),r=n(64),o=n(9),a=n(36),s=n(17),l=n(12),c=n(19),u=n(16),d=n(91),p=n(70),f=n(78),h=n(150),g=n(90),v=n(61),m=function(){function t(t){void 0===t&&(t={}),this.config={},this.processManager=null,this.tool=null,this.subtool=null,this.toolText="Process",this.template=null,this.defaultOptions={},this.fileLimits=null,this.allFileLimits=null,this.level="user",this.userToken=null,this.workerServer=null,this.startServer=null,this.hideRotation=!1,this.levelTemp="user",this.options={},this.values={},this.files=null,this.started=!1,this.workareaStarted=!1,this.viewManager=null,this.limits=null,this.ignoreLimits=!1,this.damagedRemove=!1,this.hideProblemForm=!1,this.premiumTask=!1,this.processBtnPulseTimeout=7e3,this.showFileGroups=!0,this.processBlock=!1,this.checkServerStatusOnStart=!1,Object.assign(this,t),null==this.subtool&&(this.subtool=this.tool),null==this.toolText&&(this.toolText=this.tool),this.limits=new r.Limits({files:this.files,fileLimits:this.fileLimits,allFileLimits:this.allFileLimits,tool:this.tool,subtool:this.subtool}),this.removedFiles=0,window.processStart=!1,window.iuser=u.UserModel,p.LinkTitle.disable(e("#pickfiles")),this.tryInitByParent()}return t.prototype.tryInitByParent=function(){var t=this;this.files.files.length>0&&(this.init(),e.each(this.files.files,function(e,n){t.fileAdded(n,"parent").then(function(){},function(){})}))},t.prototype.init=function(){!0!==this.started&&(this.processManager.hideProblemForm=this.hideProblemForm,e("#sidebar").prepend(this.getInnactiveView()),this.startPanels(),this.started=!0),this.initViewManager()},t.prototype.initViewManager=function(){},t.prototype.checkLimits=function(e,t){try{this.limits.checkFileLimits(this.files.getFileSizeNotIgnored(),this.files.countNotIgnored())}catch(t){this.displayLimitsDialog(t),e=this.removeLimitFiles(e)}return e},t.prototype.displayLimitsDialog=function(t){var n=this,i=t==r.REASON.ERROR_SIZE?"mb":"files",o=t==r.REASON.ERROR_SIZE?this.limits.files.size()/1024/1024:this.limits.files.count(),a=!1===this.limits.findNextLevelLimit(this.limits.concreteTool,i,o),s=null;s=t===r.REASON.ERROR_FEATURE?function(){return new g.PremiumContext({tool:n.limits.concreteTool,limits:n.limits,triggerReason:t})}:a?function(){return new h.NoMoreLimitsContext({tool:n.limits.concreteTool,limits:n.limits,triggerReason:t})}:function(){return new g.PremiumContext({tool:n.limits.concreteTool,limits:n.limits,triggerReason:t})};var l=new v.default({dialogName:"Limits"});l.setContentBuilder(s),l.show(),e("#pickfiles").addClass("limitsShow")},t.prototype.removeLimitFiles=function(e){try{this.limits.checkFileLimits(this.files.getFileSizeNotIgnored(),this.files.countNotIgnored())}catch(n){var t=e.pop();try{t&&([].push(t.id),this.files.removeFile(t.id,!0))}catch(e){}e=this.removeLimitFiles(e)}return e},t.prototype.fileAdded=function(t,n,i){var r=this;void 0===i&&(i=!1);var l=this;return t.name&&(t.name=f.TextHelper.stripTags(t.name).replace('"',"")),t.filename&&(t.filename=f.TextHelper.stripTags(t.filename).replace('"',"")),new Promise(function(n,c){1==i&&(l.limits.addIgnoredFile(t.id),l.processManager.addIgnoredFile(t.id),l.files.updateFile(t.id,{ignored:!0}));try{l.limits.checkFileLimits(l.files.getFileSizeNotIgnored(),l.files.countNotIgnored())}catch(e){return r.displayLimitsDialog(e),l.setFilecount(),void c("limit file detected")}l.makeWorkarea().then(function(){var r=null;"function"==typeof t.getSource&&(r=t.getSource().getSource());var s={name:t.name,id:t.id,canvasId:t.canvasId,tool:l.tool,subtool:l.subtool,size:t.size,source:r,url:t.url,uri:t.uri,token:t.token,runtime:t.runtime,service:t.service,thumbnail:t.thumbnail};t.extension&&(s.name+="."+t.extension),0==l.config.getConfig("multiSelection")&&e("#uploader").hide(),l.viewManager.addFileDOM(s).then(function(e){l.setValue("numPages",e.numPages),l.printValues("numPages",e.numPages),l.setValue("width",e.width),l.printValues("height",e.height),l.fileReady(t),1!=i&&l.setFilecount(),l.initFileNameEditable(t.id),a.Tooltip.init(),n()},function(i){"PasswordException"==i.name?(e("#"+t.id).attr("title",o.Lang.t("paswordRequired")).attr("data-title",o.Lang.t("paswordRequired")),a.Tooltip.setContent(e("#"+t.id),o.Lang.t("paswordRequired"))):(e("#"+t.id).attr("title",o.Lang.t("damaged file?")).attr("data-title",o.Lang.t("damaged file?")),a.Tooltip.setContent(e("#"+t.id),o.Lang.t("damaged file?"))),e("#"+t.id+" .file__info__size").hide(),a.Tooltip.init();try{if("removeFile"==i.name)return void c()}catch(i){}if("function"==typeof l.damagedAction&&l.damagedAction(),1==l.damagedRemove)return l.fileAddError(t.id),void c();l.setFilecount(),a.Tooltip.init(e("#"+t.id+" .remove")),"noRenderMode"!=i&&e("#cover-"+t.canvasId).addClass("error"),n()}),0==l.config.getConfig("multiSelection")&&e("#uploader").hide()},function(e){s.captureMessage("Fail: createworkarea"),c()})})},t.prototype.initFileNameEditable=function(t){var n=this;if(!1!==this.nameEditable){var i=e("#"+t+" .file__info__name");if(0==i.length)return;var r=i.text().split(".").pop();i.attr("contenteditable","true"),i.attr("data-ext","true"),i.attr("data-orig",i.text()),i.on("change keyup mouseup",function(){n.files.updateFile(t,{rename:f.TextHelper.stripTags(i.text().replace(/"/g,""))})}),i.on("blur",function(){i.html(f.TextHelper.stripTags(i.text().replace(/"/g,""))),""!=i.text()&&i.text()!="."+r||i.html(i.attr("data-orig")),i.text()==r&&i.html(r+"."+r),i.text().split(".").pop()!=r&&(i.html(i.text()+"."+r),n.files.updateFile(t,{rename:i.text()}))})}},t.prototype.setFilecount=function(){var t=this.files.countNotIgnored(),n=e("#filecount");0!=n.length?n.html(t.toString()):e("#uploader").prepend('<div id="filecount">'+t+"</div>")},t.prototype.fileUploaded=function(e,t){this.files.updateFile(e,t);if(null!==this.viewManager){var n=this.files.getFile(e);null!=n&&"thumbnail"in n&&void 0!=n.thumbnail&&(n.thumbnail=this.workerServer+"/thumbnails/"+n.thumbnail),this.viewManager.fileUploaded(e,t)}},t.prototype.changeServer=function(e){this.processManager.workerServer=e,this.processManager.api.workerServer=e,this.workerServer=e},t.prototype.fileReady=function(t){this.fileChanged(t);var n=e("#"+t.id),i=c.Tools.bytesToSize(t.size);n.length>0&&"width"in t&&"height"in t?(i=i+" - "+t.width+"x"+t.height,n.attr("data-width",t.width).attr("data-height",t.height)):"file"in t&&t.file&&"numPages"in t.file&&(i=i+" - "+o.Lang.t("numPages",{numPages:t.file.numPages})),this.checkRotation(t),n.attr("title",i).attr("data-title",i).addClass("tooltip"),a.Tooltip.init(),this.setFilecount()},t.prototype.checkRotation=function(t){var n=t.name.substr(t.name.lastIndexOf(".")+1).toUpperCase();-1==["JPG","JPEG","PNG","GIF","PDF","DOC","DOCX","XLS","XLSX","PPT","PPTX"].indexOf(n)&&e("#"+t.canvasId+" .rotate").hide(),!0===this.hideRotation&&e(".rotate").hide()},t.prototype.makeWorkarea=function(){var t=this;return new Promise(function(n,i){1!=t.workareaStarted&&(t.workareaStarted=!0,e("#contentArea").hide(),e(".tool__workarea__rendered").css("display","flex").hide().fadeIn(),0==t.showFileGroups&&e("#fileGroups").hide(),t.moveUploader(),t.workareaActions(),setTimeout(function(){t.sidebarAds()},1e3)),n()})},t.prototype.workareaActions=function(){},t.prototype.moveUploader=function(){var t=e("#uploader");a.Tooltip.init(),e("#uploadDisk").on("click",function(){e("#uploader input").trigger("click")});var n=t.attr("data-title");if(void 0===n||"false"===n){var i=t.attr("title");t.attr("data-title",i)}t.attr("title",""),t.hide(),e("body").addClass("sidebar-active"),e("body").addClass("tool-"+this.tool),e(".uploader__extra a").removeClass("tooltip--right").addClass("tooltip--left"),this.init(),t.detach(),t.addClass("box"),e("#settingsToogle").on("click",function(){e(".tool").toggleClass("tool--toggle")}),e("#orderByName").on("click",function(){e(this).toggleClass("order--desc");var t=e(this).data("order");"asc"==t?e(this).data("order","desc"):e(this).data("order","asc"),e("#fileGroups > div").tsort({order:t})});try{t.insertAfter("#settingsToogle")}catch(e){}this.onUploaderMoved(t)},t.prototype.onUploaderMoved=function(e){var t=this;t.config.getConfig("multiSelection")&&e.fadeIn("slow",function(){t.onUploaderMovedAndShow()})},t.prototype.onUploaderMovedAndShow=function(){e("#pickfiles").addClass("tooltip"),a.Tooltip.enable(e("#pickfiles")),e(".modal.show").length>0||e("#pickfiles").hasClass("limitsShow")||(a.Tooltip.show(e("#pickfiles"),5e3),window.tooltip=a.Tooltip)},t.prototype.checkProcessBtn=function(){"no"==e(".option__panel--active").data("process")?e("#processTask").fadeOut():(e("#processTask").fadeIn(),this.checkProcessPulse())},t.prototype.checkProcessPulse=function(){if(window.Cookies&&1!=e("#processTask").is(":disabled")){var t=parseInt(Cookies.get("pulse"))||0;t++,window.Cookies.set("pulse",""+t),t<3&&setTimeout(function(){e("#processTask").addClass("pulse")},this.processBtnPulseTimeout)}},t.prototype.startPanels=function(){1!=this.panelsStarted&&(this.panelsStarted=!0,this.initDefaultOptions(),this.initDefaultValues(),this.initActions(),this.initFromUrl(),this.addButtonTask(),this.checkProcessBtn(),this.premiumActions())},t.prototype.premiumActions=function(){u.UserModel.isRealPremium()&&e("#ocr-options").show()},t.prototype.initDefaultOptions=function(){var t=this;e.each(t.defaultOptions,function(e,n){t.setOption(e,n)})},t.prototype.initDefaultValues=function(){var t=this;e.each(t.defaultOptions,function(e,n){t.setValue(e,n)}),t.setValue("numPages",0)},t.prototype.initFromUrl=function(){var t=location.hash.substr(1).split(","),n="",i="";t[0]&&(n=t[0]),t[1]&&(i=t[1]);try{""!=n&&0==e("#"+n).length&&(n="")}catch(e){n=""}if(""==n||"undefined"==n?(n=e(".option__panel--active").attr("id"),this.callPanelActions(n)):e(".option__panel").first().attr("id")!=n&&(e(".option__panel").first().removeClass("option__panel--active").addClass("option__panel--inactive"),e("#"+n).addClass("option__panel--active"),this.callPanelActions(n)),e("#"+n+" .option__tab__select__item").removeClass("option--active"),e("#"+n+" .option__tab__content").removeClass("option__tab__content--active"),void 0!==i&&""!=i)try{e("#tab-"+i).addClass("option--active"),e("#tab-content-"+i).addClass("option__tab__content--active"),this.callTabActions(i)}catch(e){}else{var r=e("#"+n+" .option__tab__select__item");r.length>0&&(i=r.first().attr("data-target"),r.first().trigger("click"))}},t.prototype.initActions=function(){var t=this;window.addEventListener("fileRemoved",function(e){t.fileRemoved(e.detail)},!1),e(".option__panel").length>1&&window.addEventListener("popstate",function(n){var i=n.state,r=null;r=null===i?e(".option__panel").first().attr("id"):i.id,e("#"+r).addClass("option__panel--inactive"),e(".option__panel").removeClass("option__panel--active"),e("#"+r).removeClass("option__panel--inactive").addClass("option__panel--active"),t.checkProcessBtn(),t.callPanelActions(r)}),e(".option__description__more__toggle").each(function(){e(this).on("click",function(t){t.stopPropagation(),e(this).parent().toggleClass("option__description__more--extend")})}),e(".option__select__item").on("click",function(){if(e(this).hasClass("option--disabled"))return!0;e(this).siblings().removeClass("option--active"),e(this).siblings().find(".option").removeClass("option--active"),"panel"!=e(this).data("action")&&e(this).addClass("option--active"),t.options[e(this).data("name")]=e(this).data("value")}),e(".option__tab__select__item").on("click",function(){if(e(this).hasClass("option--disabled"))return!0;var n=e(this).data("name"),i=e(this).data("value");e(this).siblings().removeClass("option--active"),e(this).addClass("option--active"),"undefined"!=n&&t.setOption(n,i);var r=e(this).data("target");e(this).parent().parent().find(".option__tab__content").removeClass("option__tab__content--active"),e("#tab-content-"+r).addClass("option__tab__content--active");var o=e(this).parent().parent().parent().attr("id"),a=e(this).data("target"),s=e(this).attr("id"),l={id:s};history.pushState(l,s,"#"+o+","+a),t.checkProcessBtn(),t.callTabActions(a)}),e(".option__image__item").on("click",function(n){if(e(this).hasClass("option--disabled"))return!0;var i=e(this).data("name"),r=e(this).data("value");e(this).siblings().removeClass("option--active"),e(this).addClass("option--active"),void 0!=i&&t.setOption(i,r)}),e(".option__panel .back").each(function(){e(this).on("click",function(){if(e(this).hasClass("option--disabled"))return!0;var n=e(this).data("target"),i=e(".option__panel--active").attr("id"),r={id:i};history.pushState(r,i,"#"),e("#"+n).addClass("option__panel--active"),e(".option__panel--active").removeClass("option__panel--active"),e("#"+n).removeClass("option__panel--inactive").addClass("option__panel--active"),t.checkProcessBtn(),t.callPanelActions(n)})}),e("[data-action]").each(function(){e(this).hasClass("option--disabled")||e(this).on("click",function(){t.callFormAction(e(this).data("action"),e(this),"click")})}),e(".option__panel .option").on("click",function(n){if(e(this).hasClass("option--disabled"))return!0;var i=e(this).data("name"),r=e(this).data("value");i&&r&&(t.options[i]=r,e('*[data-show="'+i+'"]').html(r))});var n=null;e("input.option").on("keyup mouseup",function(){clearTimeout(n);var i=e(this);n=setTimeout(function(){var e=i.attr("name"),n=i.val();t.setOption(e,n),null!=i.data("action")&&t.callFormAction(i.data("action"),i,"keyup")},1e3)}),e(".option:checkbox").change(function(){var n=e(this).attr("name"),i=e(this).is(":checked"),r=null;1==i&&e(this)[0].hasAttribute("data-checked")?r=e(this).attr("data-checked"):0==i&&e(this)[0].hasAttribute("data-unchecked")&&(r=e(this).attr("data-unchecked")),null!=r?t.setOption(n,r):t.setOption(n,i)}),e(".option:radio").change(function(){var n=e(this).attr("name"),i=e('[name="'+n+'"]:checked').val();null!=i&&t.setOption(n,i)}),e("select.option").on("change",function(){var n=e(this).attr("name"),i=e(this).val();t.setOption(n,i)}),e("textarea.option").on("keyup change",function(){var n=e(this).attr("name"),i=e(this).val();t.setOption(n,i)}),e(".option--radio").on("click",function(){if(e(this).hasClass("option--disabled"))return!0;e(this).hasClass("option--active")?(t.setValue(e(this).data("name"),e(this).data("inactive")),t.options[e(this).data("name")]=e(this).data("inactive")):(t.setValue(e(this).data("name"),e(this).data("active")),t.options[e(this).data("name")]=e(this).data("active"))});var i=function(t){var n=(e(t).val()-parseInt(e(t).attr("min")))/(parseInt(e(t).attr("max"))-parseInt(e(t).attr("min")));e(t).attr("data-value",n),e(t).css("background-image","-webkit-gradient(linear, left top, right top, color-stop("+n+", #E5322D), color-stop("+n+", #7A9FAB))")};e('input[type="range"]').each(function(){i(this)});var r=null;e('input[type="range"]').change(function(){null!==r&&clearTimeout(r);var e=this;r=setTimeout(function(){i(e)},1e3)})},t.prototype.initSidetoolsActions=function(){},t.prototype.fileRemoved=function(e){this.removedFiles++,this.fileChanged(e),this.setFilecount()},t.prototype.fileChanged=function(t){if(this.updateOrderStatus(),this.files.countNotIgnored()>0){try{null!=t&&"upBy"in t&&"pickwatermark"==t.upBy?this.checkProcessBtn():this.enableProcessBtn()}catch(e){this.enableProcessBtn()}e(".tool__sidebar__inactive").fadeOut(),e(".tool__sidebar").css("overflow-y","auto")}else this.disableProcessBtn(o.Lang.t("No file selected.")),e(".tool__sidebar").css("overflow-y","hidden"),e(".tool__sidebar__inactive").css("display","flex").hide().fadeIn(),this.showUploaderTooltip()},t.prototype.showUploaderTooltip=function(){a.Tooltip.show(e("#pickfiles"),8e3)},t.prototype.updateOrderStatus=function(){this.files.countNotIgnored()>1?e("#orderByName").css("display","flex"):e("#orderByName").hide()},t.prototype.addButtonTask=function(){var t=this;0==e("#processTask").length&&(e(".main .tool").append(i.OptionsTemplate.processButton({tool:t.tool,toolText:t.toolText})),e("#processTask").on("click",function(){if(1!=t.premiumTask||u.UserModel.isPremium()||"premium"==window.ilovepdfConfig.levelTemp){e("#processTask").attr("disabled","true");Math.floor(((new Date).getTime()-window.startTime)/1e3);t.processTask()}else e('#highres-options [data-value="0"]').trigger("click"),t.displayLimitsDialog(r.REASON.ERROR_FEATURE),window.ga("send","event","limits","feature-exceeded","pdfa")}))},t.prototype.setOption=function(e,t){if("undefined"==e)throw"InvalidOption "+e+":"+t;this.options[e]=t,this.values[e]=t,this.printOption(e,t)},t.prototype.setValue=function(e,t){this.values[e]=t,this.printValues(e,t)},t.prototype.printOption=function(t,n){if(null!=n&&""!=n.toString()){try{e('*[data-name="'+t+'"]').removeClass("option--active"),e('*[data-name="'+t+'"][data-value="'+n+'"]').addClass("option--active")}catch(e){s.configureScope(function(e){e.setExtra("dataKey",t),e.setExtra("dataValue",n)}),s.captureMessage("setting option error")}e('input[type="text"][name="'+t+'"]').val(n),e('input[type="number"][name="'+t+'"]').val(n),e('input[type="color"][name="'+t+'"]').val(n),e('input[type="checkbox"][name="'+t+'"]').attr("checked",n);try{e('input[type="radio"][name="'+t+'"][value="'+n.toString()+'"]').attr("checked","true")}catch(e){}e('select[name="'+t+'"]').val(n),e('.option--radio[data-name="'+t+'"]').each(function(){e(this).attr("data-active")==n?e(this).addClass("option--active"):e(this).removeClass("option--active")}),e('input[type="checkbox"][name="'+t+'"]').attr("checked",n),e('*[data-show="'+t+'"]').attr("data-value",n).html(n),e(".option__value--color").each(function(){e(this).css("background-color",e(this).attr("data-value"))}),e('*[data-show="'+t+'"]').html(this.printTransform(t,n)),e('*[data-show="'+t+'"]').attr("data-value",n),e('*[data-show="'+t+'"][data-type="color"]').css("background-color",n),e('*[data-if="'+t+'"]').each(function(){e(this).attr("data-value")==n?e(this).show():e(this).hide()})}},t.prototype.applyAllOptions=function(){for(var e in this.options)this.options.hasOwnProperty(e)&&this.printOption(e,this.options[e])},t.prototype.printTransform=function(e,t){return t},t.prototype.printValues=function(t,n){e("."+t).html(n),e("input."+t).val(n)},t.prototype.getValue=function(e){return this.values[e]},t.prototype.processTask=function(){var e=this;if(1!=this.processBlock){this.processBlock=!0,this.disableProcessBtn();var t=this;t.getPanelActiveOptions(),t.beforeProcess().then(function(){t.savePremium().then(function(){t.processManager.setOptions(t.options),t.processManager.process()},function(e){s.configureScope(function(t){t.setExtra("error",e)}),s.captureMessage("Error on save premium task data")})},function(t){e.onBeforeProcessReject(t)})}},t.prototype.onBeforeProcessReject=function(e){e instanceof Error&&(s.configureScope(function(t){t.setExtra("error",e)}),s.captureMessage("onBeforeProcessReject error")),this.enableProcessBtn()},t.prototype.beforeProcess=function(){return new Promise(function(e,t){var n=!!window.MSInputMethodContext&&!!document.documentMode;if(window.processStart=!0,n)document.createEvent("Event").initEvent("goProcess",!0,!0);else try{var i=new Event("goProcess");window.dispatchEvent(i)}catch(e){}e()})},t.prototype.getOption=function(e){return this.options[e]},t.prototype.getOptions=function(){return this.options},t.prototype.getPanelActiveOptions=function(){var t=this,n=e(".option__panel--active");n.find(".option--active").each(function(n,i){var r=e(i).attr("data-name");void 0!=r&&(r.indexOf("[]")>0?(t.options[r]instanceof Array||(t.options[r]=[]),t.options[r].push(e(i).attr("data-value"))):t.options[r]=e(i).attr("data-value"))}),n.find('input[type="text"], input[type="number"], input[type="color"], select, input[type="hidden"]').each(function(n,i){var r=e(i).attr("data-name");void 0==r&&void 0==(r=e(i).attr("name"))||(r.indexOf("[]")>0?(t.options[r]instanceof Array||(t.options[r]=[]),t.options[r].push(e(i).val())):t.options[r]=e(i).val())}),n.find('input[type="checkbox"]').each(function(n,i){var r=e(i).attr("name");t.options[r]=e(i).is(":checked")}),t.unsetUndefinedOptions()},t.prototype.unsetUndefinedOptions=function(){"undefined"in this.options&&delete this.options.undefined},t.prototype.callPanelActions=function(e){if(void 0!==e&&null!==e){var t="action"+e.camelCase().ucFirst();t in this&&this[t]()}},t.prototype.callTabActions=function(e){if(void 0!==e&&null!==e&&""!=e){var t="action"+e.camelCase().ucFirst();t in this&&this[t]()}},t.prototype.callOptionAction=function(t,n,i){if(void 0===i&&(i="click"),void 0!==t&&null!==t){var r=t.split(" "),o=this;e.each(r,function(e,t){if(void 0!==t&&null!==t){var r="actionOption"+t.camelCase().ucFirst();r in o&&o[r](n,i)}})}},t.prototype.callFormAction=function(t,n,i){if(void 0===i&&(i="click"),void 0!==t&&null!==t&&void 0!=t){var r=t.split(" "),o=this;e.each(r,function(e,t){if(void 0!==t&&null!==t){var r="actionForm"+t.camelCase().ucFirst();r in o&&o[r](n,i)}})}},t.prototype.actionFormPanel=function(t,n){var i=t.data("target"),r=e(".option__panel--active").attr("id"),o={id:r};if(history.pushState(o,r,"#"+i),e(".option__panel--active").removeClass("option__panel--active").addClass("option__panel--inactive"),e("#"+i).addClass("option__panel--active"),this.checkProcessBtn(),this.callPanelActions(i),e("#"+i).find(".option__tab").length>0){var a=e(".option__tab__select__item.option--active").data("target");this.callTabActions(a)}history.pushState(o,r,"#"+i)},t.prototype.actionFormShowOptions=function(t,n){var i=e(t).val();e(".option--if").hide(),e('*[data-if="'+name+'"]').each(function(){t.data("value")==i?t.show():t.hide()})},t.prototype.actionFormDecimal=function(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var i=e(t).val();e(t).val(i.replace(",","."))},t.prototype.getInnactiveView=function(){return'<div class="tool__sidebar__inactive"><p>'+o.Lang.t("No file selected.")+'</p><svg xmlns="http://www.w3.org/2000/svg" width="75" height="66" viewBox="0 0 150 132"><path fill="#FFF" d="M0,0 C0,18.75 28.125,56.25 93.75,56.25 L93.75,18.75 L150,75 L93.75,131.25 L93.75,93.75 C42.0594727,93.75 0,51.6905273 0,0 Z" transform="rotate(-180 75 66)"/></svg><p>'+o.Lang.t("Please add a file to activate options")+"</p></div>"},t.prototype.initPremium=function(){if(u.UserModel.isPremium()){e(this.getPremiumView()).insertBefore(e(".gobutton")),e("#save_options").change(function(){e(this).is(":checked")})}},t.prototype.savePremium=function(){var t=this,n=this;return new Promise(function(i,r){if(e("#save_options").length&&e("#save_options").is(":checked")){var o=n.getOptions();o.tool=t.tool,o=n.beforeSavePremiumOptions(o),n.processManager.api.saveToolConfig(n.tool,o,u.UserModel.get().token).then(function(){i()},function(){r()})}else i()})},t.prototype.invalidUpload=function(t,n){void 0===n&&(n=null);var i=d.IloveError.getError(t),r=this.tool==this.subtool?this.tool:this.tool.replace("image",this.subtool);if(e("body").hasClass("process-run"))try{"object"==typeof t&&"file"in t&&"id"in t.file&&this.files.updateFile(t.file.id,{error:!0,percent:100,errorData:i})}catch(e){}else{["FileSizeExceeded","FileTooLarge","FileRemoved"].indexOf(i)>=0?window.ga("send","event","upload-info",i,r):(window.ga("send","event","upload-invalid",r,i),s.configureScope(function(e){e.setExtra("error",t)}),null!=n&&s.configureScope(function(e){e.setExtra("error_extra",n)}),s.captureMessage("upload-invalid."+i,l.Severity.Error));try{"object"==typeof t&&"file"in t?(this.viewManager.removeFile(t.file.canvasId),window.Toastr.error(o.Lang.t(i)+"<br>"+t.file.name,o.Lang.t("Upload error"),{timeOut:6e3,positionClass:"toast-top-left"})):this.fatalError(i)}catch(e){this.fatalError(i)}}},t.prototype.beforeSavePremiumOptions=function(e){return e},t.prototype.getPremiumView=function(){return""},t.prototype.disableProcessBtn=function(t){void 0===t&&(t=null);var n=e("#processTask"),i=e("#processTaskWrapper");n.attr("disabled","true"),n.removeClass("pulse"),i.addClass("tooltip tooltip--top").removeAttr("title").show(),null!=t&&"undefined"!=t?(i.attr("data-title",t),i.attr("title",t),a.Tooltip.setContent(i,t),a.Tooltip.enable(i)):a.Tooltip.disable(i)},t.prototype.enableProcessBtn=function(){e("#processTask").removeClass("tooltip tooltip--top").removeAttr("title").removeAttr("disabled"),a.Tooltip.hide("#processTaskWrapper"),e("#processTaskWrapper").hide(),this.processBlock=!1},t.prototype.fatalError=function(e){d.IloveError.fatalError(e,this.tool,this.workerServer)},t.prototype.timeout=function(){window.location.reload()},t.prototype.timeoutPopup=function(){var t=this,n=[],i=[];e.each(this.files.files,function(e,t){"canvasId"in t?n.push(t.canvasId):"id"in t&&i.push(t.id)}),e.each(n,function(e,n){t.viewManager.removeFile(n)}),e.each(i,function(e,n){t.files.removeFile(n)});var r=c.Tools.modalViewOk({id:"timelimit",title:o.Lang.t("Wops"),content:"<p>"+o.Lang.t("Welcome back after upload")+"</p>"});e(r).modal()},t.prototype.removeFile=function(e){try{this.viewManager.removeFile(e)}catch(e){}this.files.removeFile(e)},t.prototype.loadingStart=function(){0==e(".loading").length&&e("body").append('<div class="item-loading"></div>'),e(".item-loading").show()},t.prototype.loadingEnd=function(){e(".item-loading").hide()},t.prototype.sidebarAds=function(){},t.prototype.fileAddError=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n="DamagedFile"),1==t?window.Toastr.error(o.Lang.t(n),o.Lang.t("Error"),{timeOut:0,closeButton:!0,preventDuplicates:!0,positionClass:"toast-top-left"}):window.Toastr.error(o.Lang.t(n),o.Lang.t("Error"),{timeOut:5e3,positionClass:"toast-top-left"}),this.removeFile(e),this.loadingEnd()},t}();t.OptionsManager=m}).call(this,n(1))},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(48),a=n(151),s=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.contentName="NoMoreLimitsContext",n.triggerReason="triggerReason"in t?t.triggerReason:void 0,n.limits="limits"in t?t.limits:void 0,n.tool="tool"in t?t.tool:void 0,n}return r(t,e),t.prototype.getInitialState=function(){return new a.DefaultState},t}(o.ContextBase);t.NoMoreLimitsContext=s},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(20),a=n(10),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="DefaultState",t.LAYOUT_TEMPLATE_NAME="no-more-limits",t.INITIAL_SCREEN="default",t.onDomReady=function(){"sign"==t.ctx.tool?t.changeScreen("sign"):t.changeScreen(t.INITIAL_SCREEN),t.clearLoadingScreen(),t.init()},t._onDoneButtonClick=function(e){e.preventDefault(),t.dispatchEvent(new a.IloveEvent("end"))},t}return r(t,e),t.prototype.init=function(){var e=this.getUserOperativeSystem();this.showPlatform(e);var t=this.actionBtn;t&&t.addEventListener("click",this._onDoneButtonClick)},t.prototype.showPlatform=function(e){for(var t=this.domRoot.querySelectorAll("[platform-mac], [platform-win]"),n=0;n<t.length;n++)t[n].style.display="none";var i=this.domRoot.querySelectorAll("[platform-"+e+"]");for(n=0;n<i.length;n++)i[n].style.display="block"},t.prototype.getUserOperativeSystem=function(){return-1!=window.navigator.platform.indexOf("Mac")?"mac":(-1!=navigator.userAgent.indexOf("WOW64")||navigator.userAgent.indexOf("Win64"),"win")},Object.defineProperty(t.prototype,"actionBtn",{get:function(){return this.domStateRoot.querySelector("[next-from-no-more-limits]")},enumerable:!0,configurable:!0}),t}(o.StateBase);t.DefaultState=s},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(153),a=n(154),s=n(95),l=n(155),c=n(156),u=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.pdfViewer=new a.PdfView({screenSize:this.screenSize,files:this.files}),this.imageViewer=new s.ImageView({screenSize:this.screenSize,files:this.files}),this.officeViewer=new l.OfficeView({screenSize:this.screenSize,files:this.files}),this.previewViewer=new c.PreviewView({screenSize:this.screenSize,files:this.files})},t}(o.ViewManager);t.ViewManager=u},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),r=n(12),o=n(19),a=n(9),s=function(){function t(e){void 0===e&&(e={}),this.files=null,this.tool=null,this.subtool=null,this.pdfViewer=null,this.imageViewer=null,this.officeViewer=null,this.previewViewer=null,this.fileBox="",this.covers_hidden=!1,this.processManager=null,this.onBeforeRemoveFile=null,this.onRemoveFile=null,this.resizeTimeout=!1,this.screenSizes={sm:{w:70,h:100},md:{w:99,h:140},lg:{w:127,h:180}},this.screenSize=this.screenSizes.md,this.currentSize="md",window.innerWidth>1281?(this.screenSize=this.screenSizes.lg,this.currentSize="lg"):window.innerWidth<640&&(this.screenSize=this.screenSizes.sm,this.currentSize="sm"),Object.assign(this,e),this.init()}return t.prototype.init=function(){var e=this;window.addEventListener("resize",function(t){e.resize()})},t.prototype.resize=function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){window.innerWidth>1280&&"lg"!=e.currentSize?(e.screenSize=e.screenSizes.lg,e.currentSize="lg",e.reRender()):window.innerWidth<640&&"sm"!=e.currentSize?(e.screenSize=e.screenSizes.sm,e.currentSize="sm",e.reRender()):window.innerWidth>640&&window.innerWidth<1280&&"md"!=e.currentSize&&(e.screenSize=e.screenSizes.md,e.currentSize="md",e.reRender()),"object"==typeof e.pdfViewer&&null!=e.pdfViewer&&(e.pdfViewer.screenSize=e.screenSize),"object"==typeof e.imageViewer&&null!=e.imageViewer&&(e.imageViewer.screenSize=e.screenSize),"object"==typeof e.officeViewer&&e.officeViewer,"object"==typeof e.previewViewer&&e.previewViewer},500)},t.prototype.reRender=function(){var t=this;e(".file canvas, .range__element canvas").each(function(n,i){var r=e(i).attr("data-file"),o=e(i).attr("data-page");if(r&&o){var a=parseInt(e(i).attr("data-page").toString()),s=e(i).attr("id");t.renderPDF(r,a,s)}})},t.prototype.addFileDOM=function(t,n){var o=this;void 0===n&&(n=null);return new Promise(function(n,a){var s=o;o.totalFilesSelectedHistory++,o.boxfiles++;var l=t.name.substr(t.name.lastIndexOf(".")+1).toUpperCase();t.extension&&(l=t.extension.toUpperCase()),t.service||(t.service="user");var c=o.getFileboxTemplate({tool:s.tool,subtool:s.subtool,screenSize:s.screenSize,fileName:t.name,fileID:t.canvasId,filesize:t.size,service:t.service});if(e("#fileGroups").append(c),s.initRotate(t),e("#"+t.canvasId+" .remove").on("click",function(){s.removeFile(t.canvasId)}),"html5"==t.runtime){var u="cover-"+t.canvasId,d=document.getElementById(u);if("user"==t.service)d.className=d.className+" "+l.toLowerCase()+" ",void 0!=t.thumbnail?(d.className="image "+d.className,o.renderPreview(t.id,u,null).then(function(){n(t)},function(e){i.configureScope(function(t){t.setExtra("error",e)}),i.captureMessage("render preview thumbnail error",r.Severity.Info),a(e)})):"url"in t&&void 0!=t.url?"PDF"==l&&0==o.covers_hidden?s.pdfViewer.loadUrlPDF(t.url,null).then(function(e){s.files.updateFile(t.id,{file:e}),"size"in e&&s.files.updateFile(t.id,{size:e.size}),s.renderPDF(t.id,1,u),n(e)},function(e){"removeFile"==e.name?s.removeFile(t.canvasId):"PasswordException"==e.name?d.className=d.className+" password ":"UnexpectedResponseException"==e.name?s.removeFile(t.id):("InvalidPDFException"==e.name||e.name,d.className=d.className+" error "),a(e)}):o.renderUrl(t.id,u,null).then(function(e){"size"in e&&s.files.updateFile(t.id,{size:e.size}),n(t)},function(e){i.configureScope(function(t){t.setExtra("error",e)}),i.captureMessage("render url error",r.Severity.Info),a(e)}):"PDF"==l&&0==o.covers_hidden?s.pdfViewer.loadSourcePDF(t.id,t.source).then(function(e){s.files.updateFile(t.id,{file:e}),s.renderPDF(t.id,1,u),n(e)},function(e){"removeFile"==e.name?s.removeFile(t.canvasId):"PasswordException"==e.name&&(d.className=d.className+" password "),"UnexpectedResponseException"==e.name?s.removeFile(t.canvasId):(e.name,d.className=d.className+" error "),a(e)}):"JPG"==l||"JPEG"==l?o.renderImageJpg(t.id,u,null).then(function(){n(t)},function(e){a(e)}):"PNG"==l||"GIF"==l||"WEBP"==l?o.renderImage(t.id,u,null).then(function(){n(t)},function(e){a(e)}):"SVG"==l?(d.className="image "+d.className,o.renderSvg(t.id,u,!1).then(function(){n(t)},function(e){a(e)})):"TIF"==l||"TIFF"==l?(d.className=d.className+" image tif",o.renderTif(t.id,u).then(function(){n(t)},function(e){})):"DOC"==l||"DOCX"==l?(o.renderDoc(t.id,u),d.className=d.className+" word "+l.toLowerCase(),n(t)):"XLS"==l||"XLSX"==l?(o.renderDoc(t.id,u),d.className=d.className+" excel "+l.toLowerCase(),n(t)):"PPT"==l||"PPTX"==l?(o.renderDoc(t.id,u),d.className=d.className+" powerpoint "+l.toLowerCase(),n(t)):(d.className=d.className+l.toLowerCase(),a("noRenderMode"));else if("drive"==t.service)d.className=d.className+" "+l.toLowerCase(),"PDF"==l&&0==o.covers_hidden?t.size<2e8&&s.pdfViewer.loadUrlPDF(t.uri,t.token).then(function(e){s.files.updateFile(t.id,{file:e}),s.renderPDF(t.id,1,u),n(e)},function(e){i.configureScope(function(t){t.setExtra("error",e)}),i.captureMessage("drive url pdf error"),a(e)}):void 0!=t.url?o.renderUrl(t.id,u,null).then(function(e){n(t)},function(e){i.configureScope(function(t){t.setExtra("error",e)}),i.configureScope(function(e){e.setExtra("url",t.url)}),i.captureMessage("drive with url error"),a(e)}):(i.configureScope(function(e){e.setExtra("file",t)}),i.captureMessage("drive viewer not set"),a("drive viewer not exists"));else if("dropbox"==t.service)if("PDF"==l&&0==o.covers_hidden)t.size<2e8&&s.pdfViewer.loadUrlPDF(t.url,t.token).then(function(e){s.files.updateFile(t.id,{file:e}),s.renderPDF(t.id,1,u),n(e)},function(e){i.configureScope(function(t){t.setExtra("error",e)}),i.captureMessage("dropbox load error"),a(e)});else if(void 0!=t.url){var p=document.getElementById(u);p.className=p.className+" image "+l.toLowerCase(),o.renderUrl(t.id,u,null).then(function(e){n(t)},function(e){i.configureScope(function(t){t.setExtra("error",e)}),i.captureMessage("dropbox with url error"),a(e)})}else i.captureMessage("dropbox preview not set"),a("uooops, dropbox viewer not set here!");else i.captureMessage("unknow method/origin to render file"),a("unknow method/origin to render file")}})},t.prototype.initRotate=function(t){var n=this;e("#"+t.canvasId+" .rotate").on("click",function(){var i=parseInt(e(this).attr("data-rotate"));280==(i+=90)&&(i=0),e(this).attr("data-rotate",i);var r=e("#"+t.canvasId+" .file__canvas");r.css({WebkitTransform:"rotate("+i+"deg)"}),r.css({"-moz-transform":"rotate("+i+"deg)"}),r.css({transform:"rotate("+i+"deg)"}),n.files.updateFile(t.id,{rotate:i})})},t.prototype.removeFile=function(t){var n=this;"function"==typeof n.onBeforeRemoveFile&&n.onBeforeRemoveFile(t),e("#"+t).remove(),n.processManager.removeFile(t).then(function(){"function"==typeof n.onRemoveFile&&n.onRemoveFile(t),e(".uploader.box").show()},function(e){})},t.prototype.renderPDF=function(e,t,n,r){void 0===r&&(r=null);var o=this;"object"==typeof o.pdfViewer&&null!=o.pdfViewer&&o.pdfViewer.onFileReady().then(function(){o.pdfViewer.renderPage(e,t,n).then(function(){},function(){})},function(e){i.configureScope(function(t){t.setExtra("error",e)}),i.captureMessage("Error pdf file not ready")})},t.prototype.renderImage=function(e,t,n){void 0===n&&(n=!1);var i=this,r=i.files.getFile(e),o=r.getSource().getSource();return new Promise(function(e,a){i.imageViewer.renderImage(o,t,n).then(function(t){return r.width=t.width,r.height=t.height,e(t)},function(e){a(e)})})},t.prototype.renderImageJpg=function(e,t,n){return void 0===n&&(n=!1),this.renderImage(e,t,n)},t.prototype.renderUrl=function(e,t,n){void 0===n&&(n=!1);var i=this,r=i.files.getFile(e),o=r.url;return new Promise(function(e,a){i.imageViewer.renderUrl(o,t,n).then(function(t){if("size"in t&&(r.size=t.size),"width"in r)e({width:r.width,height:r.height});else{var n=new Image;n.addEventListener("load",function(){r.width=this.naturalWidth,r.height=this.naturalHeight,e({width:this.naturalWidth,height:this.naturalHeight})}),n.src=r.url}},function(e){a()})})},t.prototype.renderPreview=function(e,t,n){void 0===n&&(n=!1);var i=this,r=i.files.getFile(e).thumbnail;return new Promise(function(e,o){i.previewViewer.renderPreview(r,t,n),e({})})},t.prototype.renderSvg=function(e,t,n){void 0===n&&(n=!1);var i=this,r=i.files.getFile(e),o=r.getSource().getSource();return new Promise(function(e,a){i.imageViewer.renderSvg(o,t,n).then(function(t){return r.width=t.width,r.height=t.height,e(t)},function(e){a(e)})})},t.prototype.renderTif=function(e,t){var n=this,i=n.files.getFile(e).getSource().getSource();return new Promise(function(e,r){n.imageViewer.renderTif(i,t).then(function(){e()},function(){r()})})},t.prototype.renderDoc=function(e,t){var n=this.files.getFile(e).getSource().getSource();return this.officeViewer.renderDocument(n,t)},t.prototype.getFileboxTemplate=function(e){var t=/(?:\.([^.]+))?$/.exec(e.fileName)[1];return'<div class="file file--'+e.tool+' tooltip--top" id="'+e.fileID+'" rel="'+e.service+'" data-size="'+e.filesize+'" data-extension="'+t.toUpperCase()+'"  title="image size..."><div class="file__actions"><a class="file__btn rotate tooltip--top tooltip" data-rotate="0" title="'+a.Lang.t("Rotate")+'">'+o.Tools.svgRotate()+'</a><a class="file__btn remove tooltip--top tooltip" title="'+a.Lang.t("Remove this file")+'">'+o.Tools.svgRemove()+'</a></div><div class="file__canvas"><canvas id="cover-'+e.fileID+'" width="'+e.screenSize.w+'" height="'+e.screenSize.h+'" class="'+t+'"></canvas></div><div class="file__info"><span class="file__info__name">'+e.fileName+"</span></div></div>\n        "},t.prototype.fileUploaded=function(e,t){var n=document.getElementById(e),o="cover-"+e;"object"==typeof t&&"thumbnail"in t&&t.thumbnail&&null!=n&&(n.className=n.className+" image",this.renderPreview(e,o,null).then(function(e){},function(e){i.configureScope(function(t){t.setExtra("error",e)}),i.captureMessage("Render preview on file upload",r.Severity.Info)}))},t}();t.ViewManager=s}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(33),r=n(19),o=n(9),a=function(){function t(e){void 0===e&&(e={}),this.hasPdfjs=!1,this.pdfIsLoaded=!1,this.renderProcess=!1,this.pdfjs=null,this.files=null,this.coversShow=!0,this.screenSize={},this.notRendered={},this.rendering=!1,this.needPassword=!1,this.passwordCount={},this.passwordLimit=3,this.scale=1,Object.assign(this,e),this.init()}return t.prototype.init=function(){var e=this;this.initPdfJs().then(function(){e.configPdfjs()},function(){}),this.scrollControl()},t.prototype.scrollControl=function(){var t=this;r.Tools.scrollControl(e("#workArea"),function(){t.checkIfNotRendered()},function(){t.checkIfNotRendered()}),r.Tools.scrollControl(e(".tool__preview"),function(){t.checkIfNotRendered()},function(){t.checkIfNotRendered()})},t.prototype.checkIfNotRendered=function(){var t=this;0==t.rendering&&(t.rendering=!0,window.setTimeout(function(){e.each(t.notRendered,function(n,i){1==r.Tools.isElementInView(e("#"+i.canvasId))&&(t.renderPage(i.fileId,i.pageNum,i.canvasId,i.full).then(function(){},function(){}),delete t.notRendered[i.canvasId])}),t.rendering=!1},500))},t.prototype.initPdfJs=function(){var e=this,t=this;return new Promise(function(n,r){null!==window.PDFJS&&void 0===window.PDFJS&&(i.lazyload("assets/js/pdfjs/pdf.min.js"),e.pdfjsInterval=window.setInterval(function(){if(null!==window.PDFJS&&"object"==typeof window.PDFJS)return t.hasPdfjs=!0,t.pdfjs=window.PDFJS,clearInterval(t.pdfjsInterval),n(t.hasPdfjs)},100))})},t.prototype.configPdfjs=function(){},t.prototype.loadSourcePDF=function(t,n,i){var r=this;void 0===i&&(i=null);var a=this;return void 0===this.passwordCount[t]&&(this.passwordCount[t]=0),new Promise(function(s,l){0==e("#"+t).length||a.passwordCount[t]>a.passwordLimit?l({name:"removeFile"}):r.loadPDF(n,null,null,i).then(function(e){s(e)},function(i){if("PasswordException"==i.name&&1==a.needPassword){if("Incorrect Password"==i.message){var r=a.files.getFile(t).name;window.Toastr.error(o.Lang.t("incorrectPassword")+"<br>"+r,o.Lang.t("Wops"),{timeOut:5e3,positionClass:"toast-top-left"})}if(0==e("#"+t).length||a.passwordCount[t]>a.passwordLimit)return void l(i);a.askForPassword(t).then(function(e){a.passwordCount[t]++,a.loadSourcePDF(t,n,e.password).then(function(e){s(e)},function(e){l(e)})},function(e){l(e)})}else l(i)})})},t.prototype.askForPassword=function(t){var n=this;return new Promise(function(i,a){var s=n.files.getFile(t);if(0==e("#pwd-"+s.id).length){n.passwordCount[t]=0;var l=r.Tools.modalViewOk({id:"pwd-"+s.id,title:o.Lang.t("This file requires password"),content:"<p>"+s.name+'</p><br><form><input type="password" autocomplete="false"></form>'});e(l).modal(),e("#pwd-"+t+" input").first().focus()}else n.passwordCount[t]>n.passwordLimit&&(n.passwordCount[t]=0,a({name:"removeFile"})),e("#pwd-"+s.id+" input").val(""),e("#pwd-"+t+" input").first().focus();setTimeout(function(){var r=!1;e("#pwd-"+t).off("hidden.bs.modal").on("hidden.bs.modal",function(){0==r?a({name:"removeFile"}):r=!1}),e("#pwd-"+s.id).modal("show"),e("#pwd-"+t+" form").submit(function(n){n.preventDefault(),e("#pwd-"+t+" .btn").trigger("click")}),e("#pwd-"+t+" .btn").on("click",function(){var o=e("#pwd-"+t+" input").val();r=!0,""==o?a({name:"removeFile"}):(n.files.updateFile(t,{password:o}),e("#pwd-"+t).modal(),s.password=o,i(s))})},800)})},t.prototype.loadUrlPDF=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=null),this.loadPDF(null,e,t,n)},t.prototype.loadPDF=function(e,t,n,i){void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null);var r=this;return new Promise(function(o,a){var s=window.setInterval(function(){!0===r.hasPdfjs&&(clearInterval(s),function(){function s(e){if(r.pdfIsLoaded=!0,null!=t){if(e)try{e.getDownloadInfo().then(function(t){e.size=t.length,o(e)},function(){o(e)})}catch(e){a("file removed while reading")}}else o(e);e.getMetadata().then(function(e){},function(){})}function l(e){a(e)}var c=null;function u(e){var t=this.result,n=null;null!=i||(n=r.pdfjs.getDocument(t).then(s).catch(l)),n.onProgress=function(e){}}if(null!=e)if(null==i)!function(e){var t=new FileReader;t.onload=u,t.readAsArrayBuffer(e),t.onerror=l}(e);else{var d=new FileReader;d.onload=function(e){var t,n,o=new Uint8Array(e.target.result),u=new Blob([o]);try{t=window.URL||window.webkitURL,n=t.createObjectURL(u)}catch(e){return void a(e)}c=r.pdfjs.getDocument({url:n,password:i}).then(s).catch(l);try{c.getDownloadInfo().then(function(e){},function(){})}catch(e){}},d.readAsArrayBuffer(e)}else if(null!=t)if(null===n)if(null==i)r.pdfjs.getDocument(t).then(s).catch(l);else r.pdfjs.getDocument({url:t,password:i}).then(s).catch(l);else{var p={url:t,httpHeaders:{Authorization:"Bearer "+n}};if(null==i){var f=r.pdfjs.getDocument(p).then(s).catch(l);f.onProgress=function(e){},f.onPassword=function(e,t){"PasswordException"!==t.name?a(t):e(i)}}else{p.password=i;r.pdfjs.getDocument(p).then(s).catch(l)}}}())},100)})},t.prototype.onFileReady=function(){var e=this;return new Promise(function(t,n){var i=window.setInterval(function(){!0===e.pdfIsLoaded&&(clearInterval(i),t())},200)})},t.prototype.renderPage=function(t,n,i,o){var a=this;void 0===o&&(o=!1);var s=this.files.getFile(t);if(null==s)return new Promise(function(e,t){t()});var l=s.file;return this.renderProcess=!0,n=parseInt(n),e("#"+i).attr("data-file",t),e("#"+i).attr("data-page",n),new Promise(function(s,c){var u=a;if("file"!=i&&0==r.Tools.isElementInView(e("#"+i)))return a.notRendered[i]={fileId:t,pageNum:n,canvasId:i,full:o},s();var d=document.getElementById(i),p=d.getContext("2d");l?l.getPage(n).then(function(e){var t=e.getViewport(u.scale,e.pageInfo.rotate);if(d.setAttribute("data-width",t.width),d.setAttribute("data-height",t.height),1==o)t=e.getViewport(u.scale,e.pageInfo.rotate),d.width=t.width,d.height=t.height;else if(t.width>t.height){var n=u.screenSize.h;t=e.getViewport(n/t.width,e.pageInfo.rotate),d.width=u.screenSize.h,d.height=t.height}else{var i=u.screenSize.h;t=e.getViewport(i/t.height,e.pageInfo.rotate),d.height=u.screenSize.h,d.width=t.width}var r={canvasContext:p,viewport:t};!0===u.coversShow&&e.render(r).promise.then(function(){d.style.backgroundImage="none",u.renderProcess=!1,s()},function(e){u.renderProcess=!1,c(e)})},function(e){"PasswordException"==e.name?d.className=d.className+" password":"InvalidPDFException"==e.name?d.className=d.className+" damaged":d.className=d.className+" error",c(e)}):c()})},t}();t.PdfView=a}).call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){void 0===e&&(e={}),this.documentIsLoaded=!1,Object.assign(this,e),this.init()}return e.prototype.init=function(){},e.prototype.renderDocument=function(e,t){var n=this;return new Promise(function(e,t){n.documentIsLoaded=!0,e()})},e.prototype.onFileReady=function(){var e=this;return new Promise(function(t,n){var i=window.setInterval(function(){!0===e.documentIsLoaded&&(clearInterval(i),t(!0))},200)})},e}();t.OfficeView=i},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(e){void 0===e&&(e={}),this.coversShow=!0,Object.assign(this,e),this.init()}return t.prototype.init=function(){},t.prototype.renderPreview=function(t,n,i){void 0===i&&(i=!1);var r=document.getElementById(n);i?e(r).attr("src",t):e(r).attr("style","background-color: transparent; background-image: url("+t+");background-size:contain; width: 100%;background-repeat: no-repeat;background-position: center;");var o=e("#"+n+" canvas");o.length>0&&o.remove()},t}();t.PreviewView=n}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(){}return t.init=function(){var t=1==e("body").hasClass("rtl")?"left":"right";1!=window.toolbarStarted&&(window.toolbarStarted=!0,e(".editor__toolbar__options").hide(),e(".tool__workarea").on("scroll",function(){var n=e(this).scrollTop();n+e(this).innerHeight()>=e(this)[0].scrollHeight?e(".editor__toolbar").addClass("fixed").css("margin-"+t,e("#sidebar").width()+1+"px"):n<=16+e(".add").height()?e(".editor__toolbar").removeClass("fixed").css("margin-"+t,""):e(".editor__toolbar").addClass("fixed").css("margin-"+t,e("#sidebar").width()+1+"px")}),e(".editor__toolbar__options#fileSelectorToolbar").css("display","flex"))},t.refresh=function(){window.removeEventListener("resize",t.setToolbar),window.addEventListener("resize",t.setToolbar),t.setToolbar()},t.setToolbar=function(){var t=1==e("body").hasClass("rtl")?"left":"right";e(".editor__toolbar").addClass("fixed").css("margin-"+t,e("#sidebar").width()+1+"px")},t.show=function(t){e(".editor__toolbar__options").hide(),e(".editor__toolbar__options#"+t).css("display","flex")},t.hide=function(){e(".editor__toolbar__options").hide(),e(".editor__toolbar__options#fileSelectorToolbar").css("display","flex")},t}();t.Toolbar=n}).call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.make=function(t){return void 0===t&&(t=null),null==t&&(t=e.uuid()),'\n    <div class="signature__firm__by">\n    <svg xmlns="http://www.w3.org/2000/svg" width="7" height="10" fill="#0062c5" fill-rule="nonzero"><path d="M.13 5.068L0 9.713c-.001.04.03.07.07.072.026.001.05-.013.063-.035l1.494-2.57c-.28-.263-.357-.692-.156-1.038.235-.405.757-.543 1.165-.3s.548.752.313 1.157a.85.85 0 0 1-.982.385l-1.5 2.563a.07.07 0 0 0 .026.096c.022.013.05.013.072-.001l3.977-2.427a.42.42 0 0 0 .2-.317l.3-2.858a.42.42 0 0 0-.21-.407L3.1 3.034c-.145-.083-.325-.074-.46.023L.307 4.738a.42.42 0 0 0-.176.33zm5.276-1.08L2.864 2.53c-.135-.078-.166-.277-.068-.445l.575-1c.098-.168.287-.24.422-.164L6.335 2.4c.135.078.166.277.068.445l-.575 1c-.098.168-.287.24-.422.164z"/></svg>\n        SIGNED VIA ILOVEPDF\n        </div>\n        <div class="signature__firm__code">\n            '+t+"\n            </div>\n    "},e.uuidv4=function(){return"object"!=typeof crypto?"1111-1111-1111-1111":([1e7]+(-1e3).toString()+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})},e.uuid=function(){return e.uuidv4()},e}();t.Frame=i},function(e,t,n){"use strict";var i=n(1),r=n.n(i);const o="transitionend";function a(e){let t=!1;return r()(this).one(s.TRANSITION_END,()=>{t=!0}),setTimeout(()=>{t||s.triggerTransitionEnd(this)},e),this}const s={TRANSITION_END:"bsTransitionEnd",getUID(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},getSelectorFromElement(e){let t=e.getAttribute("data-target");if(!t||"#"===t){const n=e.getAttribute("href");t=n&&"#"!==n?n.trim():""}return t&&document.querySelector(t)?t:null},getTransitionDurationFromElement(e){if(!e)return 0;let t=r()(e).css("transition-duration"),n=r()(e).css("transition-delay");const i=parseFloat(t),o=parseFloat(n);return i||o?(t=t.split(",")[0],n=n.split(",")[0],1e3*(parseFloat(t)+parseFloat(n))):0},reflow:e=>e.offsetHeight,triggerTransitionEnd(e){r()(e).trigger(o)},supportsTransitionEnd:()=>Boolean(o),isElement:e=>(e[0]||e).nodeType,typeCheckConfig(e,t,n){for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)){const o=n[r],a=t[r],l=a&&s.isElement(a)?"element":(i=a,{}.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase());if(!new RegExp(o).test(l))throw new Error(`${e.toUpperCase()}: `+`Option "${r}" provided type "${l}" `+`but expected type "${o}".`)}var i},findShadowRoot(e){if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?s.findShadowRoot(e.parentNode):null}};r.a.fn.emulateTransitionEnd=a,r.a.event.special[s.TRANSITION_END]={bindType:o,delegateType:o,handle(e){if(r()(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}},t.a=s},function(e,t,n){var i,r,o;!function(a){"use strict";r=[n(1),n(161)],void 0===(o="function"==typeof(i=function(e,t){e.tinysort={defaults:t.defaults},e.fn.extend({tinysort:function(){var e,n,i=Array.prototype.slice.call(arguments);i.unshift(this),e=t.apply(null,i),n=e.length;for(var r=0,o=this.length;r<o;r++)r<n?this[r]=e[r]:delete this[r];return this.length=n,this}}),e.fn.tsort=e.fn.tinysort})?i.apply(t,r):i)||(e.exports=o)}()},function(e,t,n){var i,r;!function(o,a){"use strict";void 0===(r="function"==typeof(i=function(){return a})?i.call(t,n,t,e):i)||(e.exports=r)}(0,function(){"use strict";var e,t,n=!1,i=null,r=window,o=r.document,a=parseFloat,s=/(-?\d+\.?\d*)\s*$/g,l=/(\d+\.?\d*)\s*$/g,c=[],u=0,d=0,p=String.fromCharCode(4095),f={selector:i,order:"asc",attr:i,data:i,useVal:n,place:"org",returns:n,cases:n,natural:n,forceStrings:n,ignoreDashes:n,sortFunction:i,useFlex:n,emptyEnd:n};function h(e,t){for(var n,i=e.length,r=i;r--;)t(e[n=i-r-1],n)}function g(t,n,i){for(var r in n)(i||t[r]===e)&&(t[r]=n[r]);return t}function v(e,t,n){c.push({prepare:e,sort:t,sortBy:n})}return r.Element&&((t=Element.prototype).matchesSelector=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(e){for(var t=(this.parentNode||this.document).querySelectorAll(e),n=-1;t[++n]&&t[n]!=this;);return!!t[n]}),g(v,{loop:h}),g(function(t,r){L(t)&&(t=o.querySelectorAll(t)),t.length;var v,m,y=o.createDocumentFragment(),_=[],b=[],w=[],S=[],E=!0,x=t.length&&t[0].parentNode,k=x.rootNode!==document,C=t.length&&(r===e||!1!==r.useFlex)&&!k&&-1!==getComputedStyle(x,null).display.indexOf("flex");function P(e){var t=!!e.selector,n=t&&":"===e.selector[0],r=g(e||{},f);S.push(g({hasSelector:t,hasAttr:!(r.attr===i||""===r.attr),hasData:r.data!==i,hasFilter:n,sortReturnNumber:"asc"===r.order?1:-1},r))}function T(e,t,n){for(var i=n(e.toString()),r=n(t.toString()),o=0;i[o]&&r[o];o++)if(i[o]!==r[o]){var a=Number(i[o]),s=Number(r[o]);return a==i[o]&&s==r[o]?a-s:i[o]>r[o]?1:-1}return i.length-r.length}function O(e){for(var t,n,i=[],r=0,o=-1,a=0;t=(n=e.charAt(r++)).charCodeAt(0);){var s=46==t||t>=48&&t<=57;s!==a&&(i[++o]="",a=s),i[o]+=n}return i}function M(){return b.forEach(function(e){y.appendChild(e.elm)}),y}function I(e){var t=e.elm,n=o.createElement("div");return e.ghost=n,t.parentNode.insertBefore(n,t),e}function A(e,t){var n=e.ghost,i=n.parentNode;i.insertBefore(t,n),i.removeChild(n),delete e.ghost}function D(e,t){var n,r=e.elm;return t.selector&&(t.hasFilter?r.matchesSelector(t.selector)||(r=i):r=r.querySelector(t.selector)),t.hasAttr?n=r.getAttribute(t.attr):t.useVal?n=r.value||r.getAttribute("value"):t.hasData?n=r.getAttribute("data-"+t.data):r&&(n=r.textContent),L(n)&&(t.cases||(n=n.toLowerCase()),n=n.replace(/\s+/g," ")),null===n&&(n=p),n}function L(e){return"string"==typeof e}return function(){0===arguments.length?P({}):h(arguments,function(e){P(L(e)?{selector:e}:e)}),u=S.length}.apply(i,Array.prototype.slice.call(arguments,1)),h(t,function(e,t){m?m!==e.parentNode&&(E=!1):m=e.parentNode;var n=S[0],i=n.hasFilter,r=n.selector,o=!r||i&&e.matchesSelector(r)||r&&e.querySelector(r),a=o?b:w,s={elm:e,pos:t,posn:a.length};_.push(s),a.push(s)}),v=b.slice(0),b.sort(function(t,i){var r=0;for(0!==d&&(d=0);0===r&&d<u;){var o=S[d],p=o.ignoreDashes?l:s;if(h(c,function(e){var t=e.prepare;t&&t(o)}),o.sortFunction)r=o.sortFunction(t,i);else if("rand"==o.order)r=Math.random()<.5?1:-1;else{var f=n,g=D(t,o),v=D(i,o),m=""===g||g===e,y=""===v||v===e;if(g===v)r=0;else if(o.emptyEnd&&(m||y))r=m&&y?0:m?1:-1;else{if(!o.forceStrings){var _=L(g)?g&&g.match(p):n,b=L(v)?v&&v.match(p):n;if(_&&b){var w=g.substr(0,g.length-_[0].length),E=v.substr(0,v.length-b[0].length);w==E&&(f=!n,g=a(_[0]),v=a(b[0]))}}r=g===e||v===e?0:o.natural&&(isNaN(g)||isNaN(v))?T(g,v,O):g<v?-1:g>v?1:0}}h(c,function(e){var t=e.sort;t&&(r=t(o,f,g,v,r))}),0==(r*=o.sortReturnNumber)&&d++}return 0===r&&(r=t.pos>i.pos?1:-1),r}),function(){var e=b.length===_.length;if(E&&e)C?b.forEach(function(e,t){e.elm.style.order=t}):m&&m.appendChild(M());else{var t=S[0],n=t.place,i="org"===n,r="start"===n,o="end"===n,a="first"===n,s="last"===n;if(i)b.forEach(I),b.forEach(function(e,t){A(v[t],e.elm)});else if(r||o){var l=v[r?0:v.length-1],c=l&&l.elm.parentNode,u=c&&(r&&c.firstChild||c.lastChild);u&&(u!==l.elm&&(l={elm:u}),I(l),o&&c.appendChild(l.ghost),A(l,M()))}else if(a||s){var d=v[a?0:v.length-1];A(I(d),M())}}}(),b.map(function(e){return e.elm})},{plugin:v,defaults:f})}())},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(48),a=n(183),s=n(185),l=n(186),c=n(167),u=function(e){function t(t){var n=e.call(this,t)||this;return n.contentName="PackagesContext",n.requestedAction=t.requestedAction,n.neededNumberOfPkgItems=t.neededNumberOfPkgItems,n}return r(t,e),t.prototype.getInitialState=function(){return this.isLoggedIn()?this._getInitialState():new c.AuthState},t.prototype._getInitialState=function(){switch(this.requestedAction){case"selectPackageCerts":return new a.SelectPackageCertsState;case"selectPackageSignatures":return new s.SelectPackageSignaturesState;case"selectPackageSms":return new l.SelectPackageSmsState;default:throw"Requested Action '"+this.requestedAction+"' is not handled"}throw"Not implemented 'initialState' when userType is "+this.userType},t}(o.ContextBase);t.PackagesContext=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.set=function(e,t,n){void 0===n&&(n=60);var i=0;0!=n&&(i=(new Date).getTime()+60*n*1e3);var r={value:JSON.stringify(t),timestamp:i};try{localStorage.setItem(e,JSON.stringify(r))}catch(e){return t}return t},e.get=function(e,t){void 0===t&&(t=null);var n=null;try{n=JSON.parse(localStorage.getItem(e))}catch(e){}return null==n?t:0==(0==n.timestamp||(new Date).getTime()<n.timestamp)?(localStorage.removeItem(e),t):JSON.parse(n.value)},e.touch=function(e,t){void 0===t&&(t=60);var n=60*t*1e3,i=null;try{i=JSON.parse(localStorage.getItem(e))}catch(e){return i}return 1==(new Date).getTime()<i.timestamp&&(i.timestamp=(new Date).getTime()+n,localStorage.setItem(e,JSON.stringify(i))),i},e.check=function(e){var t=null;try{t=JSON.parse(localStorage.getItem(e))}catch(e){}if(null==t)return!1;var n=(new Date).getTime()<t.timestamp;return 0==n&&localStorage.removeItem(e),n},e.remove=function(e){try{localStorage.removeItem(e)}catch(e){}},e.cleanSign=function(){try{localStorage.removeItem("sign.task"),localStorage.removeItem("sign.mode"),localStorage.removeItem("sign.files"),localStorage.removeItem("sign.receivers"),localStorage.removeItem("sign.signature"),localStorage.removeItem("sign.elements")}catch(e){}},e}();t.Storage=i},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(47),a=n(45);t.DOCUMENT_SIGNED="Signer status can't be set to signed. Before has to have the viewed status. Currently has the signed status.",t.DOCUMENT_VALIDATED="Signer status can't be set to validated. Before has to have the viewed status. Currently has the validated status.",t.DOCUMENT_COMPLETED="Signature status is completed.",t.INSUFICIENT_CERTS="Signature can't be updated because ilovepdf.com user does not have enough certificates",t.INSUFICIENT_SIGNATURES="Signature can't be updated because ilovepdf.com user does not have enough signatures";var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.sign=function(e,t){return this.query("PUT","signature/signer/"+e,t)},t.prototype.signature=function(e){return this.query("POST","signature",e)},t.prototype.signatureUpdate=function(e,t){return this.query("PUT","signature/"+e,t)},t.prototype.uploadCloudFile=function(e,t){var n={task:e,cloud_file:t},i=a.FormDataHelper.jsonToFormData(n);return this.query("POST","upload",i)},t.prototype.templateGet=function(e){return this.query("GET","signature/template/load/"+e)},t.prototype.templateSave=function(e){return this.query("POST","signature/template",e)},t.prototype.templateUpdate=function(e,t){return this.query("PUT","signature/template/"+e,t)},t.prototype.templateDelete=function(e,t){return this.query("DELETE","signature/template/"+e,t)},t.prototype.delete=function(e){return this.query("DELETE","signature/"+e)},t.prototype.remove=function(e){return this.query("DELETE","signature/signer/"+e)},t.prototype.saveSettings=function(e,t){return this.query("POST","settings/"+e,t)},t.prototype.getSignature=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=null),null!=t&&null!=n?this.query("GET","signature/"+e+"?custom_int="+t+"&custom_string="+n):this.query("GET","signature/"+e)},t}(o.Api);t.SignApi=s},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(58),l=n(57),c=n(166),u=n(201),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="SummaryState",t.LAYOUT_TEMPLATE_NAME="subscription-update",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.changeScreen(t.INITIAL_SCREEN),t.initBackAction();var e=new s.UserPayment,n=t.renderSummary(e),i=t.initAbstractPayment({paymentAction:"subsc_update",userPayment:e,currentPaymentMethod:t.ctx.userCurrentPaymentMethod,paymentProviderProps:[{name:"stripe",paymentButtonText:t.t("paymentButtonText")},{name:"paypal"}],numSignatures:function(){return t.ctx.summaryParams.numSignatures},numUsers:function(){return t.ctx.summaryParams.numUsers},paymentInterval:{type:"predefined",value:t.ctx.summaryParams.paymentInterval}});Promise.all([n,i]).then(t._onEverythingReady)},t._onEverythingReady=function(){setTimeout(t.clearLoadingScreen,150)},t._onPaymentSuccess=function(e){if(t.ctx.summaryParams.numSignatures){var n=t.ctx.summaryParams.numSignatures;window.ga("send","event","premium","signatures",String(n))}var i=new u.PaymentCompletedState;t.ctx.changeState(i),i.render(t.domRoot)},t._onPaymentFailed=function(e){},t._goBackState=function(){t.cleanUpState(),t.ctx.goToPreviousState().render(t.domRoot)},t}return r(t,e),t.prototype.renderSummary=function(e){return o(this,void 0,void 0,function(){var t=this;return a(this,function(n){return e.getPaymentSummary_updateSubscription(this.ctx.summaryParams.numSignatures,this.ctx.summaryParams.numUsers,this.ctx.summaryParams.paymentInterval).then(function(e){new c.SummaryBuilder(t.getSummaryTemplate_html(),e).setTexts({current:t.t("currentSubscription"),new:t.t("newSubscription")}).render(t.summariesDomRoot,t.summaryWarningTextDomRoot)}).catch(function(e){}),[2]})})},t.prototype.getSummaryTemplate_html=function(){if(this._summaryTemplate_html)return this._summaryTemplate_html;var e=this.domStateRoot.querySelector("template.summary-template");if(!e)throw"template.summary-template not found";return this._summaryTemplate_html=e.innerHTML,this._summaryTemplate_html},Object.defineProperty(t.prototype,"summariesDomRoot",{get:function(){var e=this.domStateRoot.querySelector(".summaries-root");if(!e)throw".summaries-root not found";return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"summaryWarningTextDomRoot",{get:function(){var e=this.domStateRoot.querySelector(".summary__warning-text");if(!e)throw".summary__warning-text not found";return e},enumerable:!0,configurable:!0}),t.prototype.cleanUpState=function(){this.summariesDomRoot.innerHTML="",this.domRoot.querySelectorAll(".payment__mountpoint").forEach(function(e){return e.innerHTML=""}),this.goBackBtn.removeEventListener("click",this._goBackState)},t.prototype.initBackAction=function(){this.ctx.canGoToAPreviousState()?(this.goBackBtn.style.display="",this.goBackBtn.addEventListener("click",this._goBackState)):this.goBackBtn.style.display="none"},Object.defineProperty(t.prototype,"goBackBtn",{get:function(){var e=this.domRoot.querySelector(".dialog__back");if(!e)throw"Go Back btn not found";return e},enumerable:!0,configurable:!0}),t}(l.AbstractPaymentState);t.SummaryState=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(67),r=function(){function e(e,t){this.htmlTemplate=e,this.data=t}return e.prototype.render=function(e,t){return void 0===t&&(t=null),this.domRoot=e,this.summaryWarningTextDomRoot=t,this.fillSummaryTables(),this},e.prototype.setTexts=function(e){return this.texts=e,this},e.prototype.fillSummaryTables=function(){var e=this.domRoot,t=this.data,n=t.summary,i=t.text;if(i&&"string"==typeof i&&i.length>0){if(!this.summaryWarningTextDomRoot)throw"'summaryWarningTextDomRoot' not present";this.summaryWarningTextDomRoot.innerHTML=i,this.summaryWarningTextDomRoot.style.display=""}else this.summaryWarningTextDomRoot&&(this.summaryWarningTextDomRoot.style.display="none");if(n.current){var r=this.buildSummaryTable("summary--current",this.texts.current,n.current);e.appendChild(r)}if(n.new){r=this.buildSummaryTable("summary--new",this.texts.new,n.new);e.appendChild(r)}},e.prototype.buildSummaryTable=function(e,t,n){var r=i.Tools.createHTMLFromText(this.htmlTemplate);r.classList.add(e),r.querySelector(".summary__title").innerHTML=t;for(var o=r.querySelector(".summary__items"),a=r.querySelector(".summary__total"),s=0;s<n.length;s++){var l=n[s];if(l.total)!0,a.classList.add("summary__total--visible"),r.querySelector(".summary__total__label").innerHTML=l.text,r.querySelector(".summary__total__value").innerHTML=l.price;else{var c=document.createElement("div"),u=document.createElement("div"),d=document.createElement("div");c.classList.add("summary__item"),u.classList.add("summary__item__text"),d.classList.add("summary__item__price"),c.appendChild(u),c.appendChild(d),u.innerHTML=l.text,d.innerHTML=l.price,o.appendChild(c)}}return r},e}();t.SummaryBuilder=r},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="AuthState",t.LAYOUT_TEMPLATE_NAME="packages",t.onDomReady=function(){t.initAbstractAuth(),t.changeScreen(t.INITIAL_SCREEN),t.clearLoadingScreen()},t._onLoginSuccess=function(){t.executeAfterLoginOrRegisterSuccess()},t._onRegisterSuccess=function(){t.executeAfterLoginOrRegisterSuccess()},t.executeAfterLoginOrRegisterSuccess=function(){var e=t.ctx._getInitialState();t.ctx.changeState(e),e.render(t.domRoot)},t}return r(t,e),t}(n(71).AbstractAuthState);t.AuthState=o},,function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(158),r=n(16),o=n(141),a=n(170),s=n(17),l=n(12),c=function(){function n(e){e||(e={}),this.uuid=e.uuid||i.Frame.uuid(),this.setData(e)}return n.prototype.setData=function(e){null==e&&(e={}),this.mode=e.mode||"font",this.color="#555555",this.signature=e.signature||"",this.initials=e.initials||"",e.font&&(this.fontFamily=e.font.fontFamily||"alex",this.color=e.font&&e.font.color?e.font.color:"#555555",this.signatureFontImage=null,this.initialsFontImage=null),e.image&&(e.image.signature&&(this.signatureImageService=e.image.signature),e.image.initials&&(this.initialsImageService=e.image.initials),e.image.signatureApi&&(this.signatureImageApi=e.image.signatureApi),e.image.initialsApi&&(this.initialsImageApi=e.image.initialsApi),e.image.signatureBase64&&(this.signatureImageService=e.image.signatureBase64),e.image.initialsBase64&&(this.initialsImageService=e.image.initialsBase64)),e.draw&&(e.draw.signature&&(this.signatureDrawService=e.draw.signature),e.draw.signature&&(this.initialsDrawService=e.draw.initials),e.draw.signatureData&&(this.signatureDrawData=e.draw.signatureData),e.draw.initialsData&&(this.initialsDrawData=e.draw.initialsData),e.draw.signatureBase64&&(this.signatureDrawBase64=e.draw.signatureBase64,o.ImageHelper.preload(this.signatureDrawBase64)),e.draw.initialsBase64&&(this.initialsDrawBase64=e.draw.initialsBase64,o.ImageHelper.preload(this.initialsDrawBase64)),e.draw.color&&(this.color=e.draw.color&&""!=e.draw.color?e.draw.color:"#555555"))},n.prototype.cleanStrings=function(){this.signature=this.signature.trim(),this.initials=this.initials.trim()},n.prototype.correctEmptyInitials=function(){""!=this.initials&&null!=this.initials||""!=this.signature&&null!=this.signature&&(this.initials=this.signature.charAt(0))},n.prototype.correctEmptyServiceImages=function(){""==this.signatureDrawService||null==this.signatureDrawService||""!=this.initialsDrawService&&null!=this.initialsDrawService||(this.initialsDrawService=this.signatureDrawService.replace("signature","initials")),""==this.initialsDrawService||null==this.initialsDrawService||""!=this.signatureDrawService&&null!=this.signatureDrawService||(this.signatureDrawService=this.initialsDrawService.replace("initials","signature"))},n.prototype.getServiceData=function(){return this.cleanStrings(),this.correctEmptyInitials(),this.correctEmptyServiceImages(),{mode:this.mode,signature:this.signature,initials:this.initials,font:{fontFamily:this.fontFamily,color:this.color},draw:{signature:this.signatureDrawService,initials:this.initialsDrawService,signatureData:this.signatureDrawData,initialsData:this.initialsDrawData,color:this.color},image:{signature:this.signatureImageService,initials:this.initialsImageService}}},n.prototype.getSignaturePreview=function(){return"font"==this.mode?(this.signatureFontImage||(this.signatureFontImage=a.CanvasHelper.textToImage(this.signature,t.FONT_FAMILY_EXPLORER[this.fontFamily],this.color)),'<img class="sign__element__textImage" src="'+this.signatureFontImage+'">'):"draw"==this.mode?this.signatureDrawBase64&&this.signatureDrawBase64?'<img src="'+this.signatureDrawBase64+'">':this.signatureDrawService?'<img src="'+this.signatureDrawService+"?t="+Date.now()+'">':'<img src="">':"image"==this.mode?this.signatureImageBase64&&""!=this.signatureImageBase64?'<img src="'+this.signatureImageBase64+'">':this.signatureImageService?'<img src="'+this.signatureImageService+"?t="+Date.now()+'">':'<img src="'+this.signatureImageBase64+'">':void 0},n.prototype.getFrame=function(){return'<div class="signature__firm">'+i.Frame.make(this.uuid)+"</div>"},n.prototype.getNamePreview=function(){return'<span class="sign__name">'+this.signature+"</span>"},n.prototype.getInitialsPreview=function(){return"font"==this.mode?(this.initialsFontImage&&null!=this.initialsFontImage||(this.initialsFontImage=a.CanvasHelper.textToImage(this.initials,t.FONT_FAMILY_EXPLORER[this.fontFamily],this.color)),'<img src="'+this.initialsFontImage+'">'):"draw"==this.mode?this.initialsDrawBase64&&""!=this.initialsDrawBase64?'<img src="'+this.initialsDrawBase64+'">':this.initialsDrawService?'<img src="'+this.initialsDrawService+"?t="+Date.now()+'">':'<img src="'+this.initialsDrawBase64+'">':"image"==this.mode?this.initialsImageBase64&&""!=this.initialsImageBase64?'<img src="'+this.initialsImageBase64+'">':this.initialsImageService?'<img src="'+this.initialsImageService+"?t="+Date.now()+'">':'<img src="'+this.initialsImageBase64+'">':void 0},n.prototype.getData=function(){var n=this;this.cleanStrings(),this.correctEmptyInitials();var i={initials:this.initials,name:this.signature,signature_type:this.mode,initials_type:this.mode};if(i.font=t.FONT_FAMILY_SERVER.arial,"image"==this.mode&&""==this.signatureImageApi||""==this.initialsImageApi?(s.configureScope(function(e){e.setExtra("signature data",n),e.setExtra("signatureImageApi",n.signatureImageApi),e.setExtra("initialsImageApi",n.initialsImageApi)}),s.captureMessage("Signature forced from image to font",l.Severity.Error)):"draw"!=this.mode||""!=this.signatureDrawApi&&""!=this.initialsDrawApi||(s.configureScope(function(e){e.setExtra("signature data",n),e.setExtra("signatureDrawApi",n.signatureDrawApi),e.setExtra("initialsDrawApi",n.initialsDrawApi)}),s.captureMessage("Signature forced from draw to font",l.Severity.Error)),"image"==this.mode?(i.signature_type="image",i.initials_type="image",i.signature_image_server_filename=this.signatureImageApi,i.initials_image_server_filename=this.initialsImageApi):"draw"==this.mode?(i.signature_type="sign",i.initials_type="sign",i.signature_image_server_filename=this.signatureDrawApi,i.initials_image_server_filename=this.initialsDrawApi):"font"==this.mode&&(i.signature_type="text",i.initials_type="text",i.color=this.color,i.font=t.FONT_FAMILY_SERVER.arial,t.FONT_FAMILY_SERVER[this.fontFamily]&&(i.font=t.FONT_FAMILY_SERVER[this.fontFamily])),i.browser_signed=window.navigator.appVersion.substring(0,249),1==r.UserModel.isUser()){var o=r.UserModel.get();i.custom_string=o.loginkey,i.custom_int=o.id}return 1==e("body").hasClass("rtl")&&(i.rtl=1),i},n.prototype.validateData=function(){var e=this.getData();return!!("font"===this.mode||e.signature_image_server_filename&&""!=e.signature_image_server_filename&&e.initials_image_server_filename&&""!=e.initials_image_server_filename)},n}();t.SignatureModel=c,t.FONT_FAMILY_NAMES=["alex","allura","handle","kristi","aurore","mark","reenie","satisfy","zeyada","shadows"],t.FONT_FAMILY_SERVER={arial:"Arial-Unicode-MS",shadows:"Shadows-Into-Light",aurore:"La-Belle-Aurore",alex:"Alex-Brush-Regular",allura:"Allura-Regular",handle:"Handlee-Regular",kristi:"Kristi-Regular",mark:"Marck-Script",reenie:"Reenie-Beanie",satisfy:"Satisfy-Regular",smooth:"SmoothStone-Regular",secret:"TheSecret-Regular",zeyada:"Zeyada"},t.FONT_FAMILY_EXPLORER={arial:"Arial-Unicode",shadows:"Shadows Into Light",aurore:"La Belle Aurore",alex:"Alex Brush",allura:"Allura",handle:"Handlee",kristi:"Kristi",mark:"Marck Script",reenie:"Reenie Beanie",satisfy:"Satisfy",smooth:"SmoothStone",secret:"TheSecret",zeyada:"Zeyada"},t.FONT_STYLES="https://fonts.googleapis.com/css?family=Alex+Brush|Allura|Handlee|Kristi|La+Belle+Aurore|Marck+Script|Reenie+Beanie|Satisfy|Shadows+Into+Light|Zeyada&display=swap"}).call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(77),r=function(){function e(){}return e.makeImgFromText=function(t,n,i){void 0===i&&(i="black");var r=document.createElement("canvas");r.id="textCanvas",r.width=1824,r.height=300,r.style.zIndex="0",r.style.position="absolute";var o=r.getContext("2d");return o.font='normal 68px "'+n+'"',o.fillStyle=i,o.textAlign="center",o.fillText(t,r.width/2,r.height/2),e.trimCanvas(o),r},e.forcePrerenderFonts=function(t,n){for(var r in void 0===n&&(n=null),n&&i.lazyloadCss(n),t)e.forcePrerenderFont(t[r])},e.forcePrerenderFont=function(e){var t=document.createElement("div");t.style.position="absolute",t.style.left="-999999px",t.style.width="100px",t.style.fontFamily=e,t.innerHTML="force text",document.body.appendChild(t)},e.trimCanvas=function(e){var t,n,i,r=e.canvas,o=r.width,a=r.height,s={x:[],y:[]},l=e.getImageData(0,0,r.width,r.height);for(n=0;n<a;n++)for(t=0;t<o;t++)i=4*(n*o+t),l.data[i+3]>0&&(s.x.push(t),s.y.push(n));s.x.sort(function(e,t){return e-t}),s.y.sort(function(e,t){return e-t});var c=s.x.length-1;o=1+s.x[c]-s.x[0],a=1+s.y[c]-s.y[0];var u=e.getImageData(s.x[0],s.y[0],o,a);return r.width=o,r.height=a,e.putImageData(u,0,0),e},e.canvasToImgUrl=function(e){return e.toDataURL("image/png").toString()},e.textToImage=function(t,n,i){return void 0===i&&(i="black"),e.canvasToImgUrl(e.makeImgFromText(t,n,i))},e}();t.CanvasHelper=r},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(140),a=n(73),s=function(e){function t(t){void 0===t&&(t={});var i=e.call(this,t)||this;return i.configData=n(105),window.configData=i.configData,i.init(),i}return r(t,e),t.prototype.getOptionsManager=function(){return new a.OptionsManager(this.getToolOptions())},t.prototype.getToolOptions=function(){return{processManager:this.processManager,tool:this.tool,subtool:this.tool,toolText:this.toolText,startServer:this.startServer,workerServer:this.workerServer,defaultOptions:this.defaultOptions,files:this.files,screenSize:this.screenSize,pdfViewer:this.pdfViewer,config:this.config,fileLimits:this.fileLimits,allFileLimits:this.allFileLimits,level:this.level,levelTemp:this.levelTemp,userToken:this.userToken}},t}(o.IloveTool);t.IlovepdfTool=s},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(36),r=n(175),o=n(139),a=n(229),s=n(230),l=n(231),c=n(232),u=n(234),d=n(235),p=function(){function t(){}return t.getSize=function(t){var n=e("#"+t);return{w:n.innerWidth(),h:n.innerHeight()}},t.getPosition=function(t){var n=e("#"+t),i=parseInt(n.css("top")),r=parseInt(n.css("left"));return 1==isNaN(i)&&(i=0),1==isNaN(r)&&(r=0),{x:r,y:i}},t.getCurrentFile=function(){return 0==e(".preview__page.active").length&&e(".preview__page").first().addClass("active"),e(".preview__page.active").attr("data-file")},t.getCurrentPage=function(){return 0==e(".preview__page.active").length&&e(".preview__page").first().addClass("active"),parseInt(e(".preview__page.active").attr("data-page"))},t.sendEventElementRemoved=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);var i=new CustomEvent("elementRemoved",{detail:{elementId:e,x:t,y:n}});window.dispatchEvent(i)},t.getNearestElementClass=function(e,t,n){var i=Array.from(document.getElementsByClassName(e)),r=[];return i.map(function(e){var t=e.getBoundingClientRect();return[t.x,t.y]}).forEach(function(e){var i=Math.hypot(e[0]-parseInt(t),e[1]-parseInt(n));r.push(i)}),i[r.indexOf(Math.min.apply(Math,r))]},t.getNearestElement=function(e,t,n){void 0===n&&(n=null);var i=t.map(function(e){var t=e.getBoundingClientRect();return[t.x,t.y]}),r=e.getBoundingClientRect(),o=[];i.forEach(function(e){if("up"==n&&e[1]<parseInt(r.y)||"down"==n&&e[1]>parseInt(r.y)||null==n){var t=Math.hypot(e[0]-parseInt(r.x),e[1]-parseInt(r.y));o.push(t)}});var a=o.indexOf(Math.min.apply(Math,o));return-1==a?null:t[a]},t.familyIsBefore=function(t,n){return 0!==e(t).nextAll().filter(n).length},t.familyIsAfter=function(t,n){return 0!==e(t).prevAll().filter(n).length},t.setPreviewBullet=function(t){var n=e('.preview__page[data-file="'+t.file+'"][data-page="'+t.page+'"]');if(0==n.children(".preview__bullet").length){var r=e('<div class="preview__bullet tooltip tooltip--top" title="1 elements">1</div>');r.hide(),n.append(r),(a=n.children(".preview__bullet")).fadeIn(),i.Tooltip.init(a),a.on("click",function(e){e.preventDefault(),o.ScrollHelper.scrollToFirstItem(t.file,t.page)})}else{var a=e('.preview__page[data-file="'+t.file+'"][data-page="'+t.page+'"] .preview__bullet'),s=parseInt(a.html());s++,a.html(s.toString()),a.show(),i.Tooltip.setContent(a,s+" elements")}},t.unsetPreviewBullet=function(){},t.removePreviewBullet=function(t){var n=e("#"+t).parent(),r=n.attr("data-file"),o=n.attr("data-page"),a=e('.preview__page[data-file="'+r+'"][data-page="'+o+'"] .preview__bullet'),s=parseInt(a.html());s--,a.html(s.toString()),0!=s?i.Tooltip.setContent(a,s+" elements"):a.hide()},t.initCloseActions=function(n){var o=e("#"+n+" .sign__element__close");0!=o.length&&(i.Tooltip.init(o),o.on("click",function(){r.default("#"+n).unset(),t.removePreviewBullet(n),e("#"+n).remove(),t.sendEventElementRemoved(n)}),o.on("mouseenter",function(){i.Tooltip.hide(e("#"+n))}))},t.append=function(t,n,i){void 0===i&&(i=null),null!=i&&e(t).attr("data-signer",i.id),e('.editor__page[data-file="'+n.file+'"][data-page="'+n.page+'"]').length,e('.editor__page[data-file="'+n.file+'"][data-page="'+n.page+'"]').append(e(t))},t.typeToDraggableType=function(e){var t=e;switch(e){case"signature-group":t="signaturesGroup";break;case"initials-group":t="initialsGroup";break;case"signature-element":t="signatureElement";break;case"initials-element":t="initialsElement";break;case"name-element":t="nameElement";break;case"date-element":t="dateElement";break;case"text-element":t="textElement";break;case"input-element":t="inputElement"}return t},t.draggableTypeToType=function(e){var t=e;switch(e){case"signaturesGroup":t="signature-group";break;case"initialsGroup":t="initials-group";break;case"signatureElement":t="signature-element";break;case"initialsElement":t="initials-element";break;case"nameElement":t="name-element";break;case"dateElement":t="date-element";break;case"textElement":t="text-element";break;case"inputElement":t="input-element"}return t},t.waitForFileRendered=function(){var t=2;return new Promise(function(n,i){var r=window.setInterval(function(){if(e(".editor__content .editor__page").length>0&&t<0)return window.clearInterval(r),n();t--},200)})},t.positionFromCenter=function(){return{x:e(window).scrollLeft()+e(window).width()/2,y:e(window).scrollTop()+e(window).height()/2}},t.insertPointFromPosition=function(n,i){if(void 0===i&&(i=!1),1==i)return{file:t.getCurrentFile(),page:t.getCurrentPage(),x:n.x,y:n.y};var r=document.elementFromPoint(n.x,n.y),o=e(r).closest(".editor__page");return 0==o.length&&(o=e(".editor__page").first()),{file:o.attr("data-file"),page:parseInt(o.attr("data-page")),x:n.x-o.offset().left,y:n.y-o.offset().top}},t.createElement=function(e){var t=null;switch(e){case"signatureElement":case"signature-element":case"signature":t=new a.ElementSignature;break;case"initialsElement":case"initials-element":case"initials":t=new s.ElementInitials;break;case"nameElement":case"name-element":case"name":t=new l.ElementName;break;case"dateElement":case"date-element":case"date":t=new c.ElementDate;break;case"textElement":case"text-element":case"text":t=new u.ElementText;break;case"inputElement":case"input-element":case"input":t=new d.ElementInput}if(null==t)throw Error("Element type not exists: "+e);return t},t.createElementFrom=function(e){var n=t.createElement(e.type);return n.copyProperties(e),n},t.normalizeInsertPoint=function(t){var n=e('.editor__page[data-file="'+t.file+'"][data-page="'+t.page+'"]'),i=parseFloat(n.attr("data-width")),r=parseFloat(n.attr("data-height"));return t.x=n.width()*t.x/i,t.y=Math.abs(n.height()*t.y/r),t},t.normalizeElement=function(t,n,i){var r=e('.editor__page[data-file="'+n+'"][data-page="'+i+'"]'),o=parseFloat(r.attr("data-width")),a=(parseFloat(r.attr("data-height")),800/o);return t.size=t.size*a,t.frame_size&&(t.frame_size=t.frame_size*a),t.font_size&&(t.font_size=t.font_size*a),t},t.getRatio=function(t,n){var i=e('.editor__page[data-file="'+t+'"][data-page="'+n+'"]'),r=parseFloat(i.attr("data-width"));parseFloat(i.attr("data-height"));return 800/r},t.checkCollision=function(e,t){var n=document.getElementById(e).getBoundingClientRect(),i=document.getElementById(t).getBoundingClientRect();return n.x<i.x+i.width||n.x+n.width>i.x||n.y<i.y+i.height||n.y+n.height>i.y},t.pageRect=function(t,n){return e('.editor__page[data-file="'+t+'"][data-page="'+n+'"]')[0].getBoundingClientRect()},t.pagesFromRange=function(e){var t=[];return e.split(",").forEach(function(e){if(1==e.includes("-")){for(var n=e.split("-"),i=parseInt(n[0]);i<parseInt(n[1]);i++)t.push(i);t.push(n[1])}else t.push(e)}),t.join(",")},t.makeRange=function(e){var t=!1,n="",i=0,r=0,o=0;return e.split(",").sort(function(e,t){return parseInt(e.toString())-parseInt(t.toString())}).forEach(function(e){i=parseInt(e),0==t?(o=i,t=!0):i-1==r||(n=o==r?n+","+o:n+","+o+"-"+r,o=i),r=i}),n=(n=o==r?n+","+o:n+","+o+"-"+r).substr(1)},t}();t.ElementHelper=p}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(19),r=function(){function n(n){void 0===n&&(n={}),this.id=n.id||i.Tools.randomId(),this.email=n.email||"",this.name=n.name||"",this.num=n.num||1,this.type=n.type||"signer",this.phone=n.phone||"",this.password=n.password||"",this.allowCostumize=n.allowCostumize||"all",this.num=n.num||e(".receiver-list__item").length,window.colors=t.RECEIVER_COLORS_VALUES,this.colorClass=n.colorClass||this.getNextColor()}return n.prototype.isSmsValidationEnabled=function(){return this.phone&&this.phone.length>0},n.prototype.getNextColor=function(n){void 0===n&&(n=0);for(var i=null,r=0,o=t.RECEIVER_COLORS_VALUES;r<o.length;r++){var a=o[r];if(e(".receiver__count."+a).length==n){i=a;break}}return null==i&&(n++,i=this.getNextColor(n)),i},n.prototype.cleanData=function(){this.name="",this.email="",this.password="",this.phone="",this.type="signer",this.allowCostumize="all"},n.prototype.getData=function(){var e={id:this.id,name:this.name,email:this.email,type:this.type,files:[],force_signature_type:this.allowCostumize,letter_color:this.colorClass.replace("file","")};return""!=this.password&&(e.access_code=this.password),""!=this.phone&&(e.phone=this.phone),e},n}();t.ReceiverModel=r,t.RECEIVER_COLORS_VALUES=["fileA","fileB","fileC","fileD","fileE","fileF","fileG","fileH","fileI","fileJ"]}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(e){void 0===e&&(e={}),Object.assign(this,e)}return t.prototype.fileInfo=function(e,t){this.workerServer},t.prototype.renderPage=function(t,n,i,r,o,a,s){void 0===o&&(o=150),void 0===a&&(a=null),void 0===s&&(s={});var l=this.workerServer+"/v1/pdfrender/"+t+"/"+n+"/"+i+"/"+o;if(null!=a&&(l+="/1/"+a),l+="?token="+window.ilovepdfConfig.token,"resetForms"in s){var c=!0===s.resetForms?1:0;l+="&reset_forms="+c}var u=e("#"+r);u.attr("src",l),u.attr("data-dpi",o)},t}();t.PdfrenderView=n}).call(this,n(1))},function(e,t,n){e.exports=function(){function e(e){var t;return function(n){return t||e(t={exports:{},parent:n},t.exports),t.exports}}var t=e(function(e,t){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Interactable=void 0;var r=m(C),a=g(D),s=g(z),l=g(Te),c=g($e),u=m(p),d=g(Ze),f=g(rt),h=n({});function g(e){return e&&e.__esModule?e:{default:e}}function v(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return v=function(){return e},e}function m(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=v();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,"options",void 0),b(this,"_actions",void 0),b(this,"target",void 0),b(this,"events",new f.default),b(this,"_context",void 0),b(this,"_win",void 0),b(this,"_doc",void 0),this._actions=n.actions,this.target=t,this._context=n.context||i,this._win=(0,o.getWindow)((0,Y.trySelector)(t)?this._context:t),this._doc=this._win.document,this.set(n)}return _(e,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}}]),_(e,[{key:"setOnEvents",value:function(e,t){return u.func(t.onstart)&&this.on("".concat(e,"start"),t.onstart),u.func(t.onmove)&&this.on("".concat(e,"move"),t.onmove),u.func(t.onend)&&this.on("".concat(e,"end"),t.onend),u.func(t.oninertiastart)&&this.on("".concat(e,"inertiastart"),t.oninertiastart),this}},{key:"updatePerActionListeners",value:function(e,t,n){(u.array(t)||u.object(t))&&this.off(e,t),(u.array(n)||u.object(n))&&this.on(e,n)}},{key:"setPerAction",value:function(e,t){var n=this._defaults;for(var i in t){var o=i,a=this.options[e],l=t[o];"listeners"===o&&this.updatePerActionListeners(e,a.listeners,l),u.array(l)?a[o]=r.from(l):u.plainObject(l)?(a[o]=(0,c.default)(a[o]||{},(0,s.default)(l)),u.object(n.perAction[o])&&"enabled"in n.perAction[o]&&(a[o].enabled=!1!==l.enabled)):u.bool(l)&&u.object(n.perAction[o])?a[o].enabled=l:a[o]=l}}},{key:"getRect",value:function(e){return e=e||(u.element(this.target)?this.target:null),u.string(this.target)&&(e=e||this._context.querySelector(this.target)),(0,Y.getElementRect)(e)}},{key:"rectChecker",value:function(e){return u.func(e)?(this.getRect=e,this):null===e?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(e,t){if((0,Y.trySelector)(t)||u.object(t)){for(var n in this.options[e]=t,this._actions.map)this.options[n][e]=t;return this}return this.options[e]}},{key:"origin",value:function(e){return this._backCompatOption("origin",e)}},{key:"deltaSource",value:function(e){return"page"===e||"client"===e?(this.options.deltaSource=e,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(e){return this._context===e.ownerDocument||(0,Y.nodeContains)(this._context,e)}},{key:"testIgnoreAllow",value:function(e,t,n){return!this.testIgnore(e.ignoreFrom,t,n)&&this.testAllow(e.allowFrom,t,n)}},{key:"testAllow",value:function(e,t,n){return!e||!!u.element(n)&&(u.string(e)?(0,Y.matchesUpTo)(n,e,t):!!u.element(e)&&(0,Y.nodeContains)(e,n))}},{key:"testIgnore",value:function(e,t,n){return!(!e||!u.element(n))&&(u.string(e)?(0,Y.matchesUpTo)(n,e,t):!!u.element(e)&&(0,Y.nodeContains)(e,n))}},{key:"fire",value:function(e){return this.events.fire(e),this}},{key:"_onOff",value:function(e,t,n,i){u.object(t)&&!u.array(t)&&(i=n,n=null);var r="on"===e?"add":"remove",o=(0,d.default)(t,n);for(var s in o){"wheel"===s&&(s=a.default.wheelEvent);for(var c=0;c<o[s].length;c++){var p=o[s][c];(0,h.isNonNativeEvent)(s,this._actions)?this.events[e](s,p):u.string(this.target)?l.default["".concat(r,"Delegate")](this.target,this._context,s,p,i):l.default[r](this.target,s,p,i)}}return this}},{key:"on",value:function(e,t,n){return this._onOff("on",e,t,n)}},{key:"off",value:function(e,t,n){return this._onOff("off",e,t,n)}},{key:"set",value:function(e){var t=this._defaults;for(var n in u.object(e)||(e={}),this.options=(0,s.default)(t.base),this._actions.methodDict){var i=n,r=this._actions.methodDict[i];this.options[i]={},this.setPerAction(i,(0,c.default)((0,c.default)({},t.perAction),t.actions[i])),this[r](e[i])}for(var o in e)u.func(this[o])&&this[o](e[o]);return this}},{key:"unset",value:function(){if(l.default.remove(this.target,"all"),u.string(this.target))for(var e in l.default.delegatedEvents){var t=l.default.delegatedEvents[e];t.selectors[0]===this.target&&t.contexts[0]===this._context&&(t.selectors.splice(0,1),t.contexts.splice(0,1),t.listeners.splice(0,1)),l.default.remove(this._context,e,l.default.delegateListener),l.default.remove(this._context,e,l.default.delegateUseCapture,!0)}else l.default.remove(this.target,"all")}}]),e}(),S=t.Interactable=w;t.default=S}),n=e(function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isNonNativeEvent=function(e,t){if(t.phaselessTypes[e])return!0;for(var n in t.map)if(0===e.indexOf(n)&&e.substr(n.length)in t.phases)return!0;return!1},n.Scope=void 0;var r=p(O),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==f(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(Ct),a=p(Wt),s=p(rt),l=p(t({})),c=p(Yt),u=p(pn),d=p(i({}));function p(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=o.win,S=o.browser,E=o.raf,x=o.events,k=function(){function e(){var t=this;m(this,e),b(this,"id","__interact_scope_".concat(Math.floor(100*Math.random()))),b(this,"listenerMaps",[]),b(this,"browser",S),b(this,"events",x),b(this,"utils",o),b(this,"defaults",o.clone(a.default)),b(this,"Eventable",s.default),b(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}}),b(this,"InteractEvent",u.default),b(this,"Interactable",void 0),b(this,"interactables",new c.default(this)),b(this,"_win",void 0),b(this,"document",void 0),b(this,"window",void 0),b(this,"documents",[]),b(this,"_plugins",{list:[],map:{}}),b(this,"onWindowUnload",function(e){return t.removeDocument(e.target)});var n=this;this.Interactable=function(){function e(){return m(this,e),t=this,!(n=g(e).apply(this,arguments))||"object"!==f(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):n;var t,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(e,l.default),_(e,[{key:"set",value:function(t){return h(g(e.prototype),"set",this).call(this,t),n.fire("interactable:set",{options:t,interactable:this}),this}},{key:"unset",value:function(){h(g(e.prototype),"unset",this).call(this);for(var t=n.interactions.list.length-1;0<=t;t--){var i=n.interactions.list[t];i.interactable===this&&(i.stop(),n.fire("interactions:destroy",{interaction:i}),i.destroy(),2<n.interactions.list.length&&n.interactions.list.splice(t,1))}n.fire("interactable:unset",{interactable:this})}},{key:"_defaults",get:function(){return n.defaults}}]),e}()}return _(e,[{key:"addListeners",value:function(e,t){this.listenerMaps.push({id:t,map:e})}},{key:"fire",value:function(e,t){for(var n=0;n<this.listenerMaps.length;n++){var i=this.listenerMaps[n].map[e];if(i&&!1===i(t,this,e))return!1}}},{key:"init",value:function(e){return function(e,t){return w.init(t),r.default.init(t),S.init(t),E.init(t),x.init(t),e.usePlugin(d.default),e.document=t.document,e.window=t,e}(this,e)}},{key:"pluginIsInstalled",value:function(e){return this._plugins.map[e.id]||-1!==this._plugins.list.indexOf(e)}},{key:"usePlugin",value:function(e,t){if(this.pluginIsInstalled(e))return this;if(e.id&&(this._plugins.map[e.id]=e),this._plugins.list.push(e),e.install&&e.install(this,t),e.listeners&&e.before){for(var n=0,i=this.listenerMaps.length,r=e.before.reduce(function(e,t){return e[t]=!0,e},{});n<i&&!r[this.listenerMaps[n].id];n++);this.listenerMaps.splice(n,0,{id:e.id,map:e.listeners})}else e.listeners&&this.listenerMaps.push({id:e.id,map:e.listeners});return this}},{key:"addDocument",value:function(e,t){if(-1!==this.getDocIndex(e))return!1;var n=w.getWindow(e);t=t?o.extend({},t):{},this.documents.push({doc:e,options:t}),x.documents.push(e),e!==this.document&&x.add(n,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:e,window:n,scope:this,options:t})}},{key:"removeDocument",value:function(e){var t=this.getDocIndex(e),n=w.getWindow(e),i=this.documents[t].options;x.remove(n,"unload",this.onWindowUnload),this.documents.splice(t,1),x.documents.splice(t,1),this.fire("scope:remove-document",{doc:e,window:n,scope:this,options:i})}},{key:"getDocIndex",value:function(e){for(var t=0;t<this.documents.length;t++)if(this.documents[t].doc===e)return t;return-1}},{key:"getDocOptions",value:function(e){var t=this.getDocIndex(e);return-1===t?null:this.documents[t].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),e}();n.Scope=k}),i=e(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=c(D),r=c(O),o=c(Te),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(de),s=c(On),l=c(Wn);function c(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n({});var g=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function v(e,t){return function(n){var r=t.interactions.list,o=a.getPointerType(n),s=d(a.getEventTargets(n),2),l=s[0],c=s[1],u=[];if(/^touch/.test(n.type)){t.prevTouchTime=t.now();for(var p=0;p<n.changedTouches.length;p++){var f=n.changedTouches[p],h={pointer:f,pointerId:a.getPointerId(f),pointerType:o,eventType:n.type,eventTarget:l,curEventTarget:c,scope:t},g=m(h);u.push([h.pointer,h.eventTarget,h.curEventTarget,g])}}else{var v=!1;if(!i.default.supportsPointerEvent&&/mouse/.test(n.type)){for(var y=0;y<r.length&&!v;y++)v="mouse"!==r[y].pointerType&&r[y].pointerIsDown;v=v||t.now()-t.prevTouchTime<500||0===n.timeStamp}if(!v){var _={pointer:n,pointerId:a.getPointerId(n),pointerType:o,eventType:n.type,curEventTarget:c,eventTarget:l,scope:t},b=m(_);u.push([_.pointer,_.eventTarget,_.curEventTarget,b])}}for(var w=0;w<u.length;w++){var S=d(u[w],4),E=S[0],x=S[1],k=S[2];S[3][e](E,n,x,k)}}}function m(e){var t=e.pointerType,n=e.scope,i={interaction:l.default.search(e),searchDetails:e};return n.fire("interactions:find",i),i.interaction||n.interactions.new({pointerType:t})}function y(e,t){var n=e.doc,i=e.scope,r=e.options,a=i.interactions.docEvents,s=o.default[t];for(var l in i.browser.isIOS&&!r.events&&(r.events={passive:!1}),o.default.delegatedEvents)s(n,l,o.default.delegateListener),s(n,l,o.default.delegateUseCapture,!0);for(var c=r&&r.events,u=0;u<a.length;u++){var d=a[u];s(n,d.type,d.listener,c)}}var _={id:"core/interactions",install:function(e){for(var t={},n=0;n<g.length;n++){var o=g[n];t[o]=v(o,e)}var a,l=i.default.pEventTypes;function c(){for(var t=0;t<e.interactions.list.length;t++){var n=e.interactions.list[t];if(n.pointerIsDown&&"touch"===n.pointerType&&!n._interacting)for(var i=function(){var t=n.pointers[r];e.documents.some(function(e){var n=e.doc;return(0,Y.nodeContains)(n,t.downTarget)})||n.removePointer(t.pointer,t.event)},r=0;r<n.pointers.length;r++)i()}}(a=r.default.PointerEvent?[{type:l.down,listener:c},{type:l.down,listener:t.pointerDown},{type:l.move,listener:t.pointerMove},{type:l.up,listener:t.pointerUp},{type:l.cancel,listener:t.pointerUp}]:[{type:"mousedown",listener:t.pointerDown},{type:"mousemove",listener:t.pointerMove},{type:"mouseup",listener:t.pointerUp},{type:"touchstart",listener:c},{type:"touchstart",listener:t.pointerDown},{type:"touchmove",listener:t.pointerMove},{type:"touchend",listener:t.pointerUp},{type:"touchcancel",listener:t.pointerUp}]).push({type:"blur",listener:function(t){for(var n=0;n<e.interactions.list.length;n++)e.interactions.list[n].documentBlur(t)}}),e.prevTouchTime=0,e.Interaction=function(){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,f(t).apply(this,arguments))}var n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,s.default),n=t,(i=[{key:"_now",value:function(){return e.now()}},{key:"pointerMoveTolerance",get:function(){return e.interactions.pointerMoveTolerance},set:function(t){e.interactions.pointerMoveTolerance=t}}])&&p(n.prototype,i),t}(),e.interactions={list:[],new:function(t){t.scopeFire=function(t,n){return e.fire(t,n)};var n=new e.Interaction(t);return e.interactions.list.push(n),n},listeners:t,docEvents:a,pointerMoveTolerance:1}},listeners:{"scope:add-document":function(e){return y(e,"add")},"scope:remove-document":function(e){return y(e,"remove")}},onDocSignal:y,doOnInteractions:v,methodNames:g};t.default=_}),r={};Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.default=function(e){return!(!e||!e.Window)&&e instanceof e.Window};var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.init=c,o.getWindow=u,o.default=void 0;var a,s=(a=r)&&a.__esModule?a:{default:a},l={realWindow:void 0,window:void 0,getWindow:u,init:c};function c(e){var t=(l.realWindow=e).document.createTextNode("");t.ownerDocument!==e.document&&"function"==typeof e.wrap&&e.wrap(t)===t&&(e=e.wrap(e)),l.window=e}function u(e){return(0,s.default)(e)?e:(e.ownerDocument||e).defaultView||l.window}"undefined"==typeof window?(l.window=void 0,l.realWindow=void 0):c(window),l.init=c;var d=l;o.default=d;var p={};Object.defineProperty(p,"__esModule",{value:!0}),p.array=p.plainObject=p.element=p.string=p.bool=p.number=p.func=p.object=p.docFrag=p.window=void 0;var f=g(r),h=g(o);function g(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}p.window=function(e){return e===h.default.window||(0,f.default)(e)},p.docFrag=function(e){return m(e)&&11===e.nodeType};var m=function(e){return!!e&&"object"===v(e)};function y(e){return"function"==typeof e}p.object=m,p.func=y,p.number=function(e){return"number"==typeof e},p.bool=function(e){return"boolean"==typeof e},p.string=function(e){return"string"==typeof e},p.element=function(e){if(!e||"object"!==v(e))return!1;var t=h.default.getWindow(e)||h.default.window;return/object|function/.test(v(t.Element))?e instanceof t.Element:1===e.nodeType&&"string"==typeof e.nodeName},p.plainObject=function(e){return m(e)&&!!e.constructor&&/function Object\b/.test(e.constructor.toString())},p.array=function(e){return m(e)&&void 0!==e.length&&y(e.splice)};var _={};function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var w=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==b(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(p);function S(e){var t=e.interaction;if("drag"===t.prepared.name){var n=t.prepared.axis;"x"===n?(t.coords.cur.page.y=t.coords.start.page.y,t.coords.cur.client.y=t.coords.start.client.y,t.coords.velocity.client.y=0,t.coords.velocity.page.y=0):"y"===n&&(t.coords.cur.page.x=t.coords.start.page.x,t.coords.cur.client.x=t.coords.start.client.x,t.coords.velocity.client.x=0,t.coords.velocity.page.x=0)}}function E(e){var t=e.iEvent,n=e.interaction;if("drag"===n.prepared.name){var i=n.prepared.axis;if("x"===i||"y"===i){var r="x"===i?"y":"x";t.page[r]=n.coords.start.page[r],t.client[r]=n.coords.start.client[r],t.delta[r]=0}}}var x={id:"actions/drag",install:function(e){var t=e.actions,n=e.Interactable,i=e.defaults;n.prototype.draggable=x.draggable,t.map.drag=x,t.methodDict.drag="draggable",i.actions.drag=x.defaults},listeners:{"interactions:before-action-move":S,"interactions:action-resume":S,"interactions:action-move":E,"auto-start:check":function(e){var t=e.interaction,n=e.interactable,i=e.buttons,r=n.options.drag;if(r&&r.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||0!=(i&n.options.drag.mouseButtons)))return!(e.action={name:"drag",axis:"start"===r.lockAxis?r.startAxis:r.lockAxis})}},draggable:function(e){return w.object(e)?(this.options.drag.enabled=!1!==e.enabled,this.setPerAction("drag",e),this.setOnEvents("drag",e),/^(xy|x|y|start)$/.test(e.lockAxis)&&(this.options.drag.lockAxis=e.lockAxis),/^(xy|x|y)$/.test(e.startAxis)&&(this.options.drag.startAxis=e.startAxis),this):w.bool(e)?(this.options.drag.enabled=e,this):this.options.drag},beforeMove:S,move:E,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}},k=x;_.default=k;var C={};function P(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.push(i)}return e}function T(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1}Object.defineProperty(C,"__esModule",{value:!0}),C.contains=function(e,t){return-1!==e.indexOf(t)},C.remove=function(e,t){return e.splice(e.indexOf(t),1)},C.merge=P,C.from=function(e){return P([],e)},C.findIndex=T,C.find=function(e,t){return e[T(e,t)]};var O={};Object.defineProperty(O,"__esModule",{value:!0}),O.default=void 0;var M={init:function(e){var t=e;M.document=t.document,M.DocumentFragment=t.DocumentFragment||I,M.SVGElement=t.SVGElement||I,M.SVGSVGElement=t.SVGSVGElement||I,M.SVGElementInstance=t.SVGElementInstance||I,M.Element=t.Element||I,M.HTMLElement=t.HTMLElement||M.Element,M.Event=t.Event,M.Touch=t.Touch||I,M.PointerEvent=t.PointerEvent||t.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function I(){}var A=M;O.default=A;var D={};function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(D,"__esModule",{value:!0}),D.default=void 0;var j=N(O),R=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==L(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(p),F=N(o);function N(e){return e&&e.__esModule?e:{default:e}}var B={init:function(e){var t=j.default.Element,n=F.default.window.navigator;B.supportsTouch="ontouchstart"in e||R.func(e.DocumentTouch)&&j.default.document instanceof e.DocumentTouch,B.supportsPointerEvent=!1!==n.pointerEnabled&&!!j.default.PointerEvent,B.isIOS=/iP(hone|od|ad)/.test(n.platform),B.isIOS7=/iP(hone|od|ad)/.test(n.platform)&&/OS 7[^\d]/.test(n.appVersion),B.isIe9=/MSIE 9/.test(n.userAgent),B.isOperaMobile="Opera"===n.appName&&B.supportsTouch&&/Presto/.test(n.userAgent),B.prefixedMatchesSelector="matches"in t.prototype?"matches":"webkitMatchesSelector"in t.prototype?"webkitMatchesSelector":"mozMatchesSelector"in t.prototype?"mozMatchesSelector":"oMatchesSelector"in t.prototype?"oMatchesSelector":"msMatchesSelector",B.pEventTypes=B.supportsPointerEvent?j.default.PointerEvent===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,B.wheelEvent="onmousewheel"in j.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},U=B;D.default=U;var z={};function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(z,"__esModule",{value:!0}),z.default=function e(t){var n={};for(var i in t){var r=t[i];V.plainObject(r)?n[i]=e(r):V.array(r)?n[i]=q.from(r):n[i]=r}return n};var q=G(C),V=G(p);function W(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return W=function(){return e},e}function G(e){if(e&&e.__esModule)return e;if(null===e||"object"!==H(e)&&"function"!=typeof e)return{default:e};var t=W();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}var Y={};function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Y,"__esModule",{value:!0}),Y.nodeContains=function(e,t){for(;t;){if(t===e)return!0;t=t.parentNode}return!1},Y.closest=function(e,t){for(;$.element(e);){if(ie(e,t))return e;e=ne(e)}return null},Y.parentNode=ne,Y.matchesSelector=ie,Y.indexOfDeepestElement=function(e){var t,n,i=[],r=e[0],o=r?0:-1;for(t=1;t<e.length;t++){var a=e[t];if(a&&a!==r)if(r){if(a.parentNode!==a.ownerDocument)if(r.parentNode!==a.ownerDocument)if(a.parentNode!==r.parentNode){if(!i.length)for(var s=r,l=void 0;(l=re(s))&&l!==s.ownerDocument;)i.unshift(s),s=l;var c=void 0;if(r instanceof J.default.HTMLElement&&a instanceof J.default.SVGElement&&!(a instanceof J.default.SVGSVGElement)){if(a===r.parentNode)continue;c=a.ownerSVGElement}else c=a;for(var u=[];c.parentNode!==c.ownerDocument;)u.unshift(c),c=re(c);for(n=0;u[n]&&u[n]===i[n];)n++;for(var d=[u[n-1],u[n],i[n]],p=d[0].lastChild;p;){if(p===d[1]){r=a,o=t,i=u;break}if(p===d[2])break;p=p.previousSibling}}else{var f=parseInt((0,Z.getWindow)(r).getComputedStyle(r).zIndex,10)||0,h=parseInt((0,Z.getWindow)(a).getComputedStyle(a).zIndex,10)||0;f<=h&&(r=a,o=t)}else r=a,o=t}else r=a,o=t}return o},Y.matchesUpTo=function(e,t,n){for(;$.element(e);){if(ie(e,t))return!0;if((e=ne(e))===n)return ie(e,t)}return!1},Y.getActualElement=function(e){return e instanceof J.default.SVGElementInstance?e.correspondingUseElement:e},Y.getScrollXY=oe,Y.getElementClientRect=ae,Y.getElementRect=function(e){var t=ae(e);if(!X.default.isIOS7&&t){var n=oe(Z.default.getWindow(e));t.left+=n.x,t.right+=n.x,t.top+=n.y,t.bottom+=n.y}return t},Y.getPath=function(e){for(var t=[];e;)t.push(e),e=ne(e);return t},Y.trySelector=function(e){return!!$.string(e)&&(J.default.document.querySelector(e),!0)};var X=te(D),J=te(O),$=ee(p),Z=ee(o);function Q(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Q=function(){return e},e}function ee(e){if(e&&e.__esModule)return e;if(null===e||"object"!==K(e)&&"function"!=typeof e)return{default:e};var t=Q();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}function te(e){return e&&e.__esModule?e:{default:e}}function ne(e){var t=e.parentNode;if($.docFrag(t)){for(;(t=t.host)&&$.docFrag(t););return t}return t}function ie(e,t){return Z.default.window!==Z.default.realWindow&&(t=t.replace(/\/deep\//g," ")),e[X.default.prefixedMatchesSelector](t)}var re=function(e){return e.parentNode?e.parentNode:e.host};function oe(e){return{x:(e=e||Z.default.window).scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop}}function ae(e){var t=e instanceof J.default.SVGElement?e.getBoundingClientRect():e.getClientRects()[0];return t&&{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}}var se={};function le(e,t){for(var n in t){var i=le.prefixedPropREs,r=!1;for(var o in i)if(0===n.indexOf(o)&&i[o].test(n)){r=!0;break}r||"function"==typeof t[n]||(e[n]=t[n])}return e}Object.defineProperty(se,"__esModule",{value:!0}),se.default=void 0,le.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/,moz:/(Pressure)$/};var ce=le;se.default=ce;var ue={};Object.defineProperty(ue,"__esModule",{value:!0}),ue.default=void 0,ue.default=function(e,t){return Math.sqrt(e*e+t*t)};var de={};function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(de,"__esModule",{value:!0}),de.copyCoords=function(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp},de.setCoordDeltas=function(e,t,n){e.page.x=n.page.x-t.page.x,e.page.y=n.page.y-t.page.y,e.client.x=n.client.x-t.client.x,e.client.y=n.client.y-t.client.y,e.timeStamp=n.timeStamp-t.timeStamp},de.setCoordVelocity=function(e,t){var n=Math.max(t.timeStamp/1e3,.001);e.page.x=t.page.x/n,e.page.y=t.page.y/n,e.client.x=t.client.x/n,e.client.y=t.client.y/n,e.timeStamp=n},de.setZeroCoords=function(e){e.page.x=0,e.page.y=0,e.client.x=0,e.client.y=0},de.isNativePointer=Se,de.getXY=Ee,de.getPageXY=xe,de.getClientXY=ke,de.getPointerId=function(e){return me.number(e.pointerId)?e.pointerId:e.identifier},de.setCoords=function(e,t,n){var i=1<t.length?Pe(t):t[0],r={};xe(i,r),e.page.x=r.x,e.page.y=r.y,ke(i,r),e.client.x=r.x,e.client.y=r.y,e.timeStamp=n},de.getTouchPair=Ce,de.pointerAverage=Pe,de.touchBBox=function(e){if(!(e.length||e.touches&&1<e.touches.length))return null;var t=Ce(e),n=Math.min(t[0].pageX,t[1].pageX),i=Math.min(t[0].pageY,t[1].pageY),r=Math.max(t[0].pageX,t[1].pageX),o=Math.max(t[0].pageY,t[1].pageY);return{x:n,y:i,left:n,top:i,right:r,bottom:o,width:r-n,height:o-i}},de.touchDistance=function(e,t){var n=t+"X",i=t+"Y",r=Ce(e),o=r[0][n]-r[1][n],a=r[0][i]-r[1][i];return(0,ve.default)(o,a)},de.touchAngle=function(e,t){var n=t+"X",i=t+"Y",r=Ce(e),o=r[1][n]-r[0][n],a=r[1][i]-r[0][i];return 180*Math.atan2(a,o)/Math.PI},de.getPointerType=function(e){return me.string(e.pointerType)?e.pointerType:me.number(e.pointerType)?[void 0,void 0,"touch","pen","mouse"][e.pointerType]:/touch/.test(e.type)||e instanceof he.default.Touch?"touch":"mouse"},de.getEventTargets=function(e){var t=me.func(e.composedPath)?e.composedPath():e.path;return[ge.getActualElement(t?t[0]:e.target),ge.getActualElement(e.currentTarget)]},de.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},de.coordsToEvent=function(e){return{coords:e,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons}}},Object.defineProperty(de,"pointerExtend",{enumerable:!0,get:function(){return ye.default}});var fe=we(D),he=we(O),ge=be(Y),ve=we(ue),me=be(p),ye=we(se);function _e(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _e=function(){return e},e}function be(e){if(e&&e.__esModule)return e;if(null===e||"object"!==pe(e)&&"function"!=typeof e)return{default:e};var t=_e();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}function we(e){return e&&e.__esModule?e:{default:e}}function Se(e){return e instanceof he.default.Event||e instanceof he.default.Touch}function Ee(e,t,n){return(n=n||{}).x=t[(e=e||"page")+"X"],n.y=t[e+"Y"],n}function xe(e,t){return t=t||{x:0,y:0},fe.default.isOperaMobile&&Se(e)?(Ee("screen",e,t),t.x+=window.scrollX,t.y+=window.scrollY):Ee("page",e,t),t}function ke(e,t){return t=t||{},fe.default.isOperaMobile&&Se(e)?Ee("screen",e,t):Ee("client",e,t),t}function Ce(e){var t=[];return me.array(e)?(t[0]=e[0],t[1]=e[1]):"touchend"===e.type?1===e.touches.length?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):0===e.touches.length&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function Pe(e){for(var t={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},n=0;n<e.length;n++){var i=e[n];for(var r in t)t[r]+=i[r]}for(var o in t)t[o]/=e.length;return t}var Te={};function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Te,"__esModule",{value:!0}),Te.default=Te.FakeEvent=void 0;var Me,Ie=Re(Y),Ae=Re(p),De=(Me=se)&&Me.__esModule?Me:{default:Me},Le=Re(de);function je(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return je=function(){return e},e}function Re(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Oe(e)&&"function"!=typeof e)return{default:e};var t=je();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}function Fe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Be=[],Ue=[],ze={},He=[];function qe(e,t,n,i){var r=Ye(i),o=Be.indexOf(e),a=Ue[o];a||(a={events:{},typeCount:0},o=Be.push(e)-1,Ue.push(a)),a.events[t]||(a.events[t]=[],a.typeCount++),e.removeEventListener&&!(0,C.contains)(a.events[t],n)&&(e.addEventListener(t,n,Xe.supportsOptions?r:!!r.capture),a.events[t].push(n))}function Ve(e,t,n,i){var r=Ye(i),o=Be.indexOf(e),a=Ue[o];if(a&&a.events)if("all"!==t){if(a.events[t]){var s=a.events[t].length;if("all"===n){for(var l=0;l<s;l++)Ve(e,t,a.events[t][l],r);return}for(var c=0;c<s;c++)if(e.removeEventListener&&a.events[t][c]===n){e.removeEventListener(t,n,Xe.supportsOptions?r:!!r.capture),a.events[t].splice(c,1);break}a.events[t]&&0===a.events[t].length&&(a.events[t]=null,a.typeCount--)}a.typeCount||(Ue.splice(o,1),Be.splice(o,1))}else for(t in a.events)a.events.hasOwnProperty(t)&&Ve(e,t,"all")}function We(e,t){for(var n=Ye(t),i=new Ke(e),r=ze[e.type],o=Ne(Le.getEventTargets(e),1)[0],a=o;Ae.element(a);){for(var s=0;s<r.selectors.length;s++){var l=r.selectors[s],c=r.contexts[s];if(Ie.matchesSelector(a,l)&&Ie.nodeContains(c,o)&&Ie.nodeContains(c,a)){var u=r.listeners[s];i.currentTarget=a;for(var d=0;d<u.length;d++){var p=Ne(u[d],3),f=p[0],h=p[1],g=p[2];h===!!n.capture&&g===n.passive&&f(i)}}}a=Ie.parentNode(a)}}function Ge(e){return We.call(this,e,!0)}function Ye(e){return Ae.object(e)?e:{capture:e}}var Ke=function(){function e(t){var n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.originalEvent=t,r=void 0,(i="currentTarget")in(n=this)?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,(0,De.default)(this,t)}var t,n;return t=e,(n=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&Fe(t.prototype,n),e}();Te.FakeEvent=Ke;var Xe={add:qe,remove:Ve,addDelegate:function(e,t,n,i,r){var o=Ye(r);if(!ze[n]){ze[n]={contexts:[],listeners:[],selectors:[]};for(var a=0;a<He.length;a++){var s=He[a];qe(s,n,We),qe(s,n,Ge,!0)}}var l,c=ze[n];for(l=c.selectors.length-1;0<=l&&(c.selectors[l]!==e||c.contexts[l]!==t);l--);-1===l&&(l=c.selectors.length,c.selectors.push(e),c.contexts.push(t),c.listeners.push([])),c.listeners[l].push([i,!!o.capture,o.passive])},removeDelegate:function(e,t,n,i,r){var o,a=Ye(r),s=ze[n],l=!1;if(s)for(o=s.selectors.length-1;0<=o;o--)if(s.selectors[o]===e&&s.contexts[o]===t){for(var c=s.listeners[o],u=c.length-1;0<=u;u--){var d=Ne(c[u],3),p=d[0],f=d[1],h=d[2];if(p===i&&f===!!a.capture&&h===a.passive){c.splice(u,1),c.length||(s.selectors.splice(o,1),s.contexts.splice(o,1),s.listeners.splice(o,1),Ve(t,n,We),Ve(t,n,Ge,!0),s.selectors.length||(ze[n]=null)),l=!0;break}}if(l)break}},delegateListener:We,delegateUseCapture:Ge,delegatedEvents:ze,documents:He,supportsOptions:!1,supportsPassive:!1,_elements:Be,_targets:Ue,init:function(e){e.document.createElement("div").addEventListener("test",null,{get capture(){return Xe.supportsOptions=!0},get passive(){return Xe.supportsPassive=!0}})}},Je=Xe;Te.default=Je;var $e={};Object.defineProperty($e,"__esModule",{value:!0}),$e.default=function(e,t){for(var n in t)e[n]=t[n];return e};var Ze={};function Qe(e){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.default=function e(t,n,i){if(i=i||{},nt.string(t)&&-1!==t.search(" ")&&(t=it(t)),nt.array(t))return t.reduce(function(t,r){return(0,tt.default)(t,e(r,n,i))},i);if(nt.object(t)&&(n=t,t=""),nt.func(n))i[t]=i[t]||[],i[t].push(n);else if(nt.array(n))for(var r=0;r<n.length;r++){var o=n[r];e(t,o,i)}else if(nt.object(n))for(var a in n){var s=it(a).map(function(e){return"".concat(t).concat(e)});e(s,n[a],i)}return i};var et,tt=(et=$e)&&et.__esModule?et:{default:et},nt=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Qe(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(p);function it(e){return e.trim().split(/ +/)}var rt={};function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=void 0;var at=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==ot(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(C),st=ct($e),lt=ct(Ze);function ct(e){return e&&e.__esModule?e:{default:e}}function ut(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pt(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(e.immediatePropagationStopped)break;i(e)}}var ft=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),dt(this,"options",void 0),dt(this,"types",{}),dt(this,"propagationStopped",!1),dt(this,"immediatePropagationStopped",!1),dt(this,"global",void 0),this.options=(0,st.default)({},t||{})}var t,n;return t=e,(n=[{key:"fire",value:function(e){var t,n=this.global;(t=this.types[e.type])&&pt(e,t),!e.propagationStopped&&n&&(t=n[e.type])&&pt(e,t)}},{key:"on",value:function(e,t){var n=(0,lt.default)(e,t);for(e in n)this.types[e]=at.merge(this.types[e]||[],n[e])}},{key:"off",value:function(e,t){var n=(0,lt.default)(e,t);for(e in n){var i=this.types[e];if(i&&i.length)for(var r=0;r<n[e].length;r++){var o=n[e][r],a=i.indexOf(o);-1!==a&&i.splice(a,1)}}}},{key:"getRect",value:function(){return null}}])&&ut(t.prototype,n),e}();rt.default=ft;var ht={};function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(ht,"__esModule",{value:!0}),ht.getStringOptionResult=_t,ht.resolveRectLike=function(e,t,n,i){var r=e;return yt.string(r)?r=_t(r,t,n):yt.func(r)&&(r=r.apply(void 0,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(i))),yt.element(r)&&(r=(0,Y.getElementRect)(r)),r},ht.rectToXY=function(e){return e&&{x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top}},ht.xywhToTlbr=function(e){return!e||"left"in e&&"top"in e||((e=(0,mt.default)({},e)).left=e.x||0,e.top=e.y||0,e.right=e.right||e.left+e.width,e.bottom=e.bottom||e.top+e.height),e},ht.tlbrToXywh=function(e){return!e||"x"in e&&"y"in e||((e=(0,mt.default)({},e)).x=e.left||0,e.y=e.top||0,e.width=e.width||e.right||0-e.x,e.height=e.height||e.bottom||0-e.y),e},ht.addEdges=function(e,t,n){e.left&&(t.left+=n.x),e.right&&(t.right+=n.x),e.top&&(t.top+=n.y),e.bottom&&(t.bottom+=n.y),t.width=t.right-t.left,t.height=t.bottom-t.top};var vt,mt=(vt=$e)&&vt.__esModule?vt:{default:vt},yt=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==gt(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(p);function _t(e,t,n){return"parent"===e?(0,Y.parentNode)(n):"self"===e?t.getRect(n):(0,Y.closest)(n,e)}var bt={};Object.defineProperty(bt,"__esModule",{value:!0}),bt.default=function(e,t,n){var i=e.options[n],r=i&&i.origin||e.options.origin,o=(0,ht.resolveRectLike)(r,e,t,[e&&t]);return(0,ht.rectToXY)(o)||{x:0,y:0}};var wt={};Object.defineProperty(wt,"__esModule",{value:!0}),wt.default=void 0;var St,Et,xt=0,kt={request:function(e){return St(e)},cancel:function(e){return Et(e)},init:function(e){if(St=e.requestAnimationFrame,Et=e.cancelAnimationFrame,!St)for(var t=["ms","moz","webkit","o"],n=0;n<t.length;n++){var i=t[n];St=e["".concat(i,"RequestAnimationFrame")],Et=e["".concat(i,"CancelAnimationFrame")]||e["".concat(i,"CancelRequestAnimationFrame")]}St||(St=function(e){var t=Date.now(),n=Math.max(0,16-(t-xt)),i=setTimeout(function(){e(t+n)},n);return xt=t+n,i},Et=function(e){return clearTimeout(e)})}};wt.default=kt;var Ct={};function Pt(e){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.warnOnce=function(e,t){var n=!1;return function(){return n||(Dt.default.window.console.warn(t),n=!0),e.apply(this,arguments)}},Ct.copyAction=function(e,t){return e.name=t.name,e.axis=t.axis,e.edges=t.edges,e},Object.defineProperty(Ct,"win",{enumerable:!0,get:function(){return Dt.default}}),Object.defineProperty(Ct,"browser",{enumerable:!0,get:function(){return Lt.default}}),Object.defineProperty(Ct,"clone",{enumerable:!0,get:function(){return jt.default}}),Object.defineProperty(Ct,"events",{enumerable:!0,get:function(){return Rt.default}}),Object.defineProperty(Ct,"extend",{enumerable:!0,get:function(){return Ft.default}}),Object.defineProperty(Ct,"getOriginXY",{enumerable:!0,get:function(){return Nt.default}}),Object.defineProperty(Ct,"hypot",{enumerable:!0,get:function(){return Bt.default}}),Object.defineProperty(Ct,"normalizeListeners",{enumerable:!0,get:function(){return Ut.default}}),Object.defineProperty(Ct,"raf",{enumerable:!0,get:function(){return zt.default}}),Ct.rect=Ct.pointer=Ct.is=Ct.dom=Ct.arr=void 0;var Tt=Vt(C);Ct.arr=Tt;var Ot=Vt(Y);Ct.dom=Ot;var Mt=Vt(p);Ct.is=Mt;var It=Vt(de);Ct.pointer=It;var At=Vt(ht);Ct.rect=At;var Dt=Ht(o),Lt=Ht(D),jt=Ht(z),Rt=Ht(Te),Ft=Ht($e),Nt=Ht(bt),Bt=Ht(ue),Ut=Ht(Ze),zt=Ht(wt);function Ht(e){return e&&e.__esModule?e:{default:e}}function qt(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return qt=function(){return e},e}function Vt(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Pt(e)&&"function"!=typeof e)return{default:e};var t=qt();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.default=Wt.defaults=void 0;var Gt=Wt.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};Wt.default=Gt;var Yt={};function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.default=void 0;var Xt,Jt=tn(C),$t=tn(Y),Zt=(Xt=$e)&&Xt.__esModule?Xt:{default:Xt},Qt=tn(p);function en(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return en=function(){return e},e}function tn(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Kt(e)&&"function"!=typeof e)return{default:e};var t=en();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}function nn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var on=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scope=t,rn(this,"list",[]),rn(this,"selectorMap",{}),t.addListeners({"interactable:unset":function(e){var t=e.interactable,i=t.target,r=t._context,o=Qt.string(i)?n.selectorMap[i]:i[n.scope.id],a=o.findIndex(function(e){return e.context===r});o[a]&&(o[a].context=null,o[a].interactable=null),o.splice(a,1)}})}var t,n;return t=e,(n=[{key:"new",value:function(e,t){t=(0,Zt.default)(t||{},{actions:this.scope.actions});var n=new this.scope.Interactable(e,t,this.scope.document),i={context:n._context,interactable:n};return this.scope.addDocument(n._doc),this.list.push(n),Qt.string(e)?(this.selectorMap[e]||(this.selectorMap[e]=[]),this.selectorMap[e].push(i)):(n.target[this.scope.id]||Object.defineProperty(e,this.scope.id,{value:[],configurable:!0}),e[this.scope.id].push(i)),this.scope.fire("interactable:new",{target:e,options:t,interactable:n,win:this.scope._win}),n}},{key:"get",value:function(e,t){var n=t&&t.context||this.scope.document,i=Qt.string(e),r=i?this.selectorMap[e]:e[this.scope.id];if(!r)return null;var o=Jt.find(r,function(t){return t.context===n&&(i||t.interactable.inContext(e))});return o&&o.interactable}},{key:"forEachMatch",value:function(e,t){for(var n=0;n<this.list.length;n++){var i=this.list[n],r=void 0;if((Qt.string(i.target)?Qt.element(e)&&$t.matchesSelector(e,i.target):e===i.target)&&i.inContext(e)&&(r=t(i)),void 0!==r)return r}}}])&&nn(t.prototype,n),e}();Yt.default=on;var an={};function sn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ln(e,t,n){return t&&sn(e.prototype,t),n&&sn(e,n),e}function cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(an,"__esModule",{value:!0}),an.default=an.BaseEvent=void 0;var un=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),cn(this,"type",void 0),cn(this,"target",void 0),cn(this,"currentTarget",void 0),cn(this,"interactable",void 0),cn(this,"_interaction",void 0),cn(this,"timeStamp",void 0),cn(this,"immediatePropagationStopped",!1),cn(this,"propagationStopped",!1),this._interaction=t}return ln(e,[{key:"interaction",get:function(){return this._interaction._proxy}}]),ln(e,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),e}(),dn=an.BaseEvent=un;an.default=dn;var pn={};Object.defineProperty(pn,"__esModule",{value:!0}),pn.default=pn.InteractEvent=void 0;var fn=yn($e),hn=yn(bt),gn=yn(ue),vn=yn(an),mn=yn(Wt);function yn(e){return e&&e.__esModule?e:{default:e}}function _n(e){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function wn(e){return(wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function En(e,t){return(En=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kn=function(){function e(t,n,i,r,o,a,s){var l,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xn(Sn(l=!(c=wn(e).call(this,t))||"object"!==_n(c)&&"function"!=typeof c?Sn(this):c),"target",void 0),xn(Sn(l),"currentTarget",void 0),xn(Sn(l),"relatedTarget",null),xn(Sn(l),"screenX",void 0),xn(Sn(l),"screenY",void 0),xn(Sn(l),"button",void 0),xn(Sn(l),"buttons",void 0),xn(Sn(l),"ctrlKey",void 0),xn(Sn(l),"shiftKey",void 0),xn(Sn(l),"altKey",void 0),xn(Sn(l),"metaKey",void 0),xn(Sn(l),"page",void 0),xn(Sn(l),"client",void 0),xn(Sn(l),"delta",void 0),xn(Sn(l),"rect",void 0),xn(Sn(l),"x0",void 0),xn(Sn(l),"y0",void 0),xn(Sn(l),"t0",void 0),xn(Sn(l),"dt",void 0),xn(Sn(l),"duration",void 0),xn(Sn(l),"clientX0",void 0),xn(Sn(l),"clientY0",void 0),xn(Sn(l),"velocity",void 0),xn(Sn(l),"speed",void 0),xn(Sn(l),"swipe",void 0),xn(Sn(l),"timeStamp",void 0),xn(Sn(l),"dragEnter",void 0),xn(Sn(l),"dragLeave",void 0),xn(Sn(l),"axes",void 0),xn(Sn(l),"preEnd",void 0),o=o||t.element;var u=t.interactable,d=(u&&u.options||mn.default).deltaSource,p=(0,hn.default)(u,o,i),f="start"===r,h="end"===r,g=f?Sn(l):t.prevEvent,v=f?t.coords.start:h?{page:g.page,client:g.client,timeStamp:t.coords.cur.timeStamp}:t.coords.cur;return l.page=(0,fn.default)({},v.page),l.client=(0,fn.default)({},v.client),l.rect=(0,fn.default)({},t.rect),l.timeStamp=v.timeStamp,h||(l.page.x-=p.x,l.page.y-=p.y,l.client.x-=p.x,l.client.y-=p.y),l.ctrlKey=n.ctrlKey,l.altKey=n.altKey,l.shiftKey=n.shiftKey,l.metaKey=n.metaKey,l.button=n.button,l.buttons=n.buttons,l.target=o,l.currentTarget=o,l.preEnd=a,l.type=s||i+(r||""),l.interactable=u,l.t0=f?t.pointers[t.pointers.length-1].downTime:g.t0,l.x0=t.coords.start.page.x-p.x,l.y0=t.coords.start.page.y-p.y,l.clientX0=t.coords.start.client.x-p.x,l.clientY0=t.coords.start.client.y-p.y,l.delta=f||h?{x:0,y:0}:{x:l[d].x-g[d].x,y:l[d].y-g[d].y},l.dt=t.coords.delta.timeStamp,l.duration=l.timeStamp-l.t0,l.velocity=(0,fn.default)({},t.coords.velocity[d]),l.speed=(0,gn.default)(l.velocity.x,l.velocity.y),l.swipe=h||"inertiastart"===r?l.getSwipe():null,l}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&En(e,t)}(e,vn.default),t=e,(n=[{key:"getSwipe",value:function(){var e=this._interaction;if(e.prevEvent.speed<600||150<this.timeStamp-e.prevEvent.timeStamp)return null;var t=180*Math.atan2(e.prevEvent.velocityY,e.prevEvent.velocityX)/Math.PI;t<0&&(t+=360);var n=112.5<=t&&t<247.5,i=202.5<=t&&t<337.5;return{up:i,down:!i&&22.5<=t&&t<157.5,left:n,right:!n&&(292.5<=t||t<67.5),angle:t,speed:e.prevEvent.speed,velocity:{x:e.prevEvent.velocityX,y:e.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"pageX",get:function(){return this.page.x},set:function(e){this.page.x=e}},{key:"pageY",get:function(){return this.page.y},set:function(e){this.page.y=e}},{key:"clientX",get:function(){return this.client.x},set:function(e){this.client.x=e}},{key:"clientY",get:function(){return this.client.y},set:function(e){this.client.y=e}},{key:"dx",get:function(){return this.delta.x},set:function(e){this.delta.x=e}},{key:"dy",get:function(){return this.delta.y},set:function(e){this.delta.y=e}},{key:"velocityX",get:function(){return this.velocity.x},set:function(e){this.velocity.x=e}},{key:"velocityY",get:function(){return this.velocity.y},set:function(e){this.velocity.y=e}}])&&bn(t.prototype,n),e}(),Cn=pn.InteractEvent=kn;pn.default=Cn;var Pn={};Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.default=Pn.PointerInfo=void 0;var Tn=Pn.PointerInfo=function e(t,n,i,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.pointer=n,this.event=i,this.downTime=r,this.downTarget=o};Pn.default=Tn;var On={};function Mn(e){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(On,"__esModule",{value:!0}),Object.defineProperty(On,"PointerInfo",{enumerable:!0,get:function(){return Fn.default}}),On.default=On.Interaction=On._ProxyMethods=On._ProxyValues=void 0;var In,An,Dn,Ln,jn=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Mn(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(Ct),Rn=Nn(pn),Fn=Nn(Pn);function Nn(e){return e&&e.__esModule?e:{default:e}}function Bn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Un(e,t,n){return t&&Bn(e.prototype,t),n&&Bn(e,n),e}function zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}On._ProxyValues=In,(An=In||(On._ProxyValues=In={})).interactable="",An.element="",An.prepared="",An.pointerIsDown="",An.pointerWasMoved="",An._proxy="",On._ProxyMethods=Dn,(Ln=Dn||(On._ProxyMethods=Dn={})).start="",Ln.move="",Ln.end="",Ln.stop="",Ln.interacting="";var Hn=0,qn=function(){function e(t){var n=this,i=t.pointerType,r=t.scopeFire;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),zn(this,"interactable",null),zn(this,"element",null),zn(this,"rect",void 0),zn(this,"_rects",void 0),zn(this,"edges",void 0),zn(this,"_scopeFire",void 0),zn(this,"prepared",{name:null,axis:null,edges:null}),zn(this,"pointerType",void 0),zn(this,"pointers",[]),zn(this,"downEvent",null),zn(this,"downPointer",{}),zn(this,"_latestPointer",{pointer:null,event:null,eventTarget:null}),zn(this,"prevEvent",null),zn(this,"pointerIsDown",!1),zn(this,"pointerWasMoved",!1),zn(this,"_interacting",!1),zn(this,"_ending",!1),zn(this,"_stopped",!0),zn(this,"_proxy",null),zn(this,"simulation",null),zn(this,"doMove",jn.warnOnce(function(e){this.move(e)},"The interaction.doMove() method has been renamed to interaction.move()")),zn(this,"coords",{start:jn.pointer.newCoords(),prev:jn.pointer.newCoords(),cur:jn.pointer.newCoords(),delta:jn.pointer.newCoords(),velocity:jn.pointer.newCoords()}),zn(this,"_id",Hn++),this._scopeFire=r,this.pointerType=i;var o=this;function a(e){Object.defineProperty(n._proxy,e,{get:function(){return o[e]}})}for(var s in this._proxy={},In)a(s);function l(e){Object.defineProperty(n._proxy,e,{value:function(){return o[e].apply(o,arguments)}})}for(var c in Dn)l(c);this._scopeFire("interactions:new",{interaction:this})}return Un(e,[{key:"pointerMoveTolerance",get:function(){return 1}}]),Un(e,[{key:"pointerDown",value:function(e,t,n){var i=this.updatePointer(e,t,n,!0),r=this.pointers[i];this._scopeFire("interactions:down",{pointer:e,event:t,eventTarget:n,pointerIndex:i,pointerInfo:r,type:"down",interaction:this})}},{key:"start",value:function(e,t,n){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===e.name?2:1)||!t.options[e.name].enabled)&&(jn.copyAction(this.prepared,e),this.interactable=t,this.element=n,this.rect=t.getRect(n),this.edges=this.prepared.edges?jn.extend({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(e,t,n){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(e,t,n,!1);var i,r,o=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(i=this.coords.cur.client.x-this.coords.start.client.x,r=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=jn.hypot(i,r)>this.pointerMoveTolerance);var a=this.getPointerIndex(e),s={pointer:e,pointerIndex:a,pointerInfo:this.pointers[a],event:t,type:"move",eventTarget:n,dx:i,dy:r,duplicate:o,interaction:this};o||jn.pointer.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",s),o||this.simulation||(this.interacting()&&(s.type=null,this.move(s)),this.pointerWasMoved&&jn.pointer.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(e){e&&e.event||jn.pointer.setZeroCoords(this.coords.delta),(e=jn.extend({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},e||{})).phase="move",this._doPhase(e)}},{key:"pointerUp",value:function(e,t,n,i){var r=this.getPointerIndex(e);-1===r&&(r=this.updatePointer(e,t,n,!1));var o=/cancel$/i.test(t.type)?"cancel":"up";this._scopeFire("interactions:".concat(o),{pointer:e,pointerIndex:r,pointerInfo:this.pointers[r],event:t,eventTarget:n,type:o,curEventTarget:i,interaction:this}),this.simulation||this.end(t),this.pointerIsDown=!1,this.removePointer(e,t)}},{key:"documentBlur",value:function(e){this.end(e),this._scopeFire("interactions:blur",{event:e,type:"blur",interaction:this})}},{key:"end",value:function(e){var t;this._ending=!0,e=e||this._latestPointer.event,this.interacting()&&(t=this._doPhase({event:e,interaction:this,phase:"end"})),!(this._ending=!1)===t&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(e){var t=jn.pointer.getPointerId(e);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:jn.arr.findIndex(this.pointers,function(e){return e.id===t})}},{key:"getPointerInfo",value:function(e){return this.pointers[this.getPointerIndex(e)]}},{key:"updatePointer",value:function(e,t,n,i){var r=jn.pointer.getPointerId(e),o=this.getPointerIndex(e),a=this.pointers[o];return i=!1!==i&&(i||/(down|start)$/i.test(t.type)),a?a.pointer=e:(a=new Fn.default(r,e,t,null,null),o=this.pointers.length,this.pointers.push(a)),jn.pointer.setCoords(this.coords.cur,this.pointers.map(function(e){return e.pointer}),this._now()),jn.pointer.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),i&&(this.pointerIsDown=!0,a.downTime=this.coords.cur.timeStamp,a.downTarget=n,jn.pointer.pointerExtend(this.downPointer,e),this.interacting()||(jn.pointer.copyCoords(this.coords.start,this.coords.cur),jn.pointer.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=t,this.pointerWasMoved=!1)),this._updateLatestPointer(e,t,n),this._scopeFire("interactions:update-pointer",{pointer:e,event:t,eventTarget:n,down:i,pointerInfo:a,pointerIndex:o,interaction:this}),o}},{key:"removePointer",value:function(e,t){var n=this.getPointerIndex(e);if(-1!==n){var i=this.pointers[n];this._scopeFire("interactions:remove-pointer",{pointer:e,event:t,eventTarget:null,pointerIndex:n,pointerInfo:i,interaction:this}),this.pointers.splice(n,1)}}},{key:"_updateLatestPointer",value:function(e,t,n){this._latestPointer.pointer=e,this._latestPointer.event=t,this._latestPointer.eventTarget=n}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(e,t,n,i){return new Rn.default(this,e,this.prepared.name,t,this.element,n,i)}},{key:"_fireEvent",value:function(e){this.interactable.fire(e),(!this.prevEvent||e.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=e)}},{key:"_doPhase",value:function(e){var t=e.event,n=e.phase,i=e.preEnd,r=e.type,o=this.rect;if(o&&"move"===n&&(jn.rect.addEdges(this.edges,o,this.coords.delta[this.interactable.options.deltaSource]),o.width=o.right-o.left,o.height=o.bottom-o.top),!1===this._scopeFire("interactions:before-action-".concat(n),e))return!1;var a=e.iEvent=this._createPreparedEvent(t,n,i,r);return this._scopeFire("interactions:action-".concat(n),e),"start"===n&&(this.prevEvent=a),this._fireEvent(a),this._scopeFire("interactions:after-action-".concat(n),e),!0}},{key:"_now",value:function(){return Date.now()}}]),e}(),Vn=On.Interaction=qn;On.default=Vn;var Wn={};function Gn(e){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.default=void 0;var Yn=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Gn(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(Y),Kn={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(e){for(var t=0;t<Kn.methodOrder.length;t++){var n;n=Kn.methodOrder[t];var i=Kn[n](e);if(i)return i}return null},simulationResume:function(e){var t=e.pointerType,n=e.eventType,i=e.eventTarget,r=e.scope;if(!/down|start/i.test(n))return null;for(var o=0;o<r.interactions.list.length;o++){var a=r.interactions.list[o],s=i;if(a.simulation&&a.simulation.allowResume&&a.pointerType===t)for(;s;){if(s===a.element)return a;s=Yn.parentNode(s)}}return null},mouseOrPen:function(e){var t,n=e.pointerId,i=e.pointerType,r=e.eventType,o=e.scope;if("mouse"!==i&&"pen"!==i)return null;for(var a=0;a<o.interactions.list.length;a++){var s=o.interactions.list[a];if(s.pointerType===i){if(s.simulation&&!Xn(s,n))continue;if(s.interacting())return s;t=t||s}}if(t)return t;for(var l=0;l<o.interactions.list.length;l++){var c=o.interactions.list[l];if(!(c.pointerType!==i||/down/i.test(r)&&c.simulation))return c}return null},hasPointer:function(e){for(var t=e.pointerId,n=e.scope,i=0;i<n.interactions.list.length;i++){var r=n.interactions.list[i];if(Xn(r,t))return r}return null},idle:function(e){for(var t=e.pointerType,n=e.scope,i=0;i<n.interactions.list.length;i++){var r=n.interactions.list[i];if(1===r.pointers.length){var o=r.interactable;if(o&&(!o.options.gesture||!o.options.gesture.enabled))continue}else if(2<=r.pointers.length)continue;if(!r.interacting()&&t===r.pointerType)return r}return null}};function Xn(e,t){return e.pointers.some(function(e){return e.id===t})}var Jn=Kn;Wn.default=Jn;var $n={};Object.defineProperty($n,"__esModule",{value:!0}),$n.default=void 0;var Zn,Qn=(Zn=an)&&Zn.__esModule?Zn:{default:Zn},ei=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==ti(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(C);function ti(e){return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ni(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ii(e){return(ii=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ri(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oi(e,t){return(oi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ai(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var si=function(){function e(t,n,i){var r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ai(ri(r=!(o=ii(e).call(this,n._interaction))||"object"!==ti(o)&&"function"!=typeof o?ri(this):o),"target",void 0),ai(ri(r),"dropzone",void 0),ai(ri(r),"dragEvent",void 0),ai(ri(r),"relatedTarget",void 0),ai(ri(r),"draggable",void 0),ai(ri(r),"timeStamp",void 0),ai(ri(r),"propagationStopped",!1),ai(ri(r),"immediatePropagationStopped",!1);var a="dragleave"===i?t.prev:t.cur,s=a.element,l=a.dropzone;return r.type=i,r.target=s,r.currentTarget=s,r.dropzone=l,r.dragEvent=n,r.relatedTarget=n.target,r.draggable=n.interactable,r.timeStamp=n.timeStamp,r}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oi(e,t)}(e,Qn.default),t=e,(n=[{key:"reject",value:function(){var t=this,n=this._interaction.dropState;if("dropactivate"===this.type||this.dropzone&&n.cur.dropzone===this.dropzone&&n.cur.element===this.target)if(n.prev.dropzone=this.dropzone,n.prev.element=this.target,n.rejected=!0,n.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){var i=n.activeDrops,r=ei.findIndex(i,function(e){var n=e.dropzone,i=e.element;return n===t.dropzone&&i===t.target});n.activeDrops.splice(r,1);var o=new e(n,this.dragEvent,"dropdeactivate");o.dropzone=this.dropzone,o.target=this.target,this.dropzone.fire(o)}else this.dropzone.fire(new e(n,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&ni(t.prototype,n),e}();$n.default=si;var li={};function ci(e){return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(li,"__esModule",{value:!0}),li.default=void 0,fi(t({})),n({});var ui=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==ci(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(Ct),di=fi(_),pi=fi($n);function fi(e){return e&&e.__esModule?e:{default:e}}function hi(e,t){for(var n=0;n<e.slice().length;n++){var i=e.slice()[n],r=i.dropzone,o=i.element;t.dropzone=r,t.target=o,r.fire(t),t.propagationStopped=t.immediatePropagationStopped=!1}}function gi(e,t){for(var n=function(e,t){for(var n=e.interactables,i=[],r=0;r<n.list.length;r++){var o=n.list[r];if(o.options.drop.enabled){var a=o.options.drop.accept;if(!(ui.is.element(a)&&a!==t||ui.is.string(a)&&!ui.dom.matchesSelector(t,a)||ui.is.func(a)&&!a({dropzone:o,draggableElement:t})))for(var s=ui.is.string(o.target)?o._context.querySelectorAll(o.target):ui.is.array(o.target)?o.target:[o.target],l=0;l<s.length;l++){var c=s[l];c!==t&&i.push({dropzone:o,element:c})}}}return i}(e,t),i=0;i<n.length;i++){var r=n[i];r.rect=r.dropzone.getRect(r.element)}return n}function vi(e,t,n){for(var i=e.dropState,r=e.interactable,o=e.element,a=[],s=0;s<i.activeDrops.length;s++){var l=i.activeDrops[s],c=l.dropzone,u=l.element,d=l.rect;a.push(c.dropCheck(t,n,r,o,u,d)?u:null)}var p=ui.dom.indexOfDeepestElement(a);return i.activeDrops[p]||null}function mi(e,t,n){var i=e.dropState,r={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===n.type&&(r.activate=new pi.default(i,n,"dropactivate"),r.activate.target=null,r.activate.dropzone=null),"dragend"===n.type&&(r.deactivate=new pi.default(i,n,"dropdeactivate"),r.deactivate.target=null,r.deactivate.dropzone=null),i.rejected||(i.cur.element!==i.prev.element&&(i.prev.dropzone&&(r.leave=new pi.default(i,n,"dragleave"),n.dragLeave=r.leave.target=i.prev.element,n.prevDropzone=r.leave.dropzone=i.prev.dropzone),i.cur.dropzone&&(r.enter=new pi.default(i,n,"dragenter"),n.dragEnter=i.cur.element,n.dropzone=i.cur.dropzone)),"dragend"===n.type&&i.cur.dropzone&&(r.drop=new pi.default(i,n,"drop"),n.dropzone=i.cur.dropzone,n.relatedTarget=i.cur.element),"dragmove"===n.type&&i.cur.dropzone&&(r.move=new pi.default(i,n,"dropmove"),(r.move.dragmove=n).dropzone=i.cur.dropzone)),r}function yi(e,t){var n=e.dropState,i=n.activeDrops,r=n.cur,o=n.prev;t.leave&&o.dropzone.fire(t.leave),t.move&&r.dropzone.fire(t.move),t.enter&&r.dropzone.fire(t.enter),t.drop&&r.dropzone.fire(t.drop),t.deactivate&&hi(i,t.deactivate),n.prev.dropzone=r.dropzone,n.prev.element=r.element}function _i(e,t){var n=e.interaction,i=e.iEvent,r=e.event;if("dragmove"===i.type||"dragend"===i.type){var o=n.dropState;t.dynamicDrop&&(o.activeDrops=gi(t,n.element));var a=i,s=vi(n,a,r);o.rejected=o.rejected&&!!s&&s.dropzone===o.cur.dropzone&&s.element===o.cur.element,o.cur.dropzone=s&&s.dropzone,o.cur.element=s&&s.element,o.events=mi(n,0,a)}}var bi={id:"actions/drop",install:function(e){var t=e.actions,n=e.interact,i=e.Interactable,r=e.defaults;e.usePlugin(di.default),i.prototype.dropzone=function(e){return function(e,t){if(ui.is.object(t)){if(e.options.drop.enabled=!1!==t.enabled,t.listeners){var n=ui.normalizeListeners(t.listeners),i=Object.keys(n).reduce(function(e,t){return e[/^(enter|leave)/.test(t)?"drag".concat(t):/^(activate|deactivate|move)/.test(t)?"drop".concat(t):t]=n[t],e},{});e.off(e.options.drop.listeners),e.on(i),e.options.drop.listeners=i}return ui.is.func(t.ondrop)&&e.on("drop",t.ondrop),ui.is.func(t.ondropactivate)&&e.on("dropactivate",t.ondropactivate),ui.is.func(t.ondropdeactivate)&&e.on("dropdeactivate",t.ondropdeactivate),ui.is.func(t.ondragenter)&&e.on("dragenter",t.ondragenter),ui.is.func(t.ondragleave)&&e.on("dragleave",t.ondragleave),ui.is.func(t.ondropmove)&&e.on("dropmove",t.ondropmove),/^(pointer|center)$/.test(t.overlap)?e.options.drop.overlap=t.overlap:ui.is.number(t.overlap)&&(e.options.drop.overlap=Math.max(Math.min(1,t.overlap),0)),"accept"in t&&(e.options.drop.accept=t.accept),"checker"in t&&(e.options.drop.checker=t.checker),e}return ui.is.bool(t)?(e.options.drop.enabled=t,e):e.options.drop}(this,e)},i.prototype.dropCheck=function(e,t,n,i,r,o){return function(e,t,n,i,r,o,a){var s=!1;if(!(a=a||e.getRect(o)))return!!e.options.drop.checker&&e.options.drop.checker(t,n,s,e,o,i,r);var l=e.options.drop.overlap;if("pointer"===l){var c=ui.getOriginXY(i,r,"drag"),u=ui.pointer.getPageXY(t);u.x+=c.x,u.y+=c.y;var d=u.x>a.left&&u.x<a.right,p=u.y>a.top&&u.y<a.bottom;s=d&&p}var f=i.getRect(r);if(f&&"center"===l){var h=f.left+f.width/2,g=f.top+f.height/2;s=h>=a.left&&h<=a.right&&g>=a.top&&g<=a.bottom}if(f&&ui.is.number(l)){var v=Math.max(0,Math.min(a.right,f.right)-Math.max(a.left,f.left))*Math.max(0,Math.min(a.bottom,f.bottom)-Math.max(a.top,f.top))/(f.width*f.height);s=l<=v}return e.options.drop.checker&&(s=e.options.drop.checker(t,n,s,e,o,i,r)),s}(this,e,t,n,i,r,o)},n.dynamicDrop=function(t){return ui.is.bool(t)?(e.dynamicDrop=t,n):e.dynamicDrop},ui.extend(t.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),t.methodDict.drop="dropzone",e.dynamicDrop=!1,r.actions.drop=bi.defaults},listeners:{"interactions:before-action-start":function(e){var t=e.interaction;"drag"===t.prepared.name&&(t.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(e,t){var n=e.interaction,i=(e.event,e.iEvent);if("drag"===n.prepared.name){var r=n.dropState;r.activeDrops=null,r.events=null,r.activeDrops=gi(t,n.element),r.events=mi(n,0,i),r.events.activate&&(hi(r.activeDrops,r.events.activate),t.fire("actions/drop:start",{interaction:n,dragEvent:i}))}},"interactions:action-move":_i,"interactions:action-end":_i,"interactions:after-action-move":function(e,t){var n=e.interaction,i=e.iEvent;"drag"===n.prepared.name&&(yi(n,n.dropState.events),t.fire("actions/drop:move",{interaction:n,dragEvent:i}),n.dropState.events={})},"interactions:after-action-end":function(e,t){var n=e.interaction,i=e.iEvent;"drag"===n.prepared.name&&(yi(n,n.dropState.events),t.fire("actions/drop:end",{interaction:n,dragEvent:i}))},"interactions:stop":function(e){var t=e.interaction;if("drag"===t.prepared.name){var n=t.dropState;n&&(n.activeDrops=null,n.events=null,n.cur.dropzone=null,n.cur.element=null,n.prev.dropzone=null,n.prev.element=null,n.rejected=!1)}}},getActiveDrops:gi,getDrop:vi,getDropEvents:mi,fireDropEvents:yi,defaults:{enabled:!1,accept:null,overlap:"pointer"}},wi=bi;li.default=wi;var Si={};function Ei(e){return(Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Si,"__esModule",{value:!0}),Si.default=void 0;var xi=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Ei(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(Ct);function ki(e){var t=e.interaction,n=e.iEvent,i=e.phase;if("gesture"===t.prepared.name){var r=t.pointers.map(function(e){return e.pointer}),o="start"===i,a="end"===i,s=t.interactable.options.deltaSource;if(n.touches=[r[0],r[1]],o)n.distance=xi.pointer.touchDistance(r,s),n.box=xi.pointer.touchBBox(r),n.scale=1,n.ds=0,n.angle=xi.pointer.touchAngle(r,s),n.da=0,t.gesture.startDistance=n.distance,t.gesture.startAngle=n.angle;else if(a){var l=t.prevEvent;n.distance=l.distance,n.box=l.box,n.scale=l.scale,n.ds=0,n.angle=l.angle,n.da=0}else n.distance=xi.pointer.touchDistance(r,s),n.box=xi.pointer.touchBBox(r),n.scale=n.distance/t.gesture.startDistance,n.angle=xi.pointer.touchAngle(r,s),n.ds=n.scale-t.gesture.scale,n.da=n.angle-t.gesture.angle;t.gesture.distance=n.distance,t.gesture.angle=n.angle,xi.is.number(n.scale)&&n.scale!==1/0&&!isNaN(n.scale)&&(t.gesture.scale=n.scale)}}var Ci={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(e){var t=e.actions,n=e.Interactable,i=e.defaults;n.prototype.gesturable=function(e){return xi.is.object(e)?(this.options.gesture.enabled=!1!==e.enabled,this.setPerAction("gesture",e),this.setOnEvents("gesture",e),this):xi.is.bool(e)?(this.options.gesture.enabled=e,this):this.options.gesture},t.map.gesture=Ci,t.methodDict.gesture="gesturable",i.actions.gesture=Ci.defaults},listeners:{"interactions:action-start":ki,"interactions:action-move":ki,"interactions:action-end":ki,"interactions:new":function(e){e.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(e){if(!(e.interaction.pointers.length<2)){var t=e.interactable.options.gesture;if(t&&t.enabled)return!(e.action={name:"gesture"})}}},defaults:{},getCursor:function(){return""}},Pi=Ci;Si.default=Pi;var Ti={};function Oi(e){return(Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.default=void 0;var Mi,Ii=ji(Y),Ai=(Mi=$e)&&Mi.__esModule?Mi:{default:Mi},Di=ji(p);function Li(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Li=function(){return e},e}function ji(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Oi(e)&&"function"!=typeof e)return{default:e};var t=Li();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}function Ri(e,t,n,i,r,o,a){if(!t)return!1;if(!0===t){var s=Di.number(o.width)?o.width:o.right-o.left,l=Di.number(o.height)?o.height:o.bottom-o.top;if(a=Math.min(a,("left"===e||"right"===e?s:l)/2),s<0&&("left"===e?e="right":"right"===e&&(e="left")),l<0&&("top"===e?e="bottom":"bottom"===e&&(e="top")),"left"===e)return n.x<(0<=s?o.left:o.right)+a;if("top"===e)return n.y<(0<=l?o.top:o.bottom)+a;if("right"===e)return n.x>(0<=s?o.right:o.left)-a;if("bottom"===e)return n.y>(0<=l?o.bottom:o.top)-a}return!!Di.element(i)&&(Di.element(t)?t===i:Ii.matchesUpTo(i,t,r))}function Fi(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.resizeAxes){var i=t;n.interactable.options.resize.square?("y"===n.resizeAxes?i.delta.x=i.delta.y:i.delta.y=i.delta.x,i.axes="xy"):(i.axes=n.resizeAxes,"x"===n.resizeAxes?i.delta.y=0:"y"===n.resizeAxes&&(i.delta.x=0))}}var Ni={id:"actions/resize",before:["actions/drag"],install:function(e){var t=e.actions,n=e.browser,i=e.Interactable,r=e.defaults;Ni.cursors=n.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"},Ni.defaultMargin=n.supportsTouch||n.supportsPointerEvent?20:10,i.prototype.resizable=function(t){return function(e,t,n){return Di.object(t)?(e.options.resize.enabled=!1!==t.enabled,e.setPerAction("resize",t),e.setOnEvents("resize",t),Di.string(t.axis)&&/^x$|^y$|^xy$/.test(t.axis)?e.options.resize.axis=t.axis:null===t.axis&&(e.options.resize.axis=n.defaults.actions.resize.axis),Di.bool(t.preserveAspectRatio)?e.options.resize.preserveAspectRatio=t.preserveAspectRatio:Di.bool(t.square)&&(e.options.resize.square=t.square),e):Di.bool(t)?(e.options.resize.enabled=t,e):e.options.resize}(this,t,e)},t.map.resize=Ni,t.methodDict.resize="resizable",r.actions.resize=Ni.defaults},listeners:{"interactions:new":function(e){e.interaction.resizeAxes="xy"},"interactions:action-start":function(e){!function(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var i=t,r=n.rect;n._rects={start:(0,Ai.default)({},r),corrected:(0,Ai.default)({},r),previous:(0,Ai.default)({},r),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},i.edges=n.prepared.edges,i.rect=n._rects.corrected,i.deltaRect=n._rects.delta}}(e),Fi(e)},"interactions:action-move":function(e){!function(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var i=t,r=n.interactable.options.resize.invert,o="reposition"===r||"negate"===r,a=n.rect,s=n._rects,l=s.start,c=s.corrected,u=s.delta,d=s.previous;if((0,Ai.default)(d,c),o){if((0,Ai.default)(c,a),"reposition"===r){if(c.top>c.bottom){var p=c.top;c.top=c.bottom,c.bottom=p}if(c.left>c.right){var f=c.left;c.left=c.right,c.right=f}}}else c.top=Math.min(a.top,l.bottom),c.bottom=Math.max(a.bottom,l.top),c.left=Math.min(a.left,l.right),c.right=Math.max(a.right,l.left);for(var h in c.width=c.right-c.left,c.height=c.bottom-c.top,c)u[h]=c[h]-d[h];i.edges=n.prepared.edges,i.rect=c,i.deltaRect=u}}(e),Fi(e)},"interactions:action-end":function(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var i=t;i.edges=n.prepared.edges,i.rect=n._rects.corrected,i.deltaRect=n._rects.delta}},"auto-start:check":function(e){var t=e.interaction,n=e.interactable,i=e.element,r=e.rect,o=e.buttons;if(r){var a=(0,Ai.default)({},t.coords.cur.page),s=n.options.resize;if(s&&s.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||0!=(o&s.mouseButtons))){if(Di.object(s.edges)){var l={left:!1,right:!1,top:!1,bottom:!1};for(var c in l)l[c]=Ri(c,s.edges[c],a,t._latestPointer.eventTarget,i,r,s.margin||Ni.defaultMargin);l.left=l.left&&!l.right,l.top=l.top&&!l.bottom,(l.left||l.right||l.top||l.bottom)&&(e.action={name:"resize",edges:l})}else{var u="y"!==s.axis&&a.x>r.right-Ni.defaultMargin,d="x"!==s.axis&&a.y>r.bottom-Ni.defaultMargin;(u||d)&&(e.action={name:"resize",axes:(u?"x":"")+(d?"y":"")})}return!e.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(e){var t=e.edges,n=e.axis,i=e.name,r=Ni.cursors,o=null;if(n)o=r[i+n];else if(t){for(var a="",s=["top","bottom","left","right"],l=0;l<s.length;l++){var c=s[l];t[c]&&(a+=c)}o=r[a]}return o},defaultMargin:null},Bi=Ni;Ti.default=Bi;var Ui={};Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.install=function(e){e.usePlugin(qi.default),e.usePlugin(Vi.default),e.usePlugin(zi.default),e.usePlugin(Hi.default)},Object.defineProperty(Ui,"drag",{enumerable:!0,get:function(){return zi.default}}),Object.defineProperty(Ui,"drop",{enumerable:!0,get:function(){return Hi.default}}),Object.defineProperty(Ui,"gesture",{enumerable:!0,get:function(){return qi.default}}),Object.defineProperty(Ui,"resize",{enumerable:!0,get:function(){return Vi.default}}),Ui.id=void 0;var zi=Wi(_),Hi=Wi(li),qi=Wi(Si),Vi=Wi(Ti);function Wi(e){return e&&e.__esModule?e:{default:e}}Ui.id="actions";var Gi={};function Yi(e){return(Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.getContainer=tr,Gi.getScroll=nr,Gi.getScrollSize=function(e){return Ji.window(e)&&(e=window.document.body),{x:e.scrollWidth,y:e.scrollHeight}},Gi.getScrollSizeDelta=function(e,t){var n=e.interaction,i=e.element,r=n&&n.interactable.options[n.prepared.name].autoScroll;if(!r||!r.enabled)return t(),{x:0,y:0};var o=tr(r.container,n.interactable,i),a=nr(o);t();var s=nr(o);return{x:s.x-a.x,y:s.y-a.y}},Gi.default=void 0;var Ki,Xi=Qi(Y),Ji=Qi(p),$i=(Ki=wt)&&Ki.__esModule?Ki:{default:Ki};function Zi(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Zi=function(){return e},e}function Qi(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Yi(e)&&"function"!=typeof e)return{default:e};var t=Zi();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}var er={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(e){er.isScrolling=!0,$i.default.cancel(er.i),(e.autoScroll=er).interaction=e,er.prevTime=er.now(),er.i=$i.default.request(er.scroll)},stop:function(){er.isScrolling=!1,er.interaction&&(er.interaction.autoScroll=null),$i.default.cancel(er.i)},scroll:function(){var e=er.interaction,t=e.interactable,n=e.element,i=e.prepared.name,r=t.options[i].autoScroll,o=tr(r.container,t,n),a=er.now(),s=(a-er.prevTime)/1e3,l=r.speed*s;if(1<=l){var c={x:er.x*l,y:er.y*l};if(c.x||c.y){var u=nr(o);Ji.window(o)?o.scrollBy(c.x,c.y):o&&(o.scrollLeft+=c.x,o.scrollTop+=c.y);var d=nr(o),p={x:d.x-u.x,y:d.y-u.y};(p.x||p.y)&&t.fire({type:"autoscroll",target:n,interactable:t,delta:p,interaction:e,container:o})}er.prevTime=a}er.isScrolling&&($i.default.cancel(er.i),er.i=$i.default.request(er.scroll))},check:function(e,t){var n=e.options;return n[t].autoScroll&&n[t].autoScroll.enabled},onInteractionMove:function(e){var t=e.interaction,n=e.pointer;if(t.interacting()&&er.check(t.interactable,t.prepared.name))if(t.simulation)er.x=er.y=0;else{var i,r,o,a,s=t.interactable,l=t.element,c=t.prepared.name,u=s.options[c].autoScroll,d=tr(u.container,s,l);if(Ji.window(d))a=n.clientX<er.margin,i=n.clientY<er.margin,r=n.clientX>d.innerWidth-er.margin,o=n.clientY>d.innerHeight-er.margin;else{var p=Xi.getElementClientRect(d);a=n.clientX<p.left+er.margin,i=n.clientY<p.top+er.margin,r=n.clientX>p.right-er.margin,o=n.clientY>p.bottom-er.margin}er.x=r?1:a?-1:0,er.y=o?1:i?-1:0,er.isScrolling||(er.margin=u.margin,er.speed=u.speed,er.start(t))}}};function tr(e,t,n){return(Ji.string(e)?(0,ht.getStringOptionResult)(e,t,n):e)||(0,o.getWindow)(n)}function nr(e){return Ji.window(e)&&(e=window.document.body),{x:e.scrollLeft,y:e.scrollTop}}var ir={id:"auto-scroll",install:function(e){var t=e.defaults,n=e.actions;(e.autoScroll=er).now=function(){return e.now()},n.phaselessTypes.autoscroll=!0,t.perAction.autoScroll=er.defaults},listeners:{"interactions:new":function(e){e.interaction.autoScroll=null},"interactions:destroy":function(e){e.interaction.autoScroll=null,er.stop(),er.interaction&&(er.interaction=null)},"interactions:stop":er.stop,"interactions:action-move":function(e){return er.onInteractionMove(e)}}};Gi.default=ir;var rr={};function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(rr,"__esModule",{value:!0}),rr.default=void 0;var ar=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==or(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(p);function sr(e){return ar.bool(e)?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor}function lr(e){return ar.func(e)?(this.options.actionChecker=e,this):null===e?(delete this.options.actionChecker,this):this.options.actionChecker}var cr={id:"auto-start/interactableMethods",install:function(e){var t=e.Interactable;t.prototype.getAction=function(t,n,i,r){var o,a,s,l,c,u,d,p=(o=n,a=i,s=r,l=e,c=this.getRect(s),u=o.buttons||{0:1,1:4,3:8,4:16}[o.button],d={action:null,interactable:this,interaction:a,element:s,rect:c,buttons:u},l.fire("auto-start:check",d),d.action);return this.options.actionChecker?this.options.actionChecker(t,n,p,this,r,i):p},t.prototype.ignoreFrom=(0,Ct.warnOnce)(function(e){return this._backCompatOption("ignoreFrom",e)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),t.prototype.allowFrom=(0,Ct.warnOnce)(function(e){return this._backCompatOption("allowFrom",e)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),t.prototype.actionChecker=lr,t.prototype.styleCursor=sr}};rr.default=cr;var ur={};function dr(e){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(ur,"__esModule",{value:!0}),ur.default=void 0;var pr,fr=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==dr(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(Ct),hr=(pr=rr)&&pr.__esModule?pr:{default:pr};function gr(e,t,n,i,r){return t.testIgnoreAllow(t.options[e.name],n,i)&&t.options[e.name].enabled&&_r(t,n,e,r)?e:null}function vr(e,t,n,i,r,o,a){for(var s=0,l=i.length;s<l;s++){var c=i[s],u=r[s],d=c.getAction(t,n,e,u);if(d){var p=gr(d,c,u,o,a);if(p)return{action:p,interactable:c,element:u}}}return{action:null,interactable:null,element:null}}function mr(e,t,n,i,r){var o=[],a=[],s=i;function l(e){o.push(e),a.push(s)}for(;fr.is.element(s);){o=[],a=[],r.interactables.forEachMatch(s,l);var c=vr(e,t,n,o,a,i,r);if(c.action&&!c.interactable.options[c.action.name].manualStart)return c;s=fr.dom.parentNode(s)}return{action:null,interactable:null,element:null}}function yr(e,t,n){var i=t.action,r=t.interactable,o=t.element;i=i||{name:null},e.interactable=r,e.element=o,fr.copyAction(e.prepared,i),e.rect=r&&i.name?r.getRect(o):null,Sr(e,n),n.fire("autoStart:prepared",{interaction:e})}function _r(e,t,n,i){var r=e.options,o=r[n.name].max,a=r[n.name].maxPerElement,s=i.autoStart.maxInteractions,l=0,c=0,u=0;if(!(o&&a&&s))return!1;for(var d=0;d<i.interactions.list.length;d++){var p=i.interactions.list[d],f=p.prepared.name;if(p.interacting()){if(s<=++l)return!1;if(p.interactable===e){if(o<=(c+=f===n.name?1:0))return!1;if(p.element===t&&(u++,f===n.name&&a<=u))return!1}}}return 0<s}function br(e,t){return fr.is.number(e)?(t.autoStart.maxInteractions=e,this):t.autoStart.maxInteractions}function wr(e,t,n){var i=n.autoStart.cursorElement;i&&i!==e&&(i.style.cursor=""),e.ownerDocument.documentElement.style.cursor=t,e.style.cursor=t,n.autoStart.cursorElement=t?e:null}function Sr(e,t){var n=e.interactable,i=e.element,r=e.prepared;if("mouse"===e.pointerType&&n&&n.options.styleCursor){var o="";if(r.name){var a=n.options[r.name].cursorChecker;o=fr.is.func(a)?a(r,n,i,e._interacting):t.actions.map[r.name].getCursor(r)}wr(e.element,o||"",t)}else t.autoStart.cursorElement&&wr(t.autoStart.cursorElement,"",t)}var Er={id:"auto-start/base",before:["actions","action/drag","actions/resize","actions/gesture"],install:function(e){var t=e.interact,n=e.defaults;e.usePlugin(hr.default),n.base.actionChecker=null,n.base.styleCursor=!0,fr.extend(n.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),t.maxInteractions=function(t){return br(t,e)},e.autoStart={maxInteractions:1/0,withinInteractionLimit:_r,cursorElement:null}},listeners:{"interactions:down":function(e,t){var n=e.interaction,i=e.pointer,r=e.event,o=e.eventTarget;n.interacting()||yr(n,mr(n,i,r,o,t),t)},"interactions:move":function(e,t){var n,i,r,o,a,s;i=t,r=(n=e).interaction,o=n.pointer,a=n.event,s=n.eventTarget,"mouse"!==r.pointerType||r.pointerIsDown||r.interacting()||yr(r,mr(r,o,a,s,i),i),function(e,t){var n=e.interaction;if(n.pointerIsDown&&!n.interacting()&&n.pointerWasMoved&&n.prepared.name){t.fire("autoStart:before-start",e);var i=n.interactable,r=n.prepared.name;r&&i&&(i.options[r].manualStart||!_r(i,n.element,n.prepared,t)?n.stop():(n.start(n.prepared,i,n.element),Sr(n,t)))}}(e,t)},"interactions:stop":function(e,t){var n=e.interaction,i=n.interactable;i&&i.options.styleCursor&&wr(n.element,"",t)}},maxInteractions:br,withinInteractionLimit:_r,validateAction:gr};ur.default=Er;var xr={};function kr(e){return(kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(xr,"__esModule",{value:!0}),xr.default=void 0;var Cr,Pr=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==kr(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(p),Tr=(Cr=ur)&&Cr.__esModule?Cr:{default:Cr},Or={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(e,t){var n=e.interaction,i=e.eventTarget,r=e.dx,o=e.dy;if("drag"===n.prepared.name){var a=Math.abs(r),s=Math.abs(o),l=n.interactable.options.drag,c=l.startAxis,u=s<a?"x":a<s?"y":"xy";if(n.prepared.axis="start"===l.lockAxis?u[0]:l.lockAxis,"xy"!=u&&"xy"!==c&&c!==u){function d(e){if(e!==n.interactable){var r=n.interactable.options.drag;if(!r.manualStart&&e.testIgnoreAllow(r,p,i)){var o=e.getAction(n.downPointer,n.downEvent,n,p);if(o&&"drag"===o.name&&function(e,t){if(!t)return!1;var n=t.options.drag.startAxis;return"xy"===e||"xy"===n||n===e}(u,e)&&Tr.default.validateAction(o,e,p,i,t))return e}}}n.prepared.name=null;for(var p=i;Pr.element(p);){var f=t.interactables.forEachMatch(p,d);if(f){n.prepared.name="drag",n.interactable=f,n.element=p;break}p=(0,Y.parentNode)(p)}}}}}};xr.default=Or;var Mr={};Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.default=void 0;var Ir,Ar=(Ir=ur)&&Ir.__esModule?Ir:{default:Ir};function Dr(e){var t=e.prepared&&e.prepared.name;if(!t)return null;var n=e.interactable.options;return n[t].hold||n[t].delay}var Lr={id:"auto-start/hold",install:function(e){var t=e.defaults;e.usePlugin(Ar.default),t.perAction.hold=0,t.perAction.delay=0},listeners:{"interactions:new":function(e){e.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(e){var t=e.interaction,n=Dr(t);0<n&&(t.autoStartHoldTimer=setTimeout(function(){t.start(t.prepared,t.interactable,t.element)},n))},"interactions:move":function(e){var t=e.interaction,n=e.duplicate;t.pointerWasMoved&&!n&&clearTimeout(t.autoStartHoldTimer)},"autoStart:before-start":function(e){var t=e.interaction;0<Dr(t)&&(t.prepared.name=null)}},getHoldDuration:Dr};Mr.default=Lr;var jr={};Object.defineProperty(jr,"__esModule",{value:!0}),jr.install=function(e){e.usePlugin(Rr.default),e.usePlugin(Nr.default),e.usePlugin(Fr.default)},Object.defineProperty(jr,"autoStart",{enumerable:!0,get:function(){return Rr.default}}),Object.defineProperty(jr,"dragAxis",{enumerable:!0,get:function(){return Fr.default}}),Object.defineProperty(jr,"hold",{enumerable:!0,get:function(){return Nr.default}}),jr.id=void 0;var Rr=Br(ur),Fr=Br(xr),Nr=Br(Mr);function Br(e){return e&&e.__esModule?e:{default:e}}jr.id="auto-start";var Ur={};function zr(e){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.install=Yr,Ur.default=void 0;var Hr,qr=(Hr=Te)&&Hr.__esModule?Hr:{default:Hr},Vr=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==zr(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(p);function Wr(e){return/^(always|never|auto)$/.test(e)?(this.options.preventDefault=e,this):Vr.bool(e)?(this.options.preventDefault=e?"always":"never",this):this.options.preventDefault}function Gr(e){var t=e.interaction,n=e.event;t.interactable&&t.interactable.checkAndPreventDefault(n)}function Yr(e){var t=e.Interactable;t.prototype.preventDefault=Wr,t.prototype.checkAndPreventDefault=function(t){return function(e,t,n){var i=e.options.preventDefault;if("never"!==i)if("always"!==i){if(qr.default.supportsPassive&&/^touch(start|move)$/.test(n.type)){var r=(0,o.getWindow)(n.target).document,a=t.getDocOptions(r);if(!a||!a.events||!1!==a.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(n.type)||Vr.element(n.target)&&(0,Y.matchesSelector)(n.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||n.preventDefault()}else n.preventDefault()}(this,e,t)},e.interactions.docEvents.push({type:"dragstart",listener:function(t){for(var n=0;n<e.interactions.list.length;n++){var i=e.interactions.list[n];if(i.element&&(i.element===t.target||(0,Y.nodeContains)(i.element,t.target)))return void i.interactable.checkAndPreventDefault(t)}}})}var Kr={id:"core/interactablePreventDefault",install:Yr,listeners:["down","move","up","cancel"].reduce(function(e,t){return e["interactions:".concat(t)]=Gr,e},{})};Ur.default=Kr;var Xr,Jr,$r={};function Zr(e){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qr(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty($r,"__esModule",{value:!0}),$r.default=void 0,Qr(O),Qr($e),function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Zr(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,t&&t.set(e,n)}(p),Qr(o),(Jr=Xr=Xr||{}).touchAction="touchAction",Jr.boxSizing="boxSizing",Jr.noListeners="noListeners",Xr.touchAction,Xr.boxSizing,Xr.noListeners;var eo={id:"dev-tools",install:function(){}};$r.default=eo;var to={};function no(e){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(to,"__esModule",{value:!0}),to.getRectOffset=fo,to.default=void 0;var io=ao(z),ro=ao($e),oo=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==no(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(ht);function ao(e){return e&&e.__esModule?e:{default:e}}function so(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function lo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function co(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.interaction=t,co(this,"states",[]),co(this,"startOffset",{left:0,right:0,top:0,bottom:0}),co(this,"startDelta",null),co(this,"result",null),co(this,"endResult",null),co(this,"edges",void 0)}var t,n;return t=e,(n=[{key:"start",value:function(e,t){var n=e.phase,i=this.interaction,r=function(e){var t=e.interactable.options[e.prepared.name],n=t.modifiers;return n&&n.length?n.filter(function(e){return!e.options||!1!==e.options.enabled}):["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(e){var n=t[e];return n&&n.enabled&&{options:n,methods:n._methods}}).filter(function(e){return!!e})}(i);this.prepareStates(r),this.edges=(0,ro.default)({},i.edges),this.startOffset=fo(i.rect,t);var o={phase:n,pageCoords:t,preEnd:!(this.startDelta={x:0,y:0})};return this.result=po(),this.startAll(o),this.result=this.setAll(o)}},{key:"fillArg",value:function(e){var t=this.interaction;e.interaction=t,e.interactable=t.interactable,e.element=t.element,e.rect=e.rect||t.rect,e.edges=this.edges,e.startOffset=this.startOffset}},{key:"startAll",value:function(e){this.fillArg(e);for(var t=0;t<this.states.length;t++){var n=this.states[t];n.methods.start&&(e.state=n).methods.start(e)}}},{key:"setAll",value:function(e){this.fillArg(e);var t=e.phase,n=e.preEnd,i=e.skipModifiers,r=e.rect;e.coords=(0,ro.default)({},e.pageCoords),e.rect=(0,ro.default)({},r);for(var o=i?this.states.slice(i):this.states,a=po(e.coords,e.rect),s=0;s<o.length;s++){var l=o[s],c=l.options,u=(0,ro.default)({},e.coords),d=null;l.methods.set&&this.shouldDo(c,n,t)&&(d=(e.state=l).methods.set(e),oo.addEdges(this.interaction.edges,e.rect,{x:e.coords.x-u.x,y:e.coords.y-u.y})),a.eventProps.push(d)}a.delta.x=e.coords.x-e.pageCoords.x,a.delta.y=e.coords.y-e.pageCoords.y,a.rectDelta.left=e.rect.left-r.left,a.rectDelta.right=e.rect.right-r.right,a.rectDelta.top=e.rect.top-r.top,a.rectDelta.bottom=e.rect.bottom-r.bottom;var p=this.result.coords,f=this.result.rect,h=!f||a.rect.left!==f.left||a.rect.right!==f.right||a.rect.top!==f.top||a.rect.bottom!==f.bottom;return a.changed=h||p.x!==a.coords.x||p.y!==a.coords.y,a.rect=e.rect,a}},{key:"applyToInteraction",value:function(e){var t=this.interaction,n=e.phase,i=t.coords.cur,r=t.coords.start,o=this.result,a=this.startDelta,s=o.delta;"start"===n&&(0,ro.default)(this.startDelta,o.delta);for(var l=0;l<[[r,a],[i,s]].length;l++){var c=so([[r,a],[i,s]][l],2),u=c[0],d=c[1];u.page.x+=d.x,u.page.y+=d.y,u.client.x+=d.x,u.client.y+=d.y}var p=this.result.rectDelta,f=e.rect||t.rect;f.left+=p.left,f.right+=p.right,f.top+=p.top,f.bottom+=p.bottom,f.width=f.right-f.left,f.height=f.bottom-f.top}},{key:"setAndApply",value:function(e){var t=this.interaction,n=e.phase,i=e.preEnd,r=e.skipModifiers,o=this.setAll({preEnd:i,phase:n,pageCoords:e.modifiedCoords||t.coords.cur.page});if(!(this.result=o).changed&&(!r||r<this.states.length)&&t.interacting())return!1;if(e.modifiedCoords){var a=t.coords.cur.page,s=e.modifiedCoords.x-a.x,l=e.modifiedCoords.y-a.y;o.coords.x+=s,o.coords.y+=l,o.delta.x+=s,o.delta.y+=l}this.applyToInteraction(e)}},{key:"beforeEnd",value:function(e){var t=e.interaction,n=e.event,i=this.states;if(i&&i.length){for(var r=!1,o=0;o<i.length;o++){var a=i[o],s=(e.state=a).options,l=a.methods,c=l.beforeEnd&&l.beforeEnd(e);if(c)return this.endResult=c,!1;r=r||!r&&this.shouldDo(s,!0)}r||t.move({event:n,preEnd:!0})}}},{key:"stop",value:function(e){var t=e.interaction;if(this.states&&this.states.length){var n=(0,ro.default)({states:this.states,interactable:t.interactable,element:t.element,rect:null},e);this.fillArg(n);for(var i=0;i<this.states.length;i++){var r=this.states[i];(n.state=r).methods.stop&&r.methods.stop(n)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(e){this.states=[];for(var t=0;t<e.length;t++){var n=e[t],i=n.options,r=n.methods,o=n.name;i&&!1===i.enabled||this.states.push({options:i,methods:r,index:t,name:o})}return this.states}},{key:"restoreInteractionCoords",value:function(e){var t=e.interaction,n=t.coords,i=t.rect,r=t.modification;if(r.result){for(var o=r.startDelta,a=r.result,s=a.delta,l=a.rectDelta,c=[[n.start,o],[n.cur,s]],u=0;u<c.length;u++){var d=so(c[u],2),p=d[0],f=d[1];p.page.x-=f.x,p.page.y-=f.y,p.client.x-=f.x,p.client.y-=f.y}i.left-=l.left,i.right-=l.right,i.top-=l.top,i.bottom-=l.bottom}}},{key:"shouldDo",value:function(e,t,n){return!e||!1!==e.enabled&&(t||!e.endOnly)&&(e.setStart||"start"!==n)}},{key:"copyFrom",value:function(e){this.startOffset=e.startOffset,this.startDelta=e.startDelta,this.edges=e.edges,this.states=e.states.map(function(e){return(0,io.default)(e)}),this.result=po((0,ro.default)({},e.result.coords),(0,ro.default)({},e.result.rect))}},{key:"destroy",value:function(){for(var e in this)this[e]=null}}])&&lo(t.prototype,n),e}();function po(e,t){return{rect:t,coords:e,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function fo(e,t){return e?{left:t.x-e.left,top:t.y-e.top,right:e.right-t.x,bottom:e.bottom-t.y}:{left:0,top:0,right:0,bottom:0}}to.default=uo;var ho={};Object.defineProperty(ho,"__esModule",{value:!0}),ho.makeModifier=function(e,t){function n(e){var n=e||{};for(var o in n.enabled=!1!==n.enabled,i)o in n||(n[o]=i[o]);return{options:n,methods:r,name:t}}var i=e.defaults,r={start:e.start,set:e.set,beforeEnd:e.beforeEnd,stop:e.stop};return t&&"string"==typeof t&&(n._defaults=i,n._methods=r),n},ho.addEventModifiers=mo,ho.default=void 0;var go,vo=(go=to)&&go.__esModule?go:{default:go};function mo(e){var t=e.iEvent,n=e.interaction.modification.result;n&&(t.modifiers=n.eventProps)}var yo={id:"modifiers/base",install:function(e){e.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(e){var t=e.interaction;t.modification=new vo.default(t)},"interactions:before-action-start":function(e){var t=e.interaction.modification;t.start(e,e.interaction.coords.start.page),e.interaction.edges=t.edges,t.applyToInteraction(e)},"interactions:before-action-move":function(e){return e.interaction.modification.setAndApply(e)},"interactions:before-action-end":function(e){return e.interaction.modification.beforeEnd(e)},"interactions:action-start":mo,"interactions:action-move":mo,"interactions:action-end":mo,"interactions:after-action-start":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-move":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:stop":function(e){return e.interaction.modification.stop(e)}},before:["actions","action/drag","actions/resize","actions/gesture"]};ho.default=yo;var _o={};function bo(e){return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_o,"__esModule",{value:!0}),_o.addTotal=So,_o.applyPending=xo,_o.default=void 0;var wo=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==bo(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(ht);function So(e){e.pointerIsDown&&(Co(e.coords.cur,e.offset.total),e.offset.pending.x=0,e.offset.pending.y=0)}function Eo(e){xo(e.interaction)}function xo(e){if(!(t=e).offset.pending.x&&!t.offset.pending.y)return!1;var t,n=e.offset.pending;return Co(e.coords.cur,n),Co(e.coords.delta,n),wo.addEdges(e.edges,e.rect,n),n.x=0,!(n.y=0)}function ko(e){var t=e.x,n=e.y;this.offset.pending.x+=t,this.offset.pending.y+=n,this.offset.total.x+=t,this.offset.total.y+=n}function Co(e,t){var n=e.page,i=e.client,r=t.x,o=t.y;n.x+=r,n.y+=o,i.x+=r,i.y+=o}On._ProxyMethods.offsetBy="";var Po={id:"offset",install:function(e){e.Interaction.prototype.offsetBy=ko},listeners:{"interactions:new":function(e){e.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(e){return So(e.interaction)},"interactions:before-action-start":Eo,"interactions:before-action-move":Eo,"interactions:before-action-end":function(e){var t=e.interaction;if(xo(t))return t.move({offset:!0}),t.end(),!1},"interactions:stop":function(e){var t=e.interaction;t.offset.total.x=0,t.offset.total.y=0,t.offset.pending.x=0,t.offset.pending.y=0}}};_o.default=Po;var To={};function Oo(e){return(Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(To,"__esModule",{value:!0}),To.default=To.InertiaState=void 0;var Mo=Bo(ho),Io=Fo(to),Ao=Fo(_o),Do=Bo(Y),Lo=Fo(ue),jo=Bo(p),Ro=Fo(wt);function Fo(e){return e&&e.__esModule?e:{default:e}}function No(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return No=function(){return e},e}function Bo(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Oo(e)&&"function"!=typeof e)return{default:e};var t=No();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}function Uo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ho=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.interaction=t,zo(this,"active",!1),zo(this,"isModified",!1),zo(this,"smoothEnd",!1),zo(this,"allowResume",!1),zo(this,"modification",null),zo(this,"modifierCount",0),zo(this,"modifierArg",null),zo(this,"startCoords",null),zo(this,"t0",0),zo(this,"v0",0),zo(this,"te",0),zo(this,"targetOffset",null),zo(this,"modifiedOffset",null),zo(this,"currentOffset",null),zo(this,"lambda_v0",0),zo(this,"one_ve_v0",0),zo(this,"timeout",null)}var t,n;return t=e,(n=[{key:"start",value:function(e){var t=this.interaction,n=qo(t);if(!n||!n.enabled)return!1;var i=t.coords.velocity.client,r=(0,Lo.default)(i.x,i.y),o=this.modification||(this.modification=new Io.default(t));if(o.copyFrom(t.modification),this.t0=t._now(),this.allowResume=n.allowResume,this.v0=r,this.currentOffset={x:0,y:0},this.startCoords=t.coords.cur.page,this.modifierArg={interaction:t,interactable:t.interactable,element:t.element,rect:t.rect,edges:t.edges,pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"},this.t0-t.coords.cur.timeStamp<50&&r>n.minSpeed&&r>n.endSpeed)this.startInertia();else{if(o.result=o.setAll(this.modifierArg),!o.result.changed)return!1;this.startSmoothEnd()}return t.modification.result.rect=null,t.offsetBy(this.targetOffset),t._doPhase({interaction:t,event:e,phase:"inertiastart"}),t.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),t.modification.result.rect=null,this.active=!0,t.simulation=this,!0}},{key:"startInertia",value:function(){var e=this,t=this.interaction.coords.velocity.client,n=qo(this.interaction),i=n.resistance,r=-Math.log(n.endSpeed/this.v0)/i;this.targetOffset={x:(t.x-r)/i,y:(t.y-r)/i},this.te=r,this.lambda_v0=i/this.v0,this.one_ve_v0=1-n.endSpeed/this.v0;var o=this.modification,a=this.modifierArg;a.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},o.result=o.setAll(a),o.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+o.result.delta.x,y:this.targetOffset.y+o.result.delta.y}),this.timeout=Ro.default.request(function(){return e.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var e=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.timeout=Ro.default.request(function(){return e.smoothEndTick()})}},{key:"inertiaTick",value:function(){var e,t,n,i,r,o,a,s=this,l=this.interaction,c=qo(l).resistance,u=(l._now()-this.t0)/1e3;if(u<this.te){var d,p=1-(Math.exp(-c*u)-this.lambda_v0)/this.one_ve_v0,f={x:(d=this.isModified?(t=e=0,n=this.targetOffset.x,i=this.targetOffset.y,r=this.modifiedOffset.x,o=this.modifiedOffset.y,{x:Vo(a=p,e,n,r),y:Vo(a,t,i,o)}):{x:this.targetOffset.x*p,y:this.targetOffset.y*p}).x-this.currentOffset.x,y:d.y-this.currentOffset.y};this.currentOffset.x+=f.x,this.currentOffset.y+=f.y,l.offsetBy(f),l.move(),this.timeout=Ro.default.request(function(){return s.inertiaTick()})}else l.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var e=this,t=this.interaction,n=t._now()-this.t0,i=qo(t).smoothEndDuration;if(n<i){var r=Wo(n,0,this.targetOffset.x,i),o=Wo(n,0,this.targetOffset.y,i),a={x:r-this.currentOffset.x,y:o-this.currentOffset.y};this.currentOffset.x+=a.x,this.currentOffset.y+=a.y,t.offsetBy(a),t.move({skipModifiers:this.modifierCount}),this.timeout=Ro.default.request(function(){return e.smoothEndTick()})}else t.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(e){var t=e.pointer,n=e.event,i=e.eventTarget,r=this.interaction;r.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),r.updatePointer(t,n,i,!0),r._doPhase({interaction:r,event:n,phase:"resume"}),(0,de.copyCoords)(r.coords.prev,r.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Ro.default.cancel(this.timeout)}}])&&Uo(t.prototype,n),e}();function qo(e){var t=e.interactable,n=e.prepared;return t&&t.options&&n.name&&t.options[n.name].inertia}function Vo(e,t,n,i){var r=1-e;return r*r*t+2*r*e*n+e*e*i}function Wo(e,t,n,i){return-n*(e/=i)*(e-2)+t}To.InertiaState=Ho;var Go={id:"inertia",before:["modifiers/base"],install:function(e){var t=e.defaults;e.usePlugin(Ao.default),e.usePlugin(Mo.default),e.actions.phases.inertiastart=!0,e.actions.phases.resume=!0,t.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(e){var t=e.interaction;t.inertia=new Ho(t)},"interactions:before-action-end":function(e){var t=e.interaction,n=e.event;return!t._interacting||t.simulation?null:!t.inertia.start(n)&&null},"interactions:down":function(e){var t=e.interaction,n=e.eventTarget,i=t.inertia;if(i.active)for(var r=n;jo.element(r);){if(r===t.element){i.resume(e);break}r=Do.parentNode(r)}},"interactions:stop":function(e){var t=e.interaction.inertia;t.active&&t.stop()},"interactions:before-action-resume":function(e){var t=e.interaction.modification;t.stop(e),t.start(e,e.interaction.coords.cur.page),t.applyToInteraction(e)},"interactions:before-action-inertiastart":function(e){return e.interaction.modification.setAndApply(e)},"interactions:action-resume":Mo.addEventModifiers,"interactions:action-inertiastart":Mo.addEventModifiers,"interactions:after-action-inertiastart":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-resume":function(e){return e.interaction.modification.restoreInteractionCoords(e)}}};To.default=Go;var Yo={};Object.defineProperty(Yo,"__esModule",{value:!0}),Yo.default=void 0;var Ko=Jo($e),Xo=Jo(to);function Jo(e){return e&&e.__esModule?e:{default:e}}function $o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$o(Object(n),!0).forEach(function(t){Qo(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Qo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ea(e,t,n){var i=e.startCoords,r=e.edgeSign;t?n.y=i.y+(n.x-i.x)*r:n.x=i.x+(n.y-i.y)*r}function ta(e,t,n,i){var r=e.startRect,o=e.startCoords,a=e.ratio,s=e.edgeSign;if(t){var l=i.width/a;n.y=o.y+(l-r.height)*s}else{var c=i.height*a;n.x=o.x+(c-r.width)*s}}var na={start:function(e){var t=e.state,n=e.rect,i=e.edges,r=e.pageCoords,o=t.options.ratio,a=t.options,s=a.equalDelta,l=a.modifiers;"preserve"===o&&(o=n.width/n.height),t.startCoords=(0,Ko.default)({},r),t.startRect=(0,Ko.default)({},n),t.ratio=o,t.equalDelta=s;var c=t.linkedEdges={top:i.top||i.left&&!i.bottom,left:i.left||i.top&&!i.right,bottom:i.bottom||i.right&&!i.top,right:i.right||i.bottom&&!i.left};if(t.xIsPrimaryAxis=!(!i.left&&!i.right),t.equalDelta)t.edgeSign=(c.left?1:-1)*(c.top?1:-1);else{var u=t.xIsPrimaryAxis?c.top:c.left;t.edgeSign=u?-1:1}if((0,Ko.default)(e.edges,c),l&&l.length){var d=new Xo.default(e.interaction);d.copyFrom(e.interaction.modification),d.prepareStates(l),(t.subModification=d).startAll(Zo({},e))}},set:function(e){var t=e.state,n=e.rect,i=e.coords,r=(0,Ko.default)({},i),o=t.equalDelta?ea:ta;if(o(t,t.xIsPrimaryAxis,i,n),!t.subModification)return null;var a=(0,Ko.default)({},n);(0,ht.addEdges)(t.linkedEdges,a,{x:i.x-r.x,y:i.y-r.y});var s=t.subModification.setAll(Zo({},e,{rect:a,edges:t.linkedEdges,pageCoords:i,prevCoords:i,prevRect:a})),l=s.delta;return s.changed&&(o(t,Math.abs(l.x)>Math.abs(l.y),s.coords,s.rect),(0,Ko.default)(i,s.coords)),s.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};Yo.default=na;var ia={};function ra(e){return(ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(ia,"__esModule",{value:!0}),ia.getRestrictionRect=da,ia.default=void 0;var oa,aa=(oa=$e)&&oa.__esModule?oa:{default:oa},sa=ua(p),la=ua(ht);function ca(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return ca=function(){return e},e}function ua(e){if(e&&e.__esModule)return e;if(null===e||"object"!==ra(e)&&"function"!=typeof e)return{default:e};var t=ca();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}function da(e,t,n){return sa.func(e)?la.resolveRectLike(e,t.interactable,t.element,[n.x,n.y,t]):la.resolveRectLike(e,t.interactable,t.element)}var pa={start:function(e){var t=e.rect,n=e.startOffset,i=e.state,r=e.interaction,o=e.pageCoords,a=i.options,s=a.elementRect,l=(0,aa.default)({left:0,top:0,right:0,bottom:0},a.offset||{});if(t&&s){var c=da(a.restriction,r,o);if(c){var u=c.right-c.left-t.width,d=c.bottom-c.top-t.height;u<0&&(l.left+=u,l.right+=u),d<0&&(l.top+=d,l.bottom+=d)}l.left+=n.left-t.width*s.left,l.top+=n.top-t.height*s.top,l.right+=n.right-t.width*(1-s.right),l.bottom+=n.bottom-t.height*(1-s.bottom)}i.offset=l},set:function(e){var t=e.coords,n=e.interaction,i=e.state,r=i.options,o=i.offset,a=da(r.restriction,n,t);if(a){var s=la.xywhToTlbr(a);t.x=Math.max(Math.min(s.right-o.right,t.x),s.left+o.left),t.y=Math.max(Math.min(s.bottom-o.bottom,t.y),s.top+o.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};ia.default=pa;var fa={};function ha(e){return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(fa,"__esModule",{value:!0}),fa.default=void 0;var ga,va=(ga=$e)&&ga.__esModule?ga:{default:ga},ma=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==ha(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(ht),ya={top:1/0,left:1/0,bottom:-1/0,right:-1/0},_a={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function ba(e,t){for(var n=["top","left","bottom","right"],i=0;i<n.length;i++){var r=n[i];r in e||(e[r]=t[r])}return e}var wa={noInner:ya,noOuter:_a,start:function(e){var t,n=e.interaction,i=e.startOffset,r=e.state,o=r.options;if(o){var a=(0,ia.getRestrictionRect)(o.offset,n,n.coords.start.page);t=ma.rectToXY(a)}t=t||{x:0,y:0},r.offset={top:t.y+i.top,left:t.x+i.left,bottom:t.y-i.bottom,right:t.x-i.right}},set:function(e){var t=e.coords,n=e.edges,i=e.interaction,r=e.state,o=r.offset,a=r.options;if(n){var s=(0,va.default)({},t),l=(0,ia.getRestrictionRect)(a.inner,i,s)||{},c=(0,ia.getRestrictionRect)(a.outer,i,s)||{};ba(l,ya),ba(c,_a),n.top?t.y=Math.min(Math.max(c.top+o.top,s.y),l.top+o.top):n.bottom&&(t.y=Math.max(Math.min(c.bottom+o.bottom,s.y),l.bottom+o.bottom)),n.left?t.x=Math.min(Math.max(c.left+o.left,s.x),l.left+o.left):n.right&&(t.x=Math.max(Math.min(c.right+o.right,s.x),l.right+o.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};fa.default=wa;var Sa={};Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.default=void 0;var Ea=ka($e),xa=ka(ia);function ka(e){return e&&e.__esModule?e:{default:e}}var Ca=(0,Ea.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(e){}},xa.default.defaults),Pa={start:xa.default.start,set:xa.default.set,defaults:Ca};Sa.default=Pa;var Ta={};function Oa(e){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.default=void 0;var Ma=Da($e),Ia=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Oa(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(ht),Aa=Da(fa);function Da(e){return e&&e.__esModule?e:{default:e}}var La={width:-1/0,height:-1/0},ja={width:1/0,height:1/0},Ra={start:function(e){return Aa.default.start(e)},set:function(e){var t=e.interaction,n=e.state,i=e.rect,r=e.edges,o=n.options;if(r){var a=Ia.tlbrToXywh((0,ia.getRestrictionRect)(o.min,t,e.coords))||La,s=Ia.tlbrToXywh((0,ia.getRestrictionRect)(o.max,t,e.coords))||ja;n.options={endOnly:o.endOnly,inner:(0,Ma.default)({},Aa.default.noInner),outer:(0,Ma.default)({},Aa.default.noOuter)},r.top?(n.options.inner.top=i.bottom-a.height,n.options.outer.top=i.bottom-s.height):r.bottom&&(n.options.inner.bottom=i.top+a.height,n.options.outer.bottom=i.top+s.height),r.left?(n.options.inner.left=i.right-a.width,n.options.outer.left=i.right-s.width):r.right&&(n.options.inner.right=i.left+a.width,n.options.outer.right=i.left+s.width),Aa.default.set(e),n.options=o}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};Ta.default=Ra;var Fa={};function Na(e){return(Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.default=void 0;var Ba=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Na(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(Ct),Ua={start:function(e){var t,n,i,r=e.interaction,o=e.interactable,a=e.element,s=e.rect,l=e.state,c=e.startOffset,u=l.options,d=u.offsetWithOrigin?(n=(t=e).interaction.element,Ba.rect.rectToXY(Ba.rect.resolveRectLike(t.state.options.origin,null,null,[n]))||Ba.getOriginXY(t.interactable,n,t.interaction.prepared.name)):{x:0,y:0};if("startCoords"===u.offset)i={x:r.coords.start.page.x,y:r.coords.start.page.y};else{var p=Ba.rect.resolveRectLike(u.offset,o,a,[r]);(i=Ba.rect.rectToXY(p)||{x:0,y:0}).x+=d.x,i.y+=d.y}var f=u.relativePoints;l.offsets=s&&f&&f.length?f.map(function(e,t){return{index:t,relativePoint:e,x:c.left-s.width*e.x+i.x,y:c.top-s.height*e.y+i.y}}):[Ba.extend({index:0,relativePoint:null},i)]},set:function(e){var t=e.interaction,n=e.coords,i=e.state,r=i.options,o=i.offsets,a=Ba.getOriginXY(t.interactable,t.element,t.prepared.name),s=Ba.extend({},n),l=[];r.offsetWithOrigin||(s.x-=a.x,s.y-=a.y);for(var c=0;c<o.length;c++)for(var u=o[c],d=s.x-u.x,p=s.y-u.y,f=0,h=r.targets.length;f<h;f++){var g=r.targets[f],v=void 0;(v=Ba.is.func(g)?g(d,p,t,u,f):g)&&l.push({x:(Ba.is.number(v.x)?v.x:d)+u.x,y:(Ba.is.number(v.y)?v.y:p)+u.y,range:Ba.is.number(v.range)?v.range:r.range,source:g,index:f,offset:u})}for(var m={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},y=0;y<l.length;y++){var _=l[y],b=_.range,w=_.x-s.x,S=_.y-s.y,E=Ba.hypot(w,S),x=E<=b;b===1/0&&m.inRange&&m.range!==1/0&&(x=!1),m.target&&!(x?m.inRange&&b!==1/0?E/b<m.distance/m.range:b===1/0&&m.range!==1/0||E<m.distance:!m.inRange&&E<m.distance)||(m.target=_,m.distance=E,m.range=b,m.inRange=x,m.delta.x=w,m.delta.y=S)}return m.inRange&&(n.x=m.target.x,n.y=m.target.y),i.closest=m},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};Fa.default=Ua;var za={};function Ha(e){return(Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(za,"__esModule",{value:!0}),za.default=void 0;var qa=Ga($e),Va=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Ha(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(p),Wa=Ga(Fa);function Ga(e){return e&&e.__esModule?e:{default:e}}function Ya(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ka={start:function(e){var t=e.state,n=e.edges,i=t.options;if(!n)return null;e.state={options:{targets:null,relativePoints:[{x:n.left?0:1,y:n.top?0:1}],offset:i.offset||"self",origin:{x:0,y:0},range:i.range}},t.targetFields=t.targetFields||[["width","height"],["x","y"]],Wa.default.start(e),t.offsets=e.state.offsets,e.state=t},set:function(e){var t=e.interaction,n=e.state,i=e.coords,r=n.options,o=n.offsets,a={x:i.x-o[0].x,y:i.y-o[0].y};n.options=(0,qa.default)({},r),n.options.targets=[];for(var s=0;s<(r.targets||[]).length;s++){var l=(r.targets||[])[s],c=void 0;if(c=Va.func(l)?l(a.x,a.y,t):l){for(var u=0;u<n.targetFields.length;u++){var d=Ya(n.targetFields[u],2),p=d[0],f=d[1];if(p in c||f in c){c.x=c[p],c.y=c[f];break}}n.options.targets.push(c)}}var h=Wa.default.set(e);return n.options=r,h},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};za.default=Ka;var Xa={};Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.default=void 0;var Ja=Qa(z),$a=Qa($e),Za=Qa(za);function Qa(e){return e&&e.__esModule?e:{default:e}}var es={start:function(e){var t=e.edges;return t?(e.state.targetFields=e.state.targetFields||[[t.left?"left":"right",t.top?"top":"bottom"]],Za.default.start(e)):null},set:Za.default.set,defaults:(0,$a.default)((0,Ja.default)(Za.default.defaults),{targets:null,range:null,offset:{x:0,y:0}})};Xa.default=es;var ts={};Object.defineProperty(ts,"__esModule",{value:!0}),ts.aspectRatio=ts.restrictSize=ts.restrictEdges=ts.restrictRect=ts.restrict=ts.snapEdges=ts.snapSize=ts.snap=void 0;var ns=us(Yo),is=us(fa),rs=us(ia),os=us(Sa),as=us(Ta),ss=us(Xa),ls=us(Fa),cs=us(za);function us(e){return e&&e.__esModule?e:{default:e}}var ds=(0,ho.makeModifier)(ls.default,"snap");ts.snap=ds;var ps=(0,ho.makeModifier)(cs.default,"snapSize");ts.snapSize=ps;var fs=(0,ho.makeModifier)(ss.default,"snapEdges");ts.snapEdges=fs;var hs=(0,ho.makeModifier)(rs.default,"restrict");ts.restrict=hs;var gs=(0,ho.makeModifier)(os.default,"restrictRect");ts.restrictRect=gs;var vs=(0,ho.makeModifier)(is.default,"restrictEdges");ts.restrictEdges=vs;var ms=(0,ho.makeModifier)(as.default,"restrictSize");ts.restrictSize=ms;var ys=(0,ho.makeModifier)(ns.default,"aspectRatio");ts.aspectRatio=ys;var _s={};Object.defineProperty(_s,"__esModule",{value:!0}),_s.PointerEvent=_s.default=void 0;var bs,ws=(bs=an)&&bs.__esModule?bs:{default:bs},Ss=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Es(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(de);function Es(e){return(Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ks(e){return(ks=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ps(e,t){return(Ps=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ts(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Os=function(){function e(t,n,i,r,o,a){var s,l;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ts(Cs(s=!(l=ks(e).call(this,o))||"object"!==Es(l)&&"function"!=typeof l?Cs(this):l),"type",void 0),Ts(Cs(s),"originalEvent",void 0),Ts(Cs(s),"pointerId",void 0),Ts(Cs(s),"pointerType",void 0),Ts(Cs(s),"double",void 0),Ts(Cs(s),"pageX",void 0),Ts(Cs(s),"pageY",void 0),Ts(Cs(s),"clientX",void 0),Ts(Cs(s),"clientY",void 0),Ts(Cs(s),"dt",void 0),Ts(Cs(s),"eventable",void 0),Ss.pointerExtend(Cs(s),i),i!==n&&Ss.pointerExtend(Cs(s),n),s.timeStamp=a,s.originalEvent=i,s.type=t,s.pointerId=Ss.getPointerId(n),s.pointerType=Ss.getPointerType(n),s.target=r,s.currentTarget=null,"tap"===t){var c=o.getPointerIndex(n);s.dt=s.timeStamp-o.pointers[c].downTime;var u=s.timeStamp-o.tapTime;s.double=!!(o.prevTap&&"doubletap"!==o.prevTap.type&&o.prevTap.target===s.target&&u<500)}else"doubletap"===t&&(s.dt=n.timeStamp-o.tapTime);return s}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ps(e,t)}(e,ws.default),t=e,(n=[{key:"_subtractOrigin",value:function(e){var t=e.x,n=e.y;return this.pageX-=t,this.pageY-=n,this.clientX-=t,this.clientY-=n,this}},{key:"_addOrigin",value:function(e){var t=e.x,n=e.y;return this.pageX+=t,this.pageY+=n,this.clientX+=t,this.clientY+=n,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&xs(t.prototype,n),e}();_s.PointerEvent=_s.default=Os;var Ms={};function Is(e){return(Is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.default=void 0,Ls(On),n({});var As=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Is(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(Ct),Ds=Ls(_s);function Ls(e){return e&&e.__esModule?e:{default:e}}var js={id:"pointer-events/base",install:function(e){e.pointerEvents=js,e.defaults.actions.pointerEvents=js.defaults,As.extend(e.actions.phaselessTypes,js.types)},listeners:{"interactions:new":function(e){var t=e.interaction;t.prevTap=null,t.tapTime=0},"interactions:update-pointer":function(e){var t=e.down,n=e.pointerInfo;!t&&n.hold||(n.hold={duration:1/0,timeout:null})},"interactions:move":function(e,t){var n=e.interaction,i=e.pointer,r=e.event,o=e.eventTarget,a=e.duplicate,s=n.getPointerIndex(i);a||n.pointerIsDown&&!n.pointerWasMoved||(n.pointerIsDown&&clearTimeout(n.pointers[s].hold.timeout),Rs({interaction:n,pointer:i,event:r,eventTarget:o,type:"move"},t))},"interactions:down":function(e,t){!function(e,t){for(var n=e.interaction,i=e.pointer,r=e.event,o=e.eventTarget,a=e.pointerIndex,s=n.pointers[a].hold,l=As.dom.getPath(o),c={interaction:n,pointer:i,event:r,eventTarget:o,type:"hold",targets:[],path:l,node:null},u=0;u<l.length;u++){var d=l[u];c.node=d,t.fire("pointerEvents:collect-targets",c)}if(c.targets.length){for(var p=1/0,f=0;f<c.targets.length;f++){var h=c.targets[f].eventable.options.holdDuration;h<p&&(p=h)}s.duration=p,s.timeout=setTimeout(function(){Rs({interaction:n,eventTarget:o,pointer:i,event:r,type:"hold"},t)},p)}}(e,t),Rs(e,t)},"interactions:up":function(e,t){var n,i,r,o,a,s;Ns(e),Rs(e,t),i=t,r=(n=e).interaction,o=n.pointer,a=n.event,s=n.eventTarget,r.pointerWasMoved||Rs({interaction:r,eventTarget:s,pointer:o,event:a,type:"tap"},i)},"interactions:cancel":function(e,t){Ns(e),Rs(e,t)}},PointerEvent:Ds.default,fire:Rs,collectEventTargets:Fs,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Rs(e,t){var n=e.interaction,i=e.pointer,r=e.event,o=e.eventTarget,a=e.type,s=e.targets,l=void 0===s?Fs(e,t):s,c=new Ds.default(a,i,r,o,n,t.now());t.fire("pointerEvents:new",{pointerEvent:c});for(var u={interaction:n,pointer:i,event:r,eventTarget:o,targets:l,type:a,pointerEvent:c},d=0;d<l.length;d++){var p=l[d];for(var f in p.props||{})c[f]=p.props[f];var h=As.getOriginXY(p.eventable,p.node);if(c._subtractOrigin(h),c.eventable=p.eventable,c.currentTarget=p.node,p.eventable.fire(c),c._addOrigin(h),c.immediatePropagationStopped||c.propagationStopped&&d+1<l.length&&l[d+1].node!==c.currentTarget)break}if(t.fire("pointerEvents:fired",u),"tap"===a){var g=c.double?Rs({interaction:n,pointer:i,event:r,eventTarget:o,type:"doubletap"},t):c;n.prevTap=g,n.tapTime=g.timeStamp}return c}function Fs(e,t){var n=e.interaction,i=e.pointer,r=e.event,o=e.eventTarget,a=e.type,s=n.getPointerIndex(i),l=n.pointers[s];if("tap"===a&&(n.pointerWasMoved||!l||l.downTarget!==o))return[];for(var c=As.dom.getPath(o),u={interaction:n,pointer:i,event:r,eventTarget:o,type:a,path:c,targets:[],node:null},d=0;d<c.length;d++){var p=c[d];u.node=p,t.fire("pointerEvents:collect-targets",u)}return"hold"===a&&(u.targets=u.targets.filter(function(e){return e.eventable.options.holdDuration===n.pointers[s].hold.duration})),u.targets}function Ns(e){var t=e.interaction,n=e.pointerIndex;t.pointers[n].hold&&clearTimeout(t.pointers[n].hold.timeout)}var Bs=js;Ms.default=Bs;var Us={};Object.defineProperty(Us,"__esModule",{value:!0}),Us.default=void 0;var zs=Hs(Ms);function Hs(e){return e&&e.__esModule?e:{default:e}}function qs(e){var t=e.interaction;t.holdIntervalHandle&&(clearInterval(t.holdIntervalHandle),t.holdIntervalHandle=null)}Hs(_s);var Vs={id:"pointer-events/holdRepeat",install:function(e){e.usePlugin(zs.default);var t=e.pointerEvents;t.defaults.holdRepeatInterval=0,t.types.holdrepeat=e.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(e,t){return e["pointerEvents:".concat(t)]=qs,e},{"pointerEvents:new":function(e){var t=e.pointerEvent;"hold"===t.type&&(t.count=(t.count||0)+1)},"pointerEvents:fired":function(e,t){var n=e.interaction,i=e.pointerEvent,r=e.eventTarget,o=e.targets;if("hold"===i.type&&o.length){var a=o[0].eventable.options.holdRepeatInterval;a<=0||(n.holdIntervalHandle=setTimeout(function(){t.pointerEvents.fire({interaction:n,eventTarget:r,type:"hold",pointer:i,event:i},t)},a))}}})};Us.default=Vs;var Ws={};Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.default=void 0;var Gs,Ys=(Gs=$e)&&Gs.__esModule?Gs:{default:Gs};function Ks(e){return(0,Ys.default)(this.events.options,e),this}var Xs={id:"pointer-events/interactableTargets",install:function(e){var t=e.Interactable;t.prototype.pointerEvents=Ks;var n=t.prototype._backCompatOption;t.prototype._backCompatOption=function(e,t){var i=n.call(this,e,t);return i===this&&(this.events.options[e]=t),i}},listeners:{"pointerEvents:collect-targets":function(e,t){var n=e.targets,i=e.node,r=e.type,o=e.eventTarget;t.interactables.forEachMatch(i,function(e){var t=e.events,a=t.options;t.types[r]&&t.types[r].length&&e.testIgnoreAllow(a,i,o)&&n.push({node:i,eventable:t,props:{interactable:e}})})},"interactable:new":function(e){var t=e.interactable;t.events.getRect=function(e){return t.getRect(e)}},"interactable:set":function(e,t){var n=e.interactable,i=e.options;(0,Ys.default)(n.events.options,t.pointerEvents.defaults),(0,Ys.default)(n.events.options,i.pointerEvents||{})}}};Ws.default=Xs;var Js={};function $s(e){return($s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Js,"__esModule",{value:!0}),Js.install=function(e){e.usePlugin(Zs),e.usePlugin(Qs.default),e.usePlugin(el.default)},Object.defineProperty(Js,"holdRepeat",{enumerable:!0,get:function(){return Qs.default}}),Object.defineProperty(Js,"interactableTargets",{enumerable:!0,get:function(){return el.default}}),Js.pointerEvents=Js.id=void 0;var Zs=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==$s(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(Ms);Js.pointerEvents=Zs;var Qs=tl(Us),el=tl(Ws);function tl(e){return e&&e.__esModule?e:{default:e}}Js.id="pointer-events";var nl,il={};function rl(e){var t=e.Interactable;e.actions.phases.reflow=!0,t.prototype.reflow=function(t){return function(e,t,n){function i(){var i=r[s],l=e.getRect(i);if(!l)return"break";var c=Ct.arr.find(n.interactions.list,function(n){return n.interacting()&&n.interactable===e&&n.element===i&&n.prepared.name===t.name}),u=void 0;if(c)c.move(),a&&(u=c._reflowPromise||new o(function(e){c._reflowResolve=e}));else{var d=Ct.rect.tlbrToXywh(l),p={page:{x:d.x,y:d.y},client:{x:d.x,y:d.y},timeStamp:n.now()},f=Ct.pointer.coordsToEvent(p);u=function(e,t,n,i,r){var o=e.interactions.new({pointerType:"reflow"}),a={interaction:o,event:r,pointer:r,eventTarget:n,phase:"reflow"};o.interactable=t,o.element=n,o.prepared=(0,Ct.extend)({},i),o.prevEvent=r,o.updatePointer(r,r,n,!0),o._doPhase(a);var s=Ct.win.window.Promise?new Ct.win.window.Promise(function(e){o._reflowResolve=e}):null;return o._reflowPromise=s,o.start(i,t,n),o._interacting?(o.move(a),o.end(r)):o.stop(),o.removePointer(r,r),o.pointerIsDown=!1,s}(n,e,i,t,f)}a&&a.push(u)}for(var r=Ct.is.string(e.target)?Ct.arr.from(e._context.querySelectorAll(e.target)):[e.target],o=Ct.win.window.Promise,a=o?[]:null,s=0;s<r.length&&"break"!==i();s++);return a&&o.all(a).then(function(){return e})}(this,t,e)}}Object.defineProperty(il,"__esModule",{value:!0}),il.install=rl,il.default=void 0,(nl=t({}))&&nl.__esModule;var ol={id:"reflow",install:rl,listeners:{"interactions:stop":function(e,t){var n=e.interaction;"reflow"===n.pointerType&&(n._reflowResolve&&n._reflowResolve(),Ct.arr.remove(t.interactions.list,n))}}};il.default=ol;var al={};function sl(e){return(sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(al,"__esModule",{value:!0}),al.default=al.scope=al.interact=void 0;var ll=n({}),cl=pl(D),ul=pl(Te),dl=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==sl(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(Ct);function pl(e){return e&&e.__esModule?e:{default:e}}var fl={},hl=new ll.Scope;function gl(e,t){var n=hl.interactables.get(e,t);return n||((n=hl.interactables.new(e,t)).events.global=fl),n}al.scope=hl,(al.interact=gl).use=function(e,t){return hl.usePlugin(e,t),gl},gl.isSet=function(e,t){return!!hl.interactables.get(e,t&&t.context)},gl.on=function(e,t,n){if(dl.is.string(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),dl.is.array(e)){for(var i=0;i<e.length;i++){var r;r=e[i],gl.on(r,t,n)}return gl}if(dl.is.object(e)){for(var o in e)gl.on(o,e[o],t);return gl}return(0,ll.isNonNativeEvent)(e,hl.actions)?fl[e]?fl[e].push(t):fl[e]=[t]:ul.default.add(hl.document,e,t,{options:n}),gl},gl.off=function(e,t,n){if(dl.is.string(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),dl.is.array(e)){for(var i=0;i<e.length;i++){var r;r=e[i],gl.off(r,t,n)}return gl}if(dl.is.object(e)){for(var o in e)gl.off(o,e[o],t);return gl}var a;return(0,ll.isNonNativeEvent)(e,hl.actions)?e in fl&&-1!==(a=fl[e].indexOf(t))&&fl[e].splice(a,1):ul.default.remove(hl.document,e,t,n),gl},gl.debug=function(){return hl},gl.getPointerAverage=dl.pointer.pointerAverage,gl.getTouchBBox=dl.pointer.touchBBox,gl.getTouchDistance=dl.pointer.touchDistance,gl.getTouchAngle=dl.pointer.touchAngle,gl.getElementRect=dl.dom.getElementRect,gl.getElementClientRect=dl.dom.getElementClientRect,gl.matchesSelector=dl.dom.matchesSelector,gl.closest=dl.dom.closest,gl.supportsTouch=function(){return cl.default.supportsTouch},gl.supportsPointerEvent=function(){return cl.default.supportsPointerEvent},gl.stop=function(){for(var e=0;e<hl.interactions.list.length;e++)hl.interactions.list[e].stop();return gl},gl.pointerMoveTolerance=function(e){return dl.is.number(e)?(hl.interactions.pointerMoveTolerance=e,gl):hl.interactions.pointerMoveTolerance},hl.addListeners({"interactable:unset":function(e){var t=e.interactable;hl.interactables.list.splice(hl.interactables.list.indexOf(t),1);for(var n=0;n<hl.interactions.list.length;n++){var i=hl.interactions.list[n];i.interactable===t&&i.interacting()&&!i._ending&&i.stop()}}}),gl.addDocument=function(e,t){return hl.addDocument(e,t)},gl.removeDocument=function(e){return hl.removeDocument(e)};var vl=hl.interact=gl;al.default=vl;var ml={};function yl(e){return(yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(ml,"__esModule",{value:!0}),ml.init=function(e){for(var t in Ol.scope.init(e),Ol.default.use(Sl.default),Ol.default.use(Cl.default),Ol.default.use(Pl),Ol.default.use(El.default),Ol.default.use(xl.default),Ol.default.use(wl),Ol.default.use(_l),kl){var n=kl[t],i=n._defaults,r=n._methods;i._methods=r,Ol.scope.defaults.perAction[t]=i}return Ol.default.use(bl.default),Ol.default.use(Tl.default),Ol.default},ml.default=void 0;var _l=Al(Ui),bl=Ml(Gi),wl=Al(jr),Sl=Ml(Ur),El=(Ml($r),Ml(To)),xl=Ml(ho),kl=Al(ts),Cl=Ml(_o),Pl=Al(Js),Tl=Ml(il),Ol=Al(al);function Ml(e){return e&&e.__esModule?e:{default:e}}function Il(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Il=function(){return e},e}function Al(e){if(e&&e.__esModule)return e;if(null===e||"object"!==yl(e)&&"function"!=typeof e)return{default:e};var t=Il();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}Ol.default.version="1.8.5";var Dl=Ol.default;ml.default=Dl;var Ll={};function jl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.default=void 0,Ll.default=function(e){function t(t,i){for(var r=e.range,o=e.limits,a=void 0===o?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:o,s=e.offset,l=void 0===s?{x:0,y:0}:s,c={range:r,grid:e,x:null,y:null},u=0;u<n.length;u++){var d=jl(n[u],2),p=d[0],f=d[1],h=Math.round((t-l.x)/e[p]),g=Math.round((i-l.y)/e[f]);c[p]=Math.max(a.left,Math.min(a.right,h*e[p]+l.x)),c[f]=Math.max(a.top,Math.min(a.bottom,g*e[f]+l.y))}return c}var n=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(t){var n=jl(t,2),i=n[0],r=n[1];return i in e||r in e});return t.grid=e,t.coordFields=n,t};var Rl={};Object.defineProperty(Rl,"__esModule",{value:!0}),Object.defineProperty(Rl,"grid",{enumerable:!0,get:function(){return Nl.default}});var Fl,Nl=(Fl=Ll)&&Fl.__esModule?Fl:{default:Fl},Bl={};Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.init=Kl,Bl.default=void 0;var Ul,zl=Gl(ml),Hl=Gl(ts),ql=(Ul=$e)&&Ul.__esModule?Ul:{default:Ul},Vl=Gl(Rl);function Wl(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Wl=function(){return e},e}function Gl(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Yl(e)&&"function"!=typeof e)return{default:e};var t=Wl();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}function Yl(e){return(Yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kl(e){return(0,zl.init)(e),zl.default.use({id:"interactjs",install:function(){zl.default.modifiers=(0,ql.default)({},Hl),zl.default.snappers=Vl,zl.default.createSnapGrid=zl.default.snappers.grid}})}"object"===("undefined"==typeof window?"undefined":Yl(window))&&window&&Kl(window);var Xl=zl.default;Bl.default=Xl;var Jl={exports:{}};Object.defineProperty(Jl.exports,"__esModule",{value:!0});var $l={};Jl.exports.default=void 0;var Zl=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Ql(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return e}();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(Bl);function Ql(e){return(Ql="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}if(Object.keys(Zl).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call($l,e)||Object.defineProperty(Jl.exports,e,{enumerable:!0,get:function(){return Zl[e]}}))}),"object"===Ql(Jl)&&Jl)try{Jl.exports=Zl.default}catch(e){}Zl.default.default=Zl.default,Zl.default.init=Zl.init;var ec=Zl.default;return Jl.exports.default=ec,Jl=Jl.exports}()},,function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(48),a=n(192),s=n(200),l=n(202),c=n(165),u=function(e){function t(t){var n=e.call(this,t)||this;return n.contentName="SubscriptionContext",n.requestedAction=t.requestedAction,n.neededSignatures=t.neededSignatures,n.summaryParams={numUsers:void 0,numSignatures:void 0,paymentInterval:void 0},n}return r(t,e),t.prototype.getInitialState=function(){return this.isLoggedIn()?this.calculateNextStateAfterAuth():new a.AuthState},t.prototype.calculateNextStateAfterAuth=function(){if(!("premium"===this.userType))throw"User must be premium to update a subscription";switch(this.requestedAction){case"selectUsers":return new s.SelectUsersState;case"selectSignatures":return new l.SelectSignaturesState;case"summary":return new c.SummaryState;default:throw"Requested Action '"+this.requestedAction+"' is not handled"}return null},t}(o.ContextBase);t.SubscriptionContext=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){var e=this;this.init=function(t){e.input=t,e.isRtl=document.body.classList.contains("rtl");var n=e.createBubbleElement();t.insertAdjacentElement("afterend",n),e.recalculatePosition(),t.addEventListener("input",e.recalculatePosition),window.addEventListener("resize",e.recalculatePosition),window.bubble=e},this.setText=function(t){e.bubble&&(e.bubble.innerHTML=t,e.recalculatePosition())},this.createBubbleElement=function(){var t=document.createElement("div");return e.bubble=t,t.classList.add("payment-period__slider__element__bubble"),t},this.recalculatePosition=function(){var t=e.input,n=e.bubble,i=Number(t.value),r=t.offsetWidth,o=Number(t.getAttribute("min")),a=Number(t.getAttribute("max")),s=r/a,l=(i-o)/(a-o)*(r-10-10)+10,c=n.offsetWidth/2,u=l-c;if(u<0){u=0;var d=c-10-i*s;d+=i>0?4:2.5,n.style.setProperty("--left",1==e.isRtl?d+"px":"-"+d+"px")}else if(u+2*c>r){u=r-2*c;d=c-10+2.5;i!==a&&(d-=(a-i)*s-1),n.style.setProperty("--left",1==e.isRtl?"-"+d+"px":d+"px")}else n.style.setProperty("--left","0px");n.style[1==e.isRtl?"right":"left"]=u+"px"}}return e.prototype.setEnabled=function(){this.bubble.classList.remove("disabled")},e.prototype.setDisabled=function(){this.bubble.classList.add("disabled")},e}();t.default=i},function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.localeNumber=function(e){return-1===navigator.language.toLowerCase().indexOf("es")?Intl.NumberFormat(navigator.languages).format(e):Intl.NumberFormat("de-DE").format(e)},t.localePrice=function(e,t){void 0===t&&(t=null),null==t&&(t=window.ILovePDF.currencyCode);var n={style:"currency",currency:t,currencyDisplay:"narrowSymbol",minimumFractionDigits:0};try{return-1===navigator.language.toLowerCase().indexOf("es")?Intl.NumberFormat(navigator.languages,n).format(e):Intl.NumberFormat("de-DE",n).format(e)}catch(t){return-1===navigator.language.toLowerCase().indexOf("es")?Intl.NumberFormat(navigator.languages,i(i({},n),{currencyDisplay:"symbol"})).format(e):Intl.NumberFormat("de-DE",i(i({},n),{currencyDisplay:"symbol"})).format(e)}},t.fromRgbToHex=function(e){var t=e.split(" ").join("").split(","),n=t[0].indexOf("("),i=t[0].substring(n+1),r=t[1],o=t[2].substr(0,t[2].length-1);return function(e,t,n){return"#"+((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}(Number(i),Number(r),Number(o))}},function(e,t,n){"use strict";function i(){return window.navigator.mockUserAgent||window.navigator.userAgent}function r(){return!0===window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches}function o(e){return void 0===e&&(e=i()),-1!==e.indexOf("FBAN")||-1!==e.indexOf("FBAV")}function a(e){return void 0===e&&(e=i()),/FxiOS/i.test(e)}function s(e){return void 0===e&&(e=i()),/EdgiOS/i.test(e)}function l(e){return void 0===e&&(e=i()),e.indexOf("Opera Mini")>-1}function c(e){return void 0===e&&(e=i()),/Android/.test(e)}function u(e){return void 0===e&&(e=i()),/iPhone|iPod|iPad/.test(e)}function d(e){return void 0===e&&(e=i()),/\bGSA\b/.test(e)}function p(e){return void 0===e&&(e=i()),/QQBrowser/.test(e)}function f(e){return void 0===e&&(e=i()),!!u(e)&&(!!d(e)||/.+AppleWebKit(?!.*Safari)/.test(e))}function h(e){return void 0===e&&(e=i()),!!c(e)&&(/Version\/[\d.]+/.test(e)&&!l(e))}function g(){var e=i();return/Macintosh.*AppleWebKit(?!.*Safari)/i.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getUserAgent=i,t.isDevice=function(){return!!i().match(/Android|webOS|iPhone|iPad|iPod|bada|Symbian|Palm|CriOS|BlackBerry|IEMobile|WindowsMobile|Opera Mini/i)},t.isStandAlone=r,t.isFacebookWebView=o,t.isFirefoxIOS=a,t.isEdgeIOS=s,t.isOperaMini=l,t.isAndroid=c,t.isIos=u,t.isGoogleSearchApp=d,t.isQQBrowser=p,t.isIosWebview=f,t.isAndroidWebview=h,t.isWebView=function(){return o()||f()||h()},t.isIE=function(){return!!window.document.documentMode||Boolean(window.navigator&&window.navigator.userAgent&&/Edge|MSIE/i.test(window.navigator.userAgent))},t.isIE11=function(){return!!window.MSInputMethodContext&&!!window.document.documentMode},t.isIECompHeader=function(){var e=window.document.querySelector('meta[http-equiv="X-UA-Compatible"]'),t=window.document.querySelector('meta[content="IE=edge"]');return!(!e||!t)},t.isIEIntranet=function(){if(window.document.documentMode)try{var e=window.status;return window.status="testIntranetMode","testIntranetMode"===window.status&&(window.status=e,!0)}catch(e){return!1}return!1},t.isMacOsCna=g,t.supportsPopups=function(e){return void 0===e&&(e=i()),!(f(e)||h(e)||l(e)||a(e)||s(e)||o(e)||p(e)||g()||r())}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n){this.x=e,this.y=t,this.time=n||Date.now()}return e.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},e.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time},e.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0},e}();t.Point=i},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(61),r=n(162),o=n(90),a=n(177),s=n(197),l=n(64),c=n(16),u=function(){function t(){}return t.auth=function(t){return e(".modal:visible").removeAttr("tabindex"),s.DialogCollection.auth(t)},t.updateSignaturesSubscription=function(t,n){return void 0===n&&(n=!0),e(".modal:visible").removeAttr("tabindex"),new i.default({dialogName:"updateSignaturesSubscription",canBeClosedByUser:n}).setContentBuilder(function(){return new a.SubscriptionContext({requestedAction:"selectSignatures",neededSignatures:t})})},t.buySignaturesPackages=function(t,n){return void 0===n&&(n=!0),e(".modal:visible").removeAttr("tabindex"),new i.default({dialogName:"buySignaturesPackages",canBeClosedByUser:n}).setContentBuilder(function(){return new r.PackagesContext({requestedAction:"selectPackageSignatures",neededNumberOfPkgItems:t})})},t.becomePremium=function(t){return void 0===t&&(t="sign"),e(".modal:visible").removeAttr("tabindex"),new i.default({dialogName:"becomePremium"}).setContentBuilder(function(){return new o.PremiumContext({tool:t,triggerReason:l.REASON.ERROR_FEATURE,limits:null})})},t.buySmsPackage=function(t,n){return void 0===n&&(n=!0),e(".modal:visible").removeAttr("tabindex"),new i.default({dialogName:"smsPackage",canBeClosedByUser:n}).setContentBuilder(function(){return new r.PackagesContext({requestedAction:"selectPackageSms",neededNumberOfPkgItems:t})})},t.getSuitableDialogToObtainSignatures=function(e,t){var n,i,r=c.UserModel.isPremium(),o=r?null===(n=c.UserModel.get())||void 0===n?void 0:n.current_subscription:null;r?i=o.signatures>=t?this.buySignaturesPackages(e).show():this.updateSignaturesSubscription(e).show():i=this.becomePremium().show();return i},t}();t.SignatureDialogs=u}).call(this,n(1))},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(20),a=n(93),s=n(137),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="SelectPackageCertsState",t.LAYOUT_TEMPLATE_NAME="packages",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.changeScreen(t.INITIAL_SCREEN),t.initNextAction(),t.initCertsSelector(),t.clearLoadingScreen()},t._onSliderInputChanged=function(){void 0!==t.ctx.neededNumberOfPkgItems&&(t.certsSelect.getQuantity()>=t.numToBuy?t.actionNextBtn.disabled=!1:t.actionNextBtn.disabled=!0)},t._goNextState=function(){t.ctx.summaryParams={packageName:"certificates",packageQty:t.certsSelect.getQuantity()};var e=new s.SummaryState;t.ctx.changeState(e),e.render(t.domRoot)},t}return r(t,e),Object.defineProperty(t.prototype,"numToBuy",{get:function(){return void 0===this.ctx.neededNumberOfPkgItems?0:this.ctx.neededNumberOfPkgItems-this.ctx.user.certificates_left},enumerable:!0,configurable:!0}),t.prototype.initCertsSelector=function(){var e=this;if(this.certsSelect)this._onSliderInputChanged();else{var t=document.getElementById("SelectCerts");this.certsSelect=new a.default,this.certsSelect.onInput(this._onSliderInputChanged),void 0===this.ctx.neededNumberOfPkgItems?this.certsSelect.init(t,{}):this.certsSelect.init(t,{minQty:this.numToBuy,initialQty:function(t){return t>=e.numToBuy}})}},t.prototype.initNextAction=function(){this.actionNextBtn.addEventListener("click",this._goNextState)},Object.defineProperty(t.prototype,"actionNextBtn",{get:function(){return this.domRoot.querySelector("[next-from-certs]")},enumerable:!0,configurable:!0}),t.prototype.cleanUpState=function(){this.domRoot.querySelector("[next-from-certs]").removeEventListener("click",this._goNextState)},t}(o.StateBase);t.SelectPackageCertsState=l},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(20),a=n(10),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="PaymentCompletedState",t.LAYOUT_TEMPLATE_NAME="packages",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.ctx.setEndState(),t.changeScreen(t.INITIAL_SCREEN),t.clearLoadingScreen(),t.initNextAction()},t._goNextState=function(){t.dispatchEvent(new a.IloveEvent("end"))},t}return r(t,e),t.prototype.initNextAction=function(){var e=this;this.domRoot.querySelector("[next-from-payment-completed]").addEventListener("click",function(){e._goNextState()})},t}(o.StateBase);t.PaymentCompletedState=s},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(20),a=n(137),s=n(93),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="SelectPackageSignaturesState",t.LAYOUT_TEMPLATE_NAME="packages",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.changeScreen(t.INITIAL_SCREEN),t.initSignaturesSelector(),t.initNextAction(),t.clearLoadingScreen()},t._onSliderQtyChanged=function(){void 0!==t.ctx.neededNumberOfPkgItems&&t.updateCheckoutBtnAvailability()},t._goNextState=function(){t.cleanUpState(),t.ctx.summaryParams={packageName:"signatures_package",packageQty:t.signaturesSelect.getQuantity()};var e=new a.SummaryState;t.ctx.changeState(e),e.render(t.domRoot)},t}return r(t,e),t.prototype.initSignaturesSelector=function(){var e=this;if(this.signaturesSelect)this._onSliderQtyChanged();else{var t=document.getElementById("SelectSignatures");this.signaturesSelect=new s.default,this.signaturesSelect.onInput(this._onSliderQtyChanged),void 0===this.ctx.neededNumberOfPkgItems?this.signaturesSelect.init(t,{}):this.signaturesSelect.init(t,{initialQty:function(t){return t>=e.numToBuy},minQty:this.numToBuy})}},Object.defineProperty(t.prototype,"numToBuy",{get:function(){return void 0===this.ctx.neededNumberOfPkgItems?0:this.ctx.neededNumberOfPkgItems-this.ctx.user.signatures_left},enumerable:!0,configurable:!0}),t.prototype.updateCheckoutBtnAvailability=function(){var e=this.signaturesSelect.getQuantity();this.nextStateBtn.disabled=!(e>=this.numToBuy)},t.prototype.initNextAction=function(){this.domRoot;this.nextStateBtn.addEventListener("click",this._goNextState)},Object.defineProperty(t.prototype,"nextStateBtn",{get:function(){var e=this.domRoot.querySelector("[next-from-signatures]");if(!e)throw"Btn not found";return e},enumerable:!0,configurable:!0}),t.prototype.cleanUpState=function(){this.domRoot;this.nextStateBtn.removeEventListener("click",this._goNextState)},t}(o.StateBase);t.SelectPackageSignaturesState=l},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(20),a=n(93),s=n(137),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="SelectPackageSmsState",t.LAYOUT_TEMPLATE_NAME="packages",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.changeScreen(t.INITIAL_SCREEN),t.initSmsSelector(),t.initNextAction(),t.clearLoadingScreen()},t._onSliderQtyChanged=function(){void 0!==t.ctx.neededNumberOfPkgItems&&t.updateCheckoutBtnAvailability()},t._goNextState=function(){t.ctx.summaryParams={packageName:"sms",packageQty:t.smsSelect.getQuantity()},t.cleanUpState();var e=new s.SummaryState;t.ctx.changeState(e),e.render(t.domRoot)},t}return r(t,e),t.prototype.initSmsSelector=function(){var e=this;if(this.smsSelect)this._onSliderQtyChanged();else{var t=document.getElementById("SelectSMS");this.smsSelect=new a.default,this.smsSelect.onInput(this._onSliderQtyChanged),void 0===this.ctx.neededNumberOfPkgItems?this.smsSelect.init(t,{}):this.smsSelect.init(t,{initialQty:function(t){return t>=e.numToBuy},minQty:this.numToBuy})}},Object.defineProperty(t.prototype,"numToBuy",{get:function(){return void 0===this.ctx.neededNumberOfPkgItems?0:this.ctx.neededNumberOfPkgItems-this.ctx.user.sms_left},enumerable:!0,configurable:!0}),t.prototype.updateCheckoutBtnAvailability=function(){var e=this.smsSelect.getQuantity();this.proceedToCheckoutBtn.disabled=!(e>=this.numToBuy)},t.prototype.initNextAction=function(){this.proceedToCheckoutBtn.addEventListener("click",this._goNextState)},Object.defineProperty(t.prototype,"proceedToCheckoutBtn",{get:function(){var e=this.domRoot.querySelector("[next-from-sms]");if(!e)throw"Button not found";return e},enumerable:!0,configurable:!0}),t.prototype.cleanUpState=function(){this.domRoot.querySelector("[next-from-sms]").removeEventListener("click",this._goNextState)},t}(o.StateBase);t.SelectPackageSmsState=l},,function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(100),a=n(16),s=n(19),l=n(59),c=n(38),u=n(17),d=n(12),p=function(e){function t(t){var n=e.call(this,t)||this;return n.target=n.target||"api",n.chunkSize=!1,n}return r(t,e),t.prototype.getUrl=function(){return"api"==this.target?e.prototype.getUrl.call(this):this.getServiceUrl()},t.prototype.getServiceUrl=function(){return c.Settings.get("service")+"/signature/upload"},t.prototype.getUploadParams=function(){return"api"==this.target?{task:this.taskId,v:this.appVersion}:{}},t.prototype.setApiMode=function(){this.target="api",this.uploader.stop(),this.token=this.tokenApi,this.uploader.setOption("url",this.getUrl()),this.uploader.setOption("headers",this.getHeaders()),this.uploader.setOption("multipart_params",this.getUploadParams()),this.uploader.start()},t.prototype.setServiceMode=function(){var e=a.UserModel.get();if(!e||!e.token)return!1;this.tokenService=e.token,this.target="service",this.token=this.tokenService,this.uploader.stop(),this.uploader.setOption("url",this.getUrl()),this.uploader.setOption("headers",this.getHeaders()),this.uploader.setOption("multipart_params",this.getUploadParams()),this.uploader.start()},t.prototype.setServiceOnlyMode=function(){var e=a.UserModel.get();if(!e||!e.token)return!1;this.target="serviceOnly",this.token=e.token,this.uploader.stop(),this.uploader.setOption("url",this.getUrl()),this.uploader.setOption("headers",this.getHeaders()),this.uploader.setOption("multipart_params",this.getUploadParams()),this.uploader.start()},t.prototype.fileUploaded=function(e,t){"api"==this.target||"serviceOnly"==this.target?this.optionsManager.fileUploaded(e,t):t.service_filename?this.uploadToApi(t.service_filename,e):(u.configureScope(function(e){e.setExtra("error",t)}),u.captureMessage("[sign] no server_filename on response",d.Severity.Error),this.fatalError("no server_filename present"))},t.prototype.uploadToApi=function(e,t){void 0===t&&(t=null);var n=this;null==t&&(t=s.Tools.randomId(),this.files.addFile(new l.File({id:t,name:e,filename:e}))),this.optionsManager.api.uploadCloudFile(this.taskId,e).then(function(i){i.service_filename=e,n.optionsManager.fileUploaded(t,i)},function(){})},t.prototype.error=function(t){"api"==this.target||"serviceOnly"==this.target?this.optionsManager.invalidUpload(t):(this.setApiMode(),this.reUploadAllFiles()),e.prototype.error.call(this,t)},t.prototype.fatalError=function(e){"api"==this.target||"serviceOnly"==this.target?this.optionsManager.fatalError(e):(this.setApiMode(),this.reUploadAllFiles())},t}(o.PluploadUpload);t.ServicePlupload=p},,function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(157),r=n(19),o=function(){function t(e){void 0===e&&(e={}),Object.assign(this,e),i.Toolbar.refresh(),this.initToolbarActions()}return t.prototype.refreshToolbar=function(t){void 0===t&&(t=!0),e("#editor_file_select").html(""),this.files.files.forEach(function(t){e("#editor_file_select").append('<option value="'+t.id+'" selected="selected">'+t.name+"</option>")});var n=e(".preview__page.active");0==n.length&&(n=e(".preview__page").first());var i=this.files.getFile(n.attr("data-file"));this.currentFile=i.id,this.currentFilePages=parseInt(i.pages),this.currentPage=parseInt(n.attr("data-page")),this.updateValues(),t&&this.showCurrent()},t.prototype.initToolbarActions=function(){var t=this;e(".next").on("click",function(){e("#workArea").is(":animated")||(t.currentPage<t.currentFilePages&&t.currentPage++,t.updateValues(),t.showCurrent())}),e(".prev").on("click",function(){e("#workArea").is(":animated")||(t.currentPage>1&&t.currentPage--,t.updateValues(),t.showCurrent())});var n=null;e("#editor_page").on("focus",function(){n=parseInt(e("#editor_page").val().toString())}).on("change",function(i){var o=parseInt(e("#editor_page").val().toString());isNaN(o)?e("#editor_page").val(n):(o=r.Tools.keepInNumericBounds(1,t.currentFilePages,o),e("#editor_page").val(o),t.currentPage=o,t.showCurrent())}),e("#editor_file_select").on("change",function(){var n=t.files.getFile(e("#editor_file_select").val().toString());t.currentPage=1,t.currentFilePages=parseInt(n.pages),t.currentFile=n.id,t.updateValues(),t.showCurrent()})},t.prototype.updateValues=function(){e("#editor_page").val(this.currentPage),e("#editor_file_select").val(this.currentFile),e("#editor_pages").html(this.currentFilePages.toString())},t.prototype.update=function(e,t){this.currentFile=e,this.currentPage=t,this.currentFilePages=parseInt(this.files.getFile(e).pages),this.updateValues()},t.prototype.showCurrent=function(){var t=e('.editor__page[data-file="'+this.currentFile+'"][data-page="'+this.currentPage+'"]');e("#workArea").animate({scrollTop:t.position().top},500)},t}();t.ToolbarPaginate=o}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(139),r=function(){function t(e){this.toolbarPaginate=e,this.init()}return t.prototype.init=function(){var t,n=this;e(".tool__workarea").on("scroll",function(){t&&window.clearTimeout(t),t=window.setTimeout(function(){n.setViewportPageActive()},200)}),n.onWindowResize()},t.prototype.setElements=function(e){this.elements=e},t.prototype.onWindowResize=function(){var t,n=this;e(window).on("resize",function(){clearTimeout(t),t=setTimeout(n.adjustPages(),200)})},t.prototype.adjustPages=function(){var e=this;return function(){e.pagesResize(),e.pagesResized()}},t.prototype.pagesResize=function(){var t=this;e(".editor__page").each(function(n,i){var r=e(i).width(),o=e(i).children("img").first();t.resized=r/o.width();var a={width:o.width()*t.resized+"px",height:o.height()*t.resized+"px"};o.css(a)})},t.prototype.pagesResized=function(){var e=this;this.elements&&e.elements.all().forEach(function(t){t.applyZoom(null,e.resized),t.zoomPosition(null,e.resized)})},t.prototype.setPageActiveOnClick=function(){e(document).on("click",".editor__page",function(t){var n=e(t.currentTarget).attr("data-file"),i=e(t.currentTarget).attr("data-page"),r=e('.preview__page[data-file="'+n+'"][data-page="'+i+'"]');e(".preview__page").removeClass("active"),r.addClass("active")})},t.prototype.setViewportPageActive=function(){var t=0,n=null,r=e(".tool__workarea"),o=(r.scrollTop(),r.height());if(e(".editor__page").each(function(i,r){var a=e(r).offset().top,s=e(r).outerHeight(),l=a+s;if(a<o&&l>0){var c=0;a<0&&l>o?c=o:a<0&&l>0&&l<o?c=l:a<o&&l>o?c=o-a:a>0&&a<o&&l<o&&(c=s),c>0&&t<c&&(t=c,n=r)}}),null!=n){var a=e(n).attr("data-file"),s=e(n).attr("data-page"),l=e('.preview__page[data-file="'+a+'"][data-page="'+s+'"]');e(".preview__page").removeClass("active"),l.addClass("active"),this.toolbarPaginate.update(a,s),i.ScrollHelper.scrollToPreview(a,s)}},t}();t.default=r}).call(this,n(1))},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="AuthState",t.LAYOUT_TEMPLATE_NAME="subscription-update",t.onDomReady=function(){t.initAbstractAuth(),t.changeScreen(t.INITIAL_SCREEN),t.clearLoadingScreen()},t._onLoginSuccess=function(){t.executeAfterLoginOrRegisterSuccess()},t._onRegisterSuccess=function(){t.executeAfterLoginOrRegisterSuccess()},t.executeAfterLoginOrRegisterSuccess=function(){var e=t.ctx.calculateNextStateAfterAuth();t.ctx.changeState(e),e.render(t.domRoot)},t}return r(t,e),t}(n(71).AbstractAuthState);t.AuthState=o},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(173),a=n(158),s=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.type="signer",n.uuid=t.uuid||a.Frame.uuid(),n.initials=t.initials||"",n.imageSignature=t.imageSignature||"",n.imageInitials=t.imageInitials||"",n.colorClass=t.colorClass||"fileB",n}return r(t,e),t}(o.ReceiverModel);t.SignerModel=s},function(e,t,n){"use strict";(function(e){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(73),a=n(36),s=n(157),l=n(190),c=n(174),u=n(191),d=n(139),p=n(195),f=function(t){function n(e){void 0===e&&(e={});var n=t.call(this,e)||this;return window.pdfinfo=!0,n.filesTemp=[],n.toolbarPaginate=new l.ToolbarPaginate({files:n.files}),n.pdfRender=new c.PdfrenderView({workerServer:n.workerServer,files:n.files}),p.default.disableZoom(),n}return r(n,t),n.prototype.initViewManager=function(){},n.prototype.fileReady=function(e){},n.prototype.startPanels=function(){t.prototype.startPanels.call(this),this.initTogglePreview(),this.previewManager=new u.default(this.toolbarPaginate),this.previewManager.setPageActiveOnClick()},n.prototype.setFileNamesOnView=function(){var t=[];this.files.files.forEach(function(e){t.push('<span class="file__name">'+e.name+"</span>")}),e("#documents").html(t.join(", ")),e("#documentsTitle").addClass("tooltip").attr("data-title",t.join("<br>")),a.Tooltip.init(e("#documentsTitle"))},n.prototype.initTogglePreview=function(){e(".tool__preview__toggle").on("click",function(){setTimeout(function(){s.Toolbar.refresh()},200),e(".tool__preview").toggleClass("closed")})},n.prototype.addEditorPages=function(t){for(var n=0;n<parseInt(t.pages);n++){var i=t.pdf_pages[n].split("x"),r=n+1,o=800*parseFloat(i[1])/parseFloat(i[0]);e(".editor__content").append('<div class="editor__page file_'+t.id+'" data-file="'+t.id+'" data-page="'+r+'" data-width="'+i[0]+'" data-height="'+i[1]+'"><img id="page_'+t.id+"_"+r+'" width="800" height="'+o+'"></div>')}},n.prototype.renderEditorPages=function(t){var n=this;return e(".file_"+t.id).show(),new Promise(function(e,i){if(void 0!==t){for(var r=0;r<parseInt(t.pages);r++){var o=r+1,a="page_"+t.id+"_"+o;n.renderPreviewPage(t,o,a)}n.onRenderEditorPages(t),e()}else i()})},n.prototype.renderEditorPage=function(e,t,n){this.pdfRender.renderPage(this.processManager.taskId,e.server_filename.replace(".pdf",""),t,n,150)},n.prototype.onRenderEditorPages=function(e){},n.prototype.addPreviewPages=function(t){for(var n=0;n<parseInt(t.pages);n++){var i=t.pdf_pages[n].split("x"),r=n+1,o=94*parseFloat(i[1])/parseFloat(i[0]);e(".tool__preview__pages").append('<div class="preview__page file_'+t.id+'" data-file="'+t.id+'" data-page="'+r+'"><img id="preview_'+t.id+"_"+r+'" width="94" height="'+o+'"><div>'+r+"</div></div>")}e(".tool__preview__pages").append('<div class="preview__separator" data-file="'+t.id+'"></div>')},n.prototype.addPreviewActions=function(t){e(".preview__page.file_"+t.id+" img").on("click",function(t){e(".preview__page").removeClass("active");var n=e(t.currentTarget).parent();n.addClass("active");var i=n.attr("data-file"),r=n.attr("data-page");0==n.find(".preview__bullet").length?d.ScrollHelper.scrollToPage(i,r):d.ScrollHelper.scrollToFirstItem(i,r)})},n.prototype.renderPreviewPages=function(t){var n=this;return e(".file_"+t.id).show(),new Promise(function(e,i){if(void 0!==t){for(var r=0;r<parseInt(t.pages);r++){var o=r+1,a="preview_"+t.id+"_"+o;n.renderPreviewPage(t,o,a)}n.previewManager.pagesResize(),e()}else i()})},n.prototype.renderPreviewPage=function(e,t,n){this.pdfRender.renderPage(this.processManager.taskId,e.server_filename.replace(".pdf",""),t,n,150)},n.prototype.addPreviewFile=function(t){var n=t.pdf_pages[0].split("x"),i=94*parseFloat(n[1])/parseFloat(n[0]);e(".tool__preview__files__list").append('<div class="preview__file file_'+t.id+'" data-file="'+t.id+'"><div class="close"></div><img id="preview_file_'+t.id+'" width="94" height="'+i+'"><div class="preview__filename">'+t.name+"</div></div>")},n.prototype.selectPreviewTab=function(t){var n=e(".tool__preview__tabs");switch(n.find(".tool__preview__tabs__item").removeClass("active"),n.find("[data-rel='"+t+"']").addClass("active"),t){case"files":e(".tool__preview__files").removeClass("closed"),e(".tool__preview__pages").addClass("closed");break;case"pages":e(".tool__preview__files").addClass("closed"),e(".tool__preview__pages").removeClass("closed");break;default:throw"[Signature] Unknown Tool preview tab '"+t+"'"}},n.prototype.renderPreviewFile=function(t){var n=this;return e(".file_"+t.id).show(),new Promise(function(e,i){if(void 0!==t){var r="preview_file_"+t.id;n.renderPreviewPage(t,1,r)}else i()})},n.prototype.changeServer=function(e){t.prototype.changeServer.call(this,e),this.pdfRender.workerServer=e},n}(o.OptionsManager);t.SignBaseOptionsManager=f}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(){}return t.disableZoom=function(){e(document).on("keydown",function(e){1!=e.ctrlKey||61!=e.which&&107!=e.which&&173!=e.which&&109!=e.which&&187!=e.which&&189!=e.which||e.preventDefault()}),e(window).bind("mousewheel DOMMouseScroll",function(e){1==e.ctrlKey&&e.preventDefault()})},t}();t.default=n}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(163),r=function(){function t(){}return t.showTip=function(e,n,i,r){void 0===i&&(i="top"),void 0===r&&(r=null),t.show(e,e,n,i,r)},t.showTipForce=function(e,n,i,r){void 0===i&&(i="top"),void 0===r&&(r=null),t.show(e,null,n,i,r)},t.showStep=function(e,n,i,r){void 0===i&&(i="top"),void 0===r&&(r=null);var o=null;"dragStep"==e&&(o="shake"),t.show(e,e+"Done",n,i,r,o)},t.showStepForce=function(e,n,i,r){void 0===i&&(i="top"),void 0===r&&(r=null),t.show(e,null,n,i,r)},t.show=function(n,r,o,a,s,l){if(void 0===a&&(a="top"),void 0===s&&(s=null),void 0===l&&(l=null),window.tippy){if(null!=r){if("true"==i.Storage.get("tutorial."+r))return void i.Storage.touch("tutorial."+r);n==r&&i.Storage.set("tutorial."+n,"true")}if(null==s){if(0==e("#"+n).length)return;s=e("#"+n).html()}var c=t.makeLayer(o,a);window._tutorialData={base:o,el:c,placement:a},t.initTippy(c,s,a),t.showTippy(c,l)}},t.followElement=function(){window.addEventListener("scroll",t.updatePosition,!0),window.addEventListener("resize",t.updatePosition)},t.unfollowElement=function(){window.removeEventListener("scroll",t.updatePosition,!0),window.removeEventListener("resize",t.updatePosition)},t.updatePosition=function(){0!=t.checkElementBaseVisible(window._tutorialData.base[0],10,10)?(window._tutorialData.el.css(t.getElementStyle(window._tutorialData.base,window._tutorialData.placement)),window._tutorialData.el[0]._tippy.popperInstance.update()):window._tutorialData.el[0]._tippy.destroy()},t.setViewed=function(e){i.Storage.set("tutorial."+e,"true")},t.makeLayer=function(n,i){void 0===i&&(i="top");var r=e("<div/>");return r.css(t.getElementStyle(n,i)),e("body").append(r),r},t.initTippy=function(n,i,r,o){void 0===i&&(i="tutorial"),void 0===r&&(r="top"),void 0===o&&(o=null),window.tippy(e(n)[0],t.getTippyOptions(n,i,r,o))},t.showTippy=function(n,i){void 0===i&&(i=null);var r=e(n)[0]._tippy;r.show(),null!=i&&window.setTimeout(function(){r.popper.children[0].classList.add("shake")},1e3),t.followElement()},t.getElementStyle=function(t,n){var i=e(t)[0].getBoundingClientRect(),r={position:"absolute","z-index":99999,width:"1px",height:"1px"},o=null;switch(n){case"bottom":case"top":o={top:i.y+"px",left:i.x+i.width/2+"px",height:i.height+"px"};break;case"right":case"left":o={top:i.y+i.height/2+"px",left:i.x+"px",width:i.width+"px"}}return Object.assign(r,o),r},t.getTippyOptions=function(n,i,r,o){return void 0===i&&(i="tutorial"),void 0===r&&(r="top"),void 0===o&&(o=null),{theme:"guide",animation:"scale",offset:[0,20],delay:[0,0],content:i,arrow:!0,allowHTML:!0,placement:r,onHide:function(i){t.unfollowElement(),e(n).remove()}}},t.checkElementBaseVisible=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);null==t&&(t=100),null==n&&(n=100);for(var i=e.getBoundingClientRect(),r=[];null!=e.parentElement;)"visible"!==window.getComputedStyle(e).overflow&&"absolute"!==window.getComputedStyle(e).position&&r.push(e.parentElement.getBoundingClientRect()),e=e.parentElement;return r.every(function(e){var r=Math.min(i.right,e.right)-Math.max(i.left,e.left),o=Math.min(i.bottom,e.bottom)-Math.max(i.top,e.top),a=r/i.width*100,s=o/i.height*100;return a+.01>t&&s+.01>n})},t}();t.default=r}).call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(61),r=n(209),o=n(210),a=function(){function e(){}return e.auth=function(e){return new i.default({dialogName:"auth"}).setContentBuilder(function(){return new o.SingletonContext(r.AuthState,{tool:e})})},e}();t.DialogCollection=a},,function(e,t,n){var i,r;!function(o){"use strict";void 0===(r="function"==typeof(i=o)?i.call(t,n,t,e):i)||(e.exports=r)}(function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var e,t,n,i,r,o,a,s,l,c,u,d,p,f,h,g,v,m,y,_,b,w={},S=/\s+/g,E=/left|right|inline/,x="Sortable"+(new Date).getTime(),k=window,C=k.document,P=k.parseInt,T=k.setTimeout,O=k.jQuery||k.Zepto,M=k.Polymer,I=!1,A="draggable"in C.createElement("div"),D=!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)&&((b=C.createElement("x")).style.cssText="pointer-events:auto","auto"===b.style.pointerEvents),L=!1,j=Math.abs,R=Math.min,F=[],N=[],B=ie(function(e,t,n){if(n&&t.scroll){var i,r,o,a,u,d,p=n[x],f=t.scrollSensitivity,h=t.scrollSpeed,g=e.clientX,v=e.clientY,m=window.innerWidth,y=window.innerHeight;if(l!==n&&(s=t.scroll,l=n,c=t.scrollFn,!0===s)){s=n;do{if(s.offsetWidth<s.scrollWidth||s.offsetHeight<s.scrollHeight)break}while(s=s.parentNode)}s&&(i=s,r=s.getBoundingClientRect(),o=(j(r.right-g)<=f)-(j(r.left-g)<=f),a=(j(r.bottom-v)<=f)-(j(r.top-v)<=f)),o||a||(a=(y-v<=f)-(v<=f),((o=(m-g<=f)-(g<=f))||a)&&(i=k)),w.vx===o&&w.vy===a&&w.el===i||(w.el=i,w.vx=o,w.vy=a,clearInterval(w.pid),i&&(w.pid=setInterval(function(){if(d=a?a*h:0,u=o?o*h:0,"function"==typeof c)return c.call(p,u,d,e);i===k?k.scrollTo(k.pageXOffset+u,k.pageYOffset+d):(i.scrollTop+=d,i.scrollLeft+=u)},24)))}},30),U=function(e){function t(e,t){return void 0!==e&&!0!==e||(e=n.name),"function"==typeof e?e:function(n,i){var r=i.options.group.name;return t?e:e&&(e.join?e.indexOf(r)>-1:r==e)}}var n={},i=e.group;i&&"object"==typeof i||(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n};try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){I={capture:!1,passive:!1}}}))}catch(e){}function z(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=re({},t),e[x]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==z.supportPointer};for(var i in n)!(i in t)&&(t[i]=n[i]);for(var r in U(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&A,W(e,"mousedown",this._onTapStart),W(e,"touchstart",this._onTapStart),t.supportPointer&&W(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(W(e,"dragover",this),W(e,"dragenter",this)),N.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function H(t,n){"clone"!==t.lastPullMode&&(n=!0),i&&i.state!==n&&(K(i,"display",n?"none":""),n||i.state&&(t.options.group.revertClone?(r.insertBefore(i,o),t._animate(e,i)):r.insertBefore(i,e)),i.state=n)}function q(e,t,n){if(e){n=n||C;do{if(">*"===t&&e.parentNode===n||ne(e,t))return e}while(e=V(e))}return null}function V(e){var t=e.host;return t&&t.nodeType?t:e.parentNode}function W(e,t,n){e.addEventListener(t,n,I)}function G(e,t,n){e.removeEventListener(t,n,I)}function Y(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(S," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(S," ")}}function K(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return C.defaultView&&C.defaultView.getComputedStyle?n=C.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in i||(t="-webkit-"+t),i[t]=n+("string"==typeof n?"":"px")}}function X(e,t,n){if(e){var i=e.getElementsByTagName(t),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function J(e,t,n,r,o,a,s,l){e=e||t[x];var c=C.createEvent("Event"),u=e.options,d="on"+n.charAt(0).toUpperCase()+n.substr(1);c.initEvent(n,!0,!0),c.to=o||t,c.from=a||t,c.item=r||t,c.clone=i,c.oldIndex=s,c.newIndex=l,t.dispatchEvent(c),u[d]&&u[d].call(e,c)}function $(e,t,n,i,r,o,a,s){var l,c,u=e[x],d=u.options.onMove;return(l=C.createEvent("Event")).initEvent("move",!0,!0),l.to=t,l.from=e,l.dragged=n,l.draggedRect=i,l.related=r||t,l.relatedRect=o||t.getBoundingClientRect(),l.willInsertAfter=s,e.dispatchEvent(l),d&&(c=d.call(u,l,a)),c}function Z(e){e.draggable=!1}function Q(){L=!1}function ee(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function te(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||">*"!==t&&!ne(e,t)||n++;return n}function ne(e,t){if(e){var n=(t=t.split(".")).shift().toUpperCase(),i=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==n&&e.nodeName.toUpperCase()!=n||t.length&&((" "+e.className+" ").match(i)||[]).length!=t.length)}return!1}function ie(e,t){var n,i;return function(){void 0===n&&(n=arguments,i=this,T(function(){1===n.length?e.call(i,n[0]):e.apply(i,n),n=void 0},t))}}function re(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function oe(e){return M&&M.dom?M.dom(e).cloneNode(!0):O?O(e).clone(!0)[0]:e.cloneNode(!0)}function ae(e){return T(e,0)}function se(e){return clearTimeout(e)}return z.prototype={constructor:z,_onTapStart:function(t){var n,i=this,r=this.el,o=this.options,s=o.preventOnFilter,l=t.type,c=t.touches&&t.touches[0],u=(c||t).target,d=t.target.shadowRoot&&t.path&&t.path[0]||u,p=o.filter;if(function(e){var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var i=t[n];i.checked&&F.push(i)}}(r),!e&&!(/mousedown|pointerdown/.test(l)&&0!==t.button||o.disabled)&&!d.isContentEditable&&(u=q(u,o.draggable,r))&&a!==u){if(n=te(u,o.draggable),"function"==typeof p){if(p.call(this,t,u,this))return J(i,d,"filter",u,r,r,n),void(s&&t.preventDefault())}else if(p&&(p=p.split(",").some(function(e){if(e=q(d,e.trim(),r))return J(i,e,"filter",u,r,r,n),!0})))return void(s&&t.preventDefault());o.handle&&!q(d,o.handle,r)||this._prepareDragStart(t,c,u,n)}},_prepareDragStart:function(n,i,s,l){var c,u=this,d=u.el,p=u.options,h=d.ownerDocument;s&&!e&&s.parentNode===d&&(m=n,r=d,t=(e=s).parentNode,o=e.nextSibling,a=s,g=p.group,f=l,this._lastX=(i||n).clientX,this._lastY=(i||n).clientY,e.style["will-change"]="all",c=function(){u._disableDelayedDrag(),e.draggable=u.nativeDraggable,Y(e,p.chosenClass,!0),u._triggerDragStart(n,i),J(u,r,"choose",e,r,r,f)},p.ignore.split(",").forEach(function(t){X(e,t.trim(),Z)}),W(h,"mouseup",u._onDrop),W(h,"touchend",u._onDrop),W(h,"touchcancel",u._onDrop),W(h,"selectstart",u),p.supportPointer&&W(h,"pointercancel",u._onDrop),p.delay?(W(h,"mouseup",u._disableDelayedDrag),W(h,"touchend",u._disableDelayedDrag),W(h,"touchcancel",u._disableDelayedDrag),W(h,"mousemove",u._disableDelayedDrag),W(h,"touchmove",u._disableDelayedDrag),p.supportPointer&&W(h,"pointermove",u._disableDelayedDrag),u._dragStartTimer=T(c,p.delay)):c())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),G(e,"mouseup",this._disableDelayedDrag),G(e,"touchend",this._disableDelayedDrag),G(e,"touchcancel",this._disableDelayedDrag),G(e,"mousemove",this._disableDelayedDrag),G(e,"touchmove",this._disableDelayedDrag),G(e,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(t,n){(n=n||("touch"==t.pointerType?t:null))?(m={target:e,clientX:n.clientX,clientY:n.clientY},this._onDragStart(m,"touch")):this.nativeDraggable?(W(e,"dragend",this),W(r,"dragstart",this._onDragStart)):this._onDragStart(m,!0);try{C.selection?ae(function(){C.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){if(r&&e){var t=this.options;Y(e,t.ghostClass,!0),Y(e,t.dragClass,!1),z.active=this,J(this,r,"start",e,r,r,f)}else this._nulling()},_emulateDragOver:function(){if(y){if(this._lastX===y.clientX&&this._lastY===y.clientY)return;this._lastX=y.clientX,this._lastY=y.clientY,D||K(n,"display","none");var e=C.elementFromPoint(y.clientX,y.clientY),t=e,i=N.length;if(e&&e.shadowRoot&&(t=e=e.shadowRoot.elementFromPoint(y.clientX,y.clientY)),t)do{if(t[x]){for(;i--;)N[i]({clientX:y.clientX,clientY:y.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);D||K(n,"display","")}},_onTouchMove:function(e){if(m){var t=this.options,i=t.fallbackTolerance,r=t.fallbackOffset,o=e.touches?e.touches[0]:e,a=o.clientX-m.clientX+r.x,s=o.clientY-m.clientY+r.y,l=e.touches?"translate3d("+a+"px,"+s+"px,0)":"translate("+a+"px,"+s+"px)";if(!z.active){if(i&&R(j(o.clientX-this._lastX),j(o.clientY-this._lastY))<i)return;this._dragStarted()}this._appendGhost(),_=!0,y=o,K(n,"webkitTransform",l),K(n,"mozTransform",l),K(n,"msTransform",l),K(n,"transform",l),e.preventDefault()}},_appendGhost:function(){if(!n){var t,i=e.getBoundingClientRect(),o=K(e),a=this.options;Y(n=e.cloneNode(!0),a.ghostClass,!1),Y(n,a.fallbackClass,!0),Y(n,a.dragClass,!0),K(n,"top",i.top-P(o.marginTop,10)),K(n,"left",i.left-P(o.marginLeft,10)),K(n,"width",i.width),K(n,"height",i.height),K(n,"opacity","0.8"),K(n,"position","fixed"),K(n,"zIndex","100000"),K(n,"pointerEvents","none"),a.fallbackOnBody&&C.body.appendChild(n)||r.appendChild(n),t=n.getBoundingClientRect(),K(n,"width",2*i.width-t.width),K(n,"height",2*i.height-t.height)}},_onDragStart:function(t,n){var o=this,a=t.dataTransfer,s=o.options;o._offUpEvents(),g.checkPull(o,o,e,t)&&((i=oe(e)).draggable=!1,i.style["will-change"]="",K(i,"display","none"),Y(i,o.options.chosenClass,!1),o._cloneId=ae(function(){r.insertBefore(i,e),J(o,r,"clone",e)})),Y(e,s.dragClass,!0),n?("touch"===n?(W(C,"touchmove",o._onTouchMove),W(C,"touchend",o._onDrop),W(C,"touchcancel",o._onDrop),s.supportPointer&&(W(C,"pointermove",o._onTouchMove),W(C,"pointerup",o._onDrop))):(W(C,"mousemove",o._onTouchMove),W(C,"mouseup",o._onDrop)),o._loopId=setInterval(o._emulateDragOver,50)):(a&&(a.effectAllowed="move",s.setData&&s.setData.call(o,a,e)),W(C,"drop",o),o._dragStartId=ae(o._dragStarted))},_onDragOver:function(a){var s,l,c,f,h=this.el,m=this.options,y=m.group,b=z.active,w=g===y,S=!1,k=m.sort;if(void 0!==a.preventDefault&&(a.preventDefault(),!m.dragoverBubble&&a.stopPropagation()),!e.animated&&(_=!0,b&&!m.disabled&&(w?k||(f=!r.contains(e)):v===this||(b.lastPullMode=g.checkPull(this,b,e,a))&&y.checkPut(this,b,e,a))&&(void 0===a.rootEl||a.rootEl===this.el))){if(B(a,m,this.el),L)return;if(s=q(a.target,m.draggable,h),l=e.getBoundingClientRect(),v!==this&&(v=this,S=!0),f)return H(b,!0),t=r,void(i||o?r.insertBefore(e,i||o):k||r.appendChild(e));if(0===h.children.length||h.children[0]===n||h===a.target&&function(e,t){var n=e.lastElementChild.getBoundingClientRect();return t.clientY-(n.top+n.height)>5||t.clientX-(n.left+n.width)>5}(h,a)){if(0!==h.children.length&&h.children[0]!==n&&h===a.target&&(s=h.lastElementChild),s){if(s.animated)return;c=s.getBoundingClientRect()}H(b,w),!1!==$(r,h,e,l,s,c,a)&&(e.contains(h)||(h.appendChild(e),t=h),this._animate(l,e),s&&this._animate(c,s))}else if(s&&!s.animated&&s!==e&&void 0!==s.parentNode[x]){u!==s&&(u=s,d=K(s),p=K(s.parentNode));var C=(c=s.getBoundingClientRect()).right-c.left,P=c.bottom-c.top,O=E.test(d.cssFloat+d.display)||"flex"==p.display&&0===p["flex-direction"].indexOf("row"),M=s.offsetWidth>e.offsetWidth,I=s.offsetHeight>e.offsetHeight,A=(O?(a.clientX-c.left)/C:(a.clientY-c.top)/P)>.5,D=s.nextElementSibling,j=!1;if(O){var R=e.offsetTop,F=s.offsetTop;j=R===F?s.previousElementSibling===e&&!M||A&&M:s.previousElementSibling===e||e.previousElementSibling===s?(a.clientY-c.top)/P>.5:F>R}else S||(j=D!==e&&!I||A&&I);var N=$(r,h,e,l,s,c,a,j);!1!==N&&(1!==N&&-1!==N||(j=1===N),L=!0,T(Q,30),H(b,w),e.contains(h)||(j&&!D?h.appendChild(e):s.parentNode.insertBefore(e,j?D:s)),t=e.parentNode,this._animate(l,e),this._animate(c,s))}}},_animate:function(e,t){var n=this.options.animation;if(n){var i=t.getBoundingClientRect();1===e.nodeType&&(e=e.getBoundingClientRect()),K(t,"transition","none"),K(t,"transform","translate3d("+(e.left-i.left)+"px,"+(e.top-i.top)+"px,0)"),t.offsetWidth,K(t,"transition","all "+n+"ms"),K(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=T(function(){K(t,"transition",""),K(t,"transform",""),t.animated=!1},n)}},_offUpEvents:function(){var e=this.el.ownerDocument;G(C,"touchmove",this._onTouchMove),G(C,"pointermove",this._onTouchMove),G(e,"mouseup",this._onDrop),G(e,"touchend",this._onDrop),G(e,"pointerup",this._onDrop),G(e,"touchcancel",this._onDrop),G(e,"pointercancel",this._onDrop),G(e,"selectstart",this)},_onDrop:function(a){var s=this.el,l=this.options;clearInterval(this._loopId),clearInterval(w.pid),clearTimeout(this._dragStartTimer),se(this._cloneId),se(this._dragStartId),G(C,"mouseover",this),G(C,"mousemove",this._onTouchMove),this.nativeDraggable&&(G(C,"drop",this),G(s,"dragstart",this._onDragStart)),this._offUpEvents(),a&&(_&&(a.preventDefault(),!l.dropBubble&&a.stopPropagation()),n&&n.parentNode&&n.parentNode.removeChild(n),r!==t&&"clone"===z.active.lastPullMode||i&&i.parentNode&&i.parentNode.removeChild(i),e&&(this.nativeDraggable&&G(e,"dragend",this),Z(e),e.style["will-change"]="",Y(e,this.options.ghostClass,!1),Y(e,this.options.chosenClass,!1),J(this,r,"unchoose",e,t,r,f),r!==t?(h=te(e,l.draggable))>=0&&(J(null,t,"add",e,t,r,f,h),J(this,r,"remove",e,t,r,f,h),J(null,t,"sort",e,t,r,f,h),J(this,r,"sort",e,t,r,f,h)):e.nextSibling!==o&&(h=te(e,l.draggable))>=0&&(J(this,r,"update",e,t,r,f,h),J(this,r,"sort",e,t,r,f,h)),z.active&&(null!=h&&-1!==h||(h=f),J(this,r,"end",e,t,r,f,h),this.save()))),this._nulling()},_nulling:function(){r=e=t=n=o=i=a=s=l=m=y=_=h=u=d=v=g=z.active=null,F.forEach(function(e){e.checked=!0}),F.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragover":case"dragenter":e&&(this._onDragOver(t),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.preventDefault()}(t));break;case"mouseover":this._onDrop(t);break;case"selectstart":t.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,i=0,r=n.length,o=this.options;i<r;i++)q(e=n[i],o.draggable,this.el)&&t.push(e.getAttribute(o.dataIdAttr)||ee(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach(function(e,i){var r=n.children[i];q(r,this.options.draggable,n)&&(t[e]=r)},this),e.forEach(function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return q(e,t||this.options.draggable,this.el)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];n[e]=t,"group"===e&&U(n)},destroy:function(){var e=this.el;e[x]=null,G(e,"mousedown",this._onTapStart),G(e,"touchstart",this._onTapStart),G(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(G(e,"dragover",this),G(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),N.splice(N.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},W(C,"touchmove",function(e){z.active&&e.preventDefault()}),z.utils={on:W,off:G,css:K,find:X,is:function(e,t){return!!q(e,t,e)},extend:re,throttle:ie,closest:q,toggleClass:Y,clone:oe,index:te,nextTick:ae,cancelNextTick:se},z.create=function(e,t){return new z(e,t)},z.version="1.7.0",z})},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(20),a=n(93),s=n(165),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="SelectUsersState",t.LAYOUT_TEMPLATE_NAME="subscription-update",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.changeScreen(t.INITIAL_SCREEN),t.actionBtn.disabled=!0,t.initSlider(),t.initActions(),t.clearLoadingScreen()},t._onNumUsersChanged=function(){var e=t.usersSelect.isValid();t.actionBtn.disabled=!e},t._onActionBtnClicked=function(e){t._goNextState()},t._goNextState=function(){var e=new s.SummaryState;t.ctx.summaryParams={numUsers:t.usersSelect.getQuantity(),numSignatures:void 0,paymentInterval:void 0},t.ctx.changeState(e),e.render(t.domRoot)},t}return r(t,e),t.prototype.initSlider=function(){var e,t;if(this.usersSelect)this._onNumUsersChanged();else{var n=document.getElementById("SelectUsers");this.usersSelect=new a.default,this.usersSelect.onInput(this._onNumUsersChanged);var i=null!==(t=null===(e=this.ctx)||void 0===e?void 0:e.userCurrentSubscription.users)&&void 0!==t?t:void 0;i?this.usersSelect.init(n,{initialQty:i,initialQtyIsValid:!1}):this.usersSelect.init(n,{})}},Object.defineProperty(t.prototype,"actionBtn",{get:function(){var e=this.domStateRoot.querySelector("[next-from-users]");if(!e)throw"Action button not found";return e},enumerable:!0,configurable:!0}),t.prototype.initActions=function(){this.actionBtn.addEventListener("click",this._onActionBtnClicked)},t}(o.StateBase);t.SelectUsersState=l},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(10),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="PaymentCompletedState",t.LAYOUT_TEMPLATE_NAME="subscription-update",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.ctx.setEndState(),t.clearLoadingScreen();t.animatedGif;t.actionBtn.addEventListener("click",function(){return t.dispatchEvent(new o.IloveEvent("end"))})},t}return r(t,e),Object.defineProperty(t.prototype,"actionBtn",{get:function(){var e=this.domStateRoot.querySelector("[next-from-payment-completed]");if(!e)throw"'Done' button not found";return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animatedGif",{get:function(){var e=this.domStateRoot.querySelector(".dialog__icon img");if(!e)throw"Check gif not found";return e},enumerable:!0,configurable:!0}),t}(n(20).StateBase);t.PaymentCompletedState=a},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(93),a=n(20),s=n(165),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="SelectSignaturesState",t.LAYOUT_TEMPLATE_NAME="subscription-update",t.INITIAL_SCREEN="default",t.onDomReady=function(){t.changeScreen(t.INITIAL_SCREEN),t.actionBtn.disabled=!0,t.initSlider(),t.actionBtn.addEventListener("click",t._onActionBtnClicked),t.clearLoadingScreen()},t._onNumSignaturesChanged=function(){var e,n,i=t.signaturesSelect.getQuantity();if(void 0===t.ctx.neededSignatures){var r=null!==(n=null===(e=t.ctx)||void 0===e?void 0:e.userCurrentSubscription.signatures)&&void 0!==n?n:void 0;(r||0===r)&&(t.actionBtn.disabled=i===r)}else t.actionBtn.disabled=!(i>=t.numToBuy)},t._onActionBtnClicked=function(e){var n=new s.SummaryState;t.ctx.summaryParams={numSignatures:t.signaturesSelect.getQuantity(),numUsers:void 0,paymentInterval:void 0},t.ctx.changeState(n),n.render(t.domRoot)},t}return r(t,e),Object.defineProperty(t.prototype,"numToBuy",{get:function(){var e,t;return void 0===this.ctx.neededSignatures?0:(null!==(t=null===(e=this.ctx)||void 0===e?void 0:e.userCurrentSubscription.signatures)&&void 0!==t?t:0)+(this.ctx.neededSignatures-this.ctx.user.signatures_left)},enumerable:!0,configurable:!0}),t.prototype.initSlider=function(){var e,t,n=this;if(!this.signaturesSelect){var i=this.domRoot.querySelector("#SelectSignatures");this.signaturesSelect=new o.default,this.signaturesSelect.onInput(this._onNumSignaturesChanged);var r=null!==(t=null===(e=this.ctx)||void 0===e?void 0:e.userCurrentSubscription.signatures)&&void 0!==t?t:void 0;void 0===this.ctx.neededSignatures?r?this.signaturesSelect.init(i,{initialQty:r,initialQtyIsValid:!1}):this.signaturesSelect.init(i,{}):this.signaturesSelect.init(i,{initialQty:function(e){return e>=n.numToBuy},minQty:this.numToBuy})}},Object.defineProperty(t.prototype,"actionBtn",{get:function(){var e=this.domStateRoot.querySelector("[next-from-signatures]");if(!e)throw"Action button not found";return e},enumerable:!0,configurable:!0}),t}(a.StateBase);t.SelectSignaturesState=l},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(204),r=n(87),o=n(59),a=n(95),s=n(169),l=n(163),c=n(207),u=n(141),d=n(158),p=n(208),f=n(16),h=n(211),g=n(9),v=n(36),m=n(78),y=function(){function t(t,n,i){void 0===i&&(i=null),this.signer=t,this.api=n,this.signatureModel=i,window.Tooltip=v.Tooltip,this.init(),this.authElement=new p.AuthElement({elementAuth:e(".signature-avatar"),elementAvatar:e(".signature-avatar img")}),this.listenEventUserAuth(),this.listenEventWindowChange()}return t.prototype.checkAllowCostumize=function(){"image"!=this.mode&&"image"==this.signer.allowCostumize&&(e("#cancelSignature").hide(),this.showModal(),this.forceApply()),"font"!=this.mode&&"text"==this.signer.allowCostumize&&(e("#cancelSignature").hide(),this.showModal(),this.forceApply()),"draw"!=this.mode&&"sign"==this.signer.allowCostumize&&(this.showModal(),this.forceApply())},t.prototype.forceSettings=function(){e("#cancelSignature").hide(),this.showModal(),this.forceApply()},t.prototype.listenEventWindowChange=function(){var e=this;window.addEventListener("resize",function(){e.repaintSignature(),e.repaintInitials()}),window.addEventListener("orientationchange",function(){e.repaintSignature(),e.repaintInitials()})},t.prototype.saveToStorage=function(){l.Storage.set("sign.signature",this.getSignature())},t.prototype.loadFromStorage=function(){this.signatureModel||(this.signatureModel=new s.SignatureModel({})),this.signatureModel.setData(l.Storage.get("sign.signature")),this.drawPreview(),this.sendEventSignatureChanged()},t.prototype.loadFromService=function(t){void 0===t&&(t=null);var n=f.UserModel.get(),i={mode:"font",font:{fontFamily:"alex",color:"#555555"},signature:n.name,initials:n.name.charAt(0)};n.signature&&(i=n.signature),this.signatureModel||(this.signatureModel=new s.SignatureModel({})),this.signer.name=n.name,this.signer.email=n.email,null!=t&&(i.mode=t),this.mode=i.mode,"all"!=this.signer.allowCostumize&&this.signer.allowCostumize!=i.mode&&this.checkAllowCostumize(),this.signatureModel.setData(i),this.applySignatureModelToElements(),this.drawPreview(),this.sendEventSignatureChanged(),0!=e(".tool").length&&((this.signatureModel.signatureImageService||this.signatureModel.initialsImageService)&&(this.initUploaderActions(),this.uploadImageFromService()),(this.signatureModel.signatureDrawService||this.signatureModel.initialsDrawService)&&this.uploadSvgFromService())},t.prototype.uploadSvgFromService=function(){this.initSvgUploaders(),this.signatureModel.signatureDrawService&&(this.signatureDrawApi=null,this.uploaderSignatureSvg.uploadToApi(this.signatureModel.signatureDrawService)),this.signatureModel.initialsDrawService&&(this.initialsDrawApi=null,this.uploaderInitialsSvg.uploadToApi(this.signatureModel.initialsDrawService))},t.prototype.uploadImageFromService=function(){this.initImageUploaders(),this.signatureModel.signatureImageService&&(this.signatureImageApi=null,this.uploaderSignature.uploadToApi(this.signatureModel.signatureImageService)),this.signatureModel.initialsImageService&&(this.initialsImageApi=null,this.uploaderInitials.uploadToApi(this.signatureModel.initialsImageService))},t.prototype._removeErrorTooltips=function(){v.Tooltip.disable("#confirmSignature"),v.Tooltip.disable("#uploadSignature"),v.Tooltip.disable("#uploadInitials")},t.prototype.applySignatureModelToElements=function(){var t;(e("#signName").val(this.signatureModel.signature),e("#signInitials").val(this.signatureModel.initials),e('[name="fontFamily"][value="'+this.signatureModel.fontFamily+'"]').trigger("click"),e(".signature__color__item").removeClass("active"),e('[data-color="'+this.signatureModel.color+'"]').addClass("active"),this.signatureModel.signatureImageService)&&(e("#uploadSignaturePreview").css({"background-image":'url("'+this.signatureModel.signatureImageService+'")'}),(t=document.getElementById("uploadSignaturePreview"))&&t.parentElement.classList.add("signed"));this.signatureModel.initialsImageService&&(e("#uploadInitialsPreview").css({"background-image":'url("'+this.signatureModel.initialsImageService+'")'}),(t=document.getElementById("uploadInitialsPreview"))&&t.parentElement.classList.add("signed"));this.applyColorPreview(),e("#signName").trigger("change"),e("#signInitials").trigger("change")},t.prototype.init=function(){var t=this,n=this;if(this.listenEventUuidChanged(),"sign"==this.signer.allowCostumize&&(e("#image-tab").addClass("disabled"),e("#font-tab").addClass("disabled"),this.mode="draw"),"text"==this.signer.allowCostumize&&(e("#image-tab").addClass("disabled"),e("#draw-tab").addClass("disabled"),this.mode="font"),"image"==this.signer.allowCostumize&&(e("#draw-tab").addClass("disabled"),e("#font-tab").addClass("disabled"),this.mode="image"),e("#draw-tab").on("click",function(e){n.mode="draw",setTimeout(function(){n.initCanvas()},500),n._removeErrorTooltips()}),e("#image-tab").on("click",function(e){n.mode="image",setTimeout(function(){n.initUploader()},500),n._removeErrorTooltips()}),e("#font-tab").on("click",function(e){n.mode="font",n._removeErrorTooltips()}),1==f.UserModel.isUser()){var i=f.UserModel.get();i.signature&&i.signature.signature?this.api.pingService().then(function(){t.preloadImages(i),t.loadFromService()},function(){n.serviceError()}):"all"!=this.signer.allowCostumize&&"text"!=this.signer.allowCostumize&&this.forceSettings()}this.initModalSignatureConfig();var r=new CustomEvent("signatureConfigInit",{detail:{signatureModel:n.signatureModel}});window.setTimeout(function(){window.dispatchEvent(r)},500)},t.prototype.preloadImages=function(e){var t=this;e.signature.draw&&""!=e.signature.draw.signature&&(u.ImageHelper.urlToBase64(e.signature.draw.signature).then(function(e){t.signatureModel.signatureDrawBase64=e,u.ImageHelper.preload(e)},function(){t.serviceError()}),""==e.signature.draw.initials?e.signature.draw.initials=e.signature.draw.signature.replace("signature.svg","initials.svg"):1==e.signature.draw.initials.includes("/initials/")&&(e.signature.draw.initials=e.signature.draw.initials.replace("signature.svg","initials.svg"),e.signature.draw.initials=e.signature.draw.initials.replace("/initials/","/signature/")),u.ImageHelper.urlToBase64(e.signature.draw.initials).then(function(e){t.signatureModel.initialsDrawBase64=e,u.ImageHelper.preload(e)},function(){t.serviceError()})),e.signature.image&&""!=e.signature.image.signature&&(u.ImageHelper.urlToBase64(e.signature.image.signature).then(function(e){t.signatureModel.signatureImageBase64=e,u.ImageHelper.preload(e)},function(){t.serviceError()}),u.ImageHelper.urlToBase64(e.signature.image.initials).then(function(e){t.signatureModel.initialsImageBase64=e,u.ImageHelper.preload(e)},function(){t.serviceError()}))},t.prototype.serviceError=function(){this.serviceFail=!0},t.prototype.isServiceAvailable=function(){return 1!=this.serviceFail},t.prototype.initModalSignatureConfig=function(){var t=this,n=document.getElementById("openSignatureConfig");if(n){n.addEventListener("click",function(n){e(n.target).hasClass("signature__option")||e(n.target).parent().hasClass("signature__option")||e(n.target).parent().parent().hasClass("signature__option")||t.showModal()}),document.getElementById("confirmSignature").addEventListener("click",function(){e("#confirmSignature").attr("disabled","disabled"),1==t.validate()?(e("#configSignature .wait").show(),t.uploadAllImages().then(function(){t.applyUploadedModeToModel(),t.saveSignatureSettingsToService().then(function(){t.drawPreview(),e("#configSignature .wait").hide(),t.hideModal(),e("#confirmSignature").removeAttr("disabled"),t.sendEventSignatureConfirmed(),t.sendEventSignatureChanged()},function(){t.drawPreview(),e("#configSignature .wait").hide(),t.hideModal(),e("#confirmSignature").removeAttr("disabled"),t.sendEventSignatureConfirmed(),t.sendEventSignatureChanged()})},function(){e("#configSignature .wait").hide(),e("#confirmSignature").removeAttr("disabled"),v.Tooltip.setContent("#confirmSignature",g.Lang.t("Upload error")+" - "+g.Lang.t("Retry")),v.Tooltip.show("#confirmSignature")})):e("#confirmSignature").removeAttr("disabled")}),document.getElementById("cancelSignature").addEventListener("click",function(){t.sendEventSignatureCancel(),t.hideModal()}),0==e(".signature__color__item.active").length&&e(".signature__color__item:first-child").addClass("active"),e(".signature__color__item").on("click",function(n){var i=e(n.target).attr("data-color");e(".signature__color__item").removeClass("active"),e('[data-color="'+i+'"]').addClass("active"),t.signatureModel.color=i,t.applyColorPreview()}),e("#signName").on("keyup change",function(){var t=o(e("#signName").val().toString());t!=e("#signName").val().toString()&&e("#signName").val(t),""!=t?e(".signature__font__signature").html(t):e(".signature__font__signature").html(g.Lang.t("signature"))}),e("#signInitials").on("keyup change",function(){var t=o(e("#signInitials").val().toString());t!=e("#signInitials").val().toString()&&e("#signInitials").val(t),""!=t?e(".signature__font__initials").html(t):e(".signature__font__initials").html(g.Lang.t("initials"))});var i=m.TextHelper.maxLength(e("#signName").val().toString().trim(),255),r=e("#signInitials").val().toString().trim();""==i&&(i=g.Lang.t("signature")),""==r&&(r=g.Lang.t("initials")),e(".signature__font__signature").html(i),e(".signature__font__initials").html(r)}function o(e){return e?e.replace(/^\s+/g,""):e}},t.prototype.paintDrawSigntaure=function(){if(this.signatureModel.signatureDrawData&&this.signaturePad){var e=this.signatureModel.signatureDrawData,t=this.resizeCanvas(document.getElementById("canvasSignature"));this.signaturePad.clear(),e=this.fitDataPoints(e,t),this.signaturePad.fromData(e)}},t.prototype.paintDrawInitials=function(){if(this.signatureModel.initialsDrawData&&this.initialsPad){var e=this.signatureModel.initialsDrawData,t=this.resizeCanvas(document.getElementById("canvasSignature"));this.initialsPad.clear(),e=this.fitDataPoints(e,t),this.initialsPad.fromData(e)}},t.prototype.showImageSignature=function(){},t.prototype.showImageInitials=function(){},t.prototype.repaintSignature=function(){if(this.signaturePad){var e=this.signaturePad.toData(),t=this.resizeCanvas(document.getElementById("canvasSignature"));this.signaturePad.clear(),e=this.fitDataPoints(e,t),this.signaturePad.fromData(e)}},t.prototype.repaintInitials=function(){if(this.initialsPad){var e=this.initialsPad.toData(),t=this.resizeCanvas(document.getElementById("canvasInitials"));this.initialsPad.clear(),e=this.fitDataPoints(e,t),this.initialsPad.fromData(e)}},t.prototype.resizeCanvas=function(e){var t=Math.max(window.devicePixelRatio||1,1),n=e.width,i=e.height,r=e.offsetWidth*t,o=e.offsetHeight*t;return e.width=r,e.height=o,e.getContext("2d").scale(t,t),{prev:{w:n,h:i},next:{w:r,h:o},factor:{w:r/n,h:o/i}}},t.prototype.fitDataPoints=function(e,t){return e.forEach(function(n,i){n.points.forEach(function(n,r){e[i].points[r].x=n.x*t.next.w/t.prev.w,e[i].points[r].y=n.y*t.next.h/t.prev.h})}),e},t.prototype.applyColorPreview=function(){var t,n=this;(e(".signature__font li label").css("color",this.signatureModel.color),this.signaturePad)&&(this.signaturePad.penColor=this.signatureModel.color,(t=this.signaturePad.toData()).forEach(function(e,t){e.color=n.signatureModel.color}),this.signaturePad.clear(),this.signaturePad.penColor=this.signatureModel.color,this.signaturePad.fromData(t));this.initialsPad&&(this.initialsPad.penColor=this.signatureModel.color,(t=this.initialsPad.toData()).forEach(function(e,t){e.color=n.signatureModel.color}),this.initialsPad.clear(),this.initialsPad.penColor=this.signatureModel.color,this.initialsPad.fromData(t))},t.prototype.sendEventSignatureCancel=function(){var e=new CustomEvent("signatureCancel",{detail:{signatureModel:this.signatureModel}});window.dispatchEvent(e)},t.prototype.sendEventSignatureChanged=function(){var e=new CustomEvent("signatureChanged",{detail:{signatureModel:this.signatureModel}});window.dispatchEvent(e)},t.prototype.sendEventSignatureConfirmed=function(){var e=new CustomEvent("signatureConfirmed");window.dispatchEvent(e)},t.prototype.formatData=function(e){return e.forEach(function(e,t){e.points.forEach(function(e,t){e.time=parseInt(e.time),e.x=parseFloat(e.x),e.y=parseFloat(e.y)})}),e},t.prototype.initSvgUploaders=function(){this.filesSignatureSvg||(this.filesSignatureSvg=new o.FileStack,this.filesInitialsSvg=new o.FileStack,this.uploaderSignatureSvg=this.makeUploaderService("draw","signature","uploadSignatureSvg","uploadSignatureContainerSvg","uploadSignatureAreaSvg",this.filesSignatureSvg),this.uploaderInitialsSvg=this.makeUploaderService("draw","initials","uploadInitialsSvg","uploadInitialsContainerSvg","uploadInitialsAreaSvg",this.filesInitialsSvg))},t.prototype.initImageUploaders=function(){this.filesSignature||(this.filesSignature=new o.FileStack,this.filesInitials=new o.FileStack,this.uploaderSignature=this.makeUploaderService("image","signature","uploadSignature","uploadSignatureContainer","uploadSignatureArea",this.filesSignature),this.uploaderInitials=this.makeUploaderService("image","initials","uploadInitials","uploadInitialsContainer","uploadInitialsArea",this.filesInitials))},t.prototype.initCanvas=function(){var t=this,n=this;if(this.initSvgUploaders(),null==this.signaturePad){var r=document.getElementById("canvasSignature");if(r.width=e(r).parent().innerWidth(),r.height=e(r).parent().innerHeight(),this.signaturePad=new i.default(r),this.signaturePad.penColor=this.signatureModel.color,this.signatureModel.signatureDrawData){var o=this.formatData(this.signatureModel.signatureDrawData);this.signaturePad.fromData(o),e(".signature__draw").addClass("signed")}var a=e("#signatureContainer");a[0].addEventListener("pointerdown",function(e){if((90==window.orientation||-90==window.orientation)&&0==a.hasClass("active"))return a.addClass("active"),e.preventDefault(),e.stopPropagation(),void n.repaintSignature()},!0),document.getElementById("canvasSignatureClose").addEventListener("click",function(){a.removeClass("active"),n.repaintSignature()}),document.getElementById("canvasSignatureClean").addEventListener("click",function(){null!=t.signaturePad&&t.signaturePad.clear(),r.parentElement.classList.remove("signed")}),r.addEventListener("mousedown",function(e){r.parentElement.classList.add("signed")})}if(null==this.initialsPad){var s=document.getElementById("canvasInitials");if(s.width=e(s).parent().innerWidth(),s.height=e(s).parent().innerHeight(),this.initialsPad=new i.default(s),this.initialsPad.penColor=this.signatureModel.color,this.signatureModel.initialsDrawData){o=this.formatData(this.signatureModel.initialsDrawData);this.initialsPad.fromData(o),e(".initials__draw").addClass("signed")}var l=e("#initialsContainer");l[0].addEventListener("pointerdown",function(e){if((90==window.orientation||-90==window.orientation)&&0==l.hasClass("active"))return l.addClass("active"),e.preventDefault(),e.stopPropagation(),void n.repaintInitials()},!0),document.getElementById("canvasInitialsClose").addEventListener("click",function(){l.removeClass("active"),n.repaintInitials()}),document.getElementById("canvasInitialsClean").addEventListener("click",function(){null!=t.initialsPad&&t.initialsPad.clear(),s.parentElement.classList.remove("signed")}),s.addEventListener("mousedown",function(){s.parentElement.classList.add("signed")})}},t.prototype.initUploader=function(){this.uploaderSignature||(this.initImageUploaders(),this.initUploaderActions())},t.prototype.initUploaderActions=function(){var t=this,n=document.getElementById("uploadSignatureClean");e(n).off("click"),e(n).on("click",function(){t.filesSignature.files=[],n.parentElement.classList.remove("signed")});var i=document.getElementById("uploadInitialsClean");e(i).off("click"),e(i).on("click",function(){t.filesInitials.files=[],i.parentElement.classList.remove("signed")})},t.prototype.makeUploaderService=function(e,t,n,i,o,a){return new h.SignaturePlupload({target:null!=f.UserModel.get()&&1!=this.serviceFail?1==this.serviceOnly?"serviceOnly":"service":"api",signatureMode:e,signatureType:t,id:n,container:i,optionsManager:this,config:new r.Config({tool:"sign",subtool:"sign",config:{sign:{mimeTypes:[{title:"Image files",extensions:"png,svg,jpg",mime:"image/png,image/jpeg,image/svg+xml,image/svg"}],multiSelection:!1}}}),files:a,workerServer:this.api.workerServer,tool:"sign",servers:[],haveDrop:!0,dropElement:o,tokenApi:this.api.token,tokenService:null!=f.UserModel.get()&&1!=this.serviceFail?f.UserModel.get().token:null,token:null!=f.UserModel.get()&&1!=this.serviceFail?f.UserModel.get().token:this.api.token,taskId:this.api.taskId})},t.prototype.changeServer=function(e){},t.prototype.checkLimits=function(e,t){return e},t.prototype.fileAdded=function(t,n,i){var r=this;return v.Tooltip.disable("#confirmSignature"),this._removeErrorTooltips(),this.apiFail=!1,"uploadSignature"==n&&(this.signatureImageApi="",v.Tooltip.disable("#uploadSignature")),"uploadInitials"==n&&(this.initialsImageApi="",v.Tooltip.disable("#uploadInitials")),"uploadSignatureSvg"==n&&(this.signatureDrawApi=""),"uploadInitialsSvg"==n&&(this.initialsDrawApi=""),this.uploadStarts(n),new Promise(function(i,o){var s=t.getSource().getSource(),l="";if("uploadInitials"==n&&(l="uploadInitialsPreview",e("#uploadInitialsPreview").css("background-image","none"),u.ImageHelper.getBase64(t,!0).then(function(e){r.signatureModel.initialsImageBase64=e,u.ImageHelper.preload(e)})),"uploadSignature"==n&&(l="uploadSignaturePreview",e("#uploadSignaturePreview").css("background-image","none"),u.ImageHelper.getBase64(t,!0).then(function(e){r.signatureModel.signatureImageBase64=e,u.ImageHelper.preload(e)})),"uploadSignatureSvg"!=n&&"uploadInitialsSvg"!=n)if(""!=l){var c=t.name.endsWith(".svg")?"renderSvg":"renderImage";(new a.ImageView)[c](s,l,!1).then(function(e){return t.width=e.width,t.height=e.height,document.getElementById(l).parentElement.classList.add("signed"),i(e)},function(e){o(e)})}else o("invalid canvas id");else i()})},t.prototype.fileUploaded=function(e,t){return this.filesSignature&&null!=this.filesSignature.updateFile(e,t)?(t.service_filename&&(this.signatureImageService=t.service_filename),t.server_filename&&(this.signatureImageApi=t.server_filename),this.applyUploadedModeToModel(),void this.uploadEnds("uploadSignature")):this.filesInitials&&null!=this.filesInitials.updateFile(e,t)?(t.service_filename&&(this.initialsImageService=t.service_filename),t.server_filename&&(this.initialsImageApi=t.server_filename),this.applyUploadedModeToModel(),void this.uploadEnds("uploadInitials")):this.filesSignatureSvg&&null!=this.filesSignatureSvg.updateFile(e,t)?(t.service_filename&&(this.signatureDrawService=t.service_filename),t.server_filename&&(this.signatureDrawApi=t.server_filename),void this.applyUploadedModeToModel()):this.filesInitialsSvg&&null!=this.filesInitialsSvg.updateFile(e,t)?(t.service_filename&&(this.initialsDrawService=t.service_filename),t.server_filename&&(this.initialsDrawApi=t.server_filename),void this.applyUploadedModeToModel()):void 0},t.prototype.timeout=function(){},t.prototype.validate=function(){if(""==e("#signName").val().toString().trim())return e("#signName").addClass("error").removeClass("shake"),e(".modal-body").animate({scrollTop:e("#signName")[0].getBoundingClientRect().top,duration:200},function(){e("#signName").addClass("shake")}),!1;if(""==e("#signInitials").val().toString().trim()){if(""==e("#signName").val().toString().trim())return e("#signInitials").addClass("error").removeClass("shake"),e(".modal-body").animate({scrollTop:e("#signInitials")[0].getBoundingClientRect().top,duration:200},function(){e("#signInitials").addClass("shake")}),!1;e("#signInitials").val(e("#signName").val().toString().charAt(0)),e("#signInitials").trigger("change")}if(e("#signInitials, #signName").removeClass("error").removeClass("shake"),"draw"==this.mode){if(1==this.signaturePad.isEmpty())return e("#canvasSignature").addClass("error").removeClass("shake"),e(".modal-body").animate({scrollTop:e("#canvasSignature")[0].getBoundingClientRect().top,duration:200},function(){e("#canvasSignature").addClass("shake")}),!1;if(1==this.initialsPad.isEmpty())return e("#canvasInitials").addClass("error").removeClass("shake"),e(".modal-body").animate({scrollTop:e("#canvasInitials")[0].getBoundingClientRect().top,duration:200},function(){e("#canvasInitials").addClass("shake")}),!1}if(e("#canvasSignatureClean").parent().removeClass("error").removeClass("shake"),e("#canvasInitials").parent().removeClass("error").removeClass("shake"),"image"==this.mode){if(0==e("#uploadSignatureContainer").hasClass("signed"))return window.setTimeout(function(){e("#uploadSignatureContainer").addClass("shake")},500),!1;if(0==e("#uploadInitialsContainer").hasClass("signed"))return window.setTimeout(function(){e("#uploadInitialsContainer").addClass("shake")},500),!1}return e("#canvasSignatureClean").parent().removeClass("error").removeClass("shake"),e("#canvasInitials").parent().removeClass("error").removeClass("shake"),!0},t.prototype.getSignature=function(){return this.signatureModel},t.prototype.forceApply=function(){e("#cancelSignature").hide()},t.prototype.showModal=function(){var t=this;if(e(".tippy-box").hide(),e("#configSignature .error").removeClass("error"),e("#configSignature .shake").removeClass("shake"),e("#cancelSignature").show(),this.signatureModel)switch(this.signer.allowCostumize){case"all":e("#"+this.signatureModel.mode+"-tab").tab("show");break;case"text":e("#font-tab").tab("show"),this.signatureModel.mode=this.mode="font";break;case"image":e("#image-tab").tab("show"),this.signatureModel.mode=this.mode="image";break;case"sign":e("#draw-tab").tab("show"),this.signatureModel.mode=this.mode="draw"}e("#configSignature").modal("show"),"draw"!=this.signatureModel.mode||this.signaturePad||0!=e("#draw-tab").hasClass("disabled")||window.setTimeout(function(){t.initCanvas()},500),"image"!=this.signatureModel.mode||this.uploaderSignature||0!=e("#image-tab").hasClass("disabled")||window.setTimeout(function(){t.initUploader()},500),window.setTimeout(function(){e("#signName").focus()},500)},t.prototype.hideModal=function(){e("#configSignature").modal("hide")},t.prototype.apply=function(){this.signatureModel||(this.signatureModel=new s.SignatureModel({})),this.mode||(this.mode="font"),this.signatureModel.mode=this.mode,"font"==this.signatureModel.mode&&this.signatureModel.setData(this.getTextData()),"draw"==this.signatureModel.mode&&this.signatureModel.setData(this.getDrawData()),"image"==this.signatureModel.mode&&this.signatureModel.setData(this.getImageData()),this.signer.name=this.signatureModel.signature,this.signer.initials=this.signatureModel.initials,e("#configSignature .error").removeClass("error"),e("#configSignature .shake").removeClass("shake"),this.saveToStorage(),this.sendEventSignatureChanged()},t.prototype.getTextData=function(){var t=this.getSignatureAndInitials();return{mode:"font",signature:t.signature,initials:t.initials,font:{color:e(".signature__color__item.active").attr("data-color"),fontFamily:e('[name="fontFamily"]:checked').val().toString()}}},t.prototype.getDrawData=function(){var t=this.getSignatureAndInitials();if(!this.signaturePad)return{mode:"draw",signature:t.signature,initials:t.initials};var n=this.signaturePad.toData(),i=this.initialsPad.toData(),r=c.SvgHelper.fromBase64(this.signaturePad.toDataURL("image/svg+xml")).replace("undefined",this.signatureModel.color),o=c.SvgHelper.trim(r),a=c.SvgHelper.toBase64(o),s=c.SvgHelper.fromBase64(this.initialsPad.toDataURL("image/svg+xml")),l=c.SvgHelper.trim(s),u=c.SvgHelper.toBase64(l);return{mode:"draw",signature:t.signature,initials:t.initials,draw:{signatureBase64:a,initialsBase64:u,signatureData:n||this.signatureModel.signatureDrawData,initialsData:i||this.signatureModel.initialsDrawData,color:e(".signature__color__item.active").attr("data-color")}}},t.prototype.uploadSvg=function(){this.signatureDrawApi=null,this.initialsDrawApi=null;var e=c.SvgHelper.fromBase64(this.signaturePad.toDataURL("image/svg+xml")).replace("undefined",this.signatureModel.color),t=c.SvgHelper.trim(e),n=(c.SvgHelper.toBase64(t),c.SvgHelper.toBlob(t)),i=c.SvgHelper.fromBase64(this.initialsPad.toDataURL("image/svg+xml")),r=c.SvgHelper.trim(i),o=(c.SvgHelper.toBase64(r),c.SvgHelper.toBlob(r));this.uploaderSignatureSvg.uploader.addFile(n,"signature.svg"),this.uploaderInitialsSvg.uploader.addFile(o,"initials.svg")},t.prototype.getImageData=function(){var e=this.getSignatureAndInitials();return"image"==this.mode&&this.filesSignature?{mode:"image",signature:e.signature,initials:e.initials,image:{signatureApi:this.signatureImageApi?this.signatureImageApi:"",initialsApi:this.initialsImageApi?this.initialsImageApi:""}}:{mode:"image",signature:e.signature,initials:e.initials}},t.prototype.getSignatureAndInitials=function(){var t=e("#signName").val().toString(),n=e("#signInitials").val().toString();return""==t&&(t=this.signer.name,e("#signName").val(t)),""==n&&(n=this.signer.name.split(" ").map(function(e){return e[0]}).join(""),e("#signInitials").val(n)),{signature:t,initials:n}},t.prototype.drawPreview=function(){this.signatureModel&&(e(".signature__preview").html(this.signatureModel.getSignaturePreview()),e(".signature__firm").html(d.Frame.make(this.signatureModel.uuid)))},t.prototype.saveSignatureSettingsToService=function(){var e=this;return new Promise(function(t,n){if(f.UserModel.isUser())if(1!=e.serviceFail){var i=e.signatureModel.getServiceData();window.userModel.signature=i,e.api.saveToolConfig("signature",i,window.userModel.token).then(function(e){t()},function(e){n(e)})}else t();else t()})},t.prototype.listenEventUserAuth=function(){var t=this;window.addEventListener("userAuth",function(n){var i=f.UserModel.get();if(i.signature&&i.signature.signature){var r=e("#signature-tabs .nav-link.active").attr("id").replace("-tab","");i.signature.mode=r,t.uploaderSignature&&t.uploaderSignature.setServiceMode(),t.uploaderInitials&&t.uploaderInitials.setServiceMode(),t.loadFromService(r),t.paintDrawSigntaure(),t.paintDrawInitials(),window.setTimeout(function(){window.dispatchEvent(new Event("resize"))}),(t.signatureModel.signatureImageService||t.signatureModel.initialsImageService)&&(t.initUploaderActions(),t.uploadImageFromService(),t.drawPreview()),t.preloadImages(i)}})},t.prototype.listenEventUuidChanged=function(){var e=this;window.addEventListener("uuidChanged",function(t){e.signatureModel&&(e.signatureModel.uuidVisble="enabled"==t.detail.uuid)})},t.prototype.uploadCloudFile=function(e,t){},t.prototype.invalidUpload=function(e){this.fatalError(e)},t.prototype.setUploaderError=function(e){"uploadSignatureSvg"==e.id||"uploadInitialsSvg"==e.id?(this.signatureDrawData=null,this.initialsDrawData=null):("uploadSignature"==e.id&&(v.Tooltip.setContent("#uploadSignature",g.Lang.t("Upload error")+" - "+g.Lang.t("Retry")),v.Tooltip.show("#uploadSignature"),document.getElementById("uploadSignatureContainer").classList.remove("signed"),document.getElementById("uploadSignatureContainer").classList.remove("upload")),"uploadInitials"==e.id&&(v.Tooltip.setContent("#uploadInitials",g.Lang.t("Upload error")+" - "+g.Lang.t("Retry")),v.Tooltip.show("#uploadInitials"),document.getElementById("uploadInitialsContainer").classList.remove("signed"),document.getElementById("uploadInitialsContainer").classList.remove("upload")))},t.prototype.fatalError=function(e){1==e.cloudFile?(this.apiFail=!0,this.setUploaderError(e)):"api"!=e.target&&"serviceOnly"!=e.target||(this.apiFail=!0,this.setUploaderError(e))},t.prototype.uploadStarts=function(t){e("#"+t+"Container").addClass("upload")},t.prototype.uploadEnds=function(t){e("#"+t+"Container").removeClass("upload")},t.prototype.waitForAllUploadsCompleted=function(){var e=null,t=this;return new Promise(function(n,i){e=window.setInterval(function(){1==t.checkUploadIsCompleted()&&(window.clearInterval(e),n()),1==t.apiFail&&i()},500)})},t.prototype.uploadAllImages=function(){return"draw"==this.mode&&JSON.stringify(this.signaturePad.toData())!=JSON.stringify(this.signatureDrawData)&&(this.signatureDrawData=this.signaturePad.toData(),this.initialsDrawData=this.initialsPad.toData(),this.uploadSvg()),this.apply(),this.waitForAllUploadsCompleted()},t.prototype.checkUploadIsCompleted=function(){return 1==this.serviceOnly?"draw"==this.mode?null!=this.initialsDrawService&&""!=this.initialsDrawService&&null!=this.signatureDrawService&&""!=this.signatureDrawService:"image"!=this.mode||(this.filesInitials.files.length>0&&null!=this.initialsImageService&&""!=this.initialsImageService||this.filesSignature.files.length>0&&null!=this.signatureImageService&&""!=this.signatureImageService):"draw"==this.mode?null!=this.initialsDrawApi&&""!=this.initialsDrawApi&&null!=this.signatureDrawApi&&""!=this.signatureDrawApi:"image"!=this.mode||null!=this.initialsImageApi&&""!=this.initialsImageApi&&null!=this.signatureImageApi&&""!=this.signatureImageApi},t.prototype.applyUploadedModeToModel=function(){"draw"==this.mode&&this.applyUploadedDrawToSignatureModel(),"image"==this.mode&&this.applyUploadedImagesToSignatureModel()},t.prototype.applyUploadedImagesToSignatureModel=function(){this.signatureImageApi&&(this.signatureModel.signatureImageApi=this.signatureImageApi),this.initialsImageApi&&(this.signatureModel.initialsImageApi=this.initialsImageApi),this.signatureImageService&&(this.signatureModel.signatureImageService=this.signatureImageService),this.initialsImageService&&(this.signatureModel.initialsImageService=this.initialsImageService)},t.prototype.applyUploadedDrawToSignatureModel=function(){this.signatureDrawApi&&(this.signatureModel.signatureDrawApi=this.signatureDrawApi),this.initialsDrawApi&&(this.signatureModel.initialsDrawApi=this.initialsDrawApi),this.signatureDrawService&&(this.signatureModel.signatureDrawService=this.signatureDrawService),this.initialsDrawService&&(this.signatureModel.initialsDrawService=this.initialsDrawService)},t}();t.default=y}).call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(205),r=n(181),o=n(206),a=function(){function e(t,n){var i=this;void 0===n&&(n={}),this.canvas=t,this.options=n,this._handleMouseDown=function(e){1===e.which&&(i._mouseButtonDown=!0,i._strokeBegin(e))},this._handleMouseMove=function(e){i._mouseButtonDown&&i._strokeMoveUpdate(e)},this._handleMouseUp=function(e){1===e.which&&i._mouseButtonDown&&(i._mouseButtonDown=!1,i._strokeEnd(e))},this._handleTouchStart=function(e){if(e.preventDefault(),1===e.targetTouches.length){var t=e.changedTouches[0];i._strokeBegin(t)}},this._handleTouchMove=function(e){e.preventDefault();var t=e.targetTouches[0];i._strokeMoveUpdate(t)},this._handleTouchEnd=function(e){if(e.target===i.canvas){e.preventDefault();var t=e.changedTouches[0];i._strokeEnd(t)}},this.velocityFilterWeight=n.velocityFilterWeight||.7,this.minWidth=n.minWidth||.5,this.maxWidth=n.maxWidth||2.5,this.throttle="throttle"in n?n.throttle:16,this.minDistance="minDistance"in n?n.minDistance:5,this.throttle?this._strokeMoveUpdate=o.throttle(e.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=e.prototype._strokeUpdate,this.dotSize=n.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=n.penColor||"black",this.backgroundColor=n.backgroundColor||"rgba(0,0,0,0)",this.onBegin=n.onBegin,this.onEnd=n.onEnd,this._ctx=t.getContext("2d"),this.clear(),this.on()}return e.prototype.clear=function(){var e=this._ctx,t=this.canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0},e.prototype.fromDataURL=function(e,t,n){var i=this;void 0===t&&(t={});var r=new Image,o=t.ratio||window.devicePixelRatio||1,a=t.width||this.canvas.width/o,s=t.height||this.canvas.height/o;this._reset(),r.onload=function(){i._ctx.drawImage(r,0,0,a,s),n&&n()},r.onerror=function(e){n&&n(e)},r.src=e,this._isEmpty=!1},e.prototype.toDataURL=function(e,t){switch(void 0===e&&(e="image/png"),e){case"image/svg+xml":return this._toSVG();default:return this.canvas.toDataURL(e,t)}},e.prototype.on=function(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",window.PointerEvent?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())},e.prototype.off=function(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.removeEventListener("pointerdown",this._handleMouseDown),this.canvas.removeEventListener("pointermove",this._handleMouseMove),document.removeEventListener("pointerup",this._handleMouseUp),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)},e.prototype.isEmpty=function(){return this._isEmpty},e.prototype.fromData=function(e){var t=this;this.clear(),this._fromData(e,function(e){var n=e.color,i=e.curve;return t._drawCurve({color:n,curve:i})},function(e){var n=e.color,i=e.point;return t._drawDot({color:n,point:i})}),this._data=e},e.prototype.toData=function(){return this._data},e.prototype._strokeBegin=function(e){var t={color:this.penColor,points:[]};this._data.push(t),this._reset(),this._strokeUpdate(e),"function"==typeof this.onBegin&&this.onBegin(e)},e.prototype._strokeUpdate=function(e){var t=e.clientX,n=e.clientY,i=this._createPoint(t,n),r=this._data[this._data.length-1],o=r.points,a=o.length>0&&o[o.length-1],s=!!a&&i.distanceTo(a)<=this.minDistance,l=r.color;if(!a||!a||!s){var c=this._addPoint(i);a?c&&this._drawCurve({color:l,curve:c}):this._drawDot({color:l,point:i}),o.push({time:i.time,x:i.x,y:i.y})}},e.prototype._strokeEnd=function(e){this._strokeUpdate(e),"function"==typeof this.onEnd&&this.onEnd(e)},e.prototype._handlePointerEvents=function(){this._mouseButtonDown=!1,this.canvas.addEventListener("pointerdown",this._handleMouseDown),this.canvas.addEventListener("pointermove",this._handleMouseMove),document.addEventListener("pointerup",this._handleMouseUp)},e.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},e.prototype._handleTouchEvents=function(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)},e.prototype._reset=function(){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},e.prototype._createPoint=function(e,t){var n=this.canvas.getBoundingClientRect();return new r.Point(e-n.left,t-n.top,(new Date).getTime())},e.prototype._addPoint=function(e){var t=this._lastPoints;if(t.push(e),t.length>2){3===t.length&&t.unshift(t[0]);var n=this._calculateCurveWidths(t[1],t[2]),r=i.Bezier.fromPoints(t,n);return t.shift(),r}return null},e.prototype._calculateCurveWidths=function(e,t){var n=this.velocityFilterWeight*t.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,i=this._strokeWidth(n),r={end:i,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=i,r},e.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)},e.prototype._drawCurveSegment=function(e,t,n){var i=this._ctx;i.moveTo(e,t),i.arc(e,t,n,0,2*Math.PI,!1),this._isEmpty=!1},e.prototype._drawCurve=function(e){var t=e.color,n=e.curve,i=this._ctx,r=n.endWidth-n.startWidth,o=2*Math.floor(n.length());i.beginPath(),i.fillStyle=t;for(var a=0;a<o;a+=1){var s=a/o,l=s*s,c=l*s,u=1-s,d=u*u,p=d*u,f=p*n.startPoint.x;f+=3*d*s*n.control1.x,f+=3*u*l*n.control2.x,f+=c*n.endPoint.x;var h=p*n.startPoint.y;h+=3*d*s*n.control1.y,h+=3*u*l*n.control2.y,h+=c*n.endPoint.y;var g=n.startWidth+c*r;this._drawCurveSegment(f,h,g)}i.closePath(),i.fill()},e.prototype._drawDot=function(e){var t=e.color,n=e.point,i=this._ctx,r="function"==typeof this.dotSize?this.dotSize():this.dotSize;i.beginPath(),this._drawCurveSegment(n.x,n.y,r),i.closePath(),i.fillStyle=t,i.fill()},e.prototype._fromData=function(e,t,n){for(var i=0,o=e;i<o.length;i++){var a=o[i],s=a.color,l=a.points;if(l.length>1)for(var c=0;c<l.length;c+=1){var u=l[c],d=new r.Point(u.x,u.y,u.time);this.penColor=s,0===c&&this._reset();var p=this._addPoint(d);p&&t({color:s,curve:p})}else this._reset(),n({color:s,point:l[0]})}},e.prototype._toSVG=function(){var e=this,t=this._data,n=Math.max(window.devicePixelRatio||1,1),i=this.canvas.width/n,r=this.canvas.height/n,o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("width",this.canvas.width.toString()),o.setAttribute("height",this.canvas.height.toString()),this._fromData(t,function(e){var t=e.color,n=e.curve,i=document.createElement("path");if(!(isNaN(n.control1.x)||isNaN(n.control1.y)||isNaN(n.control2.x)||isNaN(n.control2.y))){var r="M "+n.startPoint.x.toFixed(3)+","+n.startPoint.y.toFixed(3)+" C "+n.control1.x.toFixed(3)+","+n.control1.y.toFixed(3)+" "+n.control2.x.toFixed(3)+","+n.control2.y.toFixed(3)+" "+n.endPoint.x.toFixed(3)+","+n.endPoint.y.toFixed(3);i.setAttribute("d",r),i.setAttribute("stroke-width",(2.25*n.endWidth).toFixed(3)),i.setAttribute("stroke",t),i.setAttribute("fill","none"),i.setAttribute("stroke-linecap","round"),o.appendChild(i)}},function(t){var n=t.color,i=t.point,r=document.createElement("circle"),a="function"==typeof e.dotSize?e.dotSize():e.dotSize;r.setAttribute("r",a.toString()),r.setAttribute("cx",i.x.toString()),r.setAttribute("cy",i.y.toString()),r.setAttribute("fill",n),o.appendChild(r)});var a='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+i+" "+r+'" width="'+i+'" height="'+r+'">',s=o.innerHTML;if(void 0===s){var l=document.createElement("dummy"),c=o.childNodes;l.innerHTML="";for(var u=0;u<c.length;u+=1)l.appendChild(c[u].cloneNode(!0));s=l.innerHTML}return"data:image/svg+xml;base64,"+btoa(a+s+"</svg>")},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(181),r=function(){function e(e,t,n,i,r,o){this.startPoint=e,this.control2=t,this.control1=n,this.endPoint=i,this.startWidth=r,this.endWidth=o}return e.fromPoints=function(t,n){var i=this.calculateControlPoints(t[0],t[1],t[2]).c2,r=this.calculateControlPoints(t[1],t[2],t[3]).c1;return new e(t[1],i,r,t[2],n.start,n.end)},e.calculateControlPoints=function(e,t,n){var r=e.x-t.x,o=e.y-t.y,a=t.x-n.x,s=t.y-n.y,l=(e.x+t.x)/2,c=(e.y+t.y)/2,u=(t.x+n.x)/2,d=(t.y+n.y)/2,p=Math.sqrt(r*r+o*o),f=Math.sqrt(a*a+s*s),h=f/(p+f),g=u+(l-u)*h,v=d+(c-d)*h,m=t.x-g,y=t.y-v;return{c1:new i.Point(l+m,c+y),c2:new i.Point(u+m,d+y)}},e.prototype.length=function(){for(var e,t,n=0,i=0;i<=10;i+=1){var r=i/10,o=this.point(r,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),a=this.point(r,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(i>0){var s=o-e,l=a-t;n+=Math.sqrt(s*s+l*l)}e=o,t=a}return n},e.prototype.point=function(e,t,n,i,r){return t*(1-e)*(1-e)*(1-e)+3*n*(1-e)*(1-e)*e+3*i*(1-e)*e*e+r*e*e*e},e}();t.Bezier=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=function(e,t){void 0===t&&(t=250);var n,i,r,o=0,a=null,s=function(){o=Date.now(),a=null,n=e.apply(i,r),a||(i=null,r=[])};return function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var u=Date.now(),d=t-(u-o);return i=this,r=l,d<=0||d>t?(a&&(clearTimeout(a),a=null),o=u,n=e.apply(i,r),a||(i=null,r=[])):a||(a=window.setTimeout(s,d)),n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="data:image/svg+xml;base64,",r=function(){function e(){}return e.toBase64=function(e){"string"!=typeof e&&(e=(new XMLSerializer).serializeToString(e));return i+btoa(e)},e.toBlob=function(e){for(var t=e.length,n=new Uint8Array(t);t--;)n[t]=e.charCodeAt(t);return new Blob([n])},e.fromBase64=function(e){return atob(e.replace(i,""))},e.trim=function(e){var t=!1;"string"==typeof e&&(e=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement,t=!0);var n=document.body.appendChild(e),i=e.getBBox();(e.setAttribute("viewBox",i.x-10+" "+(i.y-10)+" "+(i.width+20)+" "+(i.height+20)),e.setAttribute("width",i.width+20+"px"),e.setAttribute("height",i.height+20+"px"),document.body.removeChild(n),1==t)&&(e=(new XMLSerializer).serializeToString(e));return e},e}();t.SvgHelper=r},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(16),r=n(182),o=function(){function t(e){Object.assign(this,e),this.init()}return t.prototype.init=function(){this.listenEventUserAuth(),this.initLoginElements(),this.setUserElement()},t.prototype.initLoginElements=function(){if(this.elementAuth&&null===i.UserModel.get()){e(".loginAuth").on("click",function(){e(".modal:visible").removeAttr("tabindex"),r.SignatureDialogs.auth("signature").show()}),this.elementAuth.on("click",function(){!1===i.UserModel.isUser()&&(e(".modal:visible").removeAttr("tabindex"),r.SignatureDialogs.auth("signature").show())})}},t.prototype.listenEventUserAuth=function(){var e=this;window.addEventListener("userAuth",function(t){e.setUserElement()})},t.prototype.setUserElement=function(){null!=i.UserModel.get()&&(e("#loginText").hide(),e(".loginAuth").remove(),this.elementAvatar&&this.elementAvatar.attr("src",i.UserModel.get().avatar))},t}();t.AuthElement=o}).call(this,n(1))},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(10),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="AuthState",t.LAYOUT_TEMPLATE_NAME="singleton/auth",t.onDomReady=function(){t.initAbstractAuth(),t.ctx.tool&&(t.extraLoginParams={tool:t.ctx.tool}),t.changeScreen(t.INITIAL_SCREEN),t.clearLoadingScreen()},t._onLoginSuccess=function(){t.executeAfterLoginOrRegisterSuccess()},t._onRegisterSuccess=function(){t.executeAfterLoginOrRegisterSuccess()},t.executeAfterLoginOrRegisterSuccess=function(){t.dispatchEvent(new o.IloveEvent("end"))},t}return r(t,e),t}(n(71).AbstractAuthState);t.AuthState=a},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n){var i=e.call(this,n)||this;i.contentName="SingletonContext",i.tool=n.tool,i.changeState(new t);i.getState();return i}return r(t,e),t.prototype.getInitialState=function(){return this.getState()},t}(n(48).ContextBase);t.SingletonContext=o},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(188),a=n(38),s=n(16),l=n(17),c=n(12),u=n(19),d=n(59),p=function(e){function t(t){var n=e.call(this,t)||this;return n.target=n.target||"api",n.chunkSize=!1,n.RETRY_NUM=0,n.retryCount=0,n}return r(t,e),t.prototype.getUrl=function(){return"api"==this.target?e.prototype.getUrl.call(this):this.getServiceUrl()},t.prototype.getServiceUrl=function(){return a.Settings.get("service")+"/signature/upload"},t.prototype.getUploadParams=function(){return"api"==this.target?{task:this.taskId,v:this.appVersion}:{mode:this.signatureMode,type:this.signatureType}},t.prototype.setApiMode=function(){this.target="api",this.uploader.stop(),this.token=this.tokenApi,this.uploader.setOption("url",this.getUrl()),this.uploader.setOption("headers",this.getHeaders()),this.uploader.setOption("multipart_params",this.getUploadParams()),this.uploader.start()},t.prototype.setServiceMode=function(){var e=s.UserModel.get();if(!e||!e.token)return!1;this.tokenService=e.token,this.target="service",this.token=this.tokenService,this.uploader.stop(),this.uploader.setOption("url",this.getUrl()),this.uploader.setOption("headers",this.getHeaders()),this.uploader.setOption("multipart_params",this.getUploadParams()),this.uploader.start()},t.prototype.setServiceOnlyMode=function(){var e=s.UserModel.get();if(!e||!e.token)return!1;this.target="serviceOnly",this.token=e.token,this.uploader.stop(),this.uploader.setOption("url",this.getUrl()),this.uploader.setOption("headers",this.getHeaders()),this.uploader.setOption("multipart_params",this.getUploadParams()),this.uploader.start()},t.prototype.fileUploaded=function(e,t){"api"==this.target||"serviceOnly"==this.target?this.optionsManager.fileUploaded(e,t):t.service_filename?this.uploadToApi(t.service_filename,e):(l.configureScope(function(e){e.setExtra("error",t)}),l.captureMessage("[sign] no service_filename on response",c.Severity.Error),this.fatalError("no server_filename present"))},t.prototype.uploadToApi=function(e,t){var n=this;void 0===t&&(t=null);var i=this;null==t&&(t=u.Tools.randomId(),this.files.addFile(new d.File({id:t,name:e,filename:e}))),this.optionsManager.api.uploadCloudFile(this.taskId,e).then(function(n){n.service_filename=e,i.optionsManager.fileUploaded(t,n)},function(e){e.cloudFile=!0,n.fatalError(e)})},t.prototype.error=function(t){t.id=this.id,t.retry=this.retryCount,t.dnsFallback=this.dnsFallback,t.target=this.target,"api"==this.target||"serviceOnly"==this.target?this.optionsManager.invalidUpload(t):(this.setApiMode(),this.reUploadAllFiles()),e.prototype.error.call(this,t)},t.prototype.fatalError=function(e){e.id=this.id,e.retry=this.retryCount,e.dnsFallback=this.dnsFallback,e.target=this.target,"api"==this.target||"serviceOnly"==this.target?this.optionsManager.fatalError(e):(this.setApiMode(),this.reUploadAllFiles())},t}(o.ServicePlupload);t.SignaturePlupload=p},,function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(){this.show=!0,this.init(),this.listenEventUuidDisable()}return t.prototype.init=function(){var t=this;e("#uuidCheckbox").on("change",function(){t.setFromCheckbox()}),this.setFromCheckbox();var n=e(".signature__option--uuid");n.on("click",function(e){e.preventDefault(),n.hasClass("disabled")?t.enableUuid():t.disableUuid()})},t.prototype.setFromCheckbox=function(){e("#uuidCheckbox").is(":checked")?this.disableUuid():this.enableUuid()},t.prototype.enableUuid=function(){this.show=!0,e("body").removeClass("uuid--disabled"),e("#uuidCheckbox").removeAttr("checked"),e(".signature__option--uuid").removeClass("disabled"),this.sendEventUuidChanged("enabled"),e(".sign__element--signature").each(function(t,n){e(n).css("width",Math.max(e(n).width(),e(n).find(".sign__element__id").width()))})},t.prototype.disableUuid=function(){this.show=!1,e("body").addClass("uuid--disabled"),e("#uuidCheckbox").attr("checked","checked"),e(".signature__option--uuid").addClass("disabled"),this.sendEventUuidChanged("disabled")},t.prototype.disableEdit=function(){e(".signature__option--uuid").hide()},t.prototype.setStatus=function(e){void 0===e&&(e=!0),1==e?this.enableUuid():this.disableUuid()},t.prototype.apply=function(){e(".signature__firm__code").val(this.uuid)},t.prototype.setUuid=function(e){this.uuid=e,this.apply()},t.prototype.getStatus=function(){return this.show},t.prototype.getUuid=function(){return this.uuid},t.prototype.sendEventUuidChanged=function(e){var t=new CustomEvent("uuidChanged",{detail:{uuid:e}});window.dispatchEvent(t)},t.prototype.listenEventUuidDisable=function(){var e=this;window.addEventListener("uuidDisable",function(t){e.disableUuid()})},t}();t.UuidManager=n}).call(this,n(1))},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ELEMENT_STACK_ELEMENT="elements",t.ELEMENT_STACK_SELECTED="selected";var i=function(){function e(){this.elements=[],this.selected=[]}return e.prototype.add=function(e,n){void 0===n&&(n=t.ELEMENT_STACK_ELEMENT),this[n].push(e)},e.prototype.clear=function(e){void 0===e&&(e=t.ELEMENT_STACK_ELEMENT),this[e]=[]},e.prototype.get=function(e,n){void 0===n&&(n=t.ELEMENT_STACK_ELEMENT);var i=null;return this[n].forEach(function(t){if(t.id==e)return i=t,null}),i},e.prototype.all=function(e){return void 0===e&&(e=t.ELEMENT_STACK_ELEMENT),this[e]},e.prototype.getIndex=function(e,n){void 0===n&&(n=t.ELEMENT_STACK_ELEMENT);var i=null;return this[n].forEach(function(t,n){if(t.id==e)return i=n}),i},e.prototype.first=function(e){return void 0===e&&(e=t.ELEMENT_STACK_ELEMENT),this[e][0]},e.prototype.last=function(e){return void 0===e&&(e=t.ELEMENT_STACK_ELEMENT),this[e][this[e].length-1]},e.prototype.count=function(e){return void 0===e&&(e=t.ELEMENT_STACK_ELEMENT),this[e].length},e.prototype.update=function(e,t){var n=null;return this.elements.forEach(function(i,r){if(i.id==e)return Object.assign(i,t),n=i}),n},e.prototype.remove=function(n,i,r){void 0===i&&(i=t.ELEMENT_STACK_ELEMENT),void 0===r&&(r=!0);var o=this;this[i].forEach(function(t,a){if(t&&t.id==n)return a>-1&&o[i].splice(a,1),void(0==r&&e.sendEventElementRemoved(n))})},e.sendEventElementRemoved=function(e){var t=new CustomEvent("elementRemoved",{detail:{elementId:e}});window.dispatchEvent(t)},e}();t.ElementsStack=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.validate=function(e){return new RegExp("^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/)?[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,5}(:[0-9]{1,5})?(\\/.*)?$","g").test(e)},e.correct=function(e){return"http://"!==e.substr(0,"http://".length)&&"https://"!==e.substr(0,"https://".length)&&(e="http://"+e),e},e.getParam=function(e,t){void 0===t&&(t=null),null==t&&(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},e}();t.Url=i},,function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(222),r=function(){function t(){}return t.prototype.init=function(){this.initOrder(),this.initExpire(),this.initMultiple(),this.initCerts(),this.initCertName(),this.initLanguage(),this.initReminders(),this.initCustomMessage(),this.initUuid(),this.initNotify(),this.initBrand()},t.prototype.initOrder=function(){e("#orderCheckbox")},t.prototype.initExpire=function(){var t=function(){e("#expireSet").show(),e("#dayExpire").show(),e("#expireDaysDefault").hide(),e("#dayExpireDefault").hide(),e("#expire").focus()},n=function(){e("#expireSet").hide(),e("#dayExpire").hide(),e("#expireDaysDefault").show(),e("#dayExpireDefault").show()},i=e("#expirateCheckbox");i.on("change",function(){i.is(":checked")?t():n()}),i.is(":checked")?t():n();var r=window.navigator.userLanguage||window.navigator.language,o=e("#dayExpireDefault"),a=e("#dayExpire");try{o.html(new Intl.DateTimeFormat(r).format(new Date(o.html()))),a.html(o.html())}catch(e){}var s=e("#expire");s.on("change",function(){var t=s.val().toString();""==(t=t.replace(/\D/g,""))&&(t=s.attr("data-default")),parseInt(t)>parseInt(s.attr("max"))&&(t=s.attr("max")),s.val(parseInt(t));var n=parseInt(t),i=new Date;i.setDate(i.getDate()+n);var o=i.getDate().toString().padStart(2,"0"),a=(i.getMonth()+1).toString().padStart(2,"0"),l=i.getFullYear()+"-"+a+"-"+o;try{l=new Intl.DateTimeFormat(r).format(i)}catch(e){}e("#dayExpire").html(l)})},t.prototype.initMultiple=function(){var t=e("#orderCheckbox"),n=e("#multipleCheckbox"),i=function(){1!=n.is(":checked")?t.removeAttr("disabled"):t.attr("disabled","disabled")};n.on("change",function(){i()}),i()},t.prototype.initCerts=function(){var t=this;e("#certifiedCheckbox").on("change",function(){t.certsAction()}),this.certsAction()},t.prototype.certsAction=function(){e("#certifiedCheckbox").is(":checked")?this.enableCustomCerts():this.diableCustomCerts()},t.prototype.enableCustomCerts=function(){e("#certificateSelectCheckbox").removeAttr("disabled"),e("#certificateSelectOption").parent().find(".receiver__setting__content").removeClass("disabled")},t.prototype.diableCustomCerts=function(){e("#certificateSelectCheckbox").attr("disabled","disabled"),e("#certificateSelectOption").parent().find(".receiver__setting__content").addClass("disabled")},t.prototype.initCertName=function(){new i.CustomCertsManager},t.prototype.initLanguage=function(){var t=e("#languageCheckbox"),n=function(){t.is(":checked")?(e("#languageSelectOption").show(),e("#languageSelected").show(),e("#languageDefault").hide()):(e("#languageSelectOption").hide(),e("#languageSelected").hide(),e("#languageDefault").show())};e("#languageSelectOption").hide(),e("#languageSelected").hide(),t.on("change",function(){n()}),n(),e("#selectLanguage").on("change",function(){var t=e("#selectLanguage option:selected").html();e("#languageSelected").html(t)})},t.prototype.initCustomMessage=function(){var t=e("#messageCheckbox"),n=e(".receiver__messages");t.is(":checked")?n.show():n.hide(),t.on("change",function(){t.is(":checked")?n.show():n.hide()})},t.prototype.initReminders=function(){var t=function(){e("#reminderSet").show(),e("#reminderDays").hide(),e("#reminderInput").focus()},n=function(){e("#reminderSet").hide(),e("#reminderDays").show()},i=e("#reminderCheckbox");i.on("change",function(){1==i.is(":checked")?t():n()}),1==i.is(":checked")?t():n()},t.prototype.initUuid=function(){e("#uuidCheckbox")},t.prototype.initNotify=function(){e("#notifyCheckbox")},t.prototype.setFromTemplate=function(t){var n=e("#certifiedCheckbox");("1"==t.certified&&0==n.is(":checked")||"0"==t.certified&&1==n.is(":checked"))&&n.trigger("click");var i=e("#expirateCheckbox");t.expiration_days&&0==i.is(":checked")&&(e("#expireDaysDefault .value").html(t.expiration_days),e("#expire").val(t.expiration_days),i.trigger("click"));var r=e("#languageCheckbox");if(t.language){var o=e('#selectLanguage option[value="'+t.language+'"]'),a=o.text();e("#languageSelected").html(a),e("#selectLanguage").val(t.language)}t.language&&0==r.is(":checked")&&r.trigger("click");var s=e("#uuidCheckbox");("true"==t.uuid_visible&&0==s.is(":checked")||"false"==t.uuid_visible&&1==s.is(":checked"))&&s.trigger("click");var l=e("#multipleCheckbox");("batch"==t.mode&&0==l.is(":checked")||"batch"!=t.mode&&1==l.is(":checked"))&&l.trigger("click");var c=e("#messageCheckbox");t.subject_signer?e("#customSubject").val(t.subject_signer):e("#customSubject").val(""),t.message_signer?e("#customMessage").html(t.message_signer):e("#customMessage").html(""),(t.message_signer&&0==c.is(":checked")||!t.message_signer&&1==c.is(":checked"))&&c.trigger("click")},t.prototype.initBrand=function(){var t=e("#brandCheckbox"),n=e("#brandOptions");t.is(":checked")?n.show():n.hide(),t.on("change",function(){t.is(":checked")?n.show():n.hide()})},t}();t.SignConfigManager=r}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(e){void 0===e&&(e=null),this.elementSelector=e||".askCustomCert",this.initSelect(),this.init()}return t.prototype.init=function(){var t=this;null!=this.elementSelector&&(e(this.elementSelector).off("click"),e(this.elementSelector).on("click",function(e){e.preventDefault(),t.showModal()}));var n=e("#sendCustomCertBtn");n.off("click"),n.on("click",function(){t.hideModal()}),e("#cancelCustomCertBtn").on("click",function(){t.hideModal()})},t.prototype.initSelect=function(){var t=this,n=e("#selectCertName");n.off("change"),n.on("change",function(){"custominc"==n.val()&&t.showModal(),n.val(n.find("option:first").val())})},t.prototype.showModal=function(){e("#customCertsModal").modal("show"),window.setTimeout(function(){e("#emailCustomCert").focus()},500)},t.prototype.hideModal=function(){e("#customCertsModal").modal("hide")},t}();t.CustomCertsManager=n}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(224),r=n(59),o=n(16),a=n(141),s=n(87),l=n(95),c=function(){function t(e,t){void 0===t&&(t=!1),this.api=e,this.serviceOnly=t,this.init(),this.listenEventUserAuth()}return t.prototype.init=function(){var t=this,n=this;if(1==o.UserModel.isUser()){var i=o.UserModel.get();this.service_filename=i.signConfig.brandLogo}this.initBrandUploader(),this.service_filename&&this.api.pingService().then(function(){t.setServiceBrandLogo(),1!=t.serviceOnly&&n.uploadBrandFromService()}),e("#uploadBrandClean").on("click",function(){e("#brandLogo").val(""),e("#fileApiBrand").val(""),e("#uploadBrandArea, #uploadBrandContainer").removeClass("uploaded"),e("#uploadBrandPreview").css("background-image","none")})},t.prototype.listenEventUserAuth=function(){},t.prototype.serviceError=function(){},t.prototype.uploadBrandFromService=function(){this.initBrandUploader(),this.uploadStarts(),this.uploader.uploadToApi(this.service_filename)},t.prototype.initBrandUploader=function(){this.files||(this.files=new r.FileStack,this.uploader=this.makeUploaderService("uploadBrand","uploadBrandContainer","uploadBrandArea",this.files))},t.prototype.makeUploaderService=function(e,t,n,r){return new i.BrandPlupload({target:null!=o.UserModel.get()&&1!=this.serviceFail?1==this.serviceOnly?"serviceOnly":"service":"api",id:e,container:t,optionsManager:this,config:new s.Config({tool:"sign",subtool:"sign",config:{sign:{mimeTypes:[{title:"Image files",extensions:"png,svg,jpg",mime:"image/png,image/jpeg,image/svg+xml,image/svg"}],multiSelection:!1}}}),files:r,workerServer:this.api.workerServer,tool:"sign",servers:[],haveDrop:!0,dropElement:n,tokenApi:this.api.token,tokenService:null!=o.UserModel.get()&&1!=this.serviceFail?o.UserModel.get().token:null,token:null!=o.UserModel.get()&&1!=this.serviceFail?o.UserModel.get().token:this.api.token,taskId:this.api.taskId})},t.prototype.changeServer=function(e){},t.prototype.checkLimits=function(e,t){return e},t.prototype.fileAdded=function(e,t,n){return this.uploadStarts(),this.setBrandLogo(e)},t.prototype.setServiceBrandLogo=function(){(new l.ImageView).renderUrl(this.service_filename,"uploadBrandPreview").then(function(){document.getElementById("uploadBrandPreview").parentElement.classList.add("uploaded")})},t.prototype.setBrandLogo=function(t){return void 0===t&&(t=null),new Promise(function(n,i){var r=t.getSource().getSource();e("#uploadBrandArea").css("background-image","none"),a.ImageHelper.getBase64(t,!0).then(function(e){a.ImageHelper.preload(e)});var o=t.name.endsWith(".svg")?"renderSvg":"renderImage";(new l.ImageView)[o](r,"uploadBrandPreview",!1).then(function(e){return t.width=e.width,t.height=e.height,document.getElementById("uploadBrandPreview").parentElement.classList.add("uploaded"),n(e)},function(e){i(e)})})},t.prototype.fileUploaded=function(t,n){this.uploadEnds(),null!=this.files.updateFile(t,n)&&(n.service_filename&&(this.service_filename=n.service_filename,e("#brandLogo").val(n.service_filename),this.server_filename=n.service_filename),n.server_filename&&(this.server_filename=n.server_filename,e("#fileApiBrand").val(n.server_filename)))},t.prototype.invalidUpload=function(e){},t.prototype.fatalError=function(e){},t.prototype.uploadStarts=function(){e("#uploadBrandContainer").addClass("uploading")},t.prototype.uploadEnds=function(){e("#uploadBrandContainer").removeClass("uploading")},t}();t.default=c}).call(this,n(1))},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(38),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getServiceUrl=function(){return o.Settings.get("service")+"/brand/upload"},t}(n(188).ServicePlupload);t.BrandPlupload=a},,function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},,,function(e,t,n){"use strict";(function(e){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(142),a=n(141),s=36,l=function(t){function n(){var e=t.call(this)||this;return e.type="signature-element",e.tipo="signature-element",e.height=s,e.listenEventUuidChanged(),e}return r(n,t),n.prototype.makeElement=function(t,n){var i=e(e("#signatureElementTemplate").html());return i.addClass(this.signer.colorClass),i.addClass("tooltip"),i.attr("title",this.signer.name),i.attr("data-id",this.id),i.attr("id",t),i.css({top:n.y,left:n.x,position:"absolute"}),this.addLinkedItems(i)},n.prototype.applyResize=function(e,t){void 0===e&&(e=null),void 0===t&&(t=1),1!=isNaN(t)&&0!=t||(t=1);var n=this.getFrameHeight();this.ratio=this.ratio*t,this.width=this.width*t,this.height=(this.height+n)*t-n,this.fontSize=this.fontSize*t,this.applySize(e,t)},n.prototype.getFrameHeight=function(){var t=e('[data-id="'+this.id+'"] .sign__element__id');if(0==t.is(":visible"))return 0;var n=t[0].getBoundingClientRect().height;return 0==n?0:n+parseFloat(t.css("margin-top"))+1},n.prototype.getElementTotalHeight=function(){return this.height+this.getFrameHeight()},n.prototype.getElementTotalHeightByRatio=function(e){return 1!=isNaN(e)&&0!=e||(e=1),this.height+this.getFrameHeight()*e},n.prototype.applySingature=function(){this.signatureModel&&(e('[data-id="'+this.id+'"] .sign__element__content__applied').html(this.signatureModel.getSignaturePreview()),e('[data-id="'+this.id+'"] .sign__element__id').html(this.signatureModel.getFrame()),this.setElementMinimumSizeForText(),t.prototype.applySingature.call(this))},n.prototype.setElementMinimumSizeForText=function(){if(0!=e("body").hasClass("selfsigned")){var t=this,n=e('[data-id="'+this.id+'"] .sign__element__textImage');if(0!=n.length){var i=new Image;i.onload=function(){var n=i.height,r=i.width,o=e('[data-id="'+t.id+'"]'),s=o.width(),l=o.height(),c=a.ImageHelper.calculateAspectRatioFit(r,n,s,l),u=14*t.getDataRatio();c.height<u&&(t.height=u,t.width=t.height/n*r,t.applyResize(),t.sendEventElementChanged())},i.src=n.attr("src")}}},n.prototype.applyZoomSize=function(n,i){void 0===n&&(n=null),void 0===i&&(i=1),1!=isNaN(i)&&0!=i||(i=1),t.prototype.applyZoomSize.call(this,n,i);var r=e(null==n?'[data-id="'+this.id+'"] .signature__firm__by':"#"+n+" .signature__firm__by"),o=parseFloat(r.css("font-size")),a=parseFloat(r.css("height")),s=parseFloat(r.css("width"));r.css({fontSize:o*i+"px",lineHeight:a*i+"px",height:a*i+"px",width:s*i+"px"});var l=e(null==n?'[data-id="'+this.id+'"] .signature__firm__by svg':"#"+n+" .signature__firm__by svg");l.css({width:l.width()*i+"px",height:l.height()*i+"px"});var c=e(null==n?'[data-id="'+this.id+'"] .sign__element__id':"#"+n+" .sign__element__id"),u=parseFloat(c.css("margin-top")),d=parseFloat(c.css("font-size")),p=parseFloat(c.css("line-height")),f=parseFloat(c.css("height")),h=parseFloat(c.css("width"));c.css({marginTop:u*i+"px",fontSize:d*i+"px",lineHeight:p*i+"px",height:f*i+"px",width:h*i+"px",flex:"0 0 "+f*i+"px"});var g=e(null==n?'[data-id="'+this.id+'"] .signature__firm__code':"#"+n+" .signature__firm__code"),v=parseFloat(g.css("font-size")),m=parseFloat(g.css("height")),y=parseFloat(g.css("width"));g.css({fontSize:v*i+"px",lineHeight:m*i+"px",height:m*i+"px",width:y*i+"px"})},n.prototype.listenEventUuidChanged=function(){var t=this;window.addEventListener("uuidChanged",function(n){var i=e('[data-id="'+t.id+'"]');0!=i.length&&(i.each(function(t,i){var r=e(i).find(".sign__element__id"),o=r.height()+parseFloat(r.css("margin-top")),a="enabled"==n.detail.uuid?e(i).height()+o+"px":e(i).height()-o+"px";e(i).css("height",a)}),t.sendEventElementChanged())})},n.prototype.trim=function(t){if(void 0===t&&(t=null),1!=e("body").hasClass("tool-signature")){var n=this,i=e('[data-id="'+this.id+'"]'),r=i.find(".sign__element__content__applied"),o=r.find("img");r.find(".sign__element__id");if(0!=o.width()){o.width()<i.width()&&(r.css("width","auto"),r.css("width",r.width()+"px"),i.css("width","auto"),i.css("width",i.width()+"px"),this.width=i.width());var a=o.height();if(0!=a){if(1==o.hasClass("sign__element__textImage")&&(a=100*a/70),a<this.height){var s=this.height-a;this.height=a,this.position.y+=s;var l=i.find(".sign__element__content__applied");l.css({height:l.height()-s+"px"}),i.css({height:i.height()-s+"px",top:this.position.y})}this.sendEventElementChanged()}else window.setTimeout(function(){n.trim()},100)}else window.setTimeout(function(){n.trim()},100)}},n}(o.ElementBase);t.ElementSignature=l}).call(this,n(1))},function(e,t,n){"use strict";(function(e){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=36,a=function(t){function n(){var e=t.call(this)||this;return e.type="initials-element",e.tipo="initials-element",e.height=o,e}return r(n,t),n.prototype.makeElement=function(t,n){var i=e(e("#initialsElementTemplate").html());return i.addClass("tooltip"),i.attr("title",this.signer.name),i.addClass(this.signer.colorClass),i.attr("data-id",this.id),i.attr("id",t),i.css({top:n.y,left:n.x,position:"absolute"}),this.addLinkedItems(i)},n.prototype.applySingature=function(){this.signatureModel&&(e('[data-id="'+this.id+'"] .sign__element__content__applied').html(this.signatureModel.getInitialsPreview()),t.prototype.applySingature.call(this))},n.prototype.trim=function(t){if(void 0===t&&(t=null),1!=e("body").hasClass("tool-signature")){var n=e('[data-id="'+this.id+'"]'),i=n.find(".sign__element__content__applied"),r=this;i.css("width","auto"),0!=i.width()?(i.css("width",i.width()+"px"),n.css("width","auto"),n.css("width",n.width()+"px"),this.width=n.width()):window.setTimeout(function(){r.trim(),r.sendEventElementChanged()},100)}},n}(n(142).ElementBase);t.ElementInitials=a}).call(this,n(1))},function(e,t,n){"use strict";(function(e){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(t){function n(){var e=t.call(this)||this;return e.type="name-element",e.tipo="name-element",e.autoApply=!0,e}return r(n,t),n.prototype.makeElement=function(t,n){var i=e(e("#nameElementTemplate").html());return i.addClass(this.signer.colorClass),i.addClass("tooltip"),i.attr("title",this.signer.name),i.attr("data-id",this.id),i.attr("id",t),i.css({top:n.y,left:n.x,position:"absolute"}),this.addLinkedItems(i)},n.prototype.applySingature=function(){this.signatureModel&&(e('[data-id="'+this.id+'"] .sign__element__content__applied').html(this.signatureModel.getNamePreview()),t.prototype.applySingature.call(this))},n.prototype.trim=function(t){void 0===t&&(t=null);var n=e('[data-id="'+this.id+'"]'),i=n.find(".sign__element__content__applied");i.css("width","auto"),i.css("width",i.width()+"px"),n.css("width","auto"),n.css("width",n.width()+"px"),this.width=n.width()},n}(n(142).ElementBase);t.ElementName=o}).call(this,n(1))},function(e,t,n){"use strict";(function(e){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(142),a=n(233),s="Y/m/d",l=function(t){function n(){var e=t.call(this)||this;return e.type="date-element",e.tipo="date-element",e.autoApply=!0,window.ilovepdfConfig.dateFormat||(window.ilovepdfConfig.dateFormat=s),e.content=window.ilovepdfConfig.dateFormat,e.selectFormat=new a.SelectDateFormat,e.listenEventDateFormatChanged(),e}return r(n,t),n.prototype.makeElement=function(t,n){var i=e(e("#dateElementTemplate").html());return i.addClass(this.signer.colorClass),i.attr("data-id",this.id),i.attr("id",t),i.css({top:n.y,left:n.x,position:"absolute"}),this.addLinkedItems(i)},n.prototype.applySingature=function(){var n=new Date,i=this.content.replace("d",("0"+n.getDate()).slice(-2)).replace("m",("0"+(n.getMonth()+1)).slice(-2)).replace("Y",n.getFullYear().toString());e('[data-id="'+this.id+'"] .sign__element__content__applied').html("<span>"+i+"</span>"),t.prototype.applySingature.call(this)},n.prototype.trim=function(t){void 0===t&&(t=null);var n=e('[data-id="'+this.id+'"]'),i=n.find(".sign__element__content__applied");i.css("width","auto"),i.css("width",i.width()+"px"),n.css("width","auto"),n.css("width",n.width()+"px"),this.width=n.width()},n.prototype.initSelfsignedActions=function(t){var n=this;e("#"+t+" .sign__element__content__applied").on("dblclick",function(){n.selectFormat.select().then(function(e){n.applySingature()},function(e){})})},n.prototype.getData=function(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=t.prototype.getData.call(this,e,n);return 0==i.length?i:(i[0].content=this.content,i)},n.prototype.listenEventDateFormatChanged=function(){var e=this;window.addEventListener("dateFormatChanged",function(t){e.content=t.detail.format,e.applySingature()})},n}(o.ElementBase);t.ElementDate=l}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(){this.init()}return t.prototype.init=function(){},t.prototype.select=function(t){void 0===t&&(t=null),null==t&&(t=window.ilovepdfConfig.format);var n=this;return new Promise(function(i,r){n.showModal(),n.initElement(t),e("#confirmDateFormat").on("click",function(){n.hideModal();var o=e("input[name='dateFormat']:checked");0!=o.length?(t=o.val().toString(),window.ilovepdfConfig.dateFormat=t,n.sendEventDateFromatChanged(t),i(t)):r("cancelled")}),e("#cancelDateFormat").on("click",function(){n.hideModal(),r("cancelled")})})},t.prototype.initElement=function(t){e("input[name='dateFormat']").removeAttr("checked"),e("input[name='dateFormat'][val='"+t+"']").attr("checked","checked")},t.prototype.showModal=function(){e("#dateFormatModal").modal("show"),e(".modal-body").scrollTop(0)},t.prototype.hideModal=function(){e("#dateFormatModal").modal("hide"),e("#confirmDateFormat").off("click"),e("#cancelDateFormat").off("click")},t.prototype.sendEventDateFromatChanged=function(e){var t=new CustomEvent("dateFormatChanged",{detail:{format:e}});window.dispatchEvent(t)},t}();t.SelectDateFormat=n}).call(this,n(1))},function(e,t,n){"use strict";(function(e){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(142),a=n(78),s=function(t){function n(){var e=t.call(this)||this;return e.type="text-element",e.tipo="text-element",e.autoApply=!0,e.autoReviewApply=!0,e}return r(n,t),n.prototype.initSignActions=function(n){t.prototype.initSignActions.call(this,n),e("#"+n+" .sign__element__label").html()},n.prototype.initSelfsignedActions=function(n){var i=this;t.prototype.initSelfsignedActions.call(this,n);var r=e("#"+n+" .sign__element__content__applied"),o=e("#"+n),a=e("#"+n+" .sign__element__edit");e("#"+n+" .sign__element__edit, #"+n+" .sign__element__content__applied").on("click",function(){r.attr("contenteditable","true").focus(),r.addClass("edit"),a.hide()}),r.on("blur",function(){i.content=r.text(),o.css("width","auto"),a.show(),i.applySingature(),r.removeAttr("contenteditable").removeClass("edit")}).on("keypress",function(e){o.css("width","auto"),"Enter"===e.key&&e.preventDefault()}).on("keyup",function(e){o.css("width","auto"),i.sendEventElementChanged()})},n.prototype.initRequestActions=function(t){e("#"+t+" .sign__element__name").hide(),e("#"+t+" .sign__element__content").css("display","flex"),this.initSelfsignedActions(t)},n.prototype.initActions=function(n,i){var r=this;t.prototype.initSelfsignedActions.call(this,n);var o=e("#"+n+" .sign__element__name");e("#"+n+" "+i).on("click",function(){o.attr("contenteditable","true").focus(),o.addClass("edit")}),o.on("blur",function(){r.content=a.TextHelper.sanitize(a.TextHelper.stripTags(o.text())),r.applySingature(),o.removeAttr("contenteditable").removeClass("edit")}).on("keypress",function(e){"Enter"===e.key&&e.preventDefault()})},n.prototype.makeElement=function(t,n){var i=e(e("#textElementTemplate").html());return i.addClass(this.signer.colorClass),i.attr("data-id",this.id),i.attr("id",t),i.css({top:n.y,left:n.x,position:"absolute",height:"24px"}),this.content&&(i.find(".sign__element__label").html(this.content),i.find(".sign__element__content__applied").html(this.content)),this.addLinkedItems(i)},n.prototype.applySingature=function(){e('[data-id="'+this.id+'"] .sign__element__label').html(this.content),e('[data-id="'+this.id+'"] .sign__element__content__applied').html(this.content),t.prototype.applySingature.call(this)},n.prototype.getData=function(e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),!this.content||""==this.content)return[];var i=t.prototype.getData.call(this,e,n);return 0==i.length?i:(i[0].content=this.content,i[0].font_size=Math.round(this.fontSize*this.getDataRatio(e)),i[0].font_size_full=this.fontSize*this.getDataRatio(e),i[0].y+=(this.height-i[0].font_size)/3,i)},n.prototype.copyProperties=function(e){t.prototype.copyProperties.call(this,e),this.content=e.content},n.prototype.trim=function(t){void 0===t&&(t=null);var n=e('[data-id="'+this.id+'"]'),i=n.find(".sign__element__content__applied");i.css("width","auto"),i.css("width",i.width()+"px"),n.css("width","auto"),n.css("width",n.width()+"px"),this.width=n.width()},n}(o.ElementBase);t.ElementText=s}).call(this,n(1))},function(e,t,n){"use strict";(function(e){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(142),a=n(36),s=n(78),l=function(t){function n(){var e=t.call(this)||this;return e.type="input-element",e.tipo="input-element",e.autoApply=!1,e}return r(n,t),n.prototype.initSignActions=function(t){var n=this,i=e("#"+t);e("#"+t+" .sign__element__label").html(this.label),i.addClass("tooltip"),i.attr("data-title",this.description),a.Tooltip.init(i),i.on("click",function(){n.editContent().then(function(){n.applySingature()},function(){})})},n.prototype.initRequestActions=function(n){var i=this;t.prototype.initRequestActions.call(this,n),e("#"+n+" .sign__element__edit").on("click",function(){i.editLabel().then(function(){},function(){})})},n.prototype.makeElement=function(t,n){var i=e(e("#inputElementTemplate").html());return i.addClass(this.signer.colorClass),i.attr("data-id",this.id),i.attr("id",t),i.css({top:n.y,left:n.x,position:"absolute"}),this.label&&i.find(".sign__element__label").html(this.label),this.addLinkedItems(i)},n.prototype.edit=function(){return this.editLabel()},n.prototype.editLabel=function(){var t=this,n=this;return new Promise(function(i,r){e("#inputLabelValue").val(t.label),e("#inputLabelIndications").val(t.description),n.showLabelModal(),e("#cancelInputLabelBtn").on("click",function(t){t.preventDefault(),e("#confirmInputLabelBtn").off(),e("#cancelInputLabelBtn").off(),e("#inputLabelValue").off(),e("#inputLabelValue").removeClass("error").removeClass("shake"),n.hideLabelModal(),r()}),e("#inputLabelValue").on("change keydown",function(){e("#inputLabelValue").removeClass("error").removeClass("shake")}),e("#confirmInputLabelBtn").on("click",function(){var r=e("#inputLabelValue").val().toString();""!=r?(n.label=r,n.description=s.TextHelper.sanitize(s.TextHelper.stripTags(e("#inputLabelIndications").val().toString())),e("#confirmInputLabelBtn").off(),e("#cancelInputLabelBtn").off(),e('[data-id="'+t.id+'"] .sign__element__label').html(n.label),n.hideLabelModal(),n.sendEventElementChanged(),i()):e("#inputLabelValue").addClass("error").addClass("shake")})})},n.prototype.editContent=function(){var t=this,n=this;return new Promise(function(i,r){e("#inputFieldValue").val(t.content),n.showInputModal(),e("#inputFieldValue").on("keyup",function(){""!=e("#inputFieldValue").val()?e("#confirmInputFieldBtn").removeAttr("disabled"):e("#confirmInputFieldBtn").attr("disabled","true")}),e("#cancelInputFieldBtn").on("click",function(t){t.preventDefault(),e("#confirmInputFieldBtn").off(),e("#cancelInputFieldBtn").off(),n.hideInputModal(),r()}),e("#confirmInputFieldBtn").on("click",function(){n.content=e("#inputFieldValue").val().toString(),e("#confirmInputFieldBtn").off(),e("#cancelInputFieldBtn").off(),n.hideInputModal(),i()})})},n.prototype.showLabelModal=function(){e("#inputLabelModal").modal("show"),window.setTimeout(function(){e("#inputFieldValue").focus()},500)},n.prototype.saveLabel=function(){this.label=s.TextHelper.sanitize(s.TextHelper.stripTags(e("#inputLabelValue").val().toString()))},n.prototype.hideLabelModal=function(){e("#inputLabelModal").modal("hide")},n.prototype.showInputModal=function(){e("#inputFieldTitle").html(this.label),e("#inputFieldDescription").html(this.description),e("#inputFieldModal").modal("show")},n.prototype.hideInputModal=function(){e("#inputFieldModal").modal("hide")},n.prototype.applySingature=function(){t.prototype.applySingature.call(this),e('[data-id="'+this.id+'"] .sign__element__content__applied').html(this.content)},n.prototype.getData=function(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=t.prototype.getData.call(this,e,n);return 0==i.length?i:(i[0].info=JSON.stringify({label:this.label,description:this.description}),this.content&&(i[0].content=this.content),i)},n.prototype.copyProperties=function(e){t.prototype.copyProperties.call(this,e),this.label=e.label,this.content=e.content,this.description=e.description},n}(o.ElementBase);t.ElementInput=l}).call(this,n(1))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(277)},function(e,t,n){var i;i=function(e,t,n){"use strict";return function(){for(var i=[["Afghanistan (‫افغانستان‬‎)","af","93"],["Albania (Shqipëri)","al","355"],["Algeria (‫الجزائر‬‎)","dz","213"],["American Samoa","as","1",5,["684"]],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1",6,["264"]],["Antigua and Barbuda","ag","1",7,["268"]],["Argentina","ar","54"],["Armenia (Հայաստան)","am","374"],["Aruba","aw","297"],["Australia","au","61",0],["Austria (Österreich)","at","43"],["Azerbaijan (Azərbaycan)","az","994"],["Bahamas","bs","1",8,["242"]],["Bahrain (‫البحرين‬‎)","bh","973"],["Bangladesh (বাংলাদেশ)","bd","880"],["Barbados","bb","1",9,["246"]],["Belarus (Беларусь)","by","375"],["Belgium (België)","be","32"],["Belize","bz","501"],["Benin (Bénin)","bj","229"],["Bermuda","bm","1",10,["441"]],["Bhutan (འབྲུག)","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina (Босна и Херцеговина)","ba","387"],["Botswana","bw","267"],["Brazil (Brasil)","br","55"],["British Indian Ocean Territory","io","246"],["British Virgin Islands","vg","1",11,["284"]],["Brunei","bn","673"],["Bulgaria (България)","bg","359"],["Burkina Faso","bf","226"],["Burundi (Uburundi)","bi","257"],["Cambodia (កម្ពុជា)","kh","855"],["Cameroon (Cameroun)","cm","237"],["Canada","ca","1",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde (Kabu Verdi)","cv","238"],["Caribbean Netherlands","bq","599",1,["3","4","7"]],["Cayman Islands","ky","1",12,["345"]],["Central African Republic (République centrafricaine)","cf","236"],["Chad (Tchad)","td","235"],["Chile","cl","56"],["China (中国)","cn","86"],["Christmas Island","cx","61",2],["Cocos (Keeling) Islands","cc","61",1],["Colombia","co","57"],["Comoros (‫جزر القمر‬‎)","km","269"],["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)","cd","243"],["Congo (Republic) (Congo-Brazzaville)","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506"],["Côte d’Ivoire","ci","225"],["Croatia (Hrvatska)","hr","385"],["Cuba","cu","53"],["Curaçao","cw","599",0],["Cyprus (Κύπρος)","cy","357"],["Czech Republic (Česká republika)","cz","420"],["Denmark (Danmark)","dk","45"],["Djibouti","dj","253"],["Dominica","dm","1",13,["767"]],["Dominican Republic (República Dominicana)","do","1",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt (‫مصر‬‎)","eg","20"],["El Salvador","sv","503"],["Equatorial Guinea (Guinea Ecuatorial)","gq","240"],["Eritrea","er","291"],["Estonia (Eesti)","ee","372"],["Ethiopia","et","251"],["Falkland Islands (Islas Malvinas)","fk","500"],["Faroe Islands (Føroyar)","fo","298"],["Fiji","fj","679"],["Finland (Suomi)","fi","358",0],["France","fr","33"],["French Guiana (Guyane française)","gf","594"],["French Polynesia (Polynésie française)","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia (საქართველო)","ge","995"],["Germany (Deutschland)","de","49"],["Ghana (Gaana)","gh","233"],["Gibraltar","gi","350"],["Greece (Ελλάδα)","gr","30"],["Greenland (Kalaallit Nunaat)","gl","299"],["Grenada","gd","1",14,["473"]],["Guadeloupe","gp","590",0],["Guam","gu","1",15,["671"]],["Guatemala","gt","502"],["Guernsey","gg","44",1,["1481","7781","7839","7911"]],["Guinea (Guinée)","gn","224"],["Guinea-Bissau (Guiné Bissau)","gw","245"],["Guyana","gy","592"],["Haiti","ht","509"],["Honduras","hn","504"],["Hong Kong (香港)","hk","852"],["Hungary (Magyarország)","hu","36"],["Iceland (Ísland)","is","354"],["India (भारत)","in","91"],["Indonesia","id","62"],["Iran (‫ایران‬‎)","ir","98"],["Iraq (‫العراق‬‎)","iq","964"],["Ireland","ie","353"],["Isle of Man","im","44",2,["1624","74576","7524","7924","7624"]],["Israel (‫ישראל‬‎)","il","972"],["Italy (Italia)","it","39",0],["Jamaica","jm","1",4,["876","658"]],["Japan (日本)","jp","81"],["Jersey","je","44",3,["1534","7509","7700","7797","7829","7937"]],["Jordan (‫الأردن‬‎)","jo","962"],["Kazakhstan (Казахстан)","kz","7",1,["33","7"]],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait (‫الكويت‬‎)","kw","965"],["Kyrgyzstan (Кыргызстан)","kg","996"],["Laos (ລາວ)","la","856"],["Latvia (Latvija)","lv","371"],["Lebanon (‫لبنان‬‎)","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya (‫ليبيا‬‎)","ly","218"],["Liechtenstein","li","423"],["Lithuania (Lietuva)","lt","370"],["Luxembourg","lu","352"],["Macau (澳門)","mo","853"],["Macedonia (FYROM) (Македонија)","mk","389"],["Madagascar (Madagasikara)","mg","261"],["Malawi","mw","265"],["Malaysia","my","60"],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania (‫موريتانيا‬‎)","mr","222"],["Mauritius (Moris)","mu","230"],["Mayotte","yt","262",1,["269","639"]],["Mexico (México)","mx","52"],["Micronesia","fm","691"],["Moldova (Republica Moldova)","md","373"],["Monaco","mc","377"],["Mongolia (Монгол)","mn","976"],["Montenegro (Crna Gora)","me","382"],["Montserrat","ms","1",16,["664"]],["Morocco (‫المغرب‬‎)","ma","212",0],["Mozambique (Moçambique)","mz","258"],["Myanmar (Burma) (မြန်မာ)","mm","95"],["Namibia (Namibië)","na","264"],["Nauru","nr","674"],["Nepal (नेपाल)","np","977"],["Netherlands (Nederland)","nl","31"],["New Caledonia (Nouvelle-Calédonie)","nc","687"],["New Zealand","nz","64"],["Nicaragua","ni","505"],["Niger (Nijar)","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["North Korea (조선 민주주의 인민 공화국)","kp","850"],["Northern Mariana Islands","mp","1",17,["670"]],["Norway (Norge)","no","47",0],["Oman (‫عُمان‬‎)","om","968"],["Pakistan (‫پاکستان‬‎)","pk","92"],["Palau","pw","680"],["Palestine (‫فلسطين‬‎)","ps","970"],["Panama (Panamá)","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru (Perú)","pe","51"],["Philippines","ph","63"],["Poland (Polska)","pl","48"],["Portugal","pt","351"],["Puerto Rico","pr","1",3,["787","939"]],["Qatar (‫قطر‬‎)","qa","974"],["Réunion (La Réunion)","re","262",0],["Romania (România)","ro","40"],["Russia (Россия)","ru","7",0],["Rwanda","rw","250"],["Saint Barthélemy","bl","590",1],["Saint Helena","sh","290"],["Saint Kitts and Nevis","kn","1",18,["869"]],["Saint Lucia","lc","1",19,["758"]],["Saint Martin (Saint-Martin (partie française))","mf","590",2],["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)","pm","508"],["Saint Vincent and the Grenadines","vc","1",20,["784"]],["Samoa","ws","685"],["San Marino","sm","378"],["São Tomé and Príncipe (São Tomé e Príncipe)","st","239"],["Saudi Arabia (‫المملكة العربية السعودية‬‎)","sa","966"],["Senegal (Sénégal)","sn","221"],["Serbia (Србија)","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65"],["Sint Maarten","sx","1",21,["721"]],["Slovakia (Slovensko)","sk","421"],["Slovenia (Slovenija)","si","386"],["Solomon Islands","sb","677"],["Somalia (Soomaaliya)","so","252"],["South Africa","za","27"],["South Korea (대한민국)","kr","82"],["South Sudan (‫جنوب السودان‬‎)","ss","211"],["Spain (España)","es","34"],["Sri Lanka (ශ්‍රී ලංකාව)","lk","94"],["Sudan (‫السودان‬‎)","sd","249"],["Suriname","sr","597"],["Svalbard and Jan Mayen","sj","47",1,["79"]],["Swaziland","sz","268"],["Sweden (Sverige)","se","46"],["Switzerland (Schweiz)","ch","41"],["Syria (‫سوريا‬‎)","sy","963"],["Taiwan (台灣)","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand (ไทย)","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1",22,["868"]],["Tunisia (‫تونس‬‎)","tn","216"],["Turkey (Türkiye)","tr","90"],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1",23,["649"]],["Tuvalu","tv","688"],["U.S. Virgin Islands","vi","1",24,["340"]],["Uganda","ug","256"],["Ukraine (Україна)","ua","380"],["United Arab Emirates (‫الإمارات العربية المتحدة‬‎)","ae","971"],["United Kingdom","gb","44",0],["United States","us","1",0],["Uruguay","uy","598"],["Uzbekistan (Oʻzbekiston)","uz","998"],["Vanuatu","vu","678"],["Vatican City (Città del Vaticano)","va","39",1,["06698"]],["Venezuela","ve","58"],["Vietnam (Việt Nam)","vn","84"],["Wallis and Futuna (Wallis-et-Futuna)","wf","681"],["Western Sahara (‫الصحراء الغربية‬‎)","eh","212",1,["5288","5289"]],["Yemen (‫اليمن‬‎)","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"],["Åland Islands","ax","358",1,["18"]]],r=0;r<i.length;r++){var o=i[r];i[r]={name:o[0],iso2:o[1],dialCode:o[2],priority:o[3]||0,areaCodes:o[4]||null}}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.intlTelInputGlobals={getInstance:function(t){var n=t.getAttribute("data-intl-tel-input-id");return e.intlTelInputGlobals.instances[n]},instances:{}};var s=0,l={allowDropdown:!0,autoHideDialCode:!0,autoPlaceholder:"polite",customContainer:"",customPlaceholder:null,dropdownContainer:null,excludeCountries:[],formatOnDisplay:!0,geoIpLookup:null,hiddenInput:"",initialCountry:"",localizedCountries:null,nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",preferredCountries:["us","gb"],separateDialCode:!1,utilsScript:""},c=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"];e.addEventListener("load",function(){e.intlTelInputGlobals.windowLoaded=!0});var u=function(e,t){for(var n=Object.keys(e),i=0;i<n.length;i++)t(n[i],e[n[i]])},d=function(t){u(e.intlTelInputGlobals.instances,function(n){e.intlTelInputGlobals.instances[n][t]()})},p=function(){function r(e,t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.id=s++,this.telInput=e,this.activeItem=null,this.highlightedItem=null;var i=t||{};this.options={},u(l,function(e,t){n.options[e]=i.hasOwnProperty(e)?i[e]:t}),this.hadInitialPlaceholder=Boolean(e.getAttribute("placeholder"))}return function(e,t,n){t&&a(e.prototype,t);n&&a(e,n)}(r,[{key:"_init",value:function(){var e=this;if(this.options.nationalMode&&(this.options.autoHideDialCode=!1),this.options.separateDialCode&&(this.options.autoHideDialCode=this.options.nationalMode=!1),this.isMobile=/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.isMobile&&(t.body.classList.add("iti-mobile"),this.options.dropdownContainer||(this.options.dropdownContainer=t.body)),"undefined"!=typeof Promise){var n=new Promise(function(t,n){e.resolveAutoCountryPromise=t,e.rejectAutoCountryPromise=n}),i=new Promise(function(t,n){e.resolveUtilsScriptPromise=t,e.rejectUtilsScriptPromise=n});this.promise=Promise.all([n,i])}else this.resolveAutoCountryPromise=this.rejectAutoCountryPromise=function(){},this.resolveUtilsScriptPromise=this.rejectUtilsScriptPromise=function(){};this.selectedCountryData={},this._processCountryData(),this._generateMarkup(),this._setInitialState(),this._initListeners(),this._initRequests()}},{key:"_processCountryData",value:function(){this._processAllCountries(),this._processCountryCodes(),this._processPreferredCountries(),this.options.localizedCountries&&this._translateCountriesByLocale(),(this.options.onlyCountries.length||this.options.localizedCountries)&&this.countries.sort(this._countryNameSort)}},{key:"_addCountryCode",value:function(e,t,i){t.length>this.dialCodeMaxLen&&(this.dialCodeMaxLen=t.length),this.countryCodes.hasOwnProperty(t)||(this.countryCodes[t]=[]);for(var r=0;r<this.countryCodes[t].length;r++)if(this.countryCodes[t][r]===e)return;var o=i!==n?i:this.countryCodes[t].length;this.countryCodes[t][o]=e}},{key:"_processAllCountries",value:function(){if(this.options.onlyCountries.length){var e=this.options.onlyCountries.map(function(e){return e.toLowerCase()});this.countries=i.filter(function(t){return e.indexOf(t.iso2)>-1})}else if(this.options.excludeCountries.length){var t=this.options.excludeCountries.map(function(e){return e.toLowerCase()});this.countries=i.filter(function(e){return-1===t.indexOf(e.iso2)})}else this.countries=i}},{key:"_translateCountriesByLocale",value:function(){for(var e=0;e<this.countries.length;e++){var t=this.countries[e].iso2.toLowerCase();this.options.localizedCountries.hasOwnProperty(t)&&(this.countries[e].name=this.options.localizedCountries[t])}}},{key:"_countryNameSort",value:function(e,t){return e.name.localeCompare(t.name)}},{key:"_processCountryCodes",value:function(){this.dialCodeMaxLen=0,this.countryCodes={};for(var e=0;e<this.countries.length;e++){var t=this.countries[e];this._addCountryCode(t.iso2,t.dialCode,t.priority)}for(var n=0;n<this.countries.length;n++){var i=this.countries[n];if(i.areaCodes)for(var r=this.countryCodes[i.dialCode][0],o=0;o<i.areaCodes.length;o++){for(var a=i.areaCodes[o],s=1;s<a.length;s++){var l=i.dialCode+a.substr(0,s);this._addCountryCode(r,l),this._addCountryCode(i.iso2,l)}this._addCountryCode(i.iso2,i.dialCode+a)}}}},{key:"_processPreferredCountries",value:function(){this.preferredCountries=[];for(var e=0;e<this.options.preferredCountries.length;e++){var t=this.options.preferredCountries[e].toLowerCase(),n=this._getCountryData(t,!1,!0);n&&this.preferredCountries.push(n)}}},{key:"_createEl",value:function(e,n,i){var r=t.createElement(e);return n&&u(n,function(e,t){return r.setAttribute(e,t)}),i&&i.appendChild(r),r}},{key:"_generateMarkup",value:function(){this.telInput.setAttribute("autocomplete","off");var e="iti";this.options.allowDropdown&&(e+=" iti--allow-dropdown"),this.options.separateDialCode&&(e+=" iti--separate-dial-code"),this.options.customContainer&&(e+=" ",e+=this.options.customContainer);var t=this._createEl("div",{class:e});if(this.telInput.parentNode.insertBefore(t,this.telInput),this.flagsContainer=this._createEl("div",{class:"iti__flag-container"},t),t.appendChild(this.telInput),this.selectedFlag=this._createEl("div",{class:"iti__selected-flag",role:"combobox","aria-owns":"country-listbox"},this.flagsContainer),this.selectedFlagInner=this._createEl("div",{class:"iti__flag"},this.selectedFlag),this.options.separateDialCode&&(this.selectedDialCode=this._createEl("div",{class:"iti__selected-dial-code"},this.selectedFlag)),this.options.allowDropdown&&(this.selectedFlag.setAttribute("tabindex","0"),this.dropdownArrow=this._createEl("div",{class:"iti__arrow"},this.selectedFlag),this.countryList=this._createEl("ul",{class:"iti__country-list iti__hide",id:"country-listbox","aria-expanded":"false",role:"listbox"}),this.preferredCountries.length&&(this._appendListItems(this.preferredCountries,"iti__preferred"),this._createEl("li",{class:"iti__divider",role:"separator","aria-disabled":"true"},this.countryList)),this._appendListItems(this.countries,"iti__standard"),this.options.dropdownContainer?(this.dropdown=this._createEl("div",{class:"iti iti--container"}),this.dropdown.appendChild(this.countryList)):this.flagsContainer.appendChild(this.countryList)),this.options.hiddenInput){var n=this.options.hiddenInput,i=this.telInput.getAttribute("name");if(i){var r=i.lastIndexOf("[");-1!==r&&(n="".concat(i.substr(0,r),"[").concat(n,"]"))}this.hiddenInput=this._createEl("input",{type:"hidden",name:n}),t.appendChild(this.hiddenInput)}}},{key:"_appendListItems",value:function(e,t){for(var n="",i=0;i<e.length;i++){var r=e[i];n+="<li class='iti__country ".concat(t,"' tabIndex='-1' id='iti-item-").concat(r.iso2,"' role='option' data-dial-code='").concat(r.dialCode,"' data-country-code='").concat(r.iso2,"'>"),n+="<div class='iti__flag-box'><div class='iti__flag iti__".concat(r.iso2,"'></div></div>"),n+="<span class='iti__country-name'>".concat(r.name,"</span>"),n+="<span class='iti__dial-code'>+".concat(r.dialCode,"</span>"),n+="</li>"}this.countryList.insertAdjacentHTML("beforeend",n)}},{key:"_setInitialState",value:function(){var e=this.telInput.value,t=this._getDialCode(e),n=this._isRegionlessNanp(e),i=this.options,r=i.initialCountry,o=i.nationalMode,a=i.autoHideDialCode,s=i.separateDialCode;t&&!n?this._updateFlagFromNumber(e):"auto"!==r&&(r?this._setFlag(r.toLowerCase()):t&&n?this._setFlag("us"):(this.defaultCountry=this.preferredCountries.length?this.preferredCountries[0].iso2:this.countries[0].iso2,e||this._setFlag(this.defaultCountry)),e||o||a||s||(this.telInput.value="+".concat(this.selectedCountryData.dialCode))),e&&this._updateValFromNumber(e)}},{key:"_initListeners",value:function(){this._initKeyListeners(),this.options.autoHideDialCode&&this._initBlurListeners(),this.options.allowDropdown&&this._initDropdownListeners(),this.hiddenInput&&this._initHiddenInputListener()}},{key:"_initHiddenInputListener",value:function(){var e=this;this._handleHiddenInputSubmit=function(){e.hiddenInput.value=e.getNumber()},this.telInput.form&&this.telInput.form.addEventListener("submit",this._handleHiddenInputSubmit)}},{key:"_getClosestLabel",value:function(){for(var e=this.telInput;e&&"LABEL"!==e.tagName;)e=e.parentNode;return e}},{key:"_initDropdownListeners",value:function(){var e=this;this._handleLabelClick=function(t){e.countryList.classList.contains("iti__hide")?e.telInput.focus():t.preventDefault()};var t=this._getClosestLabel();t&&t.addEventListener("click",this._handleLabelClick),this._handleClickSelectedFlag=function(){!e.countryList.classList.contains("iti__hide")||e.telInput.disabled||e.telInput.readOnly||e._showDropdown()},this.selectedFlag.addEventListener("click",this._handleClickSelectedFlag),this._handleFlagsContainerKeydown=function(t){var n=e.countryList.classList.contains("iti__hide");n&&-1!==["ArrowUp","Up","ArrowDown","Down"," ","Enter"].indexOf(t.key)&&(t.preventDefault(),t.stopPropagation(),e._showDropdown()),"Tab"===t.key&&e._closeDropdown()},this.flagsContainer.addEventListener("keydown",this._handleFlagsContainerKeydown)}},{key:"_initRequests",value:function(){var t=this;this.options.utilsScript&&!e.intlTelInputUtils?e.intlTelInputGlobals.windowLoaded?e.intlTelInputGlobals.loadUtils(this.options.utilsScript):e.addEventListener("load",function(){e.intlTelInputGlobals.loadUtils(t.options.utilsScript)}):this.resolveUtilsScriptPromise(),"auto"===this.options.initialCountry?this._loadAutoCountry():this.resolveAutoCountryPromise()}},{key:"_loadAutoCountry",value:function(){e.intlTelInputGlobals.autoCountry?this.handleAutoCountry():e.intlTelInputGlobals.startedLoadingAutoCountry||(e.intlTelInputGlobals.startedLoadingAutoCountry=!0,"function"==typeof this.options.geoIpLookup&&this.options.geoIpLookup(function(t){e.intlTelInputGlobals.autoCountry=t.toLowerCase(),setTimeout(function(){return d("handleAutoCountry")})},function(){return d("rejectAutoCountryPromise")}))}},{key:"_initKeyListeners",value:function(){var e=this;this._handleKeyupEvent=function(){e._updateFlagFromNumber(e.telInput.value)&&e._triggerCountryChange()},this.telInput.addEventListener("keyup",this._handleKeyupEvent),this._handleClipboardEvent=function(){setTimeout(e._handleKeyupEvent)},this.telInput.addEventListener("cut",this._handleClipboardEvent),this.telInput.addEventListener("paste",this._handleClipboardEvent)}},{key:"_cap",value:function(e){var t=this.telInput.getAttribute("maxlength");return t&&e.length>t?e.substr(0,t):e}},{key:"_initBlurListeners",value:function(){var e=this;this._handleSubmitOrBlurEvent=function(){e._removeEmptyDialCode()},this.telInput.form&&this.telInput.form.addEventListener("submit",this._handleSubmitOrBlurEvent),this.telInput.addEventListener("blur",this._handleSubmitOrBlurEvent)}},{key:"_removeEmptyDialCode",value:function(){if("+"===this.telInput.value.charAt(0)){var e=this._getNumeric(this.telInput.value);e&&this.selectedCountryData.dialCode!==e||(this.telInput.value="")}}},{key:"_getNumeric",value:function(e){return e.replace(/\D/g,"")}},{key:"_trigger",value:function(e){var n=t.createEvent("Event");n.initEvent(e,!0,!0),this.telInput.dispatchEvent(n)}},{key:"_showDropdown",value:function(){this.countryList.classList.remove("iti__hide"),this.countryList.setAttribute("aria-expanded","true"),this._setDropdownPosition(),this.activeItem&&(this._highlightListItem(this.activeItem,!1),this._scrollTo(this.activeItem,!0)),this._bindDropdownListeners(),this.dropdownArrow.classList.add("iti__arrow--up"),this._trigger("open:countrydropdown")}},{key:"_toggleClass",value:function(e,t,n){n&&!e.classList.contains(t)?e.classList.add(t):!n&&e.classList.contains(t)&&e.classList.remove(t)}},{key:"_setDropdownPosition",value:function(){var n=this;if(this.options.dropdownContainer&&this.options.dropdownContainer.appendChild(this.dropdown),!this.isMobile){var i=this.telInput.getBoundingClientRect(),r=e.pageYOffset||t.documentElement.scrollTop,o=i.top+r,a=this.countryList.offsetHeight,s=o+this.telInput.offsetHeight+a<r+e.innerHeight,l=o-a>r;if(this._toggleClass(this.countryList,"iti__country-list--dropup",!s&&l),this.options.dropdownContainer){var c=!s&&l?0:this.telInput.offsetHeight;this.dropdown.style.top="".concat(o+c,"px"),this.dropdown.style.left="".concat(i.left+t.body.scrollLeft,"px"),this._handleWindowScroll=function(){return n._closeDropdown()},e.addEventListener("scroll",this._handleWindowScroll)}}}},{key:"_getClosestListItem",value:function(e){for(var t=e;t&&t!==this.countryList&&!t.classList.contains("iti__country");)t=t.parentNode;return t===this.countryList?null:t}},{key:"_bindDropdownListeners",value:function(){var e=this;this._handleMouseoverCountryList=function(t){var n=e._getClosestListItem(t.target);n&&e._highlightListItem(n,!1)},this.countryList.addEventListener("mouseover",this._handleMouseoverCountryList),this._handleClickCountryList=function(t){var n=e._getClosestListItem(t.target);n&&e._selectListItem(n)},this.countryList.addEventListener("click",this._handleClickCountryList);var n=!0;this._handleClickOffToClose=function(){n||e._closeDropdown(),n=!1},t.documentElement.addEventListener("click",this._handleClickOffToClose);var i="",r=null;this._handleKeydownOnDropdown=function(t){t.preventDefault(),"ArrowUp"===t.key||"Up"===t.key||"ArrowDown"===t.key||"Down"===t.key?e._handleUpDownKey(t.key):"Enter"===t.key?e._handleEnterKey():"Escape"===t.key?e._closeDropdown():/^[a-zA-ZÀ-ÿ ]$/.test(t.key)&&(r&&clearTimeout(r),i+=t.key.toLowerCase(),e._searchForCountry(i),r=setTimeout(function(){i=""},1e3))},t.addEventListener("keydown",this._handleKeydownOnDropdown)}},{key:"_handleUpDownKey",value:function(e){var t="ArrowUp"===e||"Up"===e?this.highlightedItem.previousElementSibling:this.highlightedItem.nextElementSibling;t&&(t.classList.contains("iti__divider")&&(t="ArrowUp"===e||"Up"===e?t.previousElementSibling:t.nextElementSibling),this._highlightListItem(t,!0))}},{key:"_handleEnterKey",value:function(){this.highlightedItem&&this._selectListItem(this.highlightedItem)}},{key:"_searchForCountry",value:function(e){for(var t=0;t<this.countries.length;t++)if(this._startsWith(this.countries[t].name,e)){var n=this.countryList.querySelector("#iti-item-".concat(this.countries[t].iso2));this._highlightListItem(n,!1),this._scrollTo(n,!0);break}}},{key:"_startsWith",value:function(e,t){return e.substr(0,t.length).toLowerCase()===t}},{key:"_updateValFromNumber",value:function(t){var n=t;if(this.options.formatOnDisplay&&e.intlTelInputUtils&&this.selectedCountryData){var i=!this.options.separateDialCode&&(this.options.nationalMode||"+"!==n.charAt(0)),r=intlTelInputUtils.numberFormat,o=r.NATIONAL,a=r.INTERNATIONAL,s=i?o:a;n=intlTelInputUtils.formatNumber(n,this.selectedCountryData.iso2,s)}n=this._beforeSetNumber(n),this.telInput.value=n}},{key:"_updateFlagFromNumber",value:function(e){var t=e,n=this.selectedCountryData.dialCode,i="1"===n;t&&this.options.nationalMode&&i&&"+"!==t.charAt(0)&&("1"!==t.charAt(0)&&(t="1".concat(t)),t="+".concat(t)),this.options.separateDialCode&&n&&"+"!==t.charAt(0)&&(t="+".concat(n).concat(t));var r=this._getDialCode(t),o=this._getNumeric(t),a=null;if(r){var s=this.countryCodes[this._getNumeric(r)],l=-1!==s.indexOf(this.selectedCountryData.iso2)&&o.length<=r.length-1,c="1"===n&&this._isRegionlessNanp(o);if(!c&&!l)for(var u=0;u<s.length;u++)if(s[u]){a=s[u];break}}else"+"===t.charAt(0)&&o.length?a="":t&&"+"!==t||(a=this.defaultCountry);return null!==a&&this._setFlag(a)}},{key:"_isRegionlessNanp",value:function(e){var t=this._getNumeric(e);if("1"===t.charAt(0)){var n=t.substr(1,3);return-1!==c.indexOf(n)}return!1}},{key:"_highlightListItem",value:function(e,t){var n=this.highlightedItem;n&&n.classList.remove("iti__highlight"),this.highlightedItem=e,this.highlightedItem.classList.add("iti__highlight"),t&&this.highlightedItem.focus()}},{key:"_getCountryData",value:function(e,t,n){for(var r=t?i:this.countries,o=0;o<r.length;o++)if(r[o].iso2===e)return r[o];if(n)return null;throw new Error("No country data for '".concat(e,"'"))}},{key:"_setFlag",value:function(e){var t=this.selectedCountryData.iso2?this.selectedCountryData:{};this.selectedCountryData=e?this._getCountryData(e,!1,!1):{},this.selectedCountryData.iso2&&(this.defaultCountry=this.selectedCountryData.iso2),this.selectedFlagInner.setAttribute("class","iti__flag iti__".concat(e));var n=e?"".concat(this.selectedCountryData.name,": +").concat(this.selectedCountryData.dialCode):"Unknown";if(this.selectedFlag.setAttribute("title",n),this.options.separateDialCode){var i=this.selectedCountryData.dialCode?"+".concat(this.selectedCountryData.dialCode):"";this.selectedDialCode.innerHTML=i;var r=this.selectedFlag.offsetWidth||this._getHiddenSelectedFlagWidth();this.telInput.style.paddingLeft="".concat(r+6,"px")}if(this._updatePlaceholder(),this.options.allowDropdown){var o=this.activeItem;if(o&&(o.classList.remove("iti__active"),o.setAttribute("aria-selected","false")),e){var a=this.countryList.querySelector("#iti-item-".concat(e));a.setAttribute("aria-selected","true"),a.classList.add("iti__active"),this.activeItem=a,this.countryList.setAttribute("aria-activedescendant",a.getAttribute("id"))}}return t.iso2!==e}},{key:"_getHiddenSelectedFlagWidth",value:function(){var e=this.telInput.parentNode.cloneNode();e.style.visibility="hidden",t.body.appendChild(e);var n=this.selectedFlag.cloneNode(!0);e.appendChild(n);var i=n.offsetWidth;return e.parentNode.removeChild(e),i}},{key:"_updatePlaceholder",value:function(){var t="aggressive"===this.options.autoPlaceholder||!this.hadInitialPlaceholder&&"polite"===this.options.autoPlaceholder;if(e.intlTelInputUtils&&t){var n=intlTelInputUtils.numberType[this.options.placeholderNumberType],i=this.selectedCountryData.iso2?intlTelInputUtils.getExampleNumber(this.selectedCountryData.iso2,this.options.nationalMode,n):"";i=this._beforeSetNumber(i),"function"==typeof this.options.customPlaceholder&&(i=this.options.customPlaceholder(i,this.selectedCountryData)),this.telInput.setAttribute("placeholder",i)}}},{key:"_selectListItem",value:function(e){var t=this._setFlag(e.getAttribute("data-country-code"));this._closeDropdown(),this._updateDialCode(e.getAttribute("data-dial-code"),!0),this.telInput.focus();var n=this.telInput.value.length;this.telInput.setSelectionRange(n,n),t&&this._triggerCountryChange()}},{key:"_closeDropdown",value:function(){this.countryList.classList.add("iti__hide"),this.countryList.setAttribute("aria-expanded","false"),this.dropdownArrow.classList.remove("iti__arrow--up"),t.removeEventListener("keydown",this._handleKeydownOnDropdown),t.documentElement.removeEventListener("click",this._handleClickOffToClose),this.countryList.removeEventListener("mouseover",this._handleMouseoverCountryList),this.countryList.removeEventListener("click",this._handleClickCountryList),this.options.dropdownContainer&&(this.isMobile||e.removeEventListener("scroll",this._handleWindowScroll),this.dropdown.parentNode&&this.dropdown.parentNode.removeChild(this.dropdown)),this._trigger("close:countrydropdown")}},{key:"_scrollTo",value:function(n,i){var r=this.countryList,o=e.pageYOffset||t.documentElement.scrollTop,a=r.offsetHeight,s=r.getBoundingClientRect().top+o,l=s+a,c=n.offsetHeight,u=n.getBoundingClientRect().top+o,d=u+c,p=u-s+r.scrollTop,f=a/2-c/2;if(u<s)i&&(p-=f),r.scrollTop=p;else if(d>l){i&&(p+=f);var h=a-c;r.scrollTop=p-h}}},{key:"_updateDialCode",value:function(e,t){var n,i=this.telInput.value,r="+".concat(e);if("+"===i.charAt(0)){var o=this._getDialCode(i);n=o?i.replace(o,r):r}else{if(this.options.nationalMode||this.options.separateDialCode)return;if(i)n=r+i;else{if(!t&&this.options.autoHideDialCode)return;n=r}}this.telInput.value=n}},{key:"_getDialCode",value:function(e){var t="";if("+"===e.charAt(0))for(var n="",i=0;i<e.length;i++){var r=e.charAt(i);if(!isNaN(parseInt(r,10))&&(n+=r,this.countryCodes[n]&&(t=e.substr(0,i+1)),n.length===this.dialCodeMaxLen))break}return t}},{key:"_getFullNumber",value:function(){var e=this.telInput.value.trim(),t=this.selectedCountryData.dialCode,n=this._getNumeric(e);return(this.options.separateDialCode&&"+"!==e.charAt(0)&&t&&n?"+".concat(t):"")+e}},{key:"_beforeSetNumber",value:function(e){var t=e;if(this.options.separateDialCode){var n=this._getDialCode(t);if(n){n="+".concat(this.selectedCountryData.dialCode);var i=" "===t[n.length]||"-"===t[n.length]?n.length+1:n.length;t=t.substr(i)}}return this._cap(t)}},{key:"_triggerCountryChange",value:function(){this._trigger("countrychange")}},{key:"handleAutoCountry",value:function(){"auto"===this.options.initialCountry&&(this.defaultCountry=e.intlTelInputGlobals.autoCountry,this.telInput.value||this.setCountry(this.defaultCountry),this.resolveAutoCountryPromise())}},{key:"handleUtils",value:function(){e.intlTelInputUtils&&(this.telInput.value&&this._updateValFromNumber(this.telInput.value),this._updatePlaceholder()),this.resolveUtilsScriptPromise()}},{key:"destroy",value:function(){var t=this.telInput.form;if(this.options.allowDropdown){this._closeDropdown(),this.selectedFlag.removeEventListener("click",this._handleClickSelectedFlag),this.flagsContainer.removeEventListener("keydown",this._handleFlagsContainerKeydown);var n=this._getClosestLabel();n&&n.removeEventListener("click",this._handleLabelClick)}this.hiddenInput&&t&&t.removeEventListener("submit",this._handleHiddenInputSubmit),this.options.autoHideDialCode&&(t&&t.removeEventListener("submit",this._handleSubmitOrBlurEvent),this.telInput.removeEventListener("blur",this._handleSubmitOrBlurEvent)),this.telInput.removeEventListener("keyup",this._handleKeyupEvent),this.telInput.removeEventListener("cut",this._handleClipboardEvent),this.telInput.removeEventListener("paste",this._handleClipboardEvent),this.telInput.removeAttribute("data-intl-tel-input-id");var i=this.telInput.parentNode;i.parentNode.insertBefore(this.telInput,i),i.parentNode.removeChild(i),delete e.intlTelInputGlobals.instances[this.id]}},{key:"getExtension",value:function(){return e.intlTelInputUtils?intlTelInputUtils.getExtension(this._getFullNumber(),this.selectedCountryData.iso2):""}},{key:"getNumber",value:function(t){if(e.intlTelInputUtils){var n=this.selectedCountryData.iso2;return intlTelInputUtils.formatNumber(this._getFullNumber(),n,t)}return""}},{key:"getNumberType",value:function(){return e.intlTelInputUtils?intlTelInputUtils.getNumberType(this._getFullNumber(),this.selectedCountryData.iso2):-99}},{key:"getSelectedCountryData",value:function(){return this.selectedCountryData}},{key:"getValidationError",value:function(){if(e.intlTelInputUtils){var t=this.selectedCountryData.iso2;return intlTelInputUtils.getValidationError(this._getFullNumber(),t)}return-99}},{key:"isValidNumber",value:function(){var t=this._getFullNumber().trim(),n=this.options.nationalMode?this.selectedCountryData.iso2:"";return e.intlTelInputUtils?intlTelInputUtils.isValidNumber(t,n):null}},{key:"setCountry",value:function(e){var t=e.toLowerCase();this.selectedFlagInner.classList.contains("iti__".concat(t))||(this._setFlag(t),this._updateDialCode(this.selectedCountryData.dialCode,!1),this._triggerCountryChange())}},{key:"setNumber",value:function(e){var t=this._updateFlagFromNumber(e);this._updateValFromNumber(e),t&&this._triggerCountryChange()}},{key:"setPlaceholderNumberType",value:function(e){this.options.placeholderNumberType=e,this._updatePlaceholder()}}]),r}();e.intlTelInputGlobals.getCountryData=function(){return i};var f=function(e,n,i){var r=t.createElement("script");r.onload=function(){d("handleUtils"),n&&n()},r.onerror=function(){d("rejectUtilsScriptPromise"),i&&i()},r.className="iti-load-utils",r.async=!0,r.src=e,t.body.appendChild(r)};return e.intlTelInputGlobals.loadUtils=function(t){if(!e.intlTelInputUtils&&!e.intlTelInputGlobals.startedLoadingUtilsScript){if(e.intlTelInputGlobals.startedLoadingUtilsScript=!0,"undefined"!=typeof Promise)return new Promise(function(e,n){return f(t,e,n)});f(t)}return null},e.intlTelInputGlobals.defaults=l,e.intlTelInputGlobals.version="16.0.8",function(t,n){var i=new p(t,n);return i._init(),t.setAttribute("data-intl-tel-input-id",i.id),e.intlTelInputGlobals.instances[i.id]=i,i}}()}(window,document),e.exports?e.exports=i:window.intlTelInput=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(16),r=function(){function e(){this.usersWithSmsValidation=0}return e.setReceivers=function(e){var t=e.reduce(function(e,t){return t.isSmsValidationEnabled()?e+1:e},0);this.instance.usersWithSmsValidation=t},Object.defineProperty(e,"info",{get:function(){var e=this.numUsersWithSmsValidation,t=this.ownedSmsValidations;return{numUsersWithSmsValidation:e,ownedSmsValidations:t,needed:this.needed,doesUserHaveEnoughSmsValidations:this.doesUserHaveEnoughSmsValidations(),ownsAtLeastOneValidation:t>0}},enumerable:!0,configurable:!0}),e.clear=function(){this.instance.usersWithSmsValidation=0},e.doesUserHaveEnoughSmsValidations=function(){return e.ownedSmsValidations>=this.instance.numUsersWithSmsValidation},Object.defineProperty(e,"needed",{get:function(){return this.instance.numUsersWithSmsValidation},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numUsersWithSmsValidation",{get:function(){return this.instance.numUsersWithSmsValidation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numUsersWithSmsValidation",{get:function(){return this.usersWithSmsValidation},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ownedSmsValidations",{get:function(){if(!i.UserModel.isLoggedIn())throw"Impossible to know if user owns sms validations unless user is logged in";var e=i.UserModel.get();if(!("sms_left"in e))throw"User is missing attribute 'sms_left'";if("number"!=typeof e.sms_left)throw"User.sms_left is not a number";return e.sms_left},enumerable:!0,configurable:!0}),Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e}();t.SmsPurchaseManager=r},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(){}return t.set=function(t){var n=this;this.uploadInterval&&(clearInterval(this.uploadInterval),this.uploadInterval=null),this.uploadInterval=setInterval(function(){var i=0,r=0,o=0;e.each(t.files,function(e,t){100==t.percent&&r++,o++,i+=t.percent}),e(".uploading__bar--small .uploading__bar__completed").css("width",i/o+"%"),o>0&&(e(".uploading__bar--small").show(),e(".uploading__status__percent").show()),r==o&&(window.setTimeout(function(){e(".uploading__bar--small").hide()},1e3),clearInterval(n.uploadInterval))},100)},t.uploadInterval=null,t}();t.UploaderStatus=n}).call(this,n(1))},,,,,,,,,,function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(173),r=n(361),o=n(36),a=n(163),s=n(16),l=n(196),c=n(9),u=n(221),d=n(223),p=n(363),f=n(278),h=function(){function n(t){var n=this;this._onCancelReceivers=function(){0==n.receivers.length&&(n.receiverItems=[],n.sendEventReceiversCancel()),n.hideModal()},this._onConfirmReceivers=function(){!0===n.validate()&&(n.save(),n.saveToStorage(),e("#cancelReceiver").show(),e("#signersPanel").show(),e("#groupsPanel").show(),e("#elementsPanel").show(),n.printSignersSidebar(),n.hideModal(),n.sendEventReceiversChanged(),n.sendEventReceiversConfirmed(),l.default.setViewed("receiverStepDone"),window.setTimeout(function(){e(".editor__page").length>0&&l.default.showStep("dragStep",e("#sidebar"),"left")},1e3))},this.receivers=[],this.receiverItems=[],this.sortableElement="receiverList",this.batchMode=!1,this.api=t,this.init(),this.initModalReciversActions(),this.initRequestConfig(),this.listenEventReceiversAdded(),this.listenEventReceiversItemRemoved(),this.listenEventReceiversItemChanged()}return n.prototype.saveToStorage=function(){a.Storage.set("sign.receivers",this.receivers)},n.prototype.nextColor=function(){},n.prototype.loadFromStorage=function(){var e=this;a.Storage.get("sign.receivers").forEach(function(t){e.receivers.push(new i.ReceiverModel(t))}),this.printSignersSidebar(),this.sendEventReceiversChanged()},n.prototype.loadFromTemplate=function(t){var n=this;this.fromTemplate=!0,this.batchMode="batch"==t.mode,t.signers.forEach(function(e){e.colorClass="file"+e.letter_color,n.receivers.push(new i.ReceiverModel(e))}),this.printSignersSidebar(),this.sendEventReceiversChanged(),this.configManager.setFromTemplate(t),e("#addReceiver").remove(),e("#cancelReceiver").hide()},n.prototype.showOrderMode=function(){if(1==e(".receiver-list__item").length)return e("#orderCheckbox").attr("disabled","disabled"),void e("#orderOption").parent().find(".receiver__setting__content").addClass("disabled");e("#orderCheckbox").removeAttr("disabled"),e("#orderOption").parent().find(".receiver__setting__content").removeClass("disabled")},n.prototype.loadFromUser=function(){var e=null;if(1==s.UserModel.isUser()){var t=s.UserModel.get();e=new i.ReceiverModel({email:t.email,name:t.name,type:"signer"})}else e=new i.ReceiverModel({email:"",name:"",type:"signer"});this.receivers.push(e),this.sendEventReceiversChanged()},n.prototype.init=function(){var t=this;this.brandLogoManager=new d.default(this.api),this.checkConfirmReceiverBtn(),e("#addReceiver").on("click",function(){t.addReceiverItem(),l.default.showTip("validationsTip",e(".receiver__action").first(),"top")}),e(document).on("keydown",".receiver__type select",function(n){if(9==n.keyCode||9===n.which)if(n.shiftKey);else if(n.target==e(".receiver__type select").last()[0])return t.addReceiverItem(),!1})},n.prototype.initWindowClickListener=function(){},n.prototype.initModalReciversActions=function(){var t=this;e("#cancelReceiver").on("click",this._onCancelReceivers),e("#editReceivers").on("click",function(){t.showModal()}),e("#confirmReceiver").on("click",this._onConfirmReceivers)},n.prototype.initRequestConfig=function(){var t=this;this.configManager=new u.SignConfigManager,this.configManager.init();var n=e("#orderCheckbox"),i=e("#orderOption").parent().find(".receiver__setting__content");n.on("change",function(){1==n.is(":checked")&&0==e("#multipleCheckbox").is(":checked")?t.enableSortable():t.disableSortable()});var r=e("#multipleCheckbox");r.off("change"),r.on("change",function(){if(r.is(":checked")){t.removeSortable();var a=!0;t.receiverItems.forEach(function(e){1!=e.removed&&"signer"!==e.receiver.type&&(a=!1)}),1!=a?g.confirm().then(function(){t.removeNotSigners(),t.setReceiverTypeDisabled(),n.removeAttr("checked"),n.attr("disabled","disabled"),i.addClass("disabled"),t.disableSortable(),o.Tooltip.setContent(e("#orderOption label"),c.Lang.t("orderOnBatchInfo")),t.batchMode=!0},function(){r.prop("checked",!1),o.Tooltip.disable(e("#orderOption label")),t.setReceiverTypeEnabled(),t.batchMode=!1}):(t.setReceiverTypeDisabled(),t.batchMode=!0,n.is(":checked")&&(n.removeAttr("checked"),t.disableSortable()),o.Tooltip.setContent(e("#orderOption label"),c.Lang.t("orderOnBatchInfo")),n.attr("disabled","disabled"),i.addClass("disabled"))}else n.removeAttr("disabled"),i.removeClass("disabled"),t.enableSortable(),0==n.is(":checked")&&t.disableSortable(),o.Tooltip.disable(e("#orderOption label")),t.setReceiverTypeEnabled(),t.batchMode=!1});var a=e("#certifiedCheckbox");a.on("change",function(){e("#multipleCheckbox").is(":checked")?t.sendEventSetSilentCertsForSigners(t.receivers.length):t.sendEventSetSilentCertsForSigners(1),window.setTimeout(function(){1==a.is(":checked")?e('[data-action="certified"]').trigger("click"):e('[data-action="digital"]').trigger("click")},500)}),0==e("#multipleCheckbox").is(":checked")&&(this.enableSortable(),this.showOrderMode())},n.prototype.enableMultipleOption=function(){e("#multipleOption").removeAttr("disabled"),e("#multipleOption").removeClass("disabled")},n.prototype.disableMultipleOption=function(){e("#multipleCheckbox").attr("disabled","disabled"),e("#multipleOption").parent().find(".receiver__setting__content").addClass("disabled")},n.prototype.removeNotSigners=function(){this.receiverItems.forEach(function(e){1!=e.removed&&"signer"!==e.receiver.type&&e.remove()})},n.prototype.setReceiverTypeDisabled=function(){e(".receiver-list__item .receiver__type select").attr("disabled","disabled")},n.prototype.setReceiverTypeEnabled=function(){e(".receiver-list__item .receiver__type select").removeAttr("disabled")},n.prototype.printSignersSidebar=function(){if(e(".signature__signers .draggable").each(function(e,t){}),e(".signature__signers").html(""),1==this.batchMode){var n='<li class="signature__signers__item fileA tooltip tooltip--top draggable draggable__content" title="'+c.Lang.t("signerLayout")+'" tabindex="0" data-title="'+c.Lang.t("signerLayout")+'" data-id="'+t.DEFAULT_SIGNER.id+'"><span id="signMultipleIcon"></span></li>';e(".signature__signers").append(n)}else this.receivers.forEach(function(t,n){if("signer"==t.type){var i=t.name.split(" "),r=i[0].charAt(0).toUpperCase();i[1]&&(r+=i[1].charAt(0).toUpperCase());var o='<li class="signature__signers__item '+t.colorClass+' tooltip tooltip--top draggable draggable__content " title="'+t.name.trunc(25)+'" tabindex="0" data-title="'+t.name+'" data-id="'+t.id+'">'+r+"</li>";e(".signature__signers").append(o)}});o.Tooltip.init(".signature__signers__item")},n.prototype.sendEventReceiversCancel=function(){var e=new CustomEvent("receiversCancel");window.dispatchEvent(e)},n.prototype.sendEventReceiversChanged=function(){var e=new CustomEvent("receiversChanged",{detail:{receivers:1==this.batchMode?[t.DEFAULT_SIGNER]:this.receivers,batchMode:this.batchMode,batchCount:this.receivers.length}});window.dispatchEvent(e)},n.prototype.sendEventReceiversConfirmed=function(){var t=new CustomEvent("receiversConfirmed",{detail:{certsWanted:e("#certifiedCheckbox").is("checked")}});window.dispatchEvent(t)},n.prototype.sendEventSetSilentCertsForSigners=function(e){var t=new CustomEvent("setSilentCertsForSigners",{detail:{signers:e}});window.dispatchEvent(t)},n.prototype.listenEventModeChanged=function(){},n.prototype.listenEventReceiversItemRemoved=function(){var e=this;window.addEventListener("receiversItemRemoved",function(t){e.cleanRemoved(),e.showOrderMode(),e.setNumbers(),e.checkConfirmReceiverBtn(),e.enableAdd()})},n.prototype.listenEventReceiversAdded=function(){var e=this;window.addEventListener("receiversAdded",function(t){e.receivers=t.detail.receivers,e.sendEventReceiversChanged(),e.checkConfirmReceiverBtn()})},n.prototype.listenEventReceiversItemChanged=function(){var e=this;window.addEventListener("receiversItemChanged",function(t){e.checkConfirmReceiverBtn()})},n.prototype.showModal=function(){this.initReceivers(),e("#receiversModal").modal("show"),e(".modal-body").scrollTop(0),window.setTimeout(function(){l.default.showStep("receiverStep",e(".receiver-list__item").first(),"top")},1e3)},n.prototype.hideModal=function(){e("#receiversModal").modal("hide")},n.prototype.initReceivers=function(){var t=this;e(".receiver-list").html(""),0==this.receivers.length?this.addReceiverItem():(this.receiverItems=[],this.receivers.forEach(function(e){t.addReceiverItem(e)}))},n.prototype.enableSortable=function(){if(1!=e("#multipleCheckbox").is(":checked")){var t=this;if(e("#"+this.sortableElement).addClass("sortable"),null==this.sortableList){var n=document.getElementById(this.sortableElement);this.sortableList=new window.Sortable(n,{draggable:".receiver-list__item",filter:"input, .receiver__action, .receiver__delete, .receiver__elements",preventOnFilter:!1,animation:200,onUpdate:function(n){t.setNumbers(),e("#orderCheckbox").prop("checked","true"),e("#"+t.sortableElement).addClass("sortable")},onStart:function(e){},onEnd:function(){}}),window.sortableList=this.sortableList}else this.sortableList.option({disabled:!1,draggable:!0})}},n.prototype.disableSortable=function(){e("#"+this.sortableElement).removeClass("sortable"),this.sortableList},n.prototype.removeSortable=function(){e("#"+this.sortableElement).removeClass("sortable"),null!=this.sortableList&&(this.sortableList.option("disabled",!0),this.sortableList.option("draggeble",!1)),this.sortableList=null},n.prototype.setNumbers=function(){e(".receiver-list .receiver-list__item").each(function(t,n){var i=t+1;e(n).find(".receiver__count").html(i.toString())})},n.prototype.setReceiversOrder=function(e){this.receivers.forEach(function(t){t.num&&(t.num=e[t.num])})},n.prototype.orderReceivers=function(){this.receivers.sort(function(e,t){return e.num-t.num})},n.prototype.addReceiverItem=function(t){if(void 0===t&&(t=null),50!=this.receiverItems.length){var n=new r.ReceiverItem(t,this.batchMode);n.signaturesManager=this.signaturesManager,this.receiverItems.push(n),this.fromTemplate&&e(".receiver__delete").remove(),this.checkConfirmReceiverBtn(),0==e("#multipleCheckbox").is(":checked")&&this.showOrderMode(),50==this.receiverItems.length&&this.disabledAdd()}else this.disabledAdd()},n.prototype.disabledAdd=function(){e("#addReceiver").attr("disabled","disabled")},n.prototype.enableAdd=function(){e("#addReceiver").removeAttr("disabled")},n.prototype.cleanRemoved=function(){var e=this;this.receiverItems.forEach(function(t,n){!0===t.isRemoved()&&e.receiverItems.splice(n,1)})},n.prototype.save=function(){var e=[];return this.receiverItems.forEach(function(t){!0!==t.isRemoved()&&(!0!==t.isEmpty()?(t.applyNumber(),e.push(t.getReceiver())):t.remove())}),this.cleanRemoved(),this.receiverItems.forEach(function(e){}),this.receivers=e,this.orderReceivers(),this.receivers},n.prototype.removeUnused=function(){this.receiverItems.forEach(function(e){!0===e.isEmpty()&&e.remove()})},n.prototype.count=function(e){void 0===e&&(e=null);var t=0;return this.receiverItems.forEach(function(n){!0!==n.isRemoved()&&(null!=e&&n.receiver.type!=e||t++)}),t},n.prototype.validate=function(){f.SmsPurchaseManager.clear();var t=!0,n=0;if(this.receiverItems.forEach(function(e){!0!==e.isRemoved()&&1!=e.isEmpty()&&(0!=e.validate()?n++:t=!1)}),0==n)return!1;var i=!1;if(e(".receiver__type select").each(function(t,n){"signer"==e(n).val()&&(i=!0)}),!0!==i)return o.Tooltip.init(e("#confirmReceiver")),o.Tooltip.setContent(e("#confirmReceiver"),c.Lang.t("signerRequired")),o.Tooltip.show(e("#confirmReceiver")),!1;if(1==e("#brandCheckbox").is(":checked")&&null==this.getBrandData())return p.ScrollHelper.scrollToElement(e("#brandCheckbox")),o.Tooltip.init(e("#confirmReceiver")),o.Tooltip.setContent(e("#confirmReceiver"),c.Lang.t("brandRequired")),o.Tooltip.show(e("#confirmReceiver")),!1;var r=this.receiverItems.map(function(e){return e.receiver});return f.SmsPurchaseManager.setReceivers(r),t},n.prototype.getDataFromReceivers=function(){var t=[];return this.receivers.forEach(function(n){0==e("#certifiedCheckbox").is(":checked")&&delete n.phone,t.push(n.getData())}),t},n.prototype.getLanguage=function(){return e("#languageCheckbox").is(":checked")?e("#selectLanguage").val().toString():window.lang},n.prototype.getExpirationDays=function(){return e("#expirateCheckbox").is(":checked")?parseInt(e("#expire").val().toString()):parseInt(e("#expireDaysDefault").text())},n.prototype.getReminders=function(){return!!e("#reminderCheckbox").is(":checked")},n.prototype.getRemindersCycle=function(){return parseInt(e("#reminderInput").val().toString())},n.prototype.getNotify=function(){return!!e("#notifyCheckbox").is(":checked")},n.prototype.getData=function(){var t={language:this.getLanguage(),batch_mode:this.batchMode,expiration_days:this.getExpirationDays(),lock_order:1==e("#orderCheckbox").is(":checked")?1:0,signers:this.getDataFromReceivers(),signer_reminders:this.getReminders(),signed_notifications:this.getNotify()};if(1==t.signer_reminders&&(t.signer_reminder_days_cycle=this.getRemindersCycle()),1==e("#messageCheckbox").is(":checked")){var n=e("#customSubject").val().toString();""!=n&&(t.subject=n.substring(0,254)),t.message=e("#customMessage").val().toString()}if(1==e("#brandCheckbox").is(":checked")){var i=this.getBrandData();null!=i&&(t.brand_name=i.name,t.brand_logo=i.logo)}return t},n.prototype.getBrandData=function(){var t=e("#brandName").val().toString(),n=e("#fileApiBrand").val().toString();return""==n||""==t?null:{name:t,logo:n}},n.prototype.checkConfirmReceiverBtn=function(){var t=!1;0==this.receiverItems.length&&(t=!0),this.receiverItems.forEach(function(e){1!=e.removed&&1==e.isIncomplete()&&(t=!0)}),1!=t?e("#confirmReceiver").removeAttr("disabled"):e("#confirmReceiver").attr("disabled","disabled")},n}();t.default=h,t.RECEIVER_COLORS=["fileA","fileB","fileC","fileD","fileE","fileF","fileG","fileH","fileI","fileJ"];var g=function(){function t(){}return t.confirm=function(){return t.openModal(),new Promise(function(n,i){e("#confirmBatch").on("click",function(){t.closeModal(),n()}),e("#cancelBatch").on("click",function(){t.closeModal(),i()})})},t.openModal=function(){e("#confirmBatchModal").modal("show")},t.closeModal=function(){e("#confirmBatchModal").modal("hide"),e("#confirmBatch").off("click"),e("#cancelBatch").off("click")},t}();t.DEFAULT_SIGNER={id:"defaultSigner",name:c.Lang.t("Signer"),email:"default@email",type:"signer",colorClass:"fileA",files:[],force_signature_type:null}}).call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(16),r=function(){function e(){}return e.set=function(){if(1!=i.UserModel.isPremium()){var t=e.get();Cookies.set("signCount",(t+1).toString())}},e.get=function(){var e=parseInt(Cookies.get("signCount"));return isNaN(e)&&(e=0),e},e.allowed=function(){return 1==i.UserModel.isPremium()||e.get()<3},e.remainingUses=function(){return 3-e.get()},e}();t.default=r},,,,,,,,,,,function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(171),a=n(360),s=n(380),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getOptionsManager=function(){return new a.SignOptionsManager(this.getToolOptions())},t.prototype.initProcessManager=function(){this.processManager=new s.SignProcess({taskId:this.taskId,tool:this.tool,site:this.site,subtool:this.subtool,options:{},startServer:this.startServer,workerServer:this.workerServer,files:this.files,token:this.token,userId:this.userId,downloadUrl:this.downloadUrl})},t}(o.IlovepdfTool);t.IlovepdfTool=l},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),function(e){n(357),n(1),n(160),n(102),n(358),n(359);var t=n(199),i=n.n(t),r=n(301);n(92),n(101),e.Sortable=i.a,window.site="ilovepdf",window.userModel=window.ilovepdfConfig.user,window.ilovepdf=new r.IlovepdfTool(window.ilovepdfConfig)}.call(this,n(31))},function(e,t,n){},function(e,t,n){"use strict";var i=n(1),r=n.n(i),o=n(159);const a="modal",s="4.2.1",l="bs.modal",c=`.${l}`,u=r.a.fn[a],d=27,p={backdrop:!0,keyboard:!0,focus:!0,show:!0},f={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},h={HIDE:`hide${c}`,HIDDEN:`hidden${c}`,SHOW:`show${c}`,SHOWN:`shown${c}`,FOCUSIN:`focusin${c}`,RESIZE:`resize${c}`,CLICK_DISMISS:`click.dismiss${c}`,KEYDOWN_DISMISS:`keydown.dismiss${c}`,MOUSEUP_DISMISS:`mouseup.dismiss${c}`,MOUSEDOWN_DISMISS:`mousedown.dismiss${c}`,CLICK_DATA_API:`click${c}.data-api`},g={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"},v={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top"};class m{constructor(e,t){this._config=this._getConfig(t),this._element=e,this._dialog=e.querySelector(v.DIALOG),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}static get VERSION(){return s}static get Default(){return p}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||this._isTransitioning)return;r()(this._element).hasClass(g.FADE)&&(this._isTransitioning=!0);const t=r.a.Event(h.SHOW,{relatedTarget:e});r()(this._element).trigger(t),this._isShown||t.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),r()(this._element).on(h.CLICK_DISMISS,v.DATA_DISMISS,e=>this.hide(e)),r()(this._dialog).on(h.MOUSEDOWN_DISMISS,()=>{r()(this._element).one(h.MOUSEUP_DISMISS,e=>{r()(e.target).is(this._element)&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(e)))}hide(e){if(e&&e.preventDefault(),!this._isShown||this._isTransitioning)return;const t=r.a.Event(h.HIDE);if(r()(this._element).trigger(t),!this._isShown||t.isDefaultPrevented())return;this._isShown=!1;const n=r()(this._element).hasClass(g.FADE);if(n&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),r()(document).off(h.FOCUSIN),r()(this._element).removeClass(g.SHOW),r()(this._element).off(h.CLICK_DISMISS),r()(this._dialog).off(h.MOUSEDOWN_DISMISS),n){const e=o.a.getTransitionDurationFromElement(this._element);r()(this._element).one(o.a.TRANSITION_END,e=>this._hideModal(e)).emulateTransitionEnd(e)}else this._hideModal()}dispose(){[window,this._element,this._dialog].forEach(e=>r()(e).off(c)),r()(document).off(h.FOCUSIN),r.a.removeData(this._element,l),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null}handleUpdate(){this._adjustDialog()}_getConfig(e){return e={...p,...e},o.a.typeCheckConfig(a,e,f),e}_showElement(e){const t=r()(this._element).hasClass(g.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.scrollTop=0,t&&o.a.reflow(this._element),r()(this._element).addClass(g.SHOW),this._config.focus&&this._enforceFocus();const n=r.a.Event(h.SHOWN,{relatedTarget:e}),i=()=>{this._config.focus&&this._element.focus(),this._isTransitioning=!1,r()(this._element).trigger(n)};if(t){const e=o.a.getTransitionDurationFromElement(this._dialog);r()(this._dialog).one(o.a.TRANSITION_END,i).emulateTransitionEnd(e)}else i()}_enforceFocus(){r()(document).off(h.FOCUSIN).on(h.FOCUSIN,e=>{document!==e.target&&this._element!==e.target&&0===r()(this._element).has(e.target).length&&this._element.focus()})}_setEscapeEvent(){this._isShown&&this._config.keyboard?r()(this._element).on(h.KEYDOWN_DISMISS,e=>{e.which===d&&(e.preventDefault(),this.hide())}):this._isShown||r()(this._element).off(h.KEYDOWN_DISMISS)}_setResizeEvent(){this._isShown?r()(window).on(h.RESIZE,e=>this.handleUpdate(e)):r()(window).off(h.RESIZE)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(()=>{r()(document.body).removeClass(g.OPEN),this._resetAdjustments(),this._resetScrollbar(),r()(this._element).trigger(h.HIDDEN)})}_removeBackdrop(){this._backdrop&&(r()(this._backdrop).remove(),this._backdrop=null)}_showBackdrop(e){const t=r()(this._element).hasClass(g.FADE)?g.FADE:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=g.BACKDROP,t&&this._backdrop.classList.add(t),r()(this._backdrop).appendTo(document.body),r()(this._element).on(h.CLICK_DISMISS,e=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"===this._config.backdrop?this._element.focus():this.hide())}),t&&o.a.reflow(this._backdrop),r()(this._backdrop).addClass(g.SHOW),!e)return;if(!t)return void e();const n=o.a.getTransitionDurationFromElement(this._backdrop);r()(this._backdrop).one(o.a.TRANSITION_END,e).emulateTransitionEnd(n)}else if(!this._isShown&&this._backdrop){r()(this._backdrop).removeClass(g.SHOW);const t=()=>{this._removeBackdrop(),e&&e()};if(r()(this._element).hasClass(g.FADE)){const e=o.a.getTransitionDurationFromElement(this._backdrop);r()(this._backdrop).one(o.a.TRANSITION_END,t).emulateTransitionEnd(e)}else t()}else e&&e()}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&e&&(this._element.style.paddingLeft=`${this._scrollbarWidth}px`),this._isBodyOverflowing&&!e&&(this._element.style.paddingRight=`${this._scrollbarWidth}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}_checkScrollbar(){const e=document.body.getBoundingClientRect();this._isBodyOverflowing=e.left+e.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()}_setScrollbar(){if(this._isBodyOverflowing){const e=[].slice.call(document.querySelectorAll(v.FIXED_CONTENT)),t=[].slice.call(document.querySelectorAll(v.STICKY_CONTENT));r()(e).each((e,t)=>{const n=t.style.paddingRight,i=r()(t).css("padding-right");r()(t).data("padding-right",n).css("padding-right",`${parseFloat(i)+this._scrollbarWidth}px`)}),r()(t).each((e,t)=>{const n=t.style.marginRight,i=r()(t).css("margin-right");r()(t).data("margin-right",n).css("margin-right",`${parseFloat(i)-this._scrollbarWidth}px`)});const n=document.body.style.paddingRight,i=r()(document.body).css("padding-right");r()(document.body).data("padding-right",n).css("padding-right",`${parseFloat(i)+this._scrollbarWidth}px`)}r()(document.body).addClass(g.OPEN)}_resetScrollbar(){const e=[].slice.call(document.querySelectorAll(v.FIXED_CONTENT));r()(e).each((e,t)=>{const n=r()(t).data("padding-right");r()(t).removeData("padding-right"),t.style.paddingRight=n||""});const t=[].slice.call(document.querySelectorAll(`${v.STICKY_CONTENT}`));r()(t).each((e,t)=>{const n=r()(t).data("margin-right");void 0!==n&&r()(t).css("margin-right",n).removeData("margin-right")});const n=r()(document.body).data("padding-right");r()(document.body).removeData("padding-right"),document.body.style.paddingRight=n||""}_getScrollbarWidth(){const e=document.createElement("div");e.className=g.SCROLLBAR_MEASURER,document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t}static _jQueryInterface(e,t){return this.each(function(){let n=r()(this).data(l);const i={...p,...r()(this).data(),..."object"==typeof e&&e?e:{}};if(n||(n=new m(this,i),r()(this).data(l,n)),"string"==typeof e){if(void 0===n[e])throw new TypeError(`No method named "${e}"`);n[e](t)}else i.show&&n.show(t)})}}r()(document).on(h.CLICK_DATA_API,v.DATA_TOGGLE,function(e){let t;const n=o.a.getSelectorFromElement(this);n&&(t=document.querySelector(n));const i=r()(t).data(l)?"toggle":{...r()(t).data(),...r()(this).data()};"A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault();const a=r()(t).one(h.SHOW,e=>{e.isDefaultPrevented()||a.one(h.HIDDEN,()=>{r()(this).is(":visible")&&this.focus()})});m._jQueryInterface.call(r()(t),i,this)}),r.a.fn[a]=m._jQueryInterface,r.a.fn[a].Constructor=m,r.a.fn[a].noConflict=(()=>(r.a.fn[a]=u,m._jQueryInterface))},function(e,t,n){"use strict";var i=n(1),r=n.n(i),o=n(159);const a="4.2.1",s="bs.tab",l=`.${s}`,c=r.a.fn.tab,u={HIDE:`hide${l}`,HIDDEN:`hidden${l}`,SHOW:`show${l}`,SHOWN:`shown${l}`,CLICK_DATA_API:`click${l}.data-api`},d={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},p={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"};class f{constructor(e){this._element=e}static get VERSION(){return a}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&r()(this._element).hasClass(d.ACTIVE)||r()(this._element).hasClass(d.DISABLED))return;let e,t;const n=r()(this._element).closest(p.NAV_LIST_GROUP)[0],i=o.a.getSelectorFromElement(this._element);if(n){const e="UL"===n.nodeName||"OL"===n.nodeName?p.ACTIVE_UL:p.ACTIVE;t=(t=r.a.makeArray(r()(n).find(e)))[t.length-1]}const a=r.a.Event(u.HIDE,{relatedTarget:this._element}),s=r.a.Event(u.SHOW,{relatedTarget:t});if(t&&r()(t).trigger(a),r()(this._element).trigger(s),s.isDefaultPrevented()||a.isDefaultPrevented())return;i&&(e=document.querySelector(i)),this._activate(this._element,n);const l=()=>{const e=r.a.Event(u.HIDDEN,{relatedTarget:this._element}),n=r.a.Event(u.SHOWN,{relatedTarget:t});r()(t).trigger(e),r()(this._element).trigger(n)};e?this._activate(e,e.parentNode,l):l()}dispose(){r.a.removeData(this._element,s),this._element=null}_activate(e,t,n){const i=(!t||"UL"!==t.nodeName&&"OL"!==t.nodeName?r()(t).children(p.ACTIVE):r()(t).find(p.ACTIVE_UL))[0],a=n&&i&&r()(i).hasClass(d.FADE),s=()=>this._transitionComplete(e,i,n);if(i&&a){const e=o.a.getTransitionDurationFromElement(i);r()(i).removeClass(d.SHOW).one(o.a.TRANSITION_END,s).emulateTransitionEnd(e)}else s()}_transitionComplete(e,t,n){if(t){r()(t).removeClass(d.ACTIVE);const e=r()(t.parentNode).find(p.DROPDOWN_ACTIVE_CHILD)[0];e&&r()(e).removeClass(d.ACTIVE),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!1)}if(r()(e).addClass(d.ACTIVE),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),o.a.reflow(e),r()(e).addClass(d.SHOW),e.parentNode&&r()(e.parentNode).hasClass(d.DROPDOWN_MENU)){const t=r()(e).closest(p.DROPDOWN)[0];if(t){const e=[].slice.call(t.querySelectorAll(p.DROPDOWN_TOGGLE));r()(e).addClass(d.ACTIVE)}e.setAttribute("aria-expanded",!0)}n&&n()}static _jQueryInterface(e){return this.each(function(){const t=r()(this);let n=t.data(s);if(n||(n=new f(this),t.data(s,n)),"string"==typeof e){if(void 0===n[e])throw new TypeError(`No method named "${e}"`);n[e]()}})}}r()(document).on(u.CLICK_DATA_API,p.DATA_TOGGLE,function(e){e.preventDefault(),f._jQueryInterface.call(r()(this),"show")}),r.a.fn.tab=f._jQueryInterface,r.a.fn.tab.Constructor=f,r.a.fn.tab.noConflict=(()=>(r.a.fn.tab=c,f._jQueryInterface))},function(e,t,n){"use strict";(function(e){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(194),a=n(193),s=n(289),l=n(364),c=n(203),u=n(365),d=n(163),p=n(59),f=n(139),h=n(36),g=n(16),v=n(9),m=n(172),y=n(157),_=n(376),b=n(377),w=n(45),S=n(219),E=n(19),x=n(196),k=n(213),C=n(378),P=n(279),T=n(170),O=n(169),M=n(379),I=n(182),A=n(278),D=n(96),L=function(t){function n(n){void 0===n&&(n={});var i=t.call(this,n)||this;return i.filesAddedFirst=[],window.userTemp=g.UserModel,i.elementsManager=new u.ElementsManager({files:i.files}),i.listenEventElementsChanged(),i.signaturesManager=new _.default,i.uuidManager=new k.UuidManager,e("#orderByName").remove(),i.initTemplateActions(),i.helpModal(),T.CanvasHelper.forcePrerenderFonts(O.FONT_FAMILY_EXPLORER,O.FONT_STYLES),i.cleanStorage(),i.beforeUnload(),i}return r(n,t),n.prototype.cleanStorage=function(){d.Storage.cleanSign()},n.prototype.beforeUnload=function(){window.addEventListener("beforeunload",function(e){null!=d.Storage.get("sign.files")&&null!=d.Storage.get("sign.elements")&&(e.returnValue="You are not done with this page. If you leave this page now, you may loose your last changes.")})},n.prototype.initTemplateActions=function(){var t=this;this.templateManager=new M.TemplateManager;var n=S.Url.getParam("template");if(null!=n)return this.templateName=e('#templateSelect option[value="'+n+'"]').text(),this.templateId=n,this.setCurrentTemplate(),void this.makeFromTemplate(n);e("#templateSelect").on("change",function(n){var i=e("#templateSelect").val();"null"!=i&&(t.templateName=e("#templateSelect option:selected").text(),t.templateId=e("#templateSelect option:selected").val(),t.setCurrentTemplate(),t.makeFromTemplate(i))})},n.prototype.onUploaderMovedAndShow=function(){},n.prototype.showUploaderTooltip=function(){},n.prototype.fatalError=function(n){t.prototype.fatalError.call(this,n),e(".modal").hide(),e(".modal-backdrop").hide()},n.prototype.checkProcessBtn=function(){t.prototype.checkProcessBtn.call(this),0==this.files.checkFilesUploaded()?(this.disableProcessBtn(v.Lang.t("uploading")),this.templateManager.disableTemplates(v.Lang.t("uploading"))):0==this.elementsManager.validateSignatureIsPresent()?(this.disableProcessBtn(v.Lang.t("signersRequired")),this.templateManager.disableTemplates(v.Lang.t("signersRequired"))):0==this.elementsManager.validateAllInputsLabeled()?(this.disableProcessBtn(v.Lang.t("labelRequired")),this.templateManager.disableTemplates(v.Lang.t("labelRequired"))):(this.enableProcessBtn(),this.templateManager.enableTemplates(),this.checkProcessPulse())},n.prototype.checkLocalStorage=function(){null!=d.Storage.get("sign.task")&&null!=d.Storage.get("sign.elements")?1==confirm("work in progress detected, do you want to load it?")?this.makeFromStorage():d.Storage.cleanSign():d.Storage.cleanSign()},n.prototype.makeFromStorage=function(){var e=d.Storage.get("sign.task");this.processManager.taskId=d.Storage.get("sign.task"),this.processManager.api.taskId=d.Storage.get("sign.task"),window.ilovepdfConfig.taskId=this.processManager.taskId=this.processManager.api.taskId=e,this.fromStorage=!0,this.loadFilesFromStorage(),this.makeWorkarea().then(function(){y.Toolbar.refresh()})},n.prototype.makeFromTemplate=function(t){var n=this;e(".wait").show(),this.processManager.api.templateGet(t).then(function(t){n.template=JSON.parse(t.template.elements);var i=t.task;n.processManager.taskId=i,n.processManager.api.taskId=i,window.ilovepdfConfig.taskId=n.processManager.taskId=n.processManager.api.taskId=i,n.fromTemplate=!0,n.loadFilesFromTemplate(),e(".wait").hide(),n.makeWorkarea().then(function(){y.Toolbar.refresh()})},function(){e(".wait").hide()})},n.prototype.makeWorkarea=function(){var n=this;if(1==this.workareaStarted)return t.prototype.makeWorkarea.call(this);this.files.files.forEach(function(e){n.filesAddedFirst.push(e.id)});var i=t.prototype.makeWorkarea.call(this);return this.signaturesManager.init(),e(".sign__template__select").hide(),i},n.prototype.loadFilesFromStorage=function(){this.filesTemp=d.Storage.get("sign.files",[]),this.renderTempFiles()},n.prototype.loadFilesFromTemplate=function(){var e=this;this.filesTemp=[],this.template.files.forEach(function(t){var n={id:E.Tools.randomId(),server_filename:t.server_filename,filename:t.filename,name:t.filename,size:100,pages:null};t.id=n.id,e.filesTemp.push(n)}),this.renderTempFiles()},n.prototype.renderTempFiles=function(){var e=this,t=this;this.filesTemp.forEach(function(n,i){t.processManager.api.getFilePreviewInfo(t.processManager.taskId,n.server_filename).then(function(i){var r=new p.File({id:n.id,server_filename:n.server_filename,name:n.name,size:n.size,pages:parseInt(i.pdf_page_number),percent:100,loaded:100});t.files.addFile(r),t.files.updateFile(r.id,i),e.firstFileLoaded||(e.triggerFirstFileReady(),e.firstFileLoaded=!0),t.renderPdfFromUpload(r.id)},function(e){})})},n.prototype.startPanels=function(){var e=this;if(1!=this.panelsStarted){t.prototype.startPanels.call(this);var n=this;if(this.modeSelector=new l.default,this.listenEventModeChanged(),this.receiversManager=new s.default(this.processManager.api),this.receiversManager.signaturesManager=this.signaturesManager,this.listenEventReceiversChanged(),this.listenEventReceiversCancel(),this.signatureConfig=new c.default(new a.SignerModel,this.processManager.api),this.listenEventSignatureChanged(),this.templateModal=new b.TemplateModal,1==this.files.files.length&&this.templateModal.setNameFromFile(this.files.files[0].name),this.listenEventSaveTemplate(),1==this.fromStorage)this.modeSelector.loadFromStorage(),this.receiversManager.loadFromStorage(),this.signatureConfig.loadFromStorage(),m.ElementHelper.waitForFileRendered().then(function(){n.elementsManager.loadFromStorage()});else if(1==this.fromTemplate)this.receiversManager.loadFromTemplate(this.template),this.modeSelector.loadFromTemplate(this.template),m.ElementHelper.waitForFileRendered().then(function(){n.elementsManager.loadFromTemplate(e.template)});else{var i=D.Dialog.getVisibleDialogs().filter(function(e){return"Limits"===e.getDialogName()}).map(function(e){return new Promise(function(t,n){e.addEventListener("hidden",function(){t()})})});Promise.all(i).then(function(){return e.modeSelector.init()})}this.signatureConfig.apply(),this.previewManager.setElements(this.elementsManager.elementsStack)}},n.prototype.fileAdded=function(t,n,i){void 0===i&&(i=!1);var r=this;return this.checkProcessBtn(),this.setFileNamesOnView(),1==this.files.files.length&&this.templateModal&&this.templateModal.setNameFromFile(this.files.files[0].name),P.UploaderStatus.set(this.files),0==e(".tool__preview__pages .loading").length&&(e(".tool__preview__pages").append('<div class="loading"></div>'),e(".editor__content").append('<div class="loading"></div>')),new Promise(function(e,n){"chained"==t.origin&&r.fileFromChainedAction(t),r.makeWorkarea().then(function(){y.Toolbar.refresh()}),e()})},n.prototype.assertNoFileUploadErrors=function(t){return 1==t.password?(this.fileAddError(t.id,!0,v.Lang.t("ProtectedFile")),e(".wait").hide(),!1):!!t.pdf_pages||(this.fileAddError(t.id,!0,"DamagedFile"),e(".wait").hide(),!1)},n.prototype.fileUploaded=function(n,i){i.pages=i.pdf_page_number;var r=this.files.getFile(n);if(1!=r.reUploaded){if(t.prototype.fileUploaded.call(this,n,i),this.assertNoFileUploadErrors(r)){e(".tool__preview__pages .loading").first().remove(),e(".editor__content .loading").first().remove(),d.Storage.set("sign.task",this.processManager.taskId);var o={id:n,server_filename:i.server_filename,name:r.name,pages:parseInt(i.pages),size:r.size};this.filesTemp.push(o),d.Storage.set("sign.files",this.filesTemp),this.firstFileLoaded||(this.triggerFirstFileReady(),this.firstFileLoaded=!0),this.renderPdfFromUpload(n),this.signaturesManager.setUploadedFilesCount(this.files.files.length),this.checkProcessBtn(),this.initPollToKeepAliveFiles()}}else this.files.updateFile(n,i)},n.prototype.renderPdfFromUpload=function(t){var n=this.files.getFile(t);e(".tool__sidebar__inactive").fadeOut(),e(".tool__sidebar").css("overflow-y","auto"),this.setToolPreview(),this.setFilecount(),this.checkFilesPageSizes(),this.addEditorPages(n),this.renderEditorPages(n),this.addPreviewPages(n),this.renderPreviewPages(n),this.addPreviewActions(n),this.addPreviewFile(n),this.renderPreviewFile(n),this.addPreviewFileActions(n);var i=!this.isAFileAddedAtBeginning(n.id);this.toolbarPaginate.refreshToolbar(i),this.files.files.length>1||parseInt(n.pages)>1?this.elementsManager.elementsSelector.setMultiplePages():this.elementsManager.elementsSelector.setSinglePage()},n.prototype.checkPageSizes=function(e){var t=e.pdf_pages[0],n="clone";e.pdf_pages.forEach(function(e){t!=e&&(n="copy")}),this.elementsManager.cloneMode=n,this.elementsManager.cloneModal.cloneMode=n},n.prototype.checkFilesPageSizes=function(){var e="clone",t=this.files.files[0].pdf_pages[0];this.files.files.forEach(function(n){n.pdf_pages&&n.pdf_pages.forEach(function(n){t!=n&&(e="copy")})}),this.elementsManager.cloneMode=e,this.elementsManager.cloneModal.cloneMode=e},n.prototype.setToolPreview=function(){this.files.files.length>1?(this.selectPreviewTab("files"),e(".tool__preview").addClass("multiple"),h.Tooltip.init(e(".tool__preview .tooltip")),setTimeout(function(){y.Toolbar.refresh()},500)):(e(".tool__preview").removeClass("multiple"),y.Toolbar.refresh(),this.selectPreviewTab("pages"))},n.prototype.listenEventModeChanged=function(){var t=this;window.addEventListener("modeChanged",function(n){"single"==n.detail.mode&&t.uuidManager.disableUuid(),"single"==n.detail.mode&&0==g.UserModel.isUser()&&(t.signatureConfig.showModal(),t.signatureConfig.forceApply()),"single"==n.detail.mode&&1==g.UserModel.isUser()&&window.setTimeout(function(){x.default.showStep("dragStep",e("#sidebar"),"left")},1e3),"single"!==n.detail.mode&&!0!==t.fromStorage?(t.receiversManager.showModal(),e("#processTaskTextBtn").html(v.Lang.t("processMultipleBtn")),e("#processText").html(v.Lang.t("processingMultiple"))):(e("#processTaskTextBtn").html(v.Lang.t("processSingleBtn")),e("#processText").html(v.Lang.t("processingSingle")))})},n.prototype.listenEventReceiversChanged=function(){var e=this;window.addEventListener("receiversChanged",function(t){e.receivers=t.detail.receivers})},n.prototype.listenEventReceiversCancel=function(){var e=this;window.addEventListener("receiversCancel",function(t){e.modeSelector.mode=null,e.receiversManager.batchMode=!1,e.modeSelector.showModal()})},n.prototype.listenEventSaveTemplate=function(){var e=this;window.addEventListener("saveTemplate",function(t){e.templateName=t.detail.name,e.saveOrUpdateTemplate()})},n.prototype.saveOrUpdateTemplate=function(){var t=this,n=this.getData(),i=this;n.template_name=this.templateName,e(".wait").show();var r=w.FormDataHelper.jsonToFormData(n),o=this.files.getUploadedFiles(),a=0;for(var s in o)r.append("files["+a+"][server_filename]",o[s].server_filename),r.append("files["+a+"][filename]",o[s].filename),a++;this.templateId?this.processManager.api.templateUpdate(this.templateId,r).then(function(n){t.templateId=n.template,e(".wait").hide(),i.setCurrentTemplate(),window.Toastr.success(v.Lang.t("templateSaved"))},function(t){e(".wait").hide()}):(r.append("task",this.processManager.taskId),r.append("tool",this.tool),this.processManager.api.templateSave(r).then(function(n){t.templateId=n.template,e(".wait").hide(),i.setCurrentTemplate(),window.Toastr.success(v.Lang.t("templateSaved"))},function(e){}))},n.prototype.setCurrentTemplate=function(){b.TemplateModal.setTemplate(this.templateName)},n.prototype.listenEventSignatureChanged=function(){window.addEventListener("signatureChanged",function(t){0==g.UserModel.isUser()&&""!=t.detail.signatureModel.signature&&window.setTimeout(function(){x.default.showStep("dragStep",e("#sidebar"),"left")},1e3)})},n.prototype.saveReceivers=function(){this.receivers=this.receiversManager.save()},n.prototype.onRenderEditorPages=function(e){this.isAFileAddedAtBeginning(e.id)||f.ScrollHelper.scrollToPage(e.id,1)},n.prototype.isAFileAddedAtBeginning=function(e){return this.filesAddedFirst.includes(e)},n.prototype.addPreviewFile=function(n){t.prototype.addPreviewFile.call(this,n);var i=this;e(".preview__page").removeClass("active"),e("#preview_file_"+n.id).on("click",function(){f.ScrollHelper.scrollToPage(n.id,1),e('.preview__page[data-file="'+n.id+'"][data-page="1"]').addClass("active")}),e('.preview__file[data-file="'+n.id+'"] .close').on("click",function(){C.ConfirmFileRemove.confirm(n.id,n.name).then(function(){i.removeFile(n.id)},function(){})}),e('.preview__page[data-file="'+n.id+'"][data-page="1"]').addClass("active")},n.prototype.removeFile=function(n){this.elementsManager.elementsSelector.fileRemoved(n),e('[data-file="'+n+'"]').remove(),this.elementsManager.fileRemoved(n),t.prototype.removeFile.call(this,n),this.setToolPreview(),this.checkProcessBtn()},n.prototype.fileRemoved=function(e){t.prototype.fileRemoved.call(this,e);var n=this.files.countNotIgnored();this.signaturesManager.setUploadedFilesCount(n),this.checkProcessBtn()},n.prototype.selectPreviewTab=function(t){var n=e(".tool__preview__tabs");switch(n.find(".tool__preview__tabs__item").removeClass("active"),n.find("[data-rel='"+t+"']").addClass("active"),t){case"files":e(".tool__preview__files").removeClass("closed"),e(".tool__preview__pages").addClass("closed");break;case"pages":e(".tool__preview__files").addClass("closed"),e(".tool__preview__pages").removeClass("closed");break;default:throw"[Signature] Unknown Tool preview tab '"+t+"'"}},n.prototype.addPreviewFileActions=function(t){var n=this;e(".tool__preview__tabs__item").on("click",function(t){var i=e(t.currentTarget).attr("data-rel");n.selectPreviewTab(i)});new window.Sortable(e(".tool__preview__files__list")[0],{animation:200,onUpdate:function(e){n.filesReordered(e.oldIndex,e.newIndex)},onStart:function(e){},onEnd:function(e){}})},n.prototype.filesReordered=function(t,n){var i=e(".preview__file").eq(n).attr("data-file"),r=e('.tool__preview__pages [data-file="'+i+'"]'),o=e('.editor__content [data-file="'+i+'"]');if(0==n)r.prependTo(".tool__preview__pages"),o.prependTo(".editor__content");else{var a=e(".preview__file").eq(n-1).attr("data-file");r.insertAfter(e('.tool__preview__pages [data-file="'+a+'"]').last()),o.insertAfter(e('.editor__content [data-file="'+a+'"]').last())}},n.prototype.getData=function(){var e=null;g.UserModel.isUser()?e=g.UserModel.get():(e={name:null,email:null},"single"==this.modeSelector.mode&&(e.name=this.signatureConfig.signatureModel.signature)),"single"==this.modeSelector.mode&&(this.receiversManager.receivers[0].name=e.name,this.receiversManager.receivers[0].email=e.email);var t=this.receiversManager.getData(),n=[];this.files.files.forEach(function(e){n.push({server_filename:e.server_filename,filename:e.name})});var i,r=this.modeSelector.mode;1==t.batch_mode&&(r="batch");var o=null;1==t.batch_mode?(o=this.elementsManager.getData(null,t.batch_mode),i=t.signers):i=this.elementsManager.getData(t.signers);var a={name:e.name,email:e.email,language:t.language,lock_order:t.lock_order,signers:i,expiration_days:t.expiration_days,mode:r,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,certified:this.signaturesManager.requestIsDigital?1:0,uuid_visible:this.uuidManager.getStatus(),signer_reminders:t.signer_reminders};return t.signer_reminder_days_cycle&&(a.signer_reminder_days_cycle=t.signer_reminder_days_cycle),1==t.batch_mode&&(a.batch_elements=o[0].files),t.message&&(a.message_signer=a.message_validator=a.message_viewer=t.message),t.subject&&(a.subject_signer=a.subject_validator=a.subject_viewer=t.subject),1==g.UserModel.isUser()&&(a.custom_string=e.loginkey,a.custom_int=e.id),t.brand_logo&&t.brand_name&&(a.brand_logo=t.brand_logo,a.brand_name=t.brand_name),a},n.prototype.getPanelActiveOptions=function(){this.options=this.getData(),this.processManager.signer=this.signatureConfig.getSignature()},n.prototype.beforeProcess=function(){var e=this,n=["multiple","batch"].includes(this.modeSelector.mode),i=this.signaturesManager.requestType;if(n){if(0==g.UserModel.isUser())return I.SignatureDialogs.auth("sign").show(),Promise.reject("User need to be registered");g.UserModel.get(),g.UserModel.isPremium();if("electronic"===i&&!this.signaturesManager.doesUserCanDoElectronicRequests())return I.SignatureDialogs.becomePremium().show(),Promise.reject("Non-premium user run out of electronic signatures. Needs to become premium")}if("digital"===i){if(0==g.UserModel.isUser())return I.SignatureDialogs.auth("sign").show(),Promise.reject("User need to be registered");if(!this.signaturesManager.doesUserHaveEnoughSignatures())return this.signaturesManager.electronicActionBtn.trigger("click"),this.signaturesManager.showSuitableDialogToObtainSignatures().addEventListener("closed",function(t){e.signaturesManager.doesUserHaveEnoughSignatures()&&e.signaturesManager.digitalActionBtn.trigger("click")}),Promise.reject("User need to buy signatures")}return n&&!A.SmsPurchaseManager.info.doesUserHaveEnoughSmsValidations?(I.SignatureDialogs.buySmsPackage(A.SmsPurchaseManager.info.needed).show(),Promise.reject("User needs to buy SMS validations")):!1===this.files.checkFilesUploaded()?new Promise(function(e,t){t("Wait for files uploaded")}):(d.Storage.cleanSign(),clearInterval(this.keepalive_interval),this.keepalive_interval=void 0,t.prototype.beforeProcess.call(this))},n.prototype.listenEventElementsChanged=function(){var e=this;window.addEventListener("elementRemoved",function(t){e.checkProcessBtn()}),window.addEventListener("elementAdded",function(t){e.checkProcessBtn()}),window.addEventListener("elementsChanged",function(t){e.checkProcessBtn()}),window.addEventListener("elementChanged",function(t){e.checkProcessBtn()})},n.prototype.helpModal=function(){e(document).on("keypress",function(t){return!(!t.target.hasAttribute("contenteditable")&&!t.target.type)||(e('[contenteditable="true"]').length>0||void("h"==t.key&&e("#shortcutsModal").modal("toggle")))})},n.prototype.fileFromChainedAction=function(e){if("chained"===e.origin){var t=this;this.processManager.api.query("get","pdfrender/"+this.processManager.taskId+"/"+e.server_filename.substring(0,e.server_filename.length-4)).then(function(n){t.fileUploaded(e.id,n)})}},n.prototype.initPollToKeepAliveFiles=function(){var e=this;if(!this.keepalive_interval){var t=this;this.keepalive_interval=setInterval(function(){e.processManager.api.touchTask(e.processManager.taskId).then(function(e){}).catch(function(n){clearInterval(e.keepalive_interval),e.keepalive_interval=void 0,[window.ilovepdf.uploadManager.plupload,t.signatureConfig.uploaderInitialsSvg,t.signatureConfig.uploaderSignatureSvg,t.signatureConfig.uploaderInitials,t.signatureConfig.uploaderSignature].forEach(function(e){e&&e.reUploadAllFiles()})})},3e5)}},n.prototype.sendEventTaskIdChanged=function(e){var t=new CustomEvent("taskIdChanged",{detail:{taskId:e}});window.dispatchEvent(t)},n.prototype.timeout=function(){},n}(o.SignBaseOptionsManager);t.SignOptionsManager=L}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(173),r=n(36),o=n(276),a=n(19),s=n(78),l=n(362),c=function(){function n(n,r){var o=this;void 0===n&&(n=null),void 0===r&&(r=!1),this.disableSmsValidation=function(){""===e("#"+o.id+" .receiver__element__sms input").val()?(e("#"+o.id+" .receiver__action__sms").removeClass("active"),e("#"+o.id+" .receiver__element__sms").remove()):e("#"+o.id+" .receiver__element__sms input").focus()},this.enableSmsValidation=function(){e("#"+o.id+" .receiver__element__sms").length>0||(e("#"+o.id+" .receiver__action__sms").addClass("active"),o.initPhoneField())},this.receiver=n?new i.ReceiverModel(n):new i.ReceiverModel,this.id=t.RECEIBER_ITEM_PART+this.receiver.id,this.create(r),this.init()}return n.prototype.create=function(t){void 0===t&&(t=!1);var n=this,i=e(e("#receiverItemTemplate").html()),o=i.find(".receiver__name input"),a=i.find(".receiver__email input");i.attr("id",this.id),o.val(this.receiver.name),a.val(this.receiver.email),o.on("keyup change",function(){n.removeError(o),n.sendEventReceiversItemChanged()}),a.on("keyup change",function(){a.val(a.val().toString().replace(" ","")),n.removeError(a),n.removeError(e(".receiver__email input")),n.sendEventReceiversItemChanged()}),i.find(".receiver__type select").val(this.receiver.type),"validator"===this.receiver.type?(i.find(".receiver__type__validator__info").show(),i.find(".receiver__type__viewer__info").hide()):"viewer"===this.receiver.type?(i.find(".receiver__type__validator__info").hide(),i.find(".receiver__type__viewer__info").show()):(i.find(".receiver__type__validator__info").hide(),i.find(".receiver__type__viewer__info").hide()),i.find(".receiver__count").html(this.receiver.num.toString()).addClass(this.receiver.colorClass),i.find(".receiver__count").html((e(".receiver-list .receiver-list__item").length+1).toString()),e(".receiver-list").append(i),""!=this.receiver.password&&null!=this.receiver.password&&(this.initPasswordField(),e("#"+this.id+" .receiver__element__password input").val(this.receiver.password),e("#"+this.id+" .receiver__action__password").addClass("active")),""!=this.receiver.phone&&null!=this.receiver.phone&&(this.initPhoneField(),this.iti.setNumber("+"+this.receiver.phone),e("#"+this.id+" .receiver__action__sms").addClass("active")),this.receiver.allowCostumize&&"all"!=this.receiver.allowCostumize&&(this.initAllowCustomizeField(),e("#"+this.id+" .receiver__element__allow_costumize select").val(this.receiver.allowCostumize),e("#"+this.id+" .receiver__action__allow_costumize").addClass("active")),1==t&&i.find(".receiver__type select").attr("disabled","disabled"),r.Tooltip.init(e("#"+this.id+" .tooltip")),o.focus()},n.prototype.init=function(){var t=this,n=this;e("#"+this.id+" .receiver__action__password").on("click",function(i){if(1==e("#"+n.id+" .receiver__action__password").hasClass("active"))return""===e("#"+n.id+" .receiver__element__password input").val()?(e("#"+n.id+" .receiver__action__password").removeClass("active"),e("#"+n.id+" .receiver__element__password").remove(),void t.sendEventReceiversItemChanged()):(e("#"+n.id+" .receiver__element__password input").focus(),void t.sendEventReceiversItemChanged());e("#"+n.id+" .receiver__element__password").length>0?t.sendEventReceiversItemChanged():(e("#"+n.id+" .receiver__action__password").addClass("active"),n.initPasswordField(),t.sendEventReceiversItemChanged())}),e("#"+this.id+" .receiver__action__sms").on("click",function(e){"disableSmsValidation"===(t.smsValidationIsEnabled()?"disableSmsValidation":"enableSmsValidation")?t.disableSmsValidation():t.enableSmsValidation(),t.sendEventReceiversItemChanged()}),e("#"+this.id+" .receiver__action__allow_costumize").on("click",function(i){if(1==e("#"+n.id+" .receiver__action__allow_costumize").hasClass("active"))return"all"===e("#"+n.id+" .receiver__element__allow_costumize select").val()?(e("#"+t.id+" .receiver__action__allow_costumize").removeClass("active"),void e("#"+n.id+" .receiver__element__allow_costumize").remove()):void e("#"+n.id+" .receiver__element__allow_costumize select").focus();e("#"+n.id+" .receiver__element__allow_costumize").length>0||(e("#"+n.id+" .receiver__action__allow_costumize").addClass("active"),n.initAllowCustomizeField())});var i=e("#"+this.id+" .receiver__name input"),r="change";1==l.isEdgeBrowser()&&(r="keyup"),i.on(r,function(){""!=i.val()?(n.removeError(i),n.receiver.name=s.TextHelper.stripTags(i.val().toString())):i.addClass("error")});var o=e("#"+this.id+" .receiver__email input");o.on(r,function(){0!=a.Tools.isEmail(o.val())?(n.removeError(o),n.receiver.email=s.TextHelper.stripTags(o.val().toString())):o.addClass("error")});var c=e("#"+this.id+" .receiver__type select");c.on("change",function(){n.receiver.type=c.val().toString(),"signer"!==n.receiver.type?(e("#"+n.id+" .receiver__action__sms").hide(),e("#"+n.id+" .receiver__action__allow_costumize").hide(),e("#"+n.id+" .receiver__element__sms").hide(),e("#"+n.id+" .receiver__element__allow_costumize").hide()):(e("#"+n.id+" .receiver__action__sms").show(),e("#"+n.id+" .receiver__action__allow_costumize").show(),e("#"+n.id+" .receiver__element__sms").show(),e("#"+n.id+" .receiver__element__allow_costumize").show()),"validator"===n.receiver.type?(e("#"+n.id+" .receiver__type__validator__info").show(),e("#"+n.id+" .receiver__type__viewer__info").hide()):"viewer"===n.receiver.type?(e("#"+n.id+" .receiver__type__validator__info").hide(),e("#"+n.id+" .receiver__type__viewer__info").show()):(e("#"+n.id+" .receiver__type__validator__info").hide(),e("#"+n.id+" .receiver__type__viewer__info").hide())}),e("#"+this.id+" .receiver__delete").on("click",function(){n.remove()})},n.prototype.checkCertsEnabled=function(){1==e("#certifiedCheckbox").is(":checked")?(e(".receiver__action__sms").hide(),e(".receiver__element__sms").hide()):(e(".receiver__action__sms").show(),e(".receiver__element__sms").show())},n.prototype.initPasswordField=function(){var t=this,n=e(e("#receiverPasswordTemplate").html());e("#"+t.id+" .receiver__elements").append(n),r.Tooltip.init(e("#"+t.id+" .receiver__element__password .tooltip")),e("#"+t.id+" .receiver__element__password input").focus(),e("#"+t.id+" .receiver__element__password .showPassword").on("click",function(){var n=e("#"+t.id+" .receiver__element__password input");"password"===n.attr("type")?n.attr("type","text"):n.attr("type","password")}),e("#"+t.id+" .receiver__element__password input").on("change",function(){t.receiver.password=e("#"+t.id+" .receiver__element__password input").val().toString()}),e("#"+t.id+" .receiver__element__password .receiver__element__delete").on("click",function(){e("#"+t.id+" .receiver__element__password").remove(),e("#"+t.id+" .receiver__action__password").removeClass("active")}),e("#"+t.id+" .receiver__element__password input").on("keyup change",function(n){var i=e(n.currentTarget);t.removeError(i),t.sendEventReceiversItemChanged()})},n.prototype.initPhoneField=function(){var t=e(e("#receiverSmsTemplate").html());e("#"+this.id+" .receiver__elements").append(t);var n=e("#"+this.id+" .receiver__element__sms input")[0];this.iti=o(n,{separateDialCode:!0,initialCountry:window.country||""});var i=this;n.addEventListener("countrychange",function(){i.getPhone()}),e("#"+i.id+" .receiver__element__sms input").focus(),e("#"+i.id+" .receiver__element__sms input").on("keyup",function(t){var n=e(t.currentTarget),r=n.val(),o=r.toString().replace(/(?!\+)[^0-9]/,"");o!=r&&n.val(o),i.getPhone()}),e("#"+i.id+" .receiver__element__sms input").on("keyup change",function(t){var n=e(t.currentTarget);i.removeError(n),i.sendEventReceiversItemChanged()}),e("#"+i.id+" .receiver__element__sms input").on("change",function(){try{i.iti.validate(),i.getPhone()}catch(e){}}),r.Tooltip.init(e("#"+i.id+" .receiver__element__sms .tooltip")),e("#"+i.id+" .receiver__element__sms .receiver__element__delete").on("click",function(){i.receiver.phone="",e("#"+i.id+" .receiver__element__sms").remove(),e("#"+i.id+" .receiver__action__sms").removeClass("active"),i.sendEventReceiversItemChanged()})},n.prototype.initAllowCustomizeField=function(){var t=this,n=e(e("#receiverCostumizeTemplate").html());e("#"+t.id+" .receiver__elements").append(n),r.Tooltip.init(e("#"+t.id+" .receiver__element__allow_costumize .tooltip")),e("#"+t.id+" .receiver__element__allow_costumize select").focus(),e("#"+t.id+" .receiver__element__allow_costumize select").on("change",function(){t.receiver.allowCostumize=e("#"+t.id+" .receiver__element__allow_costumize select").val().toString()}),e("#"+t.id+" .receiver__element__allow_costumize .receiver__element__delete").on("click",function(){e("#"+t.id+" .receiver__element__allow_costumize").remove(),e("#"+t.id+" .receiver__action__allow_costumize").removeClass("active")})},n.prototype.getPhone=function(){var t=e("#"+this.id+" .iti__selected-dial-code").html().replace("+",""),n=e("#"+this.id+" .receiver__element__sms input").val().toString();n=n.replace("+"+t,""),this.receiver.phone=s.TextHelper.stripTags(t+n)},n.prototype.remove=function(){1!=e(".receiver-list .receiver-list__item").length&&(this.removed=!0,this.receiver=null,e("#"+this.id).remove(),this.sendEventReceiversItemRemoved())},n.prototype.isRemoved=function(){return!0===this.removed},n.prototype.isEmpty=function(){try{return""==e("#"+this.id+" .receiver__name input").val().toString()&&""==e("#"+this.id+" .receiver__email input").val().toString()}catch(e){return!0}},n.prototype.smsValidationIsEnabled=function(){return e("#"+this.id+" .receiver__action__sms").hasClass("active")},n.prototype.passwordIsEnabled=function(){return e("#"+this.id+" .receiver__action__password").hasClass("active")},n.prototype.isIncomplete=function(){var t=e("#"+this.id+" .receiver__name input"),n=e("#"+this.id+" .receiver__email input"),i=e("#"+this.id+" .receiver__element__sms input"),r=e("#"+this.id+" .receiver__element__password input"),o=this.smsValidationIsEnabled()&&""===i.val().toString(),a=this.passwordIsEnabled()&&""===r.val().toString();try{return""==t.val().toString()||""==n.val().toString()||o||a}catch(e){return!0}},n.prototype.applyNumber=function(){this.receiver.num=parseInt(e("#"+this.id+" .receiver__count").html())},n.prototype.getReceiver=function(){return this.receiver},n.prototype.sendEventReceiversItemRemoved=function(){var e=new CustomEvent("receiversItemRemoved",{detail:{elementId:this.id}});window.dispatchEvent(e)},n.prototype.sendEventReceiversItemChanged=function(){var e=new CustomEvent("receiversItemChanged",{detail:{elementId:this.id}});window.dispatchEvent(e)},n.prototype.validate=function(){return this.validateName()&&this.validateEmail()&&this.validatePassword()&&this.validatePhone()},n.prototype.removeError=function(e){e.removeClass("error").removeClass("shake")},n.prototype.setError=function(t){t.addClass("error").removeClass("shake"),e(".modal-body").animate({scrollTop:t[0].getBoundingClientRect().top-150,duration:200},function(){t.addClass("shake")})},n.prototype.validateName=function(){return""!=e("#"+this.id+" .receiver__name input").val()||(this.setError(e("#"+this.id+" .receiver__name input")),!1)},n.prototype.validateEmail=function(){var t=this,n=this,i=e("#"+this.id+" .receiver__email input").val();if(""==i||0==a.Tools.isEmail(i))return this.setError(e("#"+this.id+" .receiver__email input")),!1;var r=!1;return e(".receiver__email input").each(function(o,a){e(a).val()==i&&e(a).closest(".receiver-list__item").attr("id")!=t.id&&(e("#"+t.id+" .receiver__email input").addClass("error"),n.setError(e("#"+t.id+" .receiver__email input")),e(a).addClass("error"),r=!0)}),!r},n.prototype.validatePassword=function(){var t=e("#"+this.id+" .receiver__element__password input"),n=!this.passwordIsEnabled()||t.val().toString().length>0;return n||(this.setError(t),t.addClass("error")),n},n.prototype.validatePhone=function(){var t=e("#"+this.id+" .receiver__element__sms input"),n=!this.smsValidationIsEnabled()||t.val().toString().length>0;return n||(this.setError(t),t.addClass("error")),n},n}();t.ReceiverItem=c,t.RECEIBER_ITEM_PART="ri_"}).call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(104);t.isEdgeBrowser=function(e){return void 0===e&&(e=i.getUserAgent()),/Edge/i.test(e)}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(){}return t.scrollToElement=function(t){var n=e(t).parent().position().top+e(t).position().top;e("#workArea").animate({scrollTop:n-parseInt((e(".tool__workarea").height()/3).toString())},500)},t}();t.ScrollHelper=n}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(173),r=n(16),o=n(163),a=n(36),s=function(){function t(){this.mode=null}return t.prototype.showModal=function(){null==this.mode&&(a.Tooltip.hide(e("#pickfiles")),e("#selectModeModal").modal("show"))},t.prototype.hideModal=function(){e("#selectModeModal").modal("hide")},t.prototype.init=function(){this.initModalModeSelectorActions(),this.showModal(),this.listenEventSignatureCancel()},t.prototype.initModalModeSelectorActions=function(){var t=this;e("#singleMode").on("click",function(){t.mode="single",e("#editReceivers").hide(),e("#signaturePanel").show(),e("#groupsPanel").show(),e("#elementsPanel").show(),t.sendEventModeChanged(),t.sendEventReceiversAdded(),t.saveToStorage(),t.hideModal()}),e("#multipleMode").on("click",function(){t.setMultipleMode()})},t.prototype.setMultipleMode=function(){this.mode="multiple",this.saveToStorage(),this.sendEventModeChanged(),this.hideModal()},t.prototype.saveToStorage=function(){o.Storage.set("sign.mode",this.mode)},t.prototype.loadFromStorage=function(){this.mode=o.Storage.get("sign.mode"),"single"==this.mode?(e("#editReceivers").hide(),e("#signaturePanel").show()):(e("#signaturePanel").hide(),e("#editReceivers").show(),e("#signersPanel").show()),e("#groupsPanel").show(),e("#elementsPanel").show(),this.sendEventModeChanged()},t.prototype.loadFromTemplate=function(t){this.mode="multiple",e("#signaturePanel").hide(),e("#editReceivers").show(),e("#signersPanel").show(),e("#groupsPanel").show(),e("#elementsPanel").show(),this.sendEventModeChanged()},t.prototype.sendEventModeChanged=function(){e("body").removeClass("mode-single").removeClass("mode-multiple"),e("body").addClass("mode-"+this.mode),"multiple"==this.mode&&1==r.UserModel.isUser()?e("#saveTemplates").show():e("#saveTemplates").hide();var t=new CustomEvent("modeChanged",{detail:{mode:this.mode}});window.dispatchEvent(t)},t.prototype.sendEventReceiversAdded=function(){var e=null;e=r.UserModel.isUser()?r.UserModel.get():{email:null,name:null,type:"signer"};var t=new i.ReceiverModel({email:e.email,name:e.name,type:"signer"}),n=new CustomEvent("receiversAdded",{detail:{receivers:[t]}});o.Storage.set("sign.receivers",[t]),window.dispatchEvent(n)},t.prototype.listenEventSignatureCancel=function(){var e=this;window.addEventListener("signatureCancel",function(t){var n=t.detail.signatureModel;"multiple"==e.mode&&""==n.signature&&e.setMultipleMode()})},t.prototype.sendEventUuidDisable=function(){var e=new CustomEvent("uuidDisable");window.dispatchEvent(e)},t}();t.default=s}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(218),r=n(175),o=n(172),a=n(366),s=n(367),l=n(368),c=n(370),u=n(371),d=n(163),p=n(372),f=n(142),h=n(139),g=n(373),v=n(374),m=n(375),y=n(196),_=n(289),b=function(){function t(e){void 0===e&&(e={}),Object.assign(this,e),this.init()}return t.prototype.init=function(){this.initSidebarDragActions(),this.initSignerClick(),this.initKeyActions(),this.listenEventReceiversChanged(),this.listenEventElementRemoved(),this.listenEventDetachElement(),this.listenEventElementChanged(),this.listenEventRemoveGroup(),this.listenEventModeChanged(),this.listenEventSignatureChanged(),this.listenEventEditCloneGroupChanged(),this.listenEventElementDetachGroup(),this.listenEventUuidChanged(),this.elementsStack=new i.ElementsStack,this.elementCounter=new c.ElementCounter(this.elementsStack),this.signerSelector=new p.SelectSigner,this.signersSelector=new a.SelectSigners,this.removeGroupModal=new s.RemoveGroupModal,this.elementsSelector=new l.ElementsSelector(this.elementsStack),this.cloneModal=new u.CloneGroupModal({files:this.files}),this.copyPasteActions(),this.doubleClickActions(),this.cloneMode="clone"},t.prototype.initSidebarDragActions=function(){var t=this;window.interact=r.default,r.default(".draggable").draggable({inertia:!0,onmove:function(e){var t=e.target;if(!t.classList.contains("clonElement"))return;var n=t.getAttribute("data-x"),i=t.getAttribute("data-y"),r=parseFloat(n)||0,o=parseFloat(i)||0,a=e.dx,s=e.dy,l=r+a,c=o+s;t.style.transform="translate("+l+"px, "+c+"px)",t.style.zIndex="99",t.setAttribute("data-x",l),t.setAttribute("data-y",c)},onend:function(n){var i=n.target;if(!i.classList.contains("clonElement"))return;if(i.classList.contains("can-drop")){var r=i.getAttribute("data-type");i.remove();var o={x:n.pageX,y:n.pageY};if(e(i).hasClass("signature__signers__item")){var a=e(i).attr("data-id");return void t.addSigner(a,o)}t.elementsSelector.clearSelected(),t.addElement(r,o)}else i.remove()},modifiers:[r.default.modifiers.restrict({restriction:"parent",endOnly:!0})]}).on("move",function(t){var n=t.interaction;if((!t.target.classList.contains("clonElement")||"false"==t.currentTarget.getAttribute("clonable"))&&n.pointerIsDown&&!n.interacting()&&"false"!=t.currentTarget.getAttribute("clonable")){var i=e(t.currentTarget).find(".draggable__content")[0];e(t.currentTarget).hasClass("draggable__content")&&(i=t.currentTarget);var r=i.cloneNode(!0);r.classList.add("clonElement"),r.setAttribute("clonable","false"),r.style.position="absolute",r.style.left=t.clientX+"px",r.style.top=t.clientY+"px",e(r).find(".sign__draggable__count").remove(),r.classList.contains("sign__draggable__content--btn")||e(r).find(".sign__draggable__text").remove(),document.body.appendChild(r),n.start({name:"drag"},t.interactable,r)}}).on("click",function(n){if(1!=e(n.currentTarget).hasClass("signature__area")&&!e(n.target).hasClass("sign__draggable__count")&&!e(n.target).hasClass("signature__signers__item")){var i=e(n.currentTarget).find(".draggable__content").attr("data-type");t.addElement(i)}}),r.default(".editor__page").dropzone({accept:".draggable__content",overlap:.75,ondropactivate:function(e){e.relatedTarget.classList.add("dragging")},ondropdeactivate:function(e){e.relatedTarget.classList.remove("dragging","cannot-drop")},ondragenter:function(e){var t=e.relatedTarget;t.classList.remove("cannot-drop"),t.classList.add("can-drop")},ondragleave:function(e){var t=e.relatedTarget;t.classList.remove("can-drop"),t.classList.add("cannot-drop")}})},t.prototype.initSignerClick=function(){this.selectElements=new m.SelectElements;var t=this;e(".signature__signers").on("click",".signature__signers__item",function(n){var i=e(n.target).attr("data-id");t.addSigner(i)})},t.prototype.addSigner=function(t,n,i){if(void 0===n&&(n=null),void 0===i&&(i=!1),0!=e(".editor__page").length){var r=this;null==n&&(n=o.ElementHelper.positionFromCenter());var a=o.ElementHelper.insertPointFromPosition(n,i),s={x:Math.floor(a.x),y:Math.floor(a.y)};s=this.updatePositionIfCollision(s),this.selectElements.selectElements().then(function(n){r.elementsSelector.reset();var i=null,l=(o.ElementHelper.pageRect(a.file,a.page),[]),c={file:a.file,page:a.page,x:s.x,y:s.y},u=g.PositionInsert.adjustBlockPosition(c,f.ELEMENT_BASE_WIDTH+20,(f.ELEMENT_BASE_HEIGHT+20)*n.length+(f.ELEMENT_BASE_HEIGHT+20));s.x+=u.x,s.y+=u.y,c.x=s.x,c.y=s.y,r.receiverModels.forEach(function(e){e.id==t&&(i=e)}),n.forEach(function(t){var n=o.ElementHelper.createElement(t);"single"==r.mode&&(n.signatureModel=i,n.mode="selfsigned",e("body").addClass("selfsigned")),n.setSigner(i),n.insert(c);var a=document.getElementById(n.childs[0]).getBoundingClientRect();c.y=n.position.y+a.height+10,l.push(n),r.elementsStack.add(n),r.elementCounter.addElementCount(t+"Element"),r.elementsSelector.refresh(),r.elementsSelector.addSelection(n.childs[0])}),r.sendEventElementsChanged()},function(){})}},t.prototype.addElement=function(t,n,i){var r=this;void 0===n&&(n=null),void 0===i&&(i=!1);var a=this;null==n&&(n=o.ElementHelper.positionFromCenter(),this.resetDirectionCopy());var s=o.ElementHelper.insertPointFromPosition(n,i),l={x:Math.floor(s.x),y:Math.floor(s.y)};l=this.updatePositionIfCollision(l),this.signersSelector.selectSigners().then(function(n){r.elementsSelector.reset(),y.default.setViewed("dragStepDone");var i=[],c=0,u=o.ElementHelper.pageRect(s.file,s.page);n.forEach(function(n,r){var d=o.ElementHelper.createElement(t);"single"==a.mode&&(d.signatureModel=a.signatureModel,d.mode="selfsigned",e("body").addClass("selfsigned"));var p={file:s.file,page:s.page,x:l.x,y:l.y};d.setSigner(n),d.insert(p);var f=document.getElementById(d.childs[0]).getBoundingClientRect();c=0==c?f.width:c+f.width+20,u.width<c&&(p.y=p.y+20+f.height,p.x=i[0].position.x,l.y+=20+f.height,l.x=i[0].position.x,d.position.x=l.x,d.position.y=l.y,e("#"+d.childs[0]).css({left:d.position.x+"px",top:d.position.y+"px"}),c=f.width);var h=g.PositionInsert.adjustBlockPosition(p,f.width+20,f.height+20);i.forEach(function(t,n){t.position.x+=h.x,t.position.y+=h.y,e("#"+t.childs[0]).css({left:t.position.x+"px",top:t.position.y+"px"})}),d.position.x+=h.x,d.position.y+=h.y,e("#"+d.childs[0]).css({left:d.position.x+"px",top:d.position.y+"px"}),l.x=d.position.x+f.width+20,l.y=d.position.y,i.push(d),a.elementsStack.add(d),a.elementCounter.addElementCount(t),a.elementsSelector.refresh(),a.elementsSelector.addSelection(d.childs[0])}),a.elementsSelector.refresh(),a.sendEventElementsChanged()},function(){}),this.elementsSelector.refresh()},t.prototype.updatePositionIfCollision=function(e){var t=this;return this.elementsStack.all().forEach(function(n){if(1!=n.removed&&n.position.x==e.x&&n.position.y==e.y){var i={x:e.x+20*t.copyDirection.x,y:e.y+20*t.copyDirection.y};e=t.updatePositionIfCollision(i)}}),e},t.prototype.copyElement=function(e,t,n){void 0===n&&(n=!0);var i=o.ElementHelper.createElementFrom(e);i.signatureModel=e.signatureModel,i.mode=e.mode,i.width=e.width,i.height=e.height,i.zoom=e.zoom,i.fontSize=e.fontSize,i.setSigner(e.signer);var r=o.ElementHelper.insertPointFromPosition(e.position,!0);if(r.x+=t.x,r.y+=t.y,t.page&&(r.page=t.page),t.file&&(r.file=t.file),t.page||t.file){var a=g.PositionInsert.adjustBlockPosition(r,e.getWidthInView(),e.getHeightInView());r.x+=a.x,r.y+=a.y}i.insert(r);this.elementsStack.add(i),this.elementCounter.addElementCount(i.type),this.elementsSelector.refresh(),1==n&&this.elementsSelector.addSelection(i.childs[0])},t.prototype.receiversChanged=function(e){var t=this;this.receiverModels=e,this.signerModels=[],e.forEach(function(e,n){"signer"==e.type&&t.signerModels.push(e)})},t.prototype.checkDeletedSigners=function(){var e=this;this.elementsStack.all().forEach(function(t){var n=!1;e.signerModels.forEach(function(e){e.id==t.signer.id&&(n=!0)}),0==n&&t.remove()}),this.cleanRemovedElements()},t.prototype.listenEventReceiversChanged=function(){var e=this;window.addEventListener("receiversChanged",function(t){e.receiversChanged(t.detail.receivers),e.checkDeletedSigners(),e.sendEventElementsChanged()})},t.prototype.listenEventElementRemoved=function(){var e=this;window.addEventListener("elementRemoved",function(t){e.elementsStack.all().forEach(function(n,i){n.id==t.detail.elementId&&e.elementCounter.removeElementCount(n.type)}),e.cleanRemovedElements(),e.saveToStorage()})},t.prototype.goNearestElement=function(e,t){var n=this;window.setTimeout(function(){if(0==n.elementsStack.count())return null;var i=o.ElementHelper.getNearestElementClass("sign__element",e,t);h.ScrollHelper.scrollToElement(i),n.elementsSelector.refresh(),n.elementsSelector.addSelection(i.id)},1e3)},t.prototype.cleanRemovedElements=function(){var e=this;this.elementsStack.all().forEach(function(t,n){!0===t.removed&&(!0!==t.removedSilent?(t.removed=!0,t.removedSilent=!1):e.elementsStack.remove(t.id))})},t.prototype.listenEventDetachElement=function(){var e=this;window.addEventListener("detachElement",function(t){v.UnlinkManager.confirm().then(function(){e.elementsStack.all().forEach(function(n){if(n.id==t.detail.parentId){var i=n.detach(t.detail.elementId);e.elementsStack.add(i),e.elementCounter.addElementCount(i.type),e.elementsSelector.reset(),e.elementsSelector.refresh(),e.elementsSelector.addSelection(i.childs[0])}})},function(){})})},t.prototype.listenEventElementChanged=function(){var e=this;window.addEventListener("elementChanged",function(t){e.saveToStorage(),e.elementsSelector.redraw()})},t.prototype.listenEventRemoveGroup=function(){var t=this;window.addEventListener("removeGroup",function(n){var i=JSON.parse(JSON.stringify(n.detail.elements)),r=n.detail.mode,o=n.detail.allFiles;t.elementsSelector.hideGroupActions(),i.forEach(function(n){var i=t.elementsStack.get(n.id);if(1==i.childs.length)t.elementsSelector.removeSelectable(i.childs[0]),i.remove();else if("all"==r)i.childs.forEach(function(e){t.elementsSelector.removeSelectable(e)}),i.remove();else if("current"==r){var a=t.elementsSelector.getSelectedPage(),s=null;if(1==o)s=e('.editor__page[data-page="'+a+'"] [data-id="'+n.id+'"]');else{var l=t.elementsSelector.getSelectedFile();s=e('.editor__page[data-file="'+l+'"][data-page="'+a+'"] [data-id="'+n.id+'"]')}s.each(function(e,n){t.elementsSelector.removeSelectable(n.id),i.remove(n.id)})}}),t.elementsSelector.checkLinkedElements()})},t.prototype.listenEventEditCloneGroupChanged=function(){var t=this;window.addEventListener("editCloneGroupChanged",function(n){var i=JSON.parse(JSON.stringify(n.detail.elements));if("clone"==t.cloneMode)i.forEach(function(n){var i=t.elementsStack.get(n.id);i.cloneMode=n.cloneMode,e('[data-id="'+i.id+'"]').each(function(i,r){var a=parseInt(e(r).parent().attr("data-page")),s=e(r).parent().attr("data-file");if(!n.filesPages[s]){var l=e(r).attr("id");t.elementsSelector.removeSelectable(l),o.ElementHelper.removePreviewBullet(l),e(r).remove()}if(n.filesPages[s]&&-1==n.filesPages[s].indexOf(a)){l=e(r).attr("id");t.elementsSelector.removeSelectable(l),t.elementsSelector.hideGroupActions(),o.ElementHelper.removePreviewBullet(l),e(r).remove()}}),e(".tool__workarea>.wait").show(),window.setTimeout(function(){i.initInsertSilentMode();var r=function(t){n.filesPages[t].forEach(function(n){0==e('[data-file="'+t+'"][data-page="'+n+'"] [data-id="'+i.id+'"]').length&&i.clone({file:t,page:n,x:i.position.x,y:i.position.y})})};for(var o in n.filesPages)r(o);i.endInsertSilentMode(),e(".tool__workarea>.wait").hide(),t.elementsSelector.refresh(),t.elementsSelector.checkLinkedElements()},100)});else{var r=JSON.parse(JSON.stringify(n.detail.filesPages));i.forEach(function(e){var n=t.elementsStack.get(e.id),i=function(e){r.hasOwnProperty(e)&&r[e].forEach(function(i){if(n.inSamePage(e,i));else{var r={file:e,page:i,x:0,y:0};t.copyElement(n,r,!1)}})};for(var o in r)i(o)}),t.elementsSelector.refresh(),t.elementsSelector.checkLinkedElements()}})},t.prototype.listenEventModeChanged=function(){var t=this;window.addEventListener("modeChanged",function(n){t.mode=n.detail.mode,"single"==t.mode&&e("#addElementInput").hide()})},t.prototype.listenEventSignatureChanged=function(){var e=this;window.addEventListener("signatureChanged",function(t){e.signatureModel=t.detail.signatureModel,e.elementsStack.all().forEach(function(t){t.signatureModel=e.signatureModel,"single"==e.mode&&t.applySingature()}),window.setTimeout(function(){e.elementsSelector.restart()},200)})},t.prototype.listenEventElementDetachGroup=function(){var e=this;window.addEventListener("detachGroup",function(t){var n=JSON.parse(JSON.stringify(t.detail.elements));v.UnlinkManager.confirm().then(function(){e.elementsSelector.reset(),n.forEach(function(t){var n=e.elementsStack.get(t.id).detach(t.currentSelected);e.elementsStack.add(n),e.elementCounter.addElementCount(n.type),e.elementsSelector.refresh(),e.elementsSelector.addSelection(n.childs[0])})},function(){})})},t.prototype.loadFromStorage=function(){},t.prototype.loadFromTemplate=function(e){var t=this;"batch"!=e.mode?e.signers.forEach(function(n){t.receiverModels.forEach(function(e){n.id==e.id&&(n.model=e)}),n.files.forEach(function(i){e.files.forEach(function(e){i.server_filename==e.server_filename&&(i.id=e.id)}),i.elements.forEach(function(e){var r=o.ElementHelper.createElement(e.type);if(r.setSigner(n.model),"input"==e.type){var a=JSON.parse(e.info);r.label=a.label,r.description=a.description}else"text"==e.type&&(r.content=e.content);e.pages.split(",").forEach(function(t){var n={file:i.id,page:parseInt(t),x:parseFloat(e.x),y:parseFloat(e.y)};r.insert(n)}),e.font_size&&(e.fontSize=parseFloat(e.font_size)),r.height=parseFloat(e.size),r.applyData(),r.applySize(),t.elementsStack.add(r),t.elementCounter.addElementCount(e.type+"Element")})})}):e.batch_elements.forEach(function(n){e.files.forEach(function(e){n.server_filename==e.server_filename&&(n.id=e.id)}),n.elements.forEach(function(e){var i=o.ElementHelper.createElement(e.type);i.setSigner(t.receiverModels[0]),e.pages.split(",").forEach(function(t){var r={file:n.id,page:parseInt(t),x:parseFloat(e.x),y:parseFloat(e.y)};i.insert(r)}),t.elementsStack.add(i),t.elementCounter.addElementCount(e.type+"Element")})})},t.prototype.saveToStorage=function(){var e=[];this.elementsStack.all().forEach(function(t,n){!0!==t.removed&&e.push(t)}),0!=e.length?d.Storage.set("sign.elements",e.length):d.Storage.remove("sign.elements")},t.prototype.getData=function(e,t){void 0===t&&(t=!1);var n=this;return 1==t&&(e=[_.DEFAULT_SIGNER]),e.forEach(function(e,t){var i=[];n.files.files.forEach(function(t){var r={server_filename:t.server_filename,elements:[]};n.elementsStack.all().forEach(function(n){1==n.checkHasSignerDataInFile(t.id,e.id)&&(r.elements=r.elements.concat(n.getData(t.id,e.id)))}),i.push(r)}),e.files=i}),e},t.prototype.copy=function(){var e=this;this.copyElements=[],this.elementsStack.all(i.ELEMENT_STACK_SELECTED).forEach(function(t){e.copyElements.push(t.id)}),this.copyPosition=this.elementsSelector.getSelectionInsertPoint(),this.copyNextPosition=this.elementsSelector.getSelectionInsertPoint(),this.resetDirectionCopy()},t.prototype.resetDirectionCopy=function(){this.copyDirection={x:1,y:1}},t.prototype.cut=function(){this.elementsStack.all(i.ELEMENT_STACK_SELECTED).forEach(function(e){e.remove(e.currentSelected,!0)}),this.elementsSelector.clearSelected(),this.elementsSelector.hideGroupActions()},t.prototype.delete=function(){this.elementsStack.all(i.ELEMENT_STACK_SELECTED).forEach(function(e){e.remove(e.currentSelected)}),this.elementsSelector.clearSelected(),this.elementsSelector.hideGroupActions()},t.prototype.paste=function(){var t=this,n=this;if(this.copyDirection&&this.copyNextPosition){this.copyNextPosition.x+=20*this.copyDirection.x,this.copyNextPosition.y+=20*this.copyDirection.y;var i=this.elementsSelector.getSelectorRect();if(null!=i){var r=g.PositionInsert.adjustBlockPosition(this.copyNextPosition,i.width+20*this.copyDirection.x,i.height+20*this.copyDirection.y),a={x:this.copyNextPosition.x+r.x-this.copyPosition.x,y:this.copyNextPosition.y+r.y-this.copyPosition.y};0!==Math.sign(r.x)&&(this.copyDirection.x=Math.sign(r.x)),0!==Math.sign(r.y)&&(this.copyDirection.y=Math.sign(r.y)),this.copyNextPosition.x=this.copyPosition.x+a.x,this.copyNextPosition.y=this.copyPosition.y+a.y,this.elementsSelector.reset(),this.copyElements.forEach(function(i){var r=n.elementsStack.get(i);if(null!=r){var s={file:o.ElementHelper.getCurrentFile(),page:o.ElementHelper.getCurrentPage(),x:r.position.x,y:r.position.y};if(1==r.existsInPage(s.file,s.page))n.copyElement(r,a);else{1==r.removedSilent&&(r.removedSilent=!1,t.elementCounter.addElementCount(r.type));var l=r.clone(s);n.elementsSelector.refresh(),n.elementsSelector.addSelection(l),h.ScrollHelper.scrollToElement(e("#"+l))}}})}}},t.prototype.copyPasteActions=function(){var t=this;e(document).on({copy:function(n){n.target.hasAttribute("contenteditable")||n.target.type||e('[contenteditable="true"]').length>0||e(".modal").is(":visible")||t.copy()},paste:function(n){e(".modal").is(":visible")||n.target.hasAttribute("contenteditable")||n.target.type||e('[contenteditable="true"]').length>0||t.paste()},cut:function(n){n.target.hasAttribute("contenteditable")||n.target.type||e('[contenteditable="true"]').length>0||e(".modal").is(":visible")||(t.copy(),t.cut())},keydown:function(n){n.target.hasAttribute("contenteditable")||n.target.type||e('[contenteditable="true"]').length>0||e(".modal").is(":visible")||46!=n.keyCode&&8!=n.keyCode||t.delete()}})},t.prototype.doubleClickActions=function(){var t=this,n=this;e(document).on("dblclick",".sign__element",function(i){var r=n.elementsStack.get(e(i.currentTarget).attr("data-id"));null!=r&&(1!=e("body").hasClass("selfsigned")||"signature-element"!=r.type&&"initials-element"!=r.type?t.signerSelector.selectSigners(r.signer).then(function(e){r.updateSigner(e)},function(){}):e("#openSignatureConfig").click())})},t.prototype.fileRemoved=function(t){this.elementsStack.all().forEach(function(n){n.filesPages[t]&&(n.childs.forEach(function(t){0==e(t).length&&n.remove(t)}),0==n.childs.length&&(n.removed=!0))}),this.cleanRemovedElements(),this.elementsSelector.refresh(),this.sendEventElementsChanged()},t.prototype.sendEventElementsChanged=function(){var e=new CustomEvent("elementsChanged");window.dispatchEvent(e)},t.prototype.validate=function(){return this.validateSignatureIsPresent()&&this.validateAllInputsLabeled()},t.prototype.validateSignatureIsPresent=function(){var t=this;if(0==e(".editor__content .sign__element").length)return!1;try{this.signerModels.forEach(function(e){var n=!1;if(t.elementsStack.all().forEach(function(t){t.signer.id==e.id&&"signature-element"==t.type&&1!=t.removed&&(n=!0)}),0==n)throw"Signer "+e.id+" has no fields"})}catch(e){return!1}return!0},t.prototype.validateAllInputsLabeled=function(){if(0==e(".editor__content .sign__element--input").length)return!0;try{this.elementsStack.all().forEach(function(e){if(1!=e.removed&&"input-element"==e.type&&(""==e.label||null==e.label))throw"Input with missing label "+e.id})}catch(e){return!1}return!0},t.prototype.initKeyActions=function(){e(document).on("keypress",function(t){if(!(t.target.hasAttribute("contenteditable")||t.target.type||e('[contenteditable="true"]').length>0||1==e(".modal").is(":visible")))switch(t.key){case"s":e("#addElementSignature").trigger("click");break;case"i":e("#addElementInitials").trigger("click");break;case"n":e("#addElementName").trigger("click");break;case"t":e("#addElementText").trigger("click");break;case"d":e("#addElementDate").trigger("click")}})},t.prototype.listenEventUuidChanged=function(){var e=this;window.addEventListener("uuidChanged",function(t){window.setTimeout(function(){e.elementsSelector.restart()},200)})},t}();t.ElementsManager=b}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(){this.signers=[],this.currentSelected=[],this.init()}return t.prototype.init=function(){this.listenEventReceiversChanged()},t.prototype.setSignersFromReceivers=function(e){this.signers=[];var t=this;e.forEach(function(e,n){"signer"==e.type&&t.signers.push(e)})},t.prototype.selectSigners=function(e){void 0===e&&(e=[]);var t=this;return new Promise(function(n,i){if(1==t.signers.length)return t.currentSelected=t.signers,void n(t.currentSelected);t.initSigners(e),t.showModal(),document.getElementById("confirmSelectSigners").onclick=function(){t.hideModal(),t.save(),document.getElementById("confirmSelectSigners").onclick=null,document.getElementById("cancelSelectSigners").onclick=null,n(t.currentSelected)},document.getElementById("cancelSelectSigners").onclick=function(){t.hideModal(),document.getElementById("confirmSelectSigners").onclick=null,document.getElementById("cancelSelectSigners").onclick=null,i("cancelled")}})},t.prototype.initSigners=function(t){void 0===t&&(t=[]),e("#selectSignersModal .sign__signer__list").html(""),this.signers.forEach(function(n,i){if("signer"==n.type){var r=(t.find(function(e){return e.id===n.id}),"checked"),o='<li class="sign__signer__item">\n                        <div class="checkbox">\n                            <input type="checkbox" name="signers-'+n.id+'" id="signers-'+n.id+'"\n                                   value="'+n.id+'"\n                                   class="input" '+r+'>\n                            <label for="signers-'+n.id+'">\n                                <div class="sign__signer__bullet '+n.colorClass+'">\n                                </div>\n                                <div class="sign__signer__name">\n                                    '+n.name+"\n                                </div>\n                            </label>\n                        </div>\n                    </li>";e("#selectSignersModal .sign__signer__list").append(o)}})},t.prototype.save=function(){var t=[];return this.signers.forEach(function(n,i){e("#signers-"+n.id).is(":checked")&&t.push(n)}),this.currentSelected=t,this.currentSelected},t.prototype.showModal=function(){e("#selectSignersModal").modal("show"),e(".modal-body").scrollTop(0)},t.prototype.hideModal=function(){e("#selectSignersModal").modal("hide")},t.prototype.listenEventReceiversChanged=function(){var e=this;window.addEventListener("receiversChanged",function(t){e.setSignersFromReceivers(t.detail.receivers)})},t}();t.SelectSigners=n}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(e){void 0===e&&(e={}),Object.assign(this,e),this.initActions()}return t.prototype.initActions=function(){var e=this;document.getElementById("confirmRemoveBlocks").addEventListener("click",function(){e.hideModal(),e.sendEventRemoveGroup()}),document.getElementById("cancelRemoveBlocks").addEventListener("click",function(){e.hideModal()}),this.listenEventAskRemoveGroup()},t.prototype.listenEventAskRemoveGroup=function(){var t=this;window.addEventListener("askRemoveGroup",function(n){t.elements=n.detail.elements;var i=0;t.elements.forEach(function(e){i=Math.max(i,e.childs.length)}),i>1?t.showModal():(e("#removeCurrent").click(),t.sendEventRemoveGroup())})},t.prototype.sendEventRemoveGroup=function(){var e=new CustomEvent("removeGroup",{detail:this.getData()});window.dispatchEvent(e)},t.prototype.getData=function(){return{elements:this.elements,mode:e('[name="removeBlock"]:checked').val().toString(),allFiles:e("#removeAllDocuments").is(":checked")}},t.prototype.showModal=function(){e("#removeGroupModal").modal("show"),e(".modal-body").scrollTop(0)},t.prototype.hideModal=function(){e("#removeGroupModal").modal("hide")},t}();t.RemoveGroupModal=n}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(369),r=n(175),o=n(218),a=n(172),s=n(139),l=n(19),c=n(196),u=function(){function t(e){this.elementsStack=e,this.allowClone=!1,this.init()}return t.prototype.init=function(){var t=this;this.listenEventSelectionChanged(),this.dragSelect=new i({selectables:document.getElementsByClassName("sign__element"),area:document.getElementById("editor"),callback:this.sendEventSelectionChanged,onDragStartBegin:function(n){"groupActions"==n.target.id?t.dragSelect.break():n.target&&n.target.classList.contains("sign__element")||n.target.parentElement.classList.contains("sign__element")||n.target.parentElement.parentElement.classList.contains("sign__element")||n.target.parentElement.parentElement.parentElement.classList.contains("sign__element")?t.dragSelect.break():(e(n.target).hasClass("linked")||"groupActions"==n.target.id||e(n.target).hasClass("sign__action")||e(n.target).closest(".sign__action").length>0||e(n.target).hasClass("gizmo"))&&t.dragSelect.break()}}),e(document).on("click touchstart",".sign__element",function(n){e(n.target).is(".sign__element__link")||e(n.target).closest(".sign__element__link").length>0||n.currentTarget.classList&&n.currentTarget.classList.contains("sign__element")&&(t.dragSelect.addSelection(n.currentTarget),t.showGroupActions(t.dragSelect.getSelection()))}),e(".sign__action--remove").on("click touchstart",function(e){t.sendEventAskRemoveGroup()}),e(".sign__action--repeat").on("click touchstart",function(){t.sendEventEditCloneGroup()}),e(".sign__action--detach").on("click touchstart",function(){t.sendEventDetachGroup()}),e(".linked--up").on("click touchstart",function(){t.goLinked("up")}),e(".linked--down").on("click touchstart",function(){t.goLinked("down")})},t.prototype.addSelection=function(e){this.dragSelect.addSelection(document.getElementById(e)),this.showGroupActions(this.dragSelect.getSelection())},t.prototype.removeSelectable=function(e){this.dragSelect.removeSelectables(document.getElementById(e),!0)},t.prototype.sendEventAskRemoveGroup=function(){var e=this.elementsStack.all(o.ELEMENT_STACK_SELECTED),t=new CustomEvent("askRemoveGroup",{detail:{elements:JSON.parse(JSON.stringify(e))}});window.dispatchEvent(t)},t.prototype.sendEventEditCloneGroup=function(){var e=this.elementsStack.all(o.ELEMENT_STACK_SELECTED),t=new CustomEvent("editCloneGroup",{detail:{elements:JSON.parse(JSON.stringify(e))}});window.dispatchEvent(t)},t.prototype.sendEventDetachGroup=function(){var e=this.elementsStack.all(o.ELEMENT_STACK_SELECTED),t=new CustomEvent("detachGroup",{detail:{elements:JSON.parse(JSON.stringify(e))}});window.dispatchEvent(t)},t.prototype.sendEventSelectionChanged=function(e){var t=new CustomEvent("selectionChanged",{detail:{elements:e}});window.dispatchEvent(t)},t.prototype.reset=function(){this.dragSelect.setSelection([]),this.showGroupActions(this.dragSelect.getSelection())},t.prototype.refresh=function(){this.dragSelect.addSelectables(document.getElementsByClassName("sign__element"))},t.prototype.fileRemoved=function(t){var n=e("#groupActions");n.parent().attr("data-file")==t&&(this.clearSelected(),n.insertBefore(e(".editor__content")),n.hide(),alert())},t.prototype.listenEventSelectionChanged=function(){var e=this;window.addEventListener("selectionChanged",function(t){var n=e.onlySelectedOnSamePage(t.detail.elements);e.showGroupActions(n)})},t.prototype.hideGroupActions=function(){e("#groupActions").hide()},t.prototype.getSelectedPage=function(){return e("#groupActions").parent().attr("data-page")},t.prototype.getSelectedFile=function(){return e("#groupActions").parent().attr("data-file")},t.prototype.onlySelectedOnSamePage=function(t){if(!this.dragSelect)return t;if(t.length<=1)return t;var n=this,i=e(t[0]).parent().attr("data-page"),r=[];return t.forEach(function(t,o){e(t).parent().attr("data-page")!=i?n.dragSelect.removeSelection(t):r.push(t)}),r},t.prototype.showGroupActions=function(t){var n=e("#groupActions");if(0==t.length)return n.hide(),this.clearSelected(),void(this.active=!1);1==t.length?n.addClass("single"):n.removeClass("single"),this.active=!0,e("#groupActions").show(),e("#groupActions").insertBefore(e(t[0])),e(".editor__page").css("z-index",""),e("#groupActions").parent().css("z-index",1),this.clearSelected(),this.setSelected(t),this.checkLinkedElements(),this.redrawSelection(t),this.initDraggable(),this.checkCloneMode();var i=e(".sign__action--repeat").first();1==i.is(":visible")&&window.setTimeout(function(){c.default.showTip("cloneTip",i,"top")},500)},t.prototype.clearSelected=function(){this.elementsStack.all(o.ELEMENT_STACK_SELECTED).forEach(function(e){e.currentSelected=null}),this.elementsStack.clear(o.ELEMENT_STACK_SELECTED)},t.prototype.checkCloneMode=function(){1==this.allowClone?this.showCloneOption():this.hideCloneOption()},t.prototype.setSelected=function(t){var n=this;t.forEach(function(t){var i=t.id,r=e(t).attr("data-id"),a=n.elementsStack.get(r);null!=a&&(a.currentSelected=i,n.elementsStack.add(a,o.ELEMENT_STACK_SELECTED))})},t.prototype.redrawSelection=function(t){if(0!=e(t[0]).length){var n=e(t[0]).position().top,i=n+e(t[0]).innerHeight(),r=e(t[0]).position().left,o=r+e(t[0]).innerWidth();t.forEach(function(t){var a=e(t).position();n=Math.min(a.top,n),r=Math.min(a.left,r),i=Math.max(a.top+e(t).innerHeight()+2,i),o=Math.max(a.left+e(t).innerWidth()+2,o)}),e("#groupActions").css({position:"absolute",top:n+"px",left:r+"px",width:o-r+"px",height:i-n+"px"}),this.position={x:parseInt(e("#groupActions").css("left")),y:parseInt(e("#groupActions").css("top"))},this.size={width:parseInt(e("#groupActions").css("width")),height:parseInt(e("#groupActions").css("height"))},this.checkCloneMode()}},t.prototype.initDraggable=function(){var t=this,n=e("#groupActions");if(this.position={x:parseInt(n.css("left")),y:parseInt(n.css("top"))},1!=this.draggableStarted){this.draggableStarted=!0;l.Tools.randomId();r.default("#groupActions").draggable({ignoreFrom:".sign__group__actions",modifiers:[r.default.modifiers.restrictRect({restriction:"parent"})],listeners:{start:function(e){},move:function(e){t.position.x+=e.dx,t.position.y+=e.dy,e.currentTarget.style.top=t.position.y+"px",e.currentTarget.style.left=t.position.x+"px",t.elementsStack.all(o.ELEMENT_STACK_SELECTED).forEach(function(t){t.position.x+=e.dx,t.position.y+=e.dy;var n=document.getElementById(t.currentSelected);n.style.top=t.position.y+"px",n.style.left=t.position.x+"px"})},end:function(e){t.onDragEnd(e)}}}).resizable(t.getResizableParams()).on("resizemove",function(n){var i=n.target,r=e(i).width();1==n.edges.bottom&&1==n.edges.left&&(n.deltaRect.width=-1*n.deltaRect.width,n.deltaRect.left=-1*n.deltaRect.left),1==n.edges.top&&1==n.edges.right&&(n.deltaRect.width=-1*n.deltaRect.width);if(!(n.deltaRect.width>30||n.deltaRect.height>30||n.deltaRect.top>30||n.deltaRect.bottom>30||n.deltaRect.left>30||n.deltaRect.right>30)){t.getDataRatio();var a=t.restrictSize(),s=t.size.width+n.deltaRect.width,l=t.size.height+n.deltaRect.height;if(!(s>a.max.width&&n.deltaRect.width>0||s<a.min.width&&n.deltaRect.width<0||l>a.max.height&&a.min.height>0||l<a.min.height&&a.min.height<0)){t.size.width+=n.deltaRect.width,t.size.height+=n.deltaRect.height;var c=t.size.width/r;t.position.x+=n.deltaRect.left,t.position.y+=n.deltaRect.top,i.style.width=t.size.width+"px",i.style.height=t.size.height+"px",i.style.top=t.position.y+"px",i.style.left=t.position.x+"px",t.elementsStack.all(o.ELEMENT_STACK_SELECTED).forEach(function(i){var r=i.position.x-t.position.x,o=i.position.y-t.position.y,a=t.position.x+t.size.width-i.position.x-2,s=t.position.y+t.size.height-i.position.y-2;e("#"+i.currentSelected+" .signature__firm");n.deltaRect.left<0?i.position.x-=a*c-a:n.deltaRect.left>0?i.position.x-=a*c-a:i.position.x+=r*c-r,n.deltaRect.top<0?i.position.y-=s*c-s:n.deltaRect.top>0?i.position.y-=s*c-s:i.position.y+=o*c-o,i.applyPosition(i.currentSelected),i.applyResize(i.currentSelected,c)})}}}).on("resizeend",function(e){t.onResizeEnd(e)})}else r.default("#groupActions").resizable(t.getResizableParams())},t.prototype.getResizableParams=function(){return{edges:{left:".gizmo--left",right:".gizmo--right",bottom:".gizmo--bottom",top:".gizmo--top"},preserveAspectRatio:!0,modifiers:[r.default.modifiers.aspectRatio({ratio:"preserve",modifiers:[r.default.modifiers.restrictEdges({outer:"parent",endOnly:!0}),r.default.modifiers.restrictSize(this.restrictSize())]})],inertia:!0}},t.prototype.restrictSize=function(){var t=document.body.classList.contains("uuid--disabled"),n=this.getSelectorRect();if(null!=n){var i=this.elementsStack.all(o.ELEMENT_STACK_SELECTED),r=5e3,a=5e3,s=1==t?100:150,l=1==t?16:54,c=this.getDataRatio();s*=c,l*=c;var u=16*c,d=14*c;i.forEach(function(t){if(0!=e('[data-id="'+t.id+'"]').length){var i=e('[data-id="'+t.id+'"]')[0].getBoundingClientRect();"signature-element"==t.type?(r=Math.min((s-i.height)*n.height/i.height,r),a=Math.min((i.height-l)*n.height/i.height,a)):"initials-element"==t.type?(r=Math.min((150-i.height)*n.height/i.height,r),a=Math.min((i.height-u)*n.height/i.height,a)):(r=Math.min((64-i.height)*n.height/i.height,r),a=Math.min((i.height-d)*n.height/i.height,a))}});var p=n.height+r,f=p/n.height*n.width,h=n.height-a;return{min:{width:h/n.height*n.width,height:h},max:{width:f,height:p}}}},t.prototype.getSelectionInsertPoint=function(){var t=e("#groupActions");return{x:parseInt(t.css("left")),y:parseInt(t.css("top")),file:t.parent().attr("data-file"),page:parseInt(t.parent().attr("data-page"))}},t.prototype.getSelectorRect=function(){return 0==e("#groupActions").length?null:e("#groupActions")[0].getBoundingClientRect()},t.prototype.onDragEnd=function(t){this.elementsStack.all(o.ELEMENT_STACK_SELECTED).forEach(function(t){e('[data-id="'+t.id+'"]').css({top:t.position.y,left:t.position.x})})},t.prototype.checkLinkedElements=function(){var t=!1;0==this.getLinkedElements("up").length?e(".linked--up").hide():(e(".linked--up").show(),t=!0),0==this.getLinkedElements("down").length?e(".linked--down").hide():(e(".linked--down").show(),t=!0),1==t?(e(".sign__action--detach").show(),window.setTimeout(function(){c.default.showTip("unlinkTip",e(".sign__action--detach").first(),"top")},500)):e(".sign__action--detach").hide()},t.prototype.getLinkedElements=function(t){var n=this,i=[];return this.dragSelect.getSelection().forEach(function(r){var a=n.elementsStack.get(e(r).attr("data-id"),o.ELEMENT_STACK_SELECTED);if(a.childs&&a.childs.length>1){var s=a.childs.indexOf(r.id);"down"==t&&s!=a.childs.length-1&&i.push(document.getElementById(a.childs[s+1])),"up"==t&&0!=s&&i.push(document.getElementById(a.childs[s-1]))}}),i},t.prototype.goLinked=function(e){var t=this.getLinkedElements(e);if(t.length>0){var n=a.ElementHelper.getNearestElement(document.getElementById("groupActions"),t);this.reset(),this.addSelection(n.id),s.ScrollHelper.scrollToElement(n)}},t.prototype.onResizeEnd=function(e){var t=document.body.classList.contains("selfsigned");this.elementsStack.all(o.ELEMENT_STACK_SELECTED).forEach(function(e){e.childs.forEach(function(t){e.applySize(t)}),1==t&&e.trim()});var n=this.dragSelect.getSelection();this.clearSelected(),this.setSelected(n),this.checkLinkedElements(),this.redrawSelection(n),this.initDraggable()},t.prototype.redraw=function(){this.redrawSelection(this.dragSelect.getSelection())},t.prototype.restart=function(){var e=this.dragSelect.getSelection();this.clearSelected(),this.setSelected(e),this.checkLinkedElements(),this.redrawSelection(e),this.initDraggable()},t.prototype.setSinglePage=function(){this.allowClone=!1,this.hideCloneOption()},t.prototype.setMultiplePages=function(){this.allowClone=!0,this.showCloneOption()},t.prototype.showCloneOption=function(){e(".sign__action.sign__action--repeat").css("display","flex")},t.prototype.hideCloneOption=function(){e(".sign__action.sign__action--repeat").hide()},t.prototype.getDataRatio=function(){var t=e("#groupActions").parent();return parseFloat(t.attr("data-height"))/t.height()},t}();t.ElementsSelector=u}).call(this,n(1))},function(e,t,n){"use strict";(function(e){var i;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(t){var n=this,i=t.area,r=void 0===i?document:i,o=t.autoScrollSpeed,a=void 0===o?1:o,l=t.callback,c=void 0===l?function(){}:l,u=t.customStyles,d=void 0!==u&&u,p=t.hoverClass,f=void 0===p?"ds-hover":p,h=t.multiSelectKeys,g=void 0===h?["ctrlKey","shiftKey","metaKey"]:h,v=t.multiSelectMode,m=void 0!==v&&v,y=t.onDragMove,_=void 0===y?function(){}:y,b=t.onDragStart,w=void 0===b?function(){}:b,S=t.onDragStartBegin,E=void 0===S?function(){}:S,x=t.onElementSelect,k=void 0===x?function(){}:x,C=t.onElementUnselect,P=void 0===C?function(){}:C,T=t.selectableClass,O=void 0===T?"ds-selectable":T,M=t.selectables,I=void 0===M?[]:M,A=t.selectedClass,D=void 0===A?"ds-selected":A,L=t.selector,j=void 0===L?void 0:L,R=t.selectorClass,F=void 0===R?"ds-selector":R,N=t.zoom,B=void 0===N?1:N;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"_multiSelectKeyPressed",!1),s(this,"_initialCursorPos",{x:0,y:0}),s(this,"_newCursorPos",{x:0,y:0}),s(this,"_previousCursorPos",{x:0,y:0}),s(this,"_initialScroll",{x:0,y:0}),s(this,"_selected",[]),s(this,"_prevSelected",[]),s(this,"_lastTouch",void 0),s(this,"_onClick",function(e){return n.handleClick(e)}),s(this,"_startUp",function(e){return n.startUp(e)}),s(this,"_handleMove",function(e){return n.handleMove(e)}),s(this,"_end",function(e){return n.reset(e,!0)}),this.selectedClass=D,this.hoverClass=f,this.selectorClass=F,this.selectableClass=O,this.selectables=[],this._initialSelectables=this._toArray(I),this.multiSelectKeys=g,this.multiSelectMode=m,this.autoScrollSpeed=0===a?0:a,this.selectCallback=k,this.unselectCallback=P,this.onDragStartBegin=E,this.moveStartCallback=w,this.moveCallback=_,this.callback=c,this.area=this._handleArea(r),this.customStyles=d,this.zoom=B,this.selector=j||this._createSelector(),this.selector.classList.add(this.selectorClass),this.start()}var t,n,i;return t=e,(n=[{key:"_handleArea",value:function(e){if(e===document)return e;var t=getComputedStyle(e);e.computedBorder=parseInt(t.borderWidth);var n=t.position;return"absolute"===n||"relative"===n||"fixed"===n||(e.style.position="relative"),e}},{key:"_handleSelectables",value:function(e,t,n){for(var i=0;i<e.length;i++){var r=e[i],o=this.selectables.indexOf(r);o<0&&!t?this._addSelectable(r,n):o>-1&&t&&this._removeSelectable(r,o,n)}}},{key:"_addSelectable",value:function(e,t){e.classList.add(this.selectableClass),e.addEventListener("click",this._onClick),this.selectables.push(e),t&&this._selected.indexOf(e)<0&&(e.classList.add(this.selectedClass),this._selected.push(e))}},{key:"_removeSelectable",value:function(e,t,n){e.classList.remove(this.hoverClass),e.classList.remove(this.selectableClass),e.removeEventListener("click",this._onClick),this.selectables.splice(t,1),n&&this._selected.indexOf(e)>-1&&(e.classList.remove(this.selectedClass),this._selected.splice(this._selected.indexOf(e),1))}},{key:"handleClick",value:function(e){if(!this.mouseInteraction&&!this._isRightClick(e)){var t=e.target;this._isMultiSelectKeyPressed(e)?this._prevSelected=this._selected.slice():this._prevSelected=[],this.checkIfInsideSelection(!0),this.selectables.indexOf(t)>-1&&this.toggle(t),this._end(e)}}},{key:"_createSelector",value:function(){var e=document.createElement("div");return e.style.position="absolute",this.customStyles||(e.style.background="rgba(0, 0, 255, 0.1)",e.style.border="1px solid rgba(0, 0, 255, 0.45)",e.style.display="none",e.style.pointerEvents="none"),(this.area===document?document.body:this.area).appendChild(e),e}},{key:"start",value:function(){this._handleSelectables(this._initialSelectables),this.area.addEventListener("mousedown",this._startUp),this.area.addEventListener("touchstart",this._startUp,{passive:!1})}},{key:"startUp",value:function(e){if("touchstart"===e.type&&e.preventDefault(),!this._isRightClick(e)&&!this._isScrollbarClick(e,this.area)){if(this.onDragStartBegin(e),this._breaked)return!1;if(this.mouseInteraction=!0,this.selector.style.display="block",this._isMultiSelectKeyPressed(e)?this._prevSelected=this._selected.slice():this._prevSelected=[],this._getStartingPositions(e),this.checkIfInsideSelection(!0),this.selector.style.display="none",this.moveStartCallback(e),this._breaked)return!1;this.area.removeEventListener("mousedown",this._startUp),this.area.removeEventListener("touchstart",this._startUp,{passive:!1}),this.area.addEventListener("mousemove",this._handleMove),this.area.addEventListener("touchmove",this._handleMove,{passive:!1}),document.addEventListener("mouseup",this._end),document.addEventListener("touchend",this._end)}}},{key:"_isMultiSelectKeyPressed",value:function(e){if(this._multiSelectKeyPressed=!1,this.multiSelectMode)this._multiSelectKeyPressed=!0;else for(var t=0;t<this.multiSelectKeys.length;t++){e[this.multiSelectKeys[t]]&&(this._multiSelectKeyPressed=!0)}return this._multiSelectKeyPressed}},{key:"_getStartingPositions",value:function(e){this._initialCursorPos=this._newCursorPos=this._getCursorPos(e,this.area),this._initialScroll=this.getScroll(this.area);var t={};t.x=this._initialCursorPos.x+this._initialScroll.x,t.y=this._initialCursorPos.y+this._initialScroll.y,t.w=0,t.h=0,this._updatePos(this.selector,t)}},{key:"handleMove",value:function(e){var t=this._getPosition(e);if(this.moveCallback(e),this._breaked)return!1;this.selector.style.display="block",this._updatePos(this.selector,t),this.checkIfInsideSelection(null),this._autoScroll(e)}},{key:"_getPosition",value:function(e){var t=this._getCursorPos(e,this.area),n=this.getScroll(this.area);this._newCursorPos=t;var i=n.x-this._initialScroll.x,r=n.y-this._initialScroll.y,o={};return t.x>this._initialCursorPos.x-i?(o.x=this._initialCursorPos.x+this._initialScroll.x,o.w=t.x-this._initialCursorPos.x+i):(o.x=t.x+n.x,o.w=this._initialCursorPos.x-t.x-i),t.y>this._initialCursorPos.y-r?(o.y=this._initialCursorPos.y+this._initialScroll.y,o.h=t.y-this._initialCursorPos.y+r):(o.y=t.y+n.y,o.h=this._initialCursorPos.y-t.y-r),o}},{key:"checkIfInsideSelection",value:function(e){for(var t=!1,n=0,i=this.selectables.length;n<i;n++){var r=this.selectables[n],o=this.getScroll(this.area),a={y:this.selector.getBoundingClientRect().top/this.zoom+o.y,x:this.selector.getBoundingClientRect().left/this.zoom+o.x,h:this.selector.offsetHeight,w:this.selector.offsetWidth};this._isElementTouching(r,a,o)?(this._handleSelection(r,e),t=!0):this._handleUnselection(r,e)}return t}},{key:"_handleSelection",value:function(e,t){if(e.classList.contains(this.hoverClass)&&!t)return!1;var n=this._selected.indexOf(e);n<0?this.select(e):n>-1&&this._multiSelectKeyPressed&&this.unselect(e),e.classList.add(this.hoverClass)}},{key:"_handleUnselection",value:function(e,t){if(!e.classList.contains(this.hoverClass)&&!t)return!1;var n=this._selected.indexOf(e),i=this._prevSelected.indexOf(e);n>-1&&i<0?this.unselect(e):n<0&&i>-1&&this.select(e),e.classList.remove(this.hoverClass)}},{key:"select",value:function(e){return!(this._selected.indexOf(e)>-1)&&(this._selected.push(e),e.classList.add(this.selectedClass),this.selectCallback(e),!this._breaked&&e)}},{key:"unselect",value:function(e){return!(this._selected.indexOf(e)<0)&&(this._selected.splice(this._selected.indexOf(e),1),e.classList.remove(this.selectedClass),this.unselectCallback(e),!this._breaked&&e)}},{key:"toggle",value:function(e){return this._selected.indexOf(e)>-1?this.unselect(e):this.select(e),e}},{key:"_isElementTouching",value:function(e,t,n){var i=e.getBoundingClientRect(),r=i.top/this.zoom+n.y,o=i.left/this.zoom+n.x,a=i.height/this.zoom,s=i.width/this.zoom;return t.x<o+s&&t.x+t.w>o&&t.y<r+a&&t.h+t.y>r}},{key:"_autoScroll",value:function(e){var t=this.isCursorNearEdge(e,this.area),n=document&&document.documentElement&&document.documentElement.scrollTop&&document.documentElement,i=this.area===document?n||document.body:this.area;"top"===t&&i.scrollTop>0?i.scrollTop-=1*this.autoScrollSpeed:"bottom"===t?i.scrollTop+=1*this.autoScrollSpeed:"left"===t&&i.scrollLeft>0?i.scrollLeft-=1*this.autoScrollSpeed:"right"===t&&(i.scrollLeft+=1*this.autoScrollSpeed)}},{key:"isCursorNearEdge",value:function(e,t){var n=this._getCursorPos(e,t),i=this.getAreaRect(t),r=Math.max(i.width/10,30),o=Math.max(i.height/10,30);return n.y<o?"top":i.height-n.y<o?"bottom":i.width-n.x<r?"right":n.x<r&&"left"}},{key:"reset",value:function(e,t){var n=this;if(this._previousCursorPos=this._getCursorPos(e,this.area),document.removeEventListener("mouseup",this._end),document.removeEventListener("touchend",this._end),this.area.removeEventListener("mousemove",this._handleMove),this.area.removeEventListener("touchmove",this._handleMove,{passive:!1}),this.area.addEventListener("mousedown",this._startUp),this.area.addEventListener("touchstart",this._startUp,{passive:!1}),t&&this.callback(this.getSelection(),e),this._breaked)return!1;this.selector.style.width="0",this.selector.style.height="0",this.selector.style.display="none",setTimeout(function(){return n.mouseInteraction=!1},100)}},{key:"break",value:function(){var e=this;this._breaked=!0,setTimeout(function(){return e._breaked=!1},100)}},{key:"stop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;this.reset(!1,n),this.area.removeEventListener("mousedown",this._startUp),this.area.removeEventListener("touchstart",this._startUp,{passive:!1}),document.removeEventListener("mouseup",this._end),document.removeEventListener("touchend",this._end),this._handleSelectables(o(this.selectables),e,t)}},{key:"getSelection",value:function(){return o(this._selected)}},{key:"getCursorPos",value:function(e,t,n){if(!e)return{x:0,y:0};var i=t||!1!==t&&this.area,r=this._getCursorPos(e,i),o=n?{x:0,y:0}:this.getScroll(i);return{x:r.x+o.x,y:r.y+o.y}}},{key:"addSelection",value:function(e,t,n){for(var i=this._toArray(e),r=0,o=i.length;r<o;r++){var a=i[r];this.select(a)}return n||this.addSelectables(i),t&&this.callback(this._selected,!1),this._selected}},{key:"removeSelection",value:function(e,t,n){for(var i=this._toArray(e),r=0,o=i.length;r<o;r++){var a=i[r];this.unselect(a)}return n&&this.removeSelectables(i),t&&this.callback(this._selected,!1),this._selected}},{key:"toggleSelection",value:function(e,t,n){for(var i=this._toArray(e),r=0,o=i.length;r<o;r++){var a=i[r];this._selected.indexOf(a)<0?this.addSelection(a,t,n):this.removeSelection(a,t,n)}return this._selected}},{key:"setSelection",value:function(e,t,n){return this.clearSelection(),this.addSelection(e,t,n),this._selected}},{key:"clearSelection",value:function(e){for(var t=this._selected.slice(),n=0,i=t.length;n<i;n++){var r=t[n];this.unselect(r)}return e&&this.callback(this._selected,!1),this._selected}},{key:"addSelectables",value:function(e,t){var n=this._toArray(e);return this._handleSelectables(n,!1,t),e}},{key:"getSelectables",value:function(){return this.selectables}},{key:"setSelectables",value:function(e,t,n){return this.removeSelectables(this.getSelectables(),t),this.addSelectables(e,n)}},{key:"removeSelectables",value:function(e,t){var n=this._toArray(e);return this._handleSelectables(n,!0,t),e}},{key:"_isRightClick",value:function(e){var t=!1;return"which"in e?t=3===e.which:"button"in e&&(t=2===e.button),t}},{key:"_isScrollbarClick",value:function(e,t){var n=this._getCursorPos(e,t),i=this.getAreaRect(t),r=t.computedBorder||0;return i.width+r<=n.x||i.height+r<=n.y}},{key:"_toArray",value:function(e){if(!e)return[];if(!e.length&&this._isElement(e))return[e];for(var t=[],n=e.length-1;n>=0;n--)t[n]=e[n];return t}},{key:"_isElement",value:function(e){try{return e instanceof HTMLElement||e instanceof SVGElement}catch(t){return"object"===r(e)&&1===e.nodeType&&"object"===r(e.style)&&"object"===r(e.ownerDocument)}}},{key:"_getCursorPos",value:function(e,t){if(!e)return{x:0,y:0};e.touches&&"touchend"!==e.type&&(this._lastTouch=e);var n=(e=e.touches?this._lastTouch.touches[0]:e).pageX||e.clientX,i=e.pageY||e.clientY,r=this.getAreaRect(t||document),o=this.getScroll();return{x:(n-r.left-o.x)/this.zoom,y:(i-r.top-o.y)/this.zoom}}},{key:"getInitialCursorPosition",value:function(){return this._initialCursorPos}},{key:"getCurrentCursorPosition",value:function(){return this._newCursorPos}},{key:"getPreviousCursorPosition",value:function(){return this._previousCursorPos}},{key:"getCursorPositionDifference",value:function(e){var t=this.getCurrentCursorPosition(),n=e?this.getPreviousCursorPosition():this.getInitialCursorPosition();return{x:t.x-n.x,y:t.y-n.y}}},{key:"getScroll",value:function(e){var t={top:document.body.scrollTop>0?document.body.scrollTop:document.documentElement.scrollTop,left:document.body.scrollLeft>0?document.body.scrollLeft:document.documentElement.scrollLeft};return{y:e&&e.scrollTop>=0?e.scrollTop:t.top,x:e&&e.scrollLeft>=0?e.scrollLeft:t.left}}},{key:"getAreaRect",value:function(e){if(e===document){var t={y:e.documentElement.clientHeight>0?e.documentElement.clientHeight:window.innerHeight,x:e.documentElement.clientWidth>0?e.documentElement.clientWidth:window.innerWidth};return{top:0,left:0,bottom:0,right:0,width:t.x,height:t.y}}var n=e.getBoundingClientRect();return{top:n.top,left:n.left,bottom:n.bottom,right:n.right,width:e.clientWidth||n.width,height:e.clientHeight||n.height}}},{key:"_updatePos",value:function(e,t){return e.style.left=t.x+"px",e.style.top=t.y+"px",e.style.width=t.w+"px",e.style.height=t.h+"px",e}}])&&a(t.prototype,n),i&&a(t,i),e}();null!==e?e.exports=l:n(226)?void 0===(i=function(){return l}.call(t,n,t,e))||(e.exports=i):window.DragSelect=l}).call(this,n(118)(e))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(172),r=n(139),o=function(){function t(e){this.elements=e}return t.prototype.addElementCount=function(t){t=i.ElementHelper.typeToDraggableType(t);var n=this,r=e('.sign__draggable__content[data-type="'+t+'"]');r.find(".sign__draggable__count").length>0?r.find(".sign__draggable__count").html((parseInt(r.find(".sign__draggable__count").html())+1).toString()):(r.append('<div class="sign__draggable__count">1</div>'),r.find(".sign__draggable__count").off("click").on("click",function(){n.goNext(t)}))},t.prototype.removeElementCount=function(t){t=i.ElementHelper.typeToDraggableType(t);var n=e('.sign__draggable__content[data-type="'+t+'"] .sign__draggable__count');if(0!=n.length){var r=parseInt(n.html());r>1?(r--,n.html(r.toString())):n.remove()}},t.prototype.goNext=function(t){t=i.ElementHelper.draggableTypeToType(t);var n=[];this.elements.all().forEach(function(e){e.type==t&&1!=e.removed&&n.push(e.id)});var o=n.indexOf(this.nextElement)+1;o==n.length&&(o=0),this.nextElement=n[o];var a="#"+e('[data-id="'+this.nextElement+'"]').first().attr("id");r.ScrollHelper.scrollToElement(a)},t}();t.ElementCounter=o}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(e){void 0===e&&(e={}),this.cloneMode="clone",Object.assign(this,e),this.initActions()}return t.prototype.initActions=function(){var t=this;document.getElementById("confirmCloneBlocks").addEventListener("click",function(){t.hideModal(),t.sendEventEditCloneGroupChanged()}),document.getElementById("cancelCloneBlocks").addEventListener("click",function(){t.hideModal()}),e('[name="cloneBlock"]').on("change",function(){var t=e('[name="cloneBlock"]:checked').val();"custom"==t?e(".sign__clone__custom").show():e(".sign__clone__custom").hide(),e("#cloneGroupModal .helpText").hide(),e("#"+t+"Help").show()}),e("#addRange").on("click",function(){t.addRange(1,1,e(".preview__page.active").attr("data-file"))}),e("#cloneGroupModal .helpText").hide(),this.listenEventEditClone()},t.prototype.listenEventEditClone=function(){var e=this;window.addEventListener("editCloneGroup",function(t){e.elements=JSON.parse(JSON.stringify(t.detail.elements)),e.showModal(),e.setData()})},t.prototype.sendEventEditCloneGroupChanged=function(){if("copy"==this.cloneMode){var e=new CustomEvent("editCloneGroupChanged",{detail:{elements:this.getData(),filesPages:this.filesPages}});window.dispatchEvent(e)}else{var t=new CustomEvent("editCloneGroupChanged",{detail:{elements:this.getData()}});window.dispatchEvent(t)}},t.prototype.getData=function(){var t=e('[name="cloneBlock"]:checked').val().toString();this.elements.forEach(function(e){e.cloneMode=t});var n=e("#cloneAllDocuments").is(":checked"),i={};if("custom"==this.elements[0].cloneMode)e(".sign__clone__ranges .rangefrom").each(function(t,n){for(var r=parseInt(e(n).val().toString()),o=parseInt(e(".sign__clone__ranges .rangeto").eq(t).val().toString())+1,a=e(".sign__clone__ranges .rangefile").eq(t).val().toString(),s=r;s<o;s++)i[a]||(i[a]=[]),i[a].push(s)});else if("all"==this.elements[0].cloneMode)if(1==n)this.files.files.forEach(function(e){i[e.id]=Array.from({length:parseInt(e.pages)},function(e,t){return t+1})});else{var r=this.files.getFile(e(".preview__page.active").attr("data-file"));i[r.id]=Array.from({length:parseInt(r.pages)},function(e,t){return t+1})}else if("allButLast"==this.elements[0].cloneMode)if(1==n)this.files.files.forEach(function(e){i[e.id]=Array.from({length:parseInt(e.pages)-1},function(e,t){return t+1})});else{r=this.files.getFile(e(".preview__page.active").attr("data-file"));i[r.id]=Array.from({length:parseInt(r.pages)-1},function(e,t){return t+1})}else if("last"==this.elements[0].cloneMode)if(1==n)this.files.files.forEach(function(e){i[e.id]=[parseInt(e.pages)]});else{r=this.files.getFile(e(".preview__page.active").attr("data-file"));i[r.id]=[parseInt(r.pages)]}else if("current"==this.elements[0].cloneMode){var o=parseInt(e(".preview__page.active").attr("data-page"));if(1==n)this.files.files.forEach(function(e){i[e.id]=[o]});else{r=this.files.getFile(e(".preview__page.active").attr("data-file"));i[r.id]=[o]}}return"copy"==this.cloneMode?(this.filesPages=i,this.elements):(this.elements.forEach(function(e){e.filesPages=i}),this.elements)},t.prototype.setData=function(){var t="current";this.elements.forEach(function(e){"cloneAll"==t||"cloneAll"==e.cloneMode?t="cloneAll":"cloneAllButLast"==t||"cloneAllButLast"==e.cloneMode?t="cloneAllButLast":"cloneLast"==t||"cloneLast"==e.cloneMode?t="cloneLast":"custom"!=t&&"custom"!=e.cloneMode||(t="custom")}),e('[name="cloneBlock"]').prop("checked",!1),e('[name="cloneBlock"][value="'+t+'"]').prop("checked","checked"),e("#"+t+"Help").show(),this.setRanges(),"custom"==t?e(".sign__clone__custom").show():e(".sign__clone__custom").hide()},t.prototype.setRanges=function(){this.cleanRanges();var e=this,t={};this.elements.forEach(function(e){var n=function(n){e.filesPages[n].forEach(function(e){t[n]||(t[n]=[]),0==t[n].includes(e)&&t[n].push(e)}),t[n].sort(function(e,t){return e-t})};for(var i in e.filesPages)n(i)});var n=function(n){var i=[],r=null,o=null;t[n].forEach(function(e){if(null==r)return r=e,void(o=e);o!=e-1?(i.push({pageIni:r,pageEnd:o}),r=e,o=e):o=e}),i.push({pageIni:r,pageEnd:o}),i.forEach(function(t){e.addRange(t.pageIni,t.pageEnd,n)})};for(var i in t)n(i)},t.prototype.cleanRanges=function(){e(".sign__clone__ranges").html("")},t.prototype.addRange=function(t,n,i){var r=e(".sign__clone__ranges__item.template").clone();r.removeClass("template"),r.find(".range__remove").on("click",function(){1!=e(".sign__clone__ranges .sign__clone__ranges__item").length&&r.remove()});var o=r.find(".rangefrom"),a=r.find(".rangeto"),s=r.find(".rangefile");o.val(t),a.val(n),o.on("change",function(){parseInt(o.val().toString())<1&&o.val(1),parseInt(o.val().toString())>parseInt(o.attr("max"))&&o.val(o.attr("max")),parseInt(o.val().toString())>parseInt(a.val().toString())&&a.val(o.val())}),a.on("change",function(){parseInt(a.val().toString())<1&&a.val(1),parseInt(a.val().toString())>parseInt(a.attr("max"))&&a.val(a.attr("max")),parseInt(o.val().toString())>parseInt(a.val().toString())&&a.val(o.val())}),this.files.files.forEach(function(e){var t=i==e.id?'selected="selected"':"";s.append('<option data-pages="'+e.pages+'" value="'+e.id+'" '+t+">"+e.name+"</option>")});var l=s.find("option:selected").attr("data-pages");o.attr("max",l),a.attr("max",l),s.on("change",function(){var e=s.find("option:selected").attr("data-pages");o.attr("max",e),a.attr("max",e),parseInt(o.val().toString())>parseInt(e.toString())&&o.val(e),parseInt(a.val().toString())>parseInt(e.toString())&&a.val(e)}),e(".sign__clone__ranges").append(r),this.tryShowMultiple()},t.prototype.tryShowMultiple=function(){this.files.count()>1?e(".multiple").show():e(".multiple").hide()},t.prototype.showModal=function(){e("#cloneGroupModal").modal("show"),e(".modal-body").scrollTop(0),this.tryShowMultiple()},t.prototype.hideModal=function(){e("#cloneGroupModal").modal("hide")},t}();t.CloneGroupModal=n}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(){this.signers=[],this.init()}return t.prototype.init=function(){this.listenEventReceiversChanged()},t.prototype.setSignersFromReceivers=function(e){this.signers=[];var t=this;e.forEach(function(e,n){"signer"==e.type&&t.signers.push(e)})},t.prototype.selectSigners=function(e){void 0===e&&(e=null);var t=this;return new Promise(function(n,i){1!=t.signers.length?(t.initSigners(e),t.showModal(),document.getElementById("confirmSelectSigner").addEventListener("click",function(){t.hideModal(),t.save(),n(t.signer)}),document.getElementById("cancelSelectSigner").addEventListener("click",function(){t.hideModal(),i("cancelled")})):n(t.signers[0])})},t.prototype.initSigners=function(t){void 0===t&&(t=null),e("#selectSignerModal .sign__signer__list").html(""),this.signers.forEach(function(n,i){if("signer"==n.type){var r=null!=t&&t.id==n.id?"checked":"",o='<li class="sign__signer__item">\n                        <div class="radio">\n                            <input type="radio" name="signer" id="signer-'+n.id+'"\n                                   value="'+n.id+'"\n                                   class="radio" '+r+'>\n                            <label for="signer-'+n.id+'">\n                                <div class="sign__signer__bullet '+n.colorClass+'">\n                                </div>\n                                <div class="sign__signer__name">\n                                    '+n.name.trunc(25)+"\n                                </div>\n                            </label>\n                        </div>\n                    </li>";e("#selectSignerModal .sign__signer__list").append(o)}}),null==t&&e('[name="signer"]').first().attr("checked","checked")},t.prototype.save=function(){var t=this,n=e('input[name="signer"]:checked').val();this.signers.forEach(function(e,i){e.id==n&&(t.signer=e)})},t.prototype.showModal=function(){e("#selectSignerModal").modal("show"),e(".modal-body").scrollTop(0)},t.prototype.hideModal=function(){e("#selectSignerModal").modal("hide")},t.prototype.listenEventReceiversChanged=function(){var e=this;window.addEventListener("receiversChanged",function(t){e.setSignersFromReceivers(t.detail.receivers)})},t}();t.SelectSigner=n}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(){}return t.adjustBlockPosition=function(t,n,i){var r=e('.editor__page[data-file="'+t.file+'"][data-page="'+t.page+'"]')[0].getBoundingClientRect(),o={x:0,y:0};return r.width<t.x+n&&(o.x=Math.floor(r.width-(t.x+n))),r.height<t.y+i&&(o.y=Math.floor(r.height-(t.y+i))),t.y<0&&(o.y=Math.abs(t.y)),t.x<0&&(o.x=Math.abs(t.x)),o},t}();t.PositionInsert=n}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(){}return t.showModal=function(){e("#confirmUnlinkModal").modal("show")},t.hideModal=function(){e("#confirmUnlinkModal").modal("hide"),e("#confirmUnlinkBtn").off("click"),e("#cancelUnlinkBtn").off("click")},t.confirm=function(){var n=this;return new Promise(function(i,r){e("#confirmUnlinkBtn").on("click",function(){n.hideModal(),i()}),e("#cancelUnlinkBtn").on("click",function(){n.hideModal(),r()}),t.showModal()})},t}();t.UnlinkManager=n}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(){this.init()}return t.prototype.init=function(){this.sortableElement="sortableElementSelectList",this.elements=["signature","initials","name","date","text","input"]},t.prototype.selectElements=function(){var t=this;return this.enableSortable(),new Promise(function(n,i){t.showModal(),e("#confirmSelectElements").on("click",function(){var r=[];e.each(e('input[name="elementSelect"]:checked'),function(t,n){r.push(e(n).val())}),t.hideModal(),0!=r.length?n(r):i()}),e("#cancelSelectElements").on("click",function(){t.hideModal(),i("cancelled")})})},t.prototype.showModal=function(){e("#selectElementsModal").modal("show"),e(".modal-body").scrollTop(0)},t.prototype.hideModal=function(){e("#selectElementsModal").modal("hide"),e("#confirmSelectElements").off("click"),e("#cancelSelectElements").off("click")},t.prototype.enableSortable=function(){if(null==this.sortableList){var e=document.getElementById(this.sortableElement);this.sortableList=new window.Sortable(e,{draggable:".sign__signer__item",animation:200})}},t}();t.SelectElements=n}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(16),r=n(182),o=n(290),a=function(){function t(){var t=this;this.numSignaturesNeeded=1,this.signatureMultiplier=1,this.uploadedFilesCount=1,this.DEFAULT_REQUEST_TYPE="digital",this.updateSubscSignatures_volumePackages=window.ilovepdfConfig.updateSubscSignatures_volumePackages,this.canApplySelectDefaultRequestType=!0,this.alreadySetupScreen=!1,this.deferDefaultRequestTypeSelection=!1,this.selectDefaultRequestType=function(){t.alreadySetupScreen?t.canApplySelectDefaultRequestType&&(i.UserModel.isLoggedIn()&&t.info.ownedSignatures>0?"digital"===t.DEFAULT_REQUEST_TYPE?t.digitalActionBtn.trigger("click"):"electronic"===t.DEFAULT_REQUEST_TYPE&&t.electronicActionBtn.trigger("click"):t.electronicActionBtn.trigger("click")):t.deferDefaultRequestTypeSelection=!0},this.enableDigitalMode=function(){e("#certifiedCheckbox").prop("checked",!0),t.enableCustomSignatures()},this.disableDigitalMode=function(){e("#certifiedCheckbox").prop("checked",!1),t.disableCustomSignatures()},this._onElectronicActionBtnClick=function(e){t.disableDigitalMode()},this._onDigitalActionBtnClick=function(e){if(0==i.UserModel.isUser())return t.electronicActionBtn.trigger("click"),t.canApplySelectDefaultRequestType=!1,void r.SignatureDialogs.becomePremium().show().addEventListener("closed",function(e){t.canApplySelectDefaultRequestType=!0,i.UserModel.isLoggedIn()&&(t.updateUserDataUI(),t.digitalActionBtn.trigger("click"))});t.doesUserHaveEnoughSignatures()?t.enableDigitalMode():(t.electronicActionBtn.trigger("click"),t.showSuitableDialogToObtainSignatures().addEventListener("closed",function(e){t.updateUserDataUI(),t.doesUserHaveEnoughSignatures()&&t.digitalActionBtn.trigger("click")}))},this._onInitialSetupScreenFinished=function(){t.alreadySetupScreen=!0,t.deferDefaultRequestTypeSelection&&(t.selectDefaultRequestType(),t.updateUserDataUI())}}return t.prototype.init=function(){if(!this.updateSubscSignatures_volumePackages)throw"Missing property 'updateSubscSignatures_volumePackages' in window object";this.updateUserDataUI(),0==i.UserModel.isUser()&&this.listenEventUserAuth(),e(".cert__payment__option").hide(),e(".getMore").css("display","flex"),e(".cert__payment__list").css("display","flex"),e(".cert__payment__done").hide(),this.digitalActionBtn.on("click",this._onDigitalActionBtnClick),this.electronicActionBtn.on("click",this._onElectronicActionBtnClick),this.setCurrentSignatures(),e(".cert__payment__item.getMore").css("display","flex"),this.listenEventReceiversChanged(),this.listenEventSetSilentCertsForSigners(),this.listenEventModeChanged(),this.listenEventReceiversConfirmed(),this.selectDefaultRequestType()},t.prototype.updateUserDataUI=function(){if(i.UserModel.isLoggedIn()){var t=i.UserModel.get(),n=document.querySelector(".icon--premium");if(!n)throw"Icon Premium element not found";var r=this.ownedSignatures,o=function(){var e,t=["certs"];n.classList.forEach(function(e){0===e.indexOf("certs--")&&t.push(e)}),(e=n.classList).remove.apply(e,t)};r>0?(o(),n.classList.add("certs"),n.classList.add("certs--"+r),n.innerHTML=r.toString()):(o(),t.signConfig&&(t.signConfig.certifiedCheckbox=0,e("#certifiedCheckbox").removeAttr("checked")))}},t.prototype.showSuitableDialogToObtainSignatures=function(){var e=Math.max.apply(Math,this.updateSubscSignatures_volumePackages);return r.SignatureDialogs.getSuitableDialogToObtainSignatures(this.numSignaturesNeeded,e)},Object.defineProperty(t.prototype,"numSignaturesNeededToPurchase",{get:function(){return Math.max(0,this.numSignaturesNeeded-this.ownedSignatures)},enumerable:!0,configurable:!0}),t.prototype.doesUserHaveEnoughSignatures=function(){return this.ownedSignatures>=this.numSignaturesNeeded},t.prototype.setUploadedFilesCount=function(e){this.uploadedFilesCount=e,this.updateNeededSignatures()},t.prototype.setSignatureMultiplier=function(e){this.signatureMultiplier=e,this.updateNeededSignatures()},t.prototype.updateNeededSignatures=function(){this.numSignaturesNeeded=this.uploadedFilesCount*this.signatureMultiplier,this.updateUserDataUI(),!this.doesUserHaveEnoughSignatures()&&this.requestIsDigital&&this.digitalActionBtn.trigger("click")},t.prototype.listenEventModeChanged=function(){var e=this;window.addEventListener("modeChanged",function(t){"single"==t.detail.mode&&e._onInitialSetupScreenFinished()})},t.prototype.listenEventReceiversConfirmed=function(){var e=this;window.addEventListener("receiversConfirmed",function(t){e._onInitialSetupScreenFinished()})},t.prototype.listenEventTriggerEnableCerts=function(){window.addEventListener("triggerEnableCerts",function(e){})},t.prototype.listenEventSetSilentCertsForSigners=function(){var e=this;window.addEventListener("setSilentCertsForSigners",function(t){e.setSignatureMultiplier(t.detail.signers)})},t.prototype.listenEventReceiversChanged=function(){var e=this;window.addEventListener("receiversChanged",function(t){1==t.detail.batchMode?e.setSignatureMultiplier(t.detail.batchCount):e.setSignatureMultiplier(1)})},t.prototype.listenEventUserAuth=function(){var e=this;window.addEventListener("userAuth",function(t){e.selectDefaultRequestType(),e.updateUserDataUI()})},t.prototype.setCurrentSignatures=function(){if(0!=this.ownedSignatures){e(".certs--quant").html(this.ownedSignatures.toString()),e(".certs--have").show(),e(".certs--empty").hide();var t=this.digitalActionBtn.find(".icon--premium");t.html(this.ownedSignatures.toString()),t.removeAttr("class"),t.addClass("icon--premium").addClass("certs").addClass("certs--"+this.ownedSignatures.toString()),this.enableCustomSignatures()}},t.prototype.enableCustomSignatures=function(){e("#certificateSelectCheckbox").removeAttr("disabled"),e("#certificateSelectOption").parent().find(".receiver__setting__content").removeClass("disabled")},t.prototype.disableCustomSignatures=function(){e("#certificateSelectCheckbox").attr("disabled","disabled"),e("#certificateSelectOption").parent().find(".receiver__setting__content").addClass("disabled")},Object.defineProperty(t.prototype,"digitalActionBtn",{get:function(){return e('[data-action="certified"]')},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"electronicActionBtn",{get:function(){return e('[data-action="digital"]')},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"requestType",{get:function(){return e('[data-action="certified"]').hasClass("option--active")?"digital":"electronic"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"requestIsDigital",{get:function(){return"digital"===this.requestType},enumerable:!0,configurable:!0}),t.prototype.doesUserCanDoDigitalRequests=function(){return this.doesUserHaveEnoughSignatures()},t.prototype.doesUserCanDoElectronicRequests=function(){return i.UserModel.isLoggedIn()&&i.UserModel.isPremium()||o.default.allowed()},Object.defineProperty(t.prototype,"ownedSignatures",{get:function(){var e=i.UserModel.get();return e&&e.signatures_left?e.signatures_left:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"info",{get:function(){return{ownedSignatures:this.ownedSignatures,numSignaturesNeeded:this.numSignaturesNeeded,numSignaturesToPurchase:this.numSignaturesNeededToPurchase,uploadedFilesCount:this.uploadedFilesCount,signatureMultiplier:this.signatureMultiplier,freeElectronicRequestsLeft:o.default.remainingUses(),can:{doElectronicRequests:this.doesUserCanDoElectronicRequests(),doDigitalRequests:this.doesUserCanDoDigitalRequests()}}},enumerable:!0,configurable:!0}),t}();t.default=a}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(16),r=n(182),o=function(){function t(){this.init()}return t.prototype.init=function(){var t=this,n=this;e("#saveTemplates").on("click",function(){1!=e("#saveTemplates").hasClass("disabled")&&(i.UserModel.isPremium()?t.showModal():r.SignatureDialogs.becomePremium(null).show().addEventListener("closed",function(){i.UserModel.isPremium()&&t.showModal()}))}),e("#confirmTemplate").on("click",function(){0!=n.validateName()&&(n.hideModal(),e("#saveTemplates").attr("disabled","true"),t.save())}),e("#cancelTemplate").on("click",function(e){e.preventDefault(),n.hideModal()}),e("#templateName").on("change keydown",function(){n.validateName()})},t.prototype.validateName=function(){return e("#templateName").val().toString().length>3?(e("#confirmTemplate").removeAttr("disabled"),!0):(e("#confirmTemplate").attr("disabled","true"),!1)},t.prototype.sendEventSaveTemplate=function(e){var t=new CustomEvent("saveTemplate",{detail:{name:e}});window.dispatchEvent(t)},t.prototype.save=function(){var t=e("#templateName").val();this.sendEventSaveTemplate(t)},t.setTemplate=function(t){e("#templateName").val(t),e("#templateNameText").html(t),e(".newTemplate").hide(),e(".currentTemplate").show(),e("#confirmTemplate").removeAttr("disabled")},t.prototype.setNameFromFile=function(t){var n=t.substring(0,10)+"_template";e("#templateName").val(n),e("#templateNameText").html(n),e("#confirmTemplate").removeAttr("disabled")},t.prototype.showModal=function(){e("#templateModal").modal("show")},t.prototype.hideModal=function(){e("#templateModal").modal("hide")},t}();t.TemplateModal=o}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(){}return t.showModal=function(){e("#confirmRemoveFileModal").modal("show")},t.hideModal=function(){e("#confirmRemoveFileModal").modal("hide"),e("#confirmRemoveFileBtn").off("click"),e("#cancelRemoveFileBtn").off("click")},t.confirm=function(n,i){return new Promise(function(n,r){e("#confirmRemoveFileName").html(i),t.showModal(),e("#confirmRemoveFileBtn").on("click",function(){t.hideModal(),n()}),e("#cancelRemoveFileBtn").on("click",function(){t.hideModal(),r()})})},t}();t.ConfirmFileRemove=n}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(36),r=n(9),o=n(16),a=function(){function t(){this.init()}return t.prototype.init=function(){1==o.UserModel.isUser()?e("#saveTemplates").show():(e("#saveTemplates").hide(),this.listenEventUserAuth())},t.prototype.enableTemplates=function(){1==o.UserModel.isUser()&&(i.Tooltip.setContent(e("#saveTemplates"),r.Lang.t("saveAsTemplate")),e("#saveTemplates").removeClass("disabled"))},t.prototype.disableTemplates=function(t){i.Tooltip.setContent(e("#saveTemplates"),t),e("#saveTemplates").addClass("disabled")},t.prototype.listenEventUserAuth=function(){window.addEventListener("userAuth",function(t){e("#saveTemplates").show()})},t}();t.TemplateManager=a}).call(this,n(1))},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(112),a=n(45),s=n(164),l=n(113),c=n(17),u=n(12),d=n(290),p=n(16),f=n(182),h=n(278),g=function(e){function t(t){var n=e.call(this,t)||this;return n.api.process=n.api.signature,n.stopGoDownload=!1,n.stopGoProblem=!1,n.enableSentryInfo=!1,n}return r(t,e),t.prototype.initApi=function(){this.api=new s.SignApi({tool:this.tool,taskId:this.taskId,workerServer:this.workerServer,downloadUrl:this.downloadUrl,token:this.token,encrypted:this.encrypted,encryptKey:this.encryptKey})},t.prototype.goDownload=function(e){var t=this,n=this;if("single"!=this.options.mode)1==this.enableSentryInfo&&(c.configureScope(function(t){t.setExtra("response",e),t.setExtra("params",n.options)}),c.captureMessage("Signature after POST, request",u.Severity.Info)),0==p.UserModel.isPremium()&&d.default.set(),1==Array.isArray(e)?this.goSignDownload(e[0].token_requester):this.goSignDownload(e.token_requester);else{var i=e.signers[0],r=this.signer.getData();Object.assign(i,r),i.status="signed",delete i.files,1==this.enableSentryInfo&&(c.configureScope(function(t){t.setExtra("response",e),t.setExtra("signer",i),t.setExtra("params",n.options)}),c.captureMessage("Signature after POST, before PUT",u.Severity.Info));var o=a.FormDataHelper.jsonToFormData(i);this.waitForAllSignatureUploadsEnds().then(function(){t.executeSignature(i,o)},function(){t.fatalError("UnknownError"),c.configureScope(function(e){e.setExtra("signer",i),e.setExtra("params",n.options)}),c.captureMessage("Signature cannot get the server_images repsonse",u.Severity.Info)})}},t.prototype.executeSignature=function(e,t){var n=this,i=this;l.Network.waitForConnection(12e4).then(function(){i.api.sign(e.token_signer,t).then(function(e){i.goSignDownload(n.taskId)},function(r){if(0!=r.status)if(-1!=r.status){if(400==r.status){if(r.error.param&&r.error.param.signature&&r.error.param.signature==s.DOCUMENT_COMPLETED)return void i.goSignDownload(n.taskId);if(r.error.param&&r.error.param.certified&&r.error.param.certified[0]==s.INSUFICIENT_CERTS)return void i.goProblem("InsuficientCerts")}c.configureScope(function(t){t.setExtra("signer",e),t.setExtra("error",r)}),c.captureMessage("Signature selfsigned error",u.Severity.Error),i.goProblem(r)}else i.retryProcess(e,t);else i.retryProcess(e,t)})},function(){i.goProblem("connection")})},t.prototype.actionProcessError=function(t,n){var i=this;if(void 0===n&&(n=null),t.error&&t.error.param&&t.error.param.certified&&t.error.param.certified[0]==s.INSUFICIENT_CERTS)this.goProblem("InsuficientCerts");else if(t.error&&t.error.param&&t.error.param.signatures&&t.error.param.signatures[0]==s.INSUFICIENT_CERTS){p.UserModel.refresh("sign");var r=("batch"==this.options.mode?this.files.files.length*this.options.signers.length:this.files.files.length)-p.UserModel.get().signatures_left;f.SignatureDialogs.buySignaturesPackages(r,!1).show().addEventListener("closed",function(){i.process()})}else{if(t.error&&t.error.param&&t.error.param.sms)return p.UserModel.refresh("sign"),void f.SignatureDialogs.buySmsPackage(h.SmsPurchaseManager.info.needed,!1).show().addEventListener("closed",function(){i.process()});e.prototype.actionProcessError.call(this,t,n)}},t.prototype.goProblem=function(t){var n=this;c.configureScope(function(e){e.setExtra("error",t)}),c.captureMessage("Signature selfsigned  create error",u.Severity.Error),window.setTimeout(function(){e.prototype.goProblem.call(n,t)},1e3)},t.prototype.retryProcess=function(e,t){var n=this;window.setTimeout(function(){n.executeSignature(e,t)},1e3)},t.prototype.goSignDownload=function(e){if(!0!==this.stopGoDownload){var t="";t="single"==this.options.mode?"en-US"==window.lang?"/signature-pdf/"+e+"/download":"/"+window.lang+"/signature-pdf/"+e+"/download":"en-US"==window.lang?"/signature-pdf/"+e+"/requested":"/"+window.lang+"/signature-pdf/"+e+"/requested",window.location.href=t+"?s="+this.getWorkerNumber()}},t.prototype.validateSelfsigner=function(e){},t.prototype.execute=function(){var t=this,n=p.UserModel.get();return 1==this.enableSentryInfo&&(c.configureScope(function(e){e.setExtra("optionParams",t.options),e.setExtra("user",n)}),c.addBreadcrumb({category:"signature",level:u.Severity.Info,message:"Signature screeen size: "+window.screen.width+"x"+window.screen.height}),c.addBreadcrumb({category:"signature",level:u.Severity.Info,message:"Signature window size: "+document.body.offsetWidth+"x"+document.body.offsetHeight}),c.captureMessage("Signature before execute",u.Severity.Info)),e.prototype.execute.call(this)},t.prototype.checkTaskProcess=function(){var e=this;this.processCheckCount--;var t,n=null,i=p.UserModel.get();i&&(t=i.id,n=i.loginkey),this.api.getSignature(this.taskId,t,n).then(function(t){e.actionProcess(t)},function(t){t.error&&t.error.code&&"400"==t.error.code?e.process():e.processCheckCount<0?e.actionProcessError(t,{info:"in check task error",params:e.options}):(window.clearTimeout(e.checkTimeout),e.checkTimeout=window.setTimeout(function(){e.checkTaskProcess()},1e3))})},t.prototype.waitForAllSignatureUploadsEnds=function(){var e=this,t=0;return new Promise(function(n,i){var r=window.setInterval(function(){1==e.signer.validateData()&&(window.clearInterval(r),n()),(t+=500)>2e4&&i()},500)})},t}(o.Process);t.SignProcess=g}]);